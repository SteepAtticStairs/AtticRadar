(function(){function h(o,s,a){function u(n,t){if(!s[n]){if(!o[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};o[n][0].call(i.exports,function(t){var e=o[n][1][t];return u(e||t)},i,i.exports,h,o,s,a)}return s[n].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)u(a[t]);return u}return h})()({1:[function(t,e,n){const r={"Tsunami Warning":{priority:"1",colorName:"Tomato",rgb:"rgb(253, 99, 71)",hex:"#FD6347"},"Tornado Warning":{priority:"2",colorName:"Red",rgb:"rgb(233, 51, 35)",hex:"#FF0000",originalColor:"rgb(255, 0, 0)"},"Extreme Wind Warning":{priority:"3",colorName:"Darkorange",rgb:"rgb(255, 140, 0)",hex:"#FF8C00"},"Severe Thunderstorm Warning":{priority:"4",colorName:"Orange",rgb:"rgb(244, 185, 65)",hex:"#FFA500",originalColor:"rgb(255, 165, 0)"},"Flash Flood Warning":{priority:"5",colorName:"Darkred",rgb:"rgb(147, 241, 75)",hex:"#8B0000",originalColor:"rgb(139, 0, 0)"},"Flash Flood Statement":{priority:"6",colorName:"Darkred",rgb:"rgb(139, 0, 0)",hex:"#8B0000"},"Severe Weather Statement":{priority:"7",colorName:"Aqua",rgb:"rgb(0, 255, 255)",hex:"#00FFFF"},"Shelter In Place Warning":{priority:"8",colorName:"Salmon",rgb:"rgb(250, 128, 114)",hex:"#FA8072"},"Evacuation Immediate":{priority:"9",colorName:"Chartreuse",rgb:"rgb(127, 255, 0)",hex:"#7FFF00"},"Civil Danger Warning":{priority:"10",colorName:"Lightpink",rgb:"rgb(255, 182, 193)",hex:"#FFB6C1"},"Nuclear Power Plant Warning":{priority:"11",colorName:"Indigo",rgb:"rgb(75, 0, 130)",hex:"#4B0082"},"Radiological Hazard Warning":{priority:"12",colorName:"Indigo",rgb:"rgb(75, 0, 130)",hex:"#4B0082"},"Hazardous Materials Warning":{priority:"13",colorName:"Indigo",rgb:"rgb(75, 0, 130)",hex:"#4B0082"},"Fire Warning":{priority:"14",colorName:"Sienna",rgb:"rgb(160, 82, 45)",hex:"#A0522D"},"Civil Emergency Message":{priority:"15",colorName:"Lightpink",rgb:"rgb(255, 182, 193)",hex:"#FFB6C1"},"Law Enforcement Warning":{priority:"16",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},"Storm Surge Warning":{priority:"17",colorName:"Darkpurple",rgb:"rgb(76, 87, 246)",hex:"#B524F7",originalColor:"rgb(181, 36, 247)"},"Hurricane Force Wind Warning":{priority:"18",colorName:"Westernred",rgb:"rgb(205, 92, 92)",hex:"#CD5C5C"},"Hurricane Warning":{priority:"19",colorName:"Crimson",rgb:"rgb(199, 63, 155)",hex:"#DC143C",originalColor:"rgb(220, 20, 60)"},"Typhoon Warning":{priority:"20",colorName:"Crimson",rgb:"rgb(220, 20, 60)",hex:"#DC143C"},"Special Marine Warning":{priority:"21",colorName:"Orange",rgb:"rgb(197, 155, 249)",hex:"#FFA500",originalColor:"rgb(255, 165, 0)"},"Blizzard Warning":{priority:"22",colorName:"Orangered",rgb:"rgb(235, 78, 65)",hex:"#FF4500",originalColor:"rgb(255, 69, 0)"},"Snow Squall Warning":{priority:"23",colorName:"Mediumvioletred",rgb:"rgb(3, 0, 163)",hex:"#C71585",originalColor:"rgb(199, 21, 133)"},"Ice Storm Warning":{priority:"24",colorName:"Darkmagenta",rgb:"rgb(173, 74, 248)",hex:"#8B008B",originalColor:"rgb(139, 0, 139)"},"Winter Storm Warning":{priority:"25",colorName:"Hotpink",rgb:"rgb(240, 141, 233)",hex:"#FF69B4",originalColor:"rgb(255, 105, 180)"},"High Wind Warning":{priority:"26",colorName:"Goldenrod",rgb:"rgb(218, 165, 32)",hex:"#DAA520"},"Tropical Storm Warning":{priority:"27",colorName:"Firebrick",rgb:"rgb(251, 231, 88)",hex:"#B22222",originalColor:"rgb(178, 34, 34)"},"Storm Warning":{priority:"28",colorName:"Darkviolet",rgb:"rgb(148, 0, 211)",hex:"#9400D3"},"Tsunami Advisory":{priority:"29",colorName:"Chocolate",rgb:"rgb(210, 105, 30)",hex:"#D2691E"},"Tsunami Watch":{priority:"30",colorName:"Fushsia",rgb:"rgb(255, 0, 255)",hex:"#FF00FF"},"Avalanche Warning":{priority:"31",colorName:"Dodgerblue",rgb:"rgb(30, 144, 255)",hex:"#1E90FF"},"Earthquake Warning":{priority:"32",colorName:"Saddlebrown",rgb:"rgb(139, 69, 19)",hex:"#8B4513"},"Volcano Warning":{priority:"33",colorName:"darkslategray",rgb:"rgb(47, 79, 79)",hex:"#2F4F4F"},"Ashfall Warning":{priority:"34",colorName:"Darkgray",rgb:"rgb(169, 169, 169)",hex:"#A9A9A9"},"Coastal Flood Warning":{priority:"35",colorName:"Forestgreen",rgb:"rgb(34, 139, 34)",hex:"#228B22"},"Lakeshore Flood Warning":{priority:"36",colorName:"Forestgreen",rgb:"rgb(34, 139, 34)",hex:"#228B22"},"Flood Warning":{priority:"37",colorName:"Lime",rgb:"rgb(147, 241, 75)",hex:"#00FF00",originalColor:"rgb(0, 255, 0)"},"High Surf Warning":{priority:"38",colorName:"Forestgreen",rgb:"rgb(34, 139, 34)",hex:"#228B22"},"Dust Storm Warning":{priority:"39",colorName:"Bisque",rgb:"rgb(255, 228, 196)",hex:"#FFE4C4"},"Blowing Dust Warning":{priority:"40",colorName:"Bisque",rgb:"rgb(255, 228, 196)",hex:"#FFE4C4"},"Lake Effect Snow Warning":{priority:"41",colorName:"Darkcyan",rgb:"rgb(0, 139, 139)",hex:"#008B8B"},"Excessive Heat Warning":{priority:"42",colorName:"Mediumvioletred",rgb:"rgb(199, 21, 133)",hex:"#C71585"},"Tornado Watch":{priority:"43",colorName:"Yellow",rgb:"rgb(245, 254, 83)",hex:"#FFFF00",originalColor:"rgb(255, 255, 0)"},"Severe Thunderstorm Watch":{priority:"44",colorName:"Palevioletred",rgb:"rgb(238, 135, 134)",hex:"#DB7093",originalColor:"rgb(219, 112, 147)"},"Flash Flood Watch":{priority:"45",colorName:"Seagreen",rgb:"rgb(58, 111, 29)",hex:"#2E8B57",originalColor:"rgb(46, 139, 87)"},"Gale Warning":{priority:"46",colorName:"Plum",rgb:"rgb(50, 111, 255)",hex:"#DDA0DD",originalColor:"rgb(221, 160, 221)"},"Flood Statement":{priority:"47",colorName:"Lime",rgb:"rgb(0, 255, 0)",hex:"#00FF00"},"Wind Chill Warning":{priority:"48",colorName:"Lightsteelblue",rgb:"rgb(176, 196, 222)",hex:"#B0C4DE"},"Extreme Cold Warning":{priority:"49",colorName:"Blue",rgb:"rgb(0, 0, 255)",hex:"#0000FF"},"Hard Freeze Warning":{priority:"50",colorName:"Darkviolet",rgb:"rgb(148, 0, 211)",hex:"#9400D3"},"Freeze Warning":{priority:"51",colorName:"Darkslateblue",rgb:"rgb(72, 61, 139)",hex:"#483D8B"},"Red Flag Warning":{priority:"52",colorName:"Deeppink",rgb:"rgb(255, 20, 147)",hex:"#FF1493"},"Storm Surge Watch":{priority:"53",colorName:"Lightpurple",rgb:"rgb(165, 202, 182)",hex:"#DB7FF7",originalColor:"rgb(219, 127, 247)"},"Hurricane Watch":{priority:"54",colorName:"Magenta",rgb:"rgb(234, 51, 247)",hex:"#FF00FF",originalColor:"rgb(255, 0, 255)"},"Hurricane Force Wind Watch":{priority:"55",colorName:"Darkorchid",rgb:"rgb(153, 50, 204)",hex:"#9932CC"},"Typhoon Watch":{priority:"56",colorName:"Magenta",rgb:"rgb(255, 0, 255)",hex:"#FF00FF"},"Tropical Storm Watch":{priority:"57",colorName:"Lightcoral",rgb:"rgb(239, 127, 131)",hex:"#F08080",originalColor:"rgb(240, 128, 128)"},"Storm Watch":{priority:"58",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Hurricane Local Statement":{priority:"59",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Typhoon Local Statement":{priority:"60",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Tropical Storm Local Statement":{priority:"61",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Tropical Depression Local Statement":{priority:"62",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Avalanche Advisory":{priority:"63",colorName:"Peru",rgb:"rgb(205, 133, 63)",hex:"#CD853F"},"Winter Weather Advisory":{priority:"64",colorName:"Mediumslateblue",rgb:"rgb(167, 129, 249)",hex:"#7B68EE",originalColor:"rgb(123, 104, 238)"},"Wind Chill Advisory":{priority:"65",colorName:"Paleturquoise",rgb:"rgb(175, 238, 238)",hex:"#AFEEEE"},"Heat Advisory":{priority:"66",colorName:"Coral",rgb:"rgb(255, 127, 80)",hex:"#FF7F50"},"Urban and Small Stream Flood Advisory":{priority:"67",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Small Stream Flood Advisory":{priority:"68",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Arroyo and Small Stream Flood Advisory":{priority:"69",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Flood Advisory":{priority:"70",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Hydrologic Advisory":{priority:"71",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Lakeshore Flood Advisory":{priority:"72",colorName:"Lawngreen",rgb:"rgb(124, 252, 0)",hex:"#7CFC00"},"Coastal Flood Advisory":{priority:"73",colorName:"Lawngreen",rgb:"rgb(124, 252, 0)",hex:"#7CFC00"},"High Surf Advisory":{priority:"74",colorName:"Mediumorchid",rgb:"rgb(186, 85, 211)",hex:"#BA55D3"},"Heavy Freezing Spray Warning":{priority:"75",colorName:"Deepskyblue",rgb:"rgb(0, 191, 255)",hex:"#00BFFF"},"Dense Fog Advisory":{priority:"76",colorName:"Slategray",rgb:"rgb(112, 128, 144)",hex:"#708090"},"Dense Smoke Advisory":{priority:"77",colorName:"Khaki",rgb:"rgb(240, 230, 140)",hex:"#F0E68C"},"Small Craft Advisory For Hazardous Seas":{priority:"78",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Small Craft Advisory for Rough Bar":{priority:"79",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Small Craft Advisory for Winds":{priority:"80",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Small Craft Advisory":{priority:"81",colorName:"Thistle",rgb:"rgb(109, 186, 150)",hex:"#D8BFD8",originalColor:"rgb(216, 191, 216)"},"Brisk Wind Advisory":{priority:"82",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Hazardous Seas Warning":{priority:"83",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Dust Advisory":{priority:"84",colorName:"Darkkhaki",rgb:"rgb(189, 183, 107)",hex:"#BDB76B"},"Blowing Dust Advisory":{priority:"85",colorName:"Darkkhaki",rgb:"rgb(189, 183, 107)",hex:"#BDB76B"},"Lake Wind Advisory":{priority:"86",colorName:"Tan",rgb:"rgb(210, 180, 140)",hex:"#D2B48C"},"Wind Advisory":{priority:"87",colorName:"Tan",rgb:"rgb(210, 180, 140)",hex:"#D2B48C"},"Frost Advisory":{priority:"88",colorName:"Cornflowerblue",rgb:"rgb(100, 149, 237)",hex:"#6495ED"},"Ashfall Advisory":{priority:"89",colorName:"Dimgray",rgb:"rgb(105, 105, 105)",hex:"#696969"},"Freezing Fog Advisory":{priority:"90",colorName:"Teal",rgb:"rgb(0, 128, 128)",hex:"#008080"},"Freezing Spray Advisory":{priority:"91",colorName:"Deepskyblue",rgb:"rgb(0, 191, 255)",hex:"#00BFFF"},"Low Water Advisory":{priority:"92",colorName:"Brown",rgb:"rgb(165, 42, 42)",hex:"#A52A2A"},"Local Area Emergency":{priority:"93",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},"Avalanche Watch":{priority:"94",colorName:"Sandybrown",rgb:"rgb(244, 164, 96)",hex:"#F4A460"},"Blizzard Watch":{priority:"95",colorName:"Greenyellow",rgb:"rgb(234, 254, 89)",hex:"#ADFF2F",originalColor:"rgb(173, 255, 47)"},"Rip Current Statement":{priority:"96",colorName:"Turquoise",rgb:"rgb(64, 224, 208)",hex:"#40E0D0"},"Beach Hazards Statement":{priority:"97",colorName:"Turquoise",rgb:"rgb(64, 224, 208)",hex:"#40E0D0"},"Gale Watch":{priority:"98",colorName:"Pink",rgb:"rgb(102, 147, 255)",hex:"#FFC0CB",originalColor:"rgb(255, 192, 203)"},"Winter Storm Watch":{priority:"99",colorName:"Steelblue",rgb:"rgb(57, 129, 247)",hex:"#4682B4",originalColor:"rgb(70, 130, 180)"},"Hazardous Seas Watch":{priority:"100",colorName:"Darkslateblue",rgb:"rgb(72, 61, 139)",hex:"#483D8B"},"Heavy Freezing Spray Watch":{priority:"101",colorName:"Rosybrown",rgb:"rgb(188, 143, 143)",hex:"#BC8F8F"},"Coastal Flood Watch":{priority:"102",colorName:"Mediumaquamarine",rgb:"rgb(102, 205, 170)",hex:"#66CDAA"},"Lakeshore Flood Watch":{priority:"103",colorName:"Mediumaquamarine",rgb:"rgb(102, 205, 170)",hex:"#66CDAA"},"Flood Watch":{priority:"104",colorName:"Seagreen",rgb:"rgb(58, 111, 29)",hex:"#2E8B57",originalColor:"rgb(46, 139, 87)"},"High Wind Watch":{priority:"105",colorName:"Darkgoldenrod",rgb:"rgb(184, 134, 11)",hex:"#B8860B"},"Excessive Heat Watch":{priority:"106",colorName:"Maroon",rgb:"rgb(128, 0, 0)",hex:"#800000"},"Extreme Cold Watch":{priority:"107",colorName:"Blue",rgb:"rgb(0, 0, 255)",hex:"#0000FF"},"Wind Chill Watch":{priority:"108",colorName:"Cadetblue",rgb:"rgb(95, 158, 160)",hex:"#5F9EA0"},"Lake Effect Snow Watch":{priority:"109",colorName:"Lightskyblue",rgb:"rgb(135, 206, 250)",hex:"#87CEFA"},"Hard Freeze Watch":{priority:"110",colorName:"Royalblue",rgb:"rgb(65, 105, 225)",hex:"#4169E1"},"Freeze Watch":{priority:"111",colorName:"Cyan",rgb:"rgb(0, 255, 255)",hex:"#00FFFF"},"Fire Weather Watch":{priority:"112",colorName:"Navajowhite",rgb:"rgb(255, 222, 173)",hex:"#FFDEAD"},"Extreme Fire Danger":{priority:"113",colorName:"Darksalmon",rgb:"rgb(233, 150, 122)",hex:"#E9967A"},"911 Telephone Outage":{priority:"114",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},"Coastal Flood Statement":{priority:"115",colorName:"Olivedrab",rgb:"rgb(107, 142, 35)",hex:"#6B8E23"},"Lakeshore Flood Statement":{priority:"116",colorName:"Olivedrab",rgb:"rgb(107, 142, 35)",hex:"#6B8E23"},"Special Weather Statement":{priority:"117",colorName:"Moccasin",rgb:"rgb(151, 204, 230)",hex:"#FFE4B5",originalColor:"rgb(255, 228, 181)"},"Marine Weather Statement":{priority:"118",colorName:"Peachpuff",rgb:"rgb(255, 239, 213)",hex:"#FFDAB9"},"Air Quality Alert":{priority:"119",colorName:"Gray",rgb:"rgb(128, 128, 128)",hex:"#808080"},"Air Stagnation Advisory":{priority:"120",colorName:"Gray",rgb:"rgb(128, 128, 128)",hex:"#808080"},"Hazardous Weather Outlook":{priority:"121",colorName:"Palegoldenrod",rgb:"rgb(238, 232, 170)",hex:"#EEE8AA"},"Hydrologic Outlook":{priority:"122",colorName:"Lightgreen",rgb:"rgb(144, 238, 144)",hex:"#90EE90"},"Short Term Forecast":{priority:"123",colorName:"Palegreen",rgb:"rgb(152, 251, 152)",hex:"#98FB98"},"Administrative Message":{priority:"124",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},Test:{priority:"125",colorName:"Azure",rgb:"rgb(240, 255, 255)",hex:"#F0FFFF"},"Child Abduction Emergency":{priority:"126",colorName:"Transperant",rgb:"rgb(255, 255, 255)",hex:"#FFFFFF"},"Blue Alert":{priority:"127",colorName:"Transperant",rgb:"rgb(255, 255, 255)",hex:"#FFFFFF"}};e.exports=r},{}],2:[function(t,e,n){var r=t("./noaa_colors");const i={"Tornado Watch":"rgb(117, 20, 12)","Severe Thunderstorm Watch":"rgb(128, 128, 38)"};function o(t){if(Object.keys(r).includes(t)){var e=r[t].rgb;if(i.hasOwnProperty(t)){e=i[t]}return{color:e,priority:r[t].priority}}else{return{color:"rgb(128, 128, 128)",priority:"999"}}}e.exports=o},{"./noaa_colors":1}],3:[function(t,e,n){const r=t("./fetch_data");r()},{"./fetch_data":4}],4:[function(t,e,n){const r=t("./plot_alerts");const s=t("../core/utils");const a=t("pako");const i=`https://api.weather.gov/alerts/active`;const o="https://atticradar.steepatticstairs.net/";const u=[`${o}app/alerts/zones/forecast_zones.js.gz`,`${o}app/alerts/zones/county_zones.js.gz`,`${o}app/alerts/zones/fire_zones.js.gz`];var l=new Headers;l.append("pragma","no-cache");l.append("cache-control","no-cache");var h=0;function c(r,i=0){const o=Date.now();if(window.attic_data.loaded_zones){r();return}fetch(u[i]).then(t=>t.arrayBuffer()).then(t=>{h+=t.byteLength;const e=a.inflate(t,{to:"string"});var n=document.createElement("script");n.type="text/javascript";n.innerHTML=e;document.head.appendChild(n);if(i<u.length-1){c(r,i+1)}else{console.log(`Loaded alert zone dictionaries with a size length of ${s.formatBytes(h)} in ${Date.now()-o} ms`);r()}})}function f(e){const n=Date.now();fetch(i,{cache:"no-store"}).then(t=>t.json()).then(t=>{console.log(`Fetched alert data from the NWS in ${Date.now()-n} ms`);e(t)})}function g(){f(t=>{c(()=>{if(window.attic_data.loaded_zones==undefined||window.attic_data.loaded_zones==false){window.attic_data.loaded_zones=true}r(t)})})}e.exports=g},{"../core/utils":9,"./plot_alerts":5,pako:11}],5:[function(t,e,n){const r=t("../core/map/map");const g=t("./colors/polygon_colors");const d=t("@turf/turf");function p(t){if(r.getSource("alerts_source")){r.getSource("alerts_source").setData(t)}else{r.addSource("alerts_source",{type:"geojson",data:t});r.addLayer({id:"alerts_layer_fill",type:"fill",source:"alerts_source",paint:{"fill-color":["get","color"],"fill-opacity":["case",["==",["get","is_zone"],true],.5,0]}});r.addLayer({id:"alerts_layer",type:"line",source:"alerts_source",paint:{"line-color":["case",["==",["get","type"],"outline"],["get","color"],["==",["get","type"],"border"],"black","rgba(0, 0, 0, 0)"],"line-width":["case",["==",["get","is_zone"],true],.5,["==",["get","type"],"outline"],2,["==",["get","type"],"border"],5,0]}});r.on("mouseover","alerts_layer_fill",function(t){r.getCanvas().style.cursor="pointer"});r.on("mouseout","alerts_layer_fill",function(t){r.getCanvas().style.cursor=""})}}function v(t){t.features=t.features.sort((t,e)=>e.properties.priority-t.properties.priority);return t}function i(t){const e=Date.now();for(var n in t.features){var r=g(t.features[n].properties.event);t.features[n].properties.color=r.color;t.features[n].properties.priority=parseInt(r.priority)}const i=[];for(var o=0;o<t.features.length;o++){const l=t.features[o];if(l.geometry==null){const h=l.properties.affectedZones;for(var s=0;s<h.length;s++){var a;if(h[s].includes("forecast")){const c=h[s].replace("https://api.weather.gov/zones/forecast/","");a=forecast_zones[c]}else if(h[s].includes("county")){const c=h[s].replace("https://api.weather.gov/zones/county/","");a=county_zones[c]}else if(h[s].includes("fire")){const c=h[s].replace("https://api.weather.gov/zones/fire/","");a=fire_zones[c]}if(a!=undefined){const f=d.feature(a.geometry,t.features[o].properties);f.id=t.features[o].id;f.properties.is_zone=true;i.push(f)}}}}t.features=t.features.concat(i);var u=[];t.features.forEach(t=>{if(t.properties.is_zone==true){var e=JSON.parse(JSON.stringify(t));e.properties.type="outline";e.properties.priority+=1e3;u.push(e)}else{var n=JSON.parse(JSON.stringify(t));n.properties.type="border";var e=JSON.parse(JSON.stringify(t));e.properties.type="outline";u.push(n,e)}});t.features=u;t=v(t);p(t);console.log(`Loaded alerts onto the map in ${Date.now()-e} ms`)}e.exports=i},{"../core/map/map":7,"./colors/polygon_colors":2,"@turf/turf":10}],6:[function(e,t,n){window.attic_data={};function r(){e("../map/update_style");e("../../alerts/entry")}function i(){const t=e("../map/map");if(t.loaded()){r()}else{t.on("load",function(){r()})}}if(document.readyState=="complete"||document.readyState=="interactive"){i()}else if(document.readyState=="loading"){window.onload=function(){i()}}},{"../../alerts/entry":3,"../map/map":7,"../map/update_style":8}],7:[function(t,e,n){const r="https://tiles.openfreemap.org/styles/dark";window.attic_data.style_url=r;const i=new maplibregl.Map({container:"map",style:r,zoom:3,center:[-97.3302,38.5667],maxZoom:20,preserveDrawingBuffer:true,maxPitch:0,fadeDuration:0,attributionControl:true,projection:"mercator"});$(".maplibregl-ctrl-attrib-button").click();i.touchZoomRotate.disableRotation();i.dragRotate.disable();i.keyboard.disableRotation();$("#map").on("contextmenu",function(t){if($(t.target).hasClass("maplibregl-canvas")){t.preventDefault()}});setTimeout(()=>i.resize(),0);window.onresize=()=>{i.resize()};window.onclick=()=>{i.resize()};e.exports=i},{}],8:[function(t,e,n){const a=t("./map");function r(){const s=Date.now();fetch(window.attic_data.style_url,{cache:"no-store"}).then(t=>t.json()).then(t=>{try{const r=[];for(var e=0;e<t.layers.length;e++){if(t.layers[e]?.layout?.["text-transform"]=="uppercase"){r.push(t.layers[e])}}const i=["place_country_major","place_country_minor","place_country_other"];for(var n=0;n<r.length;n++){const o=r[n].id;if(!i.includes(o)){a.setLayoutProperty(o,"text-transform","none")}else{a.setPaintProperty(o,"text-color","rgb(200, 200, 200)")}}console.log(`Updated map style in ${Date.now()-s} ms`)}catch(t){console.error(t)}})}r();e.exports=r},{"./map":7}],9:[function(tt,et,t){(function(Q){(function(){const t="https://corsproxy.io/?url=";const e={red:"rgb(255, 0, 0)",darkRed:"rgb(170, 0, 0)",green:"rgb(17, 167, 17)",darkGreen:"rgb(13, 118, 13)",blue:"rgb(92, 157, 255)",darkBlue:"rgb(27, 78, 155)"};function n(t){const e=Q.alloc(t.byteLength);const n=new Uint8Array(t);for(let t=0;t<e.length;++t){e[t]=n[t]}return e}function r(t,e){var n=(new Date).toLocaleTimeString(undefined,{timeZoneName:"short"}).split(" ")[2];if(e=="UTC"){n="UTC"}return t.toLocaleDateString(undefined,{timeZone:e})+" "+t.toLocaleTimeString(undefined,{timeZone:e})+` ${n}`}function i(t,e){return t.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:true,timeZone:e})}const o=Intl.DateTimeFormat().resolvedOptions().timeZone;function s(t,e){return new Date(t.getTime()+e*6e4)}function a(t){function e(t,e){e=e||2;return("00"+t).slice(-e)}var n=t%1e3;t=(t-n)/1e3;var r=t%60;t=(t-r)/60;var i=t%60;var o=(t-i)/60;return{hours:e(o),minutes:e(i),seconds:e(r),milliseconds:e(n,3)}}function u(t,e){var n=Math.pow(10,e||0);return Math.round(t*n)/n}function l(t,e,n,r){var i=1852;var o={latitude:t,longitude:e};var s=n*i;var a=r;const u=geolib.computeDestinationPoint(o,s,a);return u}function h(t){console.log(t);function e(){$("#messageDialog").dialog({modal:true,open:function(){$(this).parent().css({position:"absolute",top:10,maxHeight:"70vh",overflow:"scroll"})}})}if(!($("#messageDialog").dialog("instance")==undefined)){if(!$("#messageDialog").closest(".ui-dialog").is(":visible")){e()}}else if($("#messageDialog").dialog("instance")==undefined){e()}$("#messageBox").append(`<div>${t}</div>`);$("#messageBox").animate({scrollTop:$("#messageBox")[0].scrollHeight},0)}function c(t){if(typeof t=="string"){parser=new DOMParser;t=parser.parseFromString(t,"text/xml")}var e={};if(t.nodeType==1){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n++){var r=t.attributes.item(n);e["@attributes"][r.nodeName]=r.nodeValue}}}else if(t.nodeType==3||t.nodeType==4){e=t.nodeValue}if(t.hasChildNodes()){for(var i=0;i<t.childNodes.length;i++){var o=t.childNodes.item(i);var s=o.nodeName;if(typeof e[s]=="undefined"){e[s]=c(o)}else{if(typeof e[s].length=="undefined"){var a=e[s];e[s]=[];e[s].push(a)}if(typeof e[s]==="object"){e[s].push(c(o))}}}}return e}function f(t,e=2){if(t===0)return"0 Bytes";var n=1024;var r=e<0?0:e;var i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];var o=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,o)).toFixed(r))+" "+i[o]}function g(t,e,n){console.log(`%c${t}`,`color: ${e}; ${n}`)}const d=t=>({tagName:t.tagName,textContent:t.textContent,attributes:Array.from(t.attributes,({name:t,value:e})=>[t,e]),children:Array.from(t.children,d)});const p=t=>JSON.stringify(d(t),null,"  ");var v={tilt1:{ref:"N0B",N0B:"N0B",vel:"N0G",N0G:"N0G","lowres-ref":"p94r0","lowres-vel":"p99v0",rho:"N0C",zdr:"N0X","sw ":"p30sw",hhc:"HHC",hyc:"N0H",srv:"N0S",vil:"134il",kdp:"N0K",sti:"NST",mcy:"NMD","sr-ref":"TZ0","lr-ref":"TZL",tdwrVel:"TV0"},tilt2:{ref:"N1B",N0B:"N1B",vel:"NAG",N0G:"NAG","lowres-ref":"p94r1","lowres-vel":"p99v1",rho:"N1C",zdr:"N1X","sw ":"p30sw",hhc:"HHC",hyc:"N1H",srv:"N1S",vil:"134il",kdp:"N1K",sti:"NST","sr-ref":"TZ1",tdwrVel:"TV1"},tilt3:{ref:"N2B",N0B:"N2B",vel:"N1G",N0G:"N1G","lowres-ref":"p94r2","lowres-vel":"p99v2",rho:"N2C",zdr:"N2X","sw ":"p30sw",hhc:"HHC",hyc:"N2H",srv:"N2S",vil:"134il",kdp:"N2K",sti:"NST","sr-ref":"TZ2",tdwrVel:"TV2"},tilt4:{ref:"N3B",N0B:"N3B",vel:"N3G",N0G:"N3G","lowres-ref":"p94r3","lowres-vel":"p99v3",rho:"N3C",zdr:"N3X","sw ":"p30sw",hhc:"HHC",hyc:"N3H",srv:"N3S",vil:"134il",kdp:"N3K",sti:"NST"}};var y={ref:[1,2,3,4],vel:[1,2,3],srvel:[1,2,3],"lowres-ref":[1,2,3,4],"lowres-vel":[1,2,3,4],rho:[1,2,3,4],zdr:[1,2,3,4],"sw ":[1],hhc:[1],hyc:[1,2,3,4],srv:[1,2,3,4],vil:[1],kdp:[1,2,3,4],sti:[1],"sr-ref":[1,2,3],"lr-ref":[1],tdwrVel:[1,2,3]};var m=["l2-ref","l2-vel","l2-rho","l2-phi","l2-zdr","l2-sw "];var _={12:"Precip Mode",31:"Clean Air Mode",32:"Clean Air Mode",35:"Clean Air Mode",112:"Precip Mode",121:"Precip Mode",212:"Precip Mode",215:"Precip Mode",80:"Precip Mode",90:"Precip Mode"};var x={REF:"dBZ",VEL:"m/s","SW ":"mph",ZDR:"dB",RHO:"%",PHI:"deg",N0B:"dBZ",N0G:"m/s",N0C:"%",N0X:"dB",NSW:"mph",NXQ:"dBZ",N0U:"m/s",DVL:"kg/m²",N0S:"knots",TZX:"dBZ",TZL:"dBZ",TVX:"m/s"};function b(t){var e,n;e=URL.createObjectURL(t);n=new XMLHttpRequest;n.open("GET",e,false);n.send();URL.revokeObjectURL(e);return n.responseText}function w(t,e){var n=t;n.setDate(n.getDate()+e);return n}function k(t,e,n,r,i){return(t-e)*(i-r)/(n-e)+r}function E(t,e){if(t=="set"){var n=e;if(e>1e3){n=k(e,0,150,0,$("#progBar").attr("aria-valuemax"));console.log(n)}$("#progBar").css("width",n+"%").attr("aria-valuenow",e)}else if(t=="add"){var r=$("#progBar").attr("aria-valuenow");$("#progBar").css("width",e+parseInt(r)+"%").attr("aria-valuenow",e+parseInt(r))}else if(t=="getRemaining"){var r=$("#progBar").attr("aria-valuenow");var i=$("#progBar").attr("aria-valuemax");return i-r}else if(t=="hide"){$("#progBarParent").hide()}else if(t=="show"){$("#progBarParent").show()}else if(t=="label"){console.log(e);document.getElementById("progBar").innerHTML=e}}function N(t){var e=4;var n=[];for(var r=1;r<e+1;r++){n.push(t/e*r)}return n}const S="container";function I(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function M(t,e,n){let r=setInterval(()=>{if(I(t)){e();clearInterval(r);r=null}},10);const i=n||5e3;setTimeout(()=>{if(r){clearInterval(r)}},i)}function C(){var t=tt("./map/map");var i=document.getElementById("fileStation").innerHTML;$.getJSON("./resources/radarStations.json",function(t){var e;var n;if(t.hasOwnProperty(i)){e=t[i][1];n=t[i][2]}else{var r=$("#dataDiv").data("fileName").slice(0,4);e=t[r][1];n=t[r][2]}})}function L(){$("#dataDiv").data("noMoreClicks",true);$("#modeMenuItem").css({"-webkit-filter":"brightness(75%)",filter:"brightness(75%)"})}function T(t,e){return(t*1.151).toFixed(e)}function P(t,e){var n=Math.floor(t/22.5+.5);var r=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];if(e==true){r=["↑ N","↑↗ NNE","↗ NE","→↗ ENE","→ E","↘→ ESE","↘ SE","↓↘ SSE","↓ S","↙↓ SSW","↙ SW","←↙ WSW","← W","↖← WNW","↖ NW","↖↑ NNW"]}return r[n%16]}function R(e){if(typeof e==="string")e=parseInt(e);if(e<=0||e>360||typeof e==="undefined")return"☈";const n={north:"↑ N",north_east:"↗ NE",east:"→ E",south_east:"↘ SE",south:"↓ S",south_west:"↙ SW",west:"← W",north_west:"↖ NW"};const r=Object.keys(n);const i=360/r.length;e=e+i/2;for(let t=0;t<r.length;t++){if(e>=t*i&&e<(t+1)*i)return n[r[t]]}return n["north"]}function D(t){var e=new Date;return t+=`&?nocache=${e.getTime()}`}function O(t){return $(`.${t}`).css("backgroundColor")}var A=[["Tropical Depression",O("TD"),"TD"],["Tropical Storm",O("TS"),"TS"],["Category 1",O("C1"),"C1"],["Category 2",O("C2"),"C2"],["Category 3",O("C3"),"C3"],["Category 4",O("C4"),"C4"],["Category 5",O("C5"),"C5"],["Other",O("OTHER"),"OTHER"],["Unknown",O("UNKNOWN"),"UNKNOWN"],["Non-Tropical",O("NONTROPICAL"),"NONTROPICAL"]];function F(t){if(t<=38){return A[0]}else if(t>=39&&t<=73){return A[1]}else if(t>=74&&t<=95){return A[2]}else if(t>=96&&t<=110){return A[3]}else if(t>=111&&t<=129){return A[4]}else if(t>=130&&t<=156){return A[5]}else if(t>=157){return A[6]}else if(t=="Other"){return A[7]}else if(t=="Unknown"){return A[8]}else if(t=="Non-Tropical"){return A[9]}}var B={DB:"Disturbance",TD:"Tropical Depression",TS:"Tropical Storm",TY:"Typhoon",ST:"Super Typhoon",TC:"Tropical Cyclone",HU:"Hurricane",SD:"Subtropical Depression",SS:"Subtropical Storm",EX:"Extratropical System",PT:"Post Tropical",IN:"Inland",DS:"Dissipating",LO:"Low Pressure Area",WV:"Tropical Wave",ET:"Extrapolated",MD:"Monsoon Depression",XX:"Unknown",EXPT:"Extratropical / Post-Tropical"};function z(t){var e=t.title;var n=t.headerColor;var r=t.body;var i=t.css;var o=`<div class="modal fade" tabindex="-1" aria-labelledby="jsModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header alert ${n}">
                        <h5 class="modal-title">${e}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" style="${i}">${r}</div>
                </div>
            </div>
        </div>`;var s=$(o);s.modal("show")}function V(t,e){function n(t){$("#progressBar").animate({width:`${t}%`},0)}if(t=="set"){n(e)}else if(t=="add"){var r=$("#progressBar").css("width").slice(0,-2);var i=$(window).width();var o=r/i*100;n(e+parseFloat(o))}else if(t=="getRemaining"){var o=$("#progressBar").css("width");var s=100;return s-parseInt(o)}else if(t=="hide"){$("#progressBar").hide()}else if(t=="show"){$("#progressBar").show()}else if(t=="label"){}}function q(t){return t*1.8+32}function G(t){return t/33.864}function U(t){var e;var n;if(t=="01"){e=2e3;n=e*8}else if(t=="E2"){e=500;n=e*32}else if(t=="08"){e=150;n=e*1.2}else if(t=="l3"){e=125;n=e*2}else if(t=="NXQ"||t=="N0S"){e=500;n=e*2}else if(t=="DVL"||t=="NSW"){e=500;n=e*2}else if(t=="TZX"){e=73.7;n=e*2}else if(t=="TVX"){e=73.7;n=e*2}else if(t=="TZL"){e=150;n=e*2}else{e=125;n=e*2}return{gateRes:e,multiplier:n}}function Y(t,e){var n=Date.parse(e)-Date.parse(t);var r=n<0;if(r){n=Math.abs(n)}return isNaN(n)?NaN:{ms:Math.floor(n%1e3),s:Math.floor(n/1e3%60),m:Math.floor(n/6e4%60),h:Math.floor(n/36e5%24),d:Math.floor(n/864e5),negative:r}}function j(t){function e(t){return t.trim().length===0}var n={};var r=t.split("\n");for(var i in r){var o=r[i].split(",");for(var s in o){o[s]=o[s].replace(/ /g,"")}n[i]=o}return n}function X(t,e,n,r){$({blurRadius:t}).animate({blurRadius:e},{duration:n,easing:"linear",step:function(){$(r).css({"-webkit-filter":"brightness("+this.blurRadius+"%)",filter:"brightness("+this.blurRadius+"%)"})}})}function W(t,e){if(t=="show"){$("#hurricaneArchiveMapControl").show();if($("#dataDiv").data("isHaControlMinimized")){$("#haMapControlMinimize").click()}}else if(t=="hide"){$("#hurricaneArchiveMapControl").hide();$("#haMapControlText").hide()}else if(t=="text"){$("#haMapControlText").show();document.getElementById("haMapControlText").innerHTML=e}}function Z(t,e){e=e||2;return(new Array(e).join("0")+t).slice(e*-1)}function H(t){var e=t.title;var n=t.body;var r=t.color;var i=t.textColor;$("#atcDlg").show();$("#atcDlgHeaderText").html(e);$("#atcDlgHeader").css("background-color",r);$("#atcDlgHeader").css("color",i);$("#atcDlgClose").css("color",i);$("#atcDlgBody").scrollTop(0);$("#atcDlgBody").html(n)}function J(t,e){if(["N0G","N0U","VEL","TVX","TV0","TV1","TV2"].includes(e)){for(var n in t){if(t[n]!=999){t[n]=t[n]/1.944}}}else if(e=="N0S"){for(var n in t){if(t[n]!=999){t[n]=t[n]-.5}}}for(var n=0;n<t.length;n++){if(t[n]==t[n+1]){t[n]=t[n]-1e-5}}return t}function K(t){var e={lines:10,length:38,width:17,radius:45,scale:.5,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};var n=document.body;if(window.theLoadingSpinner==undefined){window.theLoadingSpinner=new Spin.Spinner(e).spin(n)}if(!t){window.theLoadingSpinner.stop();window.theLoadingSpinner=undefined}}et.exports={phpProxy:t,colors:e,toBuffer:n,printFancyTime:r,printHourMin:i,userTimeZone:o,addMinutes:s,msToTime:a,round:u,findTerminalCoordinates:l,logToModal:h,xmlToJson:c,formatBytes:f,colorLog:g,html2json:p,tiltObject:v,numOfTiltsObj:y,allL2Btns:m,vcpObj:_,productUnits:x,blobToString:b,addDays:w,progressBarVal:E,getDividedArray:N,scale:k,tideChartDivName:S,waitVisible:M,flyToStation:C,disableModeBtn:L,knotsToMph:T,degToCompass:P,getCardinalDirection:R,preventFileCaching:D,return_css_color:O,sshwsValues:A,getSSHWSVal:F,hurricaneTypesAbbvs:B,spawnModal:z,betterProgressBar:V,CtoF:q,MBtoINHG:G,getRadialConstants:U,getDateDiff:Y,csvToJson:j,animateBrightness:X,haMapControlActions:W,zeroPad:Z,displayAtticDialog:H,scaleValues:J,loadingSpinner:K}}).call(this)}).call(this,tt("buffer").Buffer)},{"./map/map":7,buffer:28}],10:[function(t,n,r){!function(t,e){"object"==typeof r&&"undefined"!=typeof n?e(r):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).turf={})}(this,function(t){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function m(t){if(Array.isArray(t))return t}function o(t,e,n){return e=a(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],a(t).constructor):e.apply(t,n))}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f(r.key),r)}}function i(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function B(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=M(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function l(t,e,n){return(e=f(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(u=function(){return!!t})()}function _(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function K(t,e){return m(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(t,e)||M(t,e)||k()}function I(t){return function(t){if(Array.isArray(t))return r(t)}(t)||_(t)||M(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function _r(t){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_r(t)}function M(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}var d=6371008.8,y={centimeters:100*d,centimetres:100*d,degrees:360/(2*Math.PI),feet:3.28084*d,inches:39.37*d,kilometers:d/1e3,kilometres:d/1e3,meters:d,metres:d,miles:d/1609.344,millimeters:1e3*d,millimetres:1e3*d,nauticalmiles:d/1852,radians:1,yards:1.0936*d},C={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function G(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function e(t,e){switch(t){case"Point":return U(e).geometry;case"LineString":return Y(e).geometry;case"Polygon":return z(e).geometry;case"MultiPoint":return nt(e).geometry;case"MultiLineString":return et(e).geometry;case"MultiPolygon":return rt(e).geometry;default:throw new Error(t+" is invalid")}}function U(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!X(t[0])||!X(t[1]))throw new Error("coordinates must contain numbers");return G({type:"Point",coordinates:t},e,n)}function q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(t.map(function(t){return U(t,e)}),n)}function z(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=B(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}catch(t){i.e(t)}finally{i.f()}return G({type:"Polygon",coordinates:t},e,r)}function Q(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(t.map(function(t){return z(t,e)}),n)}function Y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return G({type:"LineString",coordinates:t},e,n)}function tt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return j(t.map(function(t){return Y(t,e)}),n)}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function et(t,e){return G({type:"MultiLineString",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function nt(t,e){return G({type:"MultiPoint",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function rt(t,e){return G({type:"MultiPolygon",coordinates:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function it(t,e){return G({type:"GeometryCollection",geometries:t},e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function st(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=y[e];if(!n)throw new Error(e+" units is invalid");return t*n}function at(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=y[e];if(!n)throw new Error(e+" units is invalid");return t/n}function ut(t,e){return ct(at(t,e))}function lt(t){var e=t%360;return e<0&&(e+=360),e}function ht(t){return(t%=360)>180?t-360:t<-180?t+360:t}function ct(t){return 180*(t%(2*Math.PI))/Math.PI}function x(t){return t%360*Math.PI/180}function ft(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw new Error("length must be a positive number");return st(at(t,e),n)}function gt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(t>=0))throw new Error("area must be a positive number");var r=C[e];if(!r)throw new Error("invalid original units");var i=C[n];if(!i)throw new Error("invalid final units");return t/r*i}function X(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function W(t){return null!==t&&"object"===_r(t)&&!Array.isArray(t)}function dt(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!X(t))throw new Error("bbox must only contain numbers")})}function pt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(_r(t)))throw new Error("id must be a number or a string")}var vt=Object.freeze({__proto__:null,areaFactors:C,azimuthToBearing:ht,bearingToAzimuth:lt,convertArea:gt,convertLength:ft,degreesToRadians:x,earthRadius:d,factors:y,feature:G,featureCollection:j,geometry:e,geometryCollection:it,isNumber:X,isObject:W,lengthToDegrees:ut,lengthToRadians:at,lineString:Y,lineStrings:tt,multiLineString:et,multiPoint:nt,multiPolygon:rt,point:U,points:q,polygon:z,polygons:Q,radiansToDegrees:ct,radiansToLength:st,round:ot,validateBBox:dt,validateId:pt});function Z(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return I(t.geometry.coordinates);if("Point"===t.type)return I(t.coordinates)}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return I(t);throw new Error("coord must be GeoJSON Point or an Array of numbers")}function E(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function yt(t){if(t.length>1&&X(t[0])&&X(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return yt(t[0]);throw new Error("coordinates must only contain numbers")}function mt(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function _t(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function xt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");var r,i=B(t.features);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}catch(t){i.e(t)}finally{i.f()}}function H(t){return"Feature"===t.type?t.geometry:t}function bt(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}var wt=Object.freeze({__proto__:null,collectionOf:xt,containsNumber:yt,featureOf:_t,geojsonType:mt,getCoord:Z,getCoords:E,getGeom:H,getType:bt});function kt(t,e){if(!0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final)return function(t,e){var n=kt(e,t);return n=(n+180)%360}(t,e);var n=Z(t),r=Z(e),i=x(n[0]),o=x(r[0]),s=x(n[1]),a=x(r[1]),u=Math.sin(o-i)*Math.cos(a),l=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(o-i);return ct(Math.atan2(u,l))}function Et(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=Z(t),o=x(i[0]),s=x(i[1]),a=x(n),u=at(e,r.units),l=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(a));return U([ct(o+Math.atan2(Math.sin(a)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(l))),ct(l)],r.properties)}function $(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Z(t),i=Z(e),o=x(i[1]-r[1]),s=x(i[0]-r[0]),a=x(r[1]),u=x(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(u);return st(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function Nt(t,e){var n;return(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final?St(Z(e),Z(t)):St(Z(t),Z(e)))>180?-(360-n):n}function St(t,e){var n=x(t[1]),r=x(e[1]),i=x(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(ct(Math.atan2(i,o))+360)%360}function w(t,e,n){if(null!==t)for(var r,i,o,s,a,u,l,h,c=0,f=0,g=t.type,d="FeatureCollection"===g,p="Feature"===g,v=d?t.features.length:1,y=0;y<v;y++){a=(h=!!(l=d?t.features[y].geometry:p?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<a;m++){var _=0,x=0;if(null!==(s=h?l.geometries[m]:l)){u=s.coordinates;var b=s.type;switch(c=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(u,f,y,_,x))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,x))return!1;f++,"MultiPoint"===b&&_++}"LineString"===b&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-c;i++){if(!1===e(u[r][i],f,y,_,x))return!1;f++}"MultiLineString"===b&&_++,"Polygon"===b&&x++}"Polygon"===b&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(x=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-c;o++){if(!1===e(u[r][i][o],f,y,_,x))return!1;f++}x++}_++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===w(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function It(t,o,s,e){var a=s;return w(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)},e),a}function Mt(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function Ct(t,n,r){var i=r;return Mt(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function N(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Lt(t,n,r){var i=r;return N(t,function(t,e){i=0===e&&void 0===r?t:n(i,t,e)}),i}function Tt(t){var e=[];return w(t,function(t){e.push(t)}),e}function Pt(t,e){var n,r,i,o,s,a,u,l,h,c,f=0,g="FeatureCollection"===t.type,d="Feature"===t.type,p=g?t.features.length:1;for(n=0;n<p;n++){for(a=g?t.features[n].geometry:d?t.geometry:t,l=g?t.features[n].properties:d?t.properties:{},h=g?t.features[n].bbox:d?t.bbox:void 0,c=g?t.features[n].id:d?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,i=0;i<s;i++)if(null!==(o=u?a.geometries[i]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,h,c))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,h,c))return!1;f++}}function Rt(t,o,s){var a=s;return Pt(t,function(t,e,n,r,i){a=0===e&&void 0===s?t:o(a,t,e,n,r,i)}),a}function b(t,l){Pt(t,function(t,e,n,r,i){var o,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==l(G(t,n,{bbox:r,id:i}),e,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var a=0;a<t.coordinates.length;a++){var u=t.coordinates[a];if(!1===l(G({type:o,coordinates:u},n),e,a))return!1}})}function Ot(t,r,i){var o=i;return b(t,function(t,e,n){o=0===e&&0===n&&void 0===i?t:r(o,t,e,n)}),o}function At(t,d){b(t,function(s,a,u){var l=0;if(s.geometry){var t=s.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var h,c=0,f=0,g=0;return!1!==w(s,function(t,e,n,r,i){if(void 0===h||a>c||r>f||i>g)return h=t,c=a,f=r,g=i,void(l=0);var o=Y([h,t],s.properties);if(!1===d(o,a,u,i,l))return!1;l++,h=t})&&void 0}}})}function Dt(t,o,s){var a=s,u=!1;return At(t,function(t,e,n,r,i){a=!1===u&&void 0===s?t:o(a,t,e,n,r,i),u=!0}),a}function Ft(t,s){if(!t)throw new Error("geojson is required");b(t,function(t,e,n){if(null!==t.geometry){var r=t.geometry.type,i=t.geometry.coordinates;switch(r){case"LineString":if(!1===s(t,e,n,0,0))return!1;break;case"Polygon":for(var o=0;o<i.length;o++)if(!1===s(Y(i[o],t.properties),e,n,o))return!1}}})}function Bt(t,i,o){var s=o;return Ft(t,function(t,e,n,r){s=0===e&&void 0===o?t:i(s,t,e,n,r)}),s}function zt(t,e){if(!W(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.segmentIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=u.length+s-1),Y([u[s],u[s+1]],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s-1),Y([u[o][s],u[o][s+1]],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s-1),Y([u[i][s],u[i][s+1]],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s-1),Y([u[i][o][s],u[i][o][s+1]],a,e)}throw new Error("geojson is invalid")}function Vt(t,e){if(!W(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,s=e.coordIndex||0,a=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),a=a||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":a=a||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return U(u,a,e);case"MultiPoint":return i<0&&(i=u.length+i),U(u[i],a,e);case"LineString":return s<0&&(s=u.length+s),U(u[s],a,e);case"Polygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),U(u[o][s],a,e);case"MultiLineString":return i<0&&(i=u.length+i),s<0&&(s=u[i].length+s),U(u[i][s],a,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),s<0&&(s=u[i][o].length-s),U(u[i][o][s],a,e)}throw new Error("geojson is invalid")}var qt=Object.freeze({__proto__:null,coordAll:Tt,coordEach:w,coordReduce:It,featureEach:N,featureReduce:Lt,findPoint:Vt,findSegment:zt,flattenEach:b,flattenReduce:Ot,geomEach:Pt,geomReduce:Rt,lineEach:Ft,lineReduce:Bt,propEach:Mt,propReduce:Ct,segmentEach:At,segmentReduce:Dt});function Gt(t){return Rt(t,function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return Ut(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Ut(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}function Ut(t){var e=0;if(t&&t.length>0){e+=Math.abs(Xt(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Xt(t[n]))}return e}var Yt=d*d/2,jt=Math.PI/180;function Xt(t){var e=t.length-1;if(e<=2)return 0;for(var n=0,r=0;r<e;){var i=t[r],o=t[r+1===e?0:r+1],s=t[r+2>=e?(r+2)%e:r+2],a=i[0]*jt,u=o[1]*jt;n+=(s[0]*jt-a)*Math.sin(u),r++}return n*Yt}function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=t.bbox&&!0!==e.recompute)return t.bbox;var n=[1/0,1/0,-1/0,-1/0];return w(t,function(t){n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])}),n}function Wt(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],o=!(Ht(i=t[t.length-1],e)&r),s=0;s<t.length;s++)(u=!(Ht(a=t[s],e)&r))!==o&&n.push(Zt(i,a,r,e)),u&&n.push(a),i=a,o=u;if(!(t=n).length)break}return n}function Zt(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function Ht(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function $t(t,e){var n,r=[],i=B(t);try{for(i.s();!(n=i.n()).done;){var o=Wt(n.value,e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}}catch(t){i.e(t)}finally{i.f()}return r}function Jt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r];return z([[s,[i,r],[i,o],[n,o],s]],e.properties,{bbox:t,id:e.id})}var Kt=function(){return i(function t(e){g(this,t),this.points=e.points||[],this.duration=e.duration||1e4,this.sharpness=e.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=e.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var r=0;r<this.length-1;r++){var i=this.points[r],o=this.points[r+1];this.centers.push({x:(i.x+o.x)/2,y:(i.y+o.y)/2,z:(i.z+o.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var s=0;s<this.centers.length-1;s++){var a=this.points[s+1].x-(this.centers[s].x+this.centers[s+1].x)/2,u=this.points[s+1].y-(this.centers[s].y+this.centers[s+1].y)/2,l=this.points[s+1].z-(this.centers[s].y+this.centers[s+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s].x+a),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s].y+u),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s].z+l)},{x:(1-this.sharpness)*this.points[s+1].x+this.sharpness*(this.centers[s+1].x+a),y:(1-this.sharpness)*this.points[s+1].y+this.sharpness*(this.centers[s+1].y+u),z:(1-this.sharpness)*this.points[s+1].z+this.sharpness*(this.centers[s+1].z+l)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this},[{key:"cacheSteps",value:function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e}},{key:"vector",value:function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}}},{key:"pos",value:function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t),s={x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]};return s}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}])}();function Qt(t){for(var e,n,r=E(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function te(t,e){for(var n=0,r=0,i=0,o=0,s=0,a=0,u=0,l=0,h=null,c=null,f=t[0],g=t[1],d=e.length;n<d;n++){r=0;var p=e[n].length-1,v=e[n];if((h=v[0])[0]!==v[p][0]&&h[1]!==v[p][1])throw new Error("First and last coordinates in a ring must be the same");for(s=h[0]-f,a=h[1]-g;r<p;r++)if(l=(c=v[r+1])[1]-g,a<0&&l<0||a>0&&l>0)a=l,s=(h=c)[0]-f;else{if(u=c[0]-t[0],l>0&&a<=0){if((o=s*l-u*a)>0)i+=1;else if(0===o)return 0}else if(a>0&&l<=0){if((o=s*l-u*a)<0)i+=1;else if(0===o)return 0}else if(0===l&&a<0){if(0===(o=s*l-u*a))return 0}else if(0===a&&l<0){if(0===(o=s*l-u*a))return 0}else if(0===a&&0===l){if(u<=0&&s>=0)return 0;if(s<=0&&u>=0)return 0}h=c,a=l,s=u}}return i%2!=0}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Z(t),i=H(e),o=i.type,s=e.bbox,a=i.coordinates;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,s))return!1;"Polygon"===o&&(a=[a]);for(var u=!1,l=0;l<a.length;++l){var h=te(r,a[l]);if(0===h)return!n.ignoreBoundary;h&&(u=!0)}return u}function c(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Z(t),i=E(e),o=0;o<i.length-1;o++){var s=!1;if(n.ignoreEndVertices&&(0===o&&(s="start"),o===i.length-2&&(s="end"),0===o&&o+1===i.length-1&&(s="both")),ee(i[o],i[o+1],r,s,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function ee(t,e,n,r,i){var o=n[0],s=n[1],a=t[0],u=t[1],l=e[0],h=e[1],c=l-a,f=h-u,g=(n[0]-a)*f-(n[1]-u)*c;if(null!==i){if(Math.abs(g)>i)return!1}else if(0!==g)return!1;return Math.abs(c)===Math.abs(f)&&0===Math.abs(c)?!r&&(n[0]===t[0]&&n[1]===t[1]):r?"start"===r?Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<=l:l<=o&&o<a:f>0?u<s&&s<=h:h<=s&&s<u:"end"===r?Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<l:l<o&&o<=a:f>0?u<=s&&s<h:h<s&&s<=u:"both"===r&&(Math.abs(c)>=Math.abs(f)?c>0?a<o&&o<l:l<o&&o<a:f>0?u<s&&s<h:h<s&&s<u):Math.abs(c)>=Math.abs(f)?c>0?a<=o&&o<=l:l<=o&&o<=a:f>0?u<=s&&s<=h:h<=s&&s<=u}function ne(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!re(J(t),J(e)))return!1;var n,r=B(H(e).coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=B(n.value);try{for(o.s();!(i=o.n()).done;){if(!V(i.value,t))return!1}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}return!0}function re(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function ie(t,e){return t[0]===e[0]&&t[1]===e[1]}function oe(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var se=function(){return i(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;if(g(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)},[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}])}();function ae(t,e){return t<e?-1:t>e?1:0}function ue(t,e){return t.p.x>e.p.x?1:t.p.x<e.p.x?-1:t.p.y!==e.p.y?t.p.y>e.p.y?1:-1:1}function le(t,e){return t.rightSweepEvent.p.x>e.rightSweepEvent.p.x?1:t.rightSweepEvent.p.x<e.rightSweepEvent.p.x?-1:t.rightSweepEvent.p.y!==e.rightSweepEvent.p.y?t.rightSweepEvent.p.y<e.rightSweepEvent.p.y?1:-1:1}var he=function(){return i(function t(e,n,r,i){g(this,t),this.p={x:e[0],y:e[1]},this.featureId=n,this.ringId=r,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null},[{key:"isSamePoint",value:function(t){return this.p.x===t.p.x&&this.p.y===t.p.y}}])}();var ce=0,fe=0,ge=0;function de(t,e){var n="Feature"===t.type?t.geometry:t,r=n.coordinates;"Polygon"!==n.type&&"MultiLineString"!==n.type||(r=[r]),"LineString"===n.type&&(r=[[r]]);for(var i=0;i<r.length;i++)for(var o=0;o<r[i].length;o++){var s=r[i][o][0],a=null;fe+=1;for(var u=0;u<r[i][o].length-1;u++){a=r[i][o][u+1];var l=new he(s,ce,fe,ge),h=new he(a,ce,fe,ge+1);l.otherEvent=h,h.otherEvent=l,ue(l,h)>0?(h.isLeftEndpoint=!0,l.isLeftEndpoint=!1):(l.isLeftEndpoint=!0,h.isLeftEndpoint=!1),e.push(l),e.push(h),s=a,ge+=1}}ce+=1}var pe=i(function t(e){g(this,t),this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent});function ve(t,e){if(null===t||null===e)return!1;if(t.leftSweepEvent.ringId===e.leftSweepEvent.ringId&&(t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.leftSweepEvent)||t.rightSweepEvent.isSamePoint(e.rightSweepEvent)||t.leftSweepEvent.isSamePoint(e.leftSweepEvent)||t.leftSweepEvent.isSamePoint(e.rightSweepEvent)))return!1;var n=t.leftSweepEvent.p.x,r=t.leftSweepEvent.p.y,i=t.rightSweepEvent.p.x,o=t.rightSweepEvent.p.y,s=e.leftSweepEvent.p.x,a=e.leftSweepEvent.p.y,u=e.rightSweepEvent.p.x,l=e.rightSweepEvent.p.y,h=(l-a)*(i-n)-(u-s)*(o-r),c=(u-s)*(r-a)-(l-a)*(n-s),f=(i-n)*(r-a)-(o-r)*(n-s);if(0===h)return!1;var g=c/h,d=f/h;return g>=0&&g<=1&&d>=0&&d<=1&&[n+g*(i-n),r+g*(o-r)]}var ye=function(t,e){var n=new se([],ue);return function(t,e){if("FeatureCollection"===t.type)for(var n=t.features,r=0;r<n.length;r++)de(n[r],e);else de(t,e)}(t,n),function(t,e){e=e||!1;for(var n=[],r=new se([],le);t.length;){var i=t.pop();if(i.isLeftEndpoint){for(var o=new pe(i),s=0;s<r.data.length;s++){var a=r.data[s];if(!e||a.leftSweepEvent.featureId!==i.featureId){var u=ve(o,a);!1!==u&&n.push(u)}}r.push(o)}else!1===i.isLeftEndpoint&&r.pop()}return n}(n,e)};function me(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.removeDuplicates,i=void 0===r||r,o=n.ignoreSelfIntersections,s=void 0===o||o,a=[];"FeatureCollection"===t.type?a=a.concat(t.features):"Feature"===t.type?a.push(t):"LineString"!==t.type&&"Polygon"!==t.type&&"MultiLineString"!==t.type&&"MultiPolygon"!==t.type||a.push(G(t)),"FeatureCollection"===e.type?a=a.concat(e.features):"Feature"===e.type?a.push(e):"LineString"!==e.type&&"Polygon"!==e.type&&"MultiLineString"!==e.type&&"MultiPolygon"!==e.type||a.push(G(e));var u=ye(j(a),s),l=[];if(i){var h={};u.forEach(function(t){var e=t.join(",");h[e]||(h[e]=!0,l.push(t))})}else l=u;return j(l.map(function(t){return U(t)}))}function _e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H(t),r=n.coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{};return xe(r,i)}(n,e);case"MultiPolygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H(t),r=n.coordinates,i=e.properties?e.properties:"Feature"===t.type?t.properties:{},o=[];return r.forEach(function(t){o.push(xe(t,i))}),j(o)}(n,e);default:throw new Error("invalid poly")}}function xe(t,e){return t.length>1?et(t,e):Y(t[0],e)}function be(t,e){var n=H(t),r=H(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return we(n,r);case"Polygon":return Ee(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return we(r,n);case"LineString":return function(t,e){if(me(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Ne(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return ke(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Ee(r,n);case"LineString":return ke(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function we(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Ne(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function ke(t,e){return me(t,_e(e)).features.length>0}function Ee(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)V(U(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function Ne(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==i*a-o*s&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function Se(t,n){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreSelfIntersections:!0}).ignoreSelfIntersections,r=void 0===e||e,i=!0;return b(t,function(e){b(n,function(t){if(!1===i)return!1;i=function(t,e,n){switch(t.type){case"Point":switch(e.type){case"Point":return r=t.coordinates,i=e.coordinates,!(r[0]===i[0]&&r[1]===i[1]);case"LineString":return!Ie(e,t);case"Polygon":return!V(t,e)}break;case"LineString":switch(e.type){case"Point":return!Ie(t,e);case"LineString":return!function(t,e,n){var r=me(t,e,{ignoreSelfIntersections:n});if(r.features.length>0)return!0;return!1}(t,e,n);case"Polygon":return!Me(e,t,n)}break;case"Polygon":switch(e.type){case"Point":return!V(e,t);case"LineString":return!Me(t,e,n);case"Polygon":return!function(t,e,n){var r,i=B(t.coordinates[0]);try{for(i.s();!(r=i.n()).done;){if(V(r.value,e))return!0}}catch(t){i.e(t)}finally{i.f()}var o,s=B(e.coordinates[0]);try{for(s.s();!(o=s.n()).done;){if(V(o.value,t))return!0}}catch(t){s.e(t)}finally{s.f()}var a=me(_e(t),_e(e),{ignoreSelfIntersections:n});if(a.features.length>0)return!0;return!1}(e,t,n)}}var r,i;return!1}(e.geometry,t.geometry,r)})}),i}function Ie(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(Ce(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Me(t,e,n){var r,i=B(e.coordinates);try{for(i.s();!(r=i.n()).done;){if(V(r.value,t))return!0}}catch(t){i.e(t)}finally{i.f()}return me(e,_e(t),{ignoreSelfIntersections:n}).features.length>0}function Ce(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1];return 0==r*s-i*o&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}var Le=Object.defineProperty,Te=function(t,e){return Le(t,"name",{value:e,configurable:!0})},Pe=function(){return i(function t(e){var n,r,i;g(this,t),this.direction=!1,this.compareProperties=!0,this.precision=Math.pow(10,-(null!=(n=null==e?void 0:e.precision)?n:17)),this.direction=null!=(r=null==e?void 0:e.direction)&&r,this.compareProperties=null==(i=null==e?void 0:e.compareProperties)||i},[{key:"compare",value:function(t,e){var n=this;if(t.type!==e.type)return!1;if(!Oe(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates);case"Polygon":return this.comparePolygon(t,e);case"GeometryCollection":return this.compareGeometryCollection(t,e);case"Feature":return this.compareFeature(t,e);case"FeatureCollection":return this.compareFeatureCollection(t,e);default:if(t.type.startsWith("Multi")){var r=Ae(t),i=Ae(e);return r.every(function(e){return i.some(function(t){return n.compare(e,t)})})}}return!1}},{key:"compareCoord",value:function(t,n){var r=this;return t.length===n.length&&t.every(function(t,e){return Math.abs(t-n[e])<r.precision})}},{key:"compareLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Oe(t,e))return!1;var i=t,o=e;if(r&&!this.compareCoord(i[0],o[0])){var s=this.fixStartIndex(o,i);if(!s)return!1;o=s}var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},{key:"fixStartIndex",value:function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n}},{key:"comparePath",value:function(t,n){var r=this;return t.every(function(t,e){return r.compareCoord(t,n[e])})}},{key:"comparePolygon",value:function(t,e){var n=this;if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var r=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length);return r.every(function(e){return i.some(function(t){return n.compareLine(e,t,1,!0)})})}return!1}},{key:"compareGeometryCollection",value:function(t,n){var r=this;return Oe(t.geometries,n.geometries)&&this.compareBBox(t,n)&&t.geometries.every(function(t,e){return r.compare(t,n.geometries[e])})}},{key:"compareFeature",value:function(t,e){return t.id===e.id&&(!this.compareProperties||Fe(t.properties,e.properties))&&this.compareBBox(t,e)&&this.compare(t.geometry,e.geometry)}},{key:"compareFeatureCollection",value:function(t,n){var r=this;return Oe(t.features,n.features)&&this.compareBBox(t,n)&&t.features.every(function(t,e){return r.compare(t,n.features[e])})}},{key:"compareBBox",value:function(t,e){return Boolean(!t.bbox&&!e.bbox)||!(!t.bbox||!e.bbox)&&this.compareCoord(t.bbox,e.bbox)}}])}();Te(Pe,"GeojsonEquality");var Re=Pe;function Oe(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}function Ae(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function De(t,e,n){return new Re(n).compare(t,e)}function Fe(t,e){if(null===t&&null===e)return!0;if(null===t||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0,o=n;i<o.length;i++){var s=o[i],a=t[s],u=e[s],l=Be(a)&&Be(u);if(l&&!Fe(a,u)||!l&&a!==u)return!1}return!0}Te(Oe,"sameLength"),Te(Ae,"explode"),Te(De,"geojsonEquality"),Te(Fe,"equal");var Be=Te(function(t){return null!=t&&"object"===_r(t)},"isObject");function ze(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="object"===_r(e)?e.mutate:e;if(!t)throw new Error("geojson is required");var r=bt(t),i=[];switch(r){case"LineString":i=Ve(t,r);break;case"MultiLineString":case"Polygon":E(t).forEach(function(t){i.push(Ve(t,r))});break;case"MultiPolygon":E(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Ve(t,r))}),i.push(e)});break;case"Point":return t;case"MultiPoint":var o={};E(t).forEach(function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)});break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):G({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function Ve(t,e){var n=E(t);if(2===n.length&&!qe(n[0],n[1]))return n;var r=[],i=n.length-1,o=r.length;r.push(n[0]);for(var s=1;s<i;s++){var a=r[r.length-1];n[s][0]===a[0]&&n[s][1]===a[1]||(r.push(n[s]),(o=r.length)>2&&Ge(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1))}if(r.push(n[n.length-1]),o=r.length,("Polygon"===e||"MultiPolygon"===e)&&qe(n[0],n[n.length-1])&&o<4)throw new Error("invalid polygon");return"LineString"===e&&o<3||Ge(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1),r}function qe(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ge(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],l=a-o,h=u-s;return 0===(r-o)*h-(i-s)*l&&(Math.abs(l)>=Math.abs(h)?l>0?o<=r&&r<=a:a<=r&&r<=o:h>0?s<=i&&i<=u:u<=i&&i<=s)}function Ue(t,n){var e=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections,r=void 0===e||e,i=!1;return b(t,function(e){b(n,function(t){if(!0===i)return!0;i=!Se(e.geometry,t.geometry,{ignoreSelfIntersections:r})})}),i}function Ye(t,e,n,r,i){je(t,e,n||0,r||t.length-1,i||We)}function je(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1);je(t,e,Math.max(n,Math.floor(e-s*u/o+l)),Math.min(r,Math.floor(e+(o-s)*u/o+l)),i)}var h=t[e],c=n,f=r;for(Xe(t,n,e),i(t[r],h)>0&&Xe(t,n,r);c<f;){for(Xe(t,c,f),c++,f--;i(t[c],h)<0;)c++;for(;i(t[f],h)>0;)f--}0===i(t[n],h)?Xe(t,n,f):Xe(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function Xe(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function We(t,e){return t<e?-1:t>e?1:0}var Ze=function(){return i(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;g(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()},[{key:"all",value:function(){return this._all(this.data,[])}},{key:"search",value:function(t){var e=this.data,n=[];if(!on(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?r(s):s;on(t,a)&&(e.leaf?n.push(s):rn(t,a)?this._all(s,n):i.push(s))}e=i.pop()}return n}},{key:"collides",value:function(t){var e=this.data;if(!on(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(on(t,o)){if(e.leaf||rn(t,o))return!0;n.push(i)}}e=n.pop()}return!1}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:"insert",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=sn([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var n,r,i,o=this.data,s=this.toBBox(t),a=[],u=[];o||a.length;){if(o||(o=a.pop(),r=a[a.length-1],n=u.pop(),i=!0),o.leaf){var l=He(t,o.children,e);if(-1!==l)return o.children.splice(l,1),a.push(o),this._condense(a),this}i||o.leaf||!rn(o,s)?r?(n++,o=r.children[n],i=!1):o=null:(a.push(o),u.push(n),n=0,r=o,o=o.children[0])}return this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"_all",value:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,I(t.children)):n.push.apply(n,I(t.children)),t=n.pop();return e}},{key:"_build",value:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return $e(i=sn(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=sn([])).leaf=!1,i.height=r;var a=Math.ceil(o/s),u=a*Math.ceil(Math.sqrt(s));an(t,e,n,u,this.compareMinX);for(var l=e;l<=n;l+=u){var h=Math.min(l+u-1,n);an(t,l,h,a,this.compareMinY);for(var c=l;c<=h;c+=a){var f=Math.min(c+a-1,h);i.children.push(this._build(t,c,f,r-1))}}return $e(i,this.toBBox),i}},{key:"_chooseSubtree",value:function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var u=e.children[a],l=en(u),h=(c=t,f=u,(Math.max(f.maxX,c.maxX)-Math.min(f.minX,c.minX))*(Math.max(f.maxY,c.maxY)-Math.min(f.minY,c.minY))-l);h<o?(o=h,i=l<i?l:i,s=u):h===o&&l<i&&(i=l,s=u)}e=s||e.children[0]}var c,f;return e}},{key:"_insert",value:function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),Ke(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)}},{key:"_split",value:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=sn(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,$e(n,this.toBBox),$e(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)}},{key:"_splitRoot",value:function(t,e){this.data=sn([t,e]),this.data.height=t.height+1,this.data.leaf=!1,$e(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(t,e,n){for(var r,i,o,s,a,u,l,h=1/0,c=1/0,f=e;f<=n-e;f++){var g=Je(t,0,f,this.toBBox),d=Je(t,f,n,this.toBBox),p=(i=g,o=d,s=void 0,a=void 0,u=void 0,l=void 0,s=Math.max(i.minX,o.minX),a=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),l=Math.min(i.maxY,o.maxY),Math.max(0,u-s)*Math.max(0,l-a)),v=en(g)+en(d);p<h?(h=p,r=f,c=v<c?v:c):p===h&&v<c&&(c=v,r=f)}return r||n-e}},{key:"_chooseSplitAxis",value:function(t,e,n){var r=t.leaf?this.compareMinX:Qe,i=t.leaf?this.compareMinY:tn;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)}},{key:"_allDistMargin",value:function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=Je(t,0,e,i),s=Je(t,n-e,n,i),a=nn(o)+nn(s),u=e;u<n-e;u++){var l=t.children[u];Ke(o,t.leaf?i(l):l),a+=nn(o)}for(var h=n-e-1;h>=e;h--){var c=t.children[h];Ke(s,t.leaf?i(c):c),a+=nn(s)}return a}},{key:"_adjustParentBBoxes",value:function(t,e,n){for(var r=n;r>=0;r--)Ke(e[r],t)}},{key:"_condense",value:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():$e(t[n],this.toBBox)}}])}();function He(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function $e(t,e){Je(t,0,t.children.length,e,t)}function Je(t,e,n,r,i){i||(i=sn(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var s=t.children[o];Ke(i,t.leaf?r(s):s)}return i}function Ke(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Qe(t,e){return t.minX-e.minX}function tn(t,e){return t.minY-e.minY}function en(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function nn(t){return t.maxX-t.minX+(t.maxY-t.minY)}function rn(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function on(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function sn(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function an(t,e,n,r,i){for(var o=[e,n];o.length;)if(!((n=o.pop())-(e=o.pop())<=r)){var s=e+Math.ceil((n-e)/r/2)*r;Ye(t,s,e,n,i),o.push(e,s,s,n)}}var un=Object.freeze({__proto__:null,default:Ze});function ln(t){var e=new Ze(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:J(t),Ze.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:J(t),e.push(t)}):N(t,function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:J(t),e.push(t)}),Ze.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:J(t),Ze.prototype.remove.call(this,t,e)},e.clear=function(){return Ze.prototype.clear.call(this)},e.search=function(t){return j(Ze.prototype.search.call(this,this.toBBox(t)))},e.collides=function(t){return Ze.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return j(Ze.prototype.all.call(this))},e.toJSON=function(){return Ze.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ze.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=J(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=J(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function hn(t){if(!t)throw new Error("geojson is required");var e=[];return b(t,function(t){!function(n,r){var t=[],e=n.geometry;if(null!==e){switch(e.type){case"Polygon":t=E(e);break;case"LineString":t=[E(e)]}t.forEach(function(t){var e=function(t,r){var i=[];return t.reduce(function(t,e){var n=Y([t,e],r);return n.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=n<i?n:i,a=r<o?r:o,u=n>i?n:i,l=r>o?r:o;return[s,a,u,l]}(t,e),i.push(n),e}),i}(t,n.properties);e.forEach(function(t){t.id=r.length,r.push(t)})})}}(t,e)}),j(e)}var cn,fn,gn=Object.defineProperty,dn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,vn=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,mn=Object.prototype.propertyIsEnumerable,_n=function(t,e,n){return e in t?gn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},xn=function(t,e){for(var n in e||(e={}))yn.call(e,n)&&_n(t,n,e[n]);if(vn){var r,i=B(vn(e));try{for(i.s();!(r=i.n()).done;){n=r.value;mn.call(e,n)&&_n(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},bn=function(t,e){return dn(t,pn(e))};function wn(t,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!v)throw new Error("lines and pt are required arguments");var m=Z(v),_=U([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),x=0;return b(t,function(t,e,n){for(var r=E(t),i=0;i<r.length-1;i++){var o=U(r[i]);o.properties.dist=$(v,o,y);var s=Z(o),a=U(r[i+1]);a.properties.dist=$(v,a,y);var u=Z(a),l=$(o,a,y),h=void 0,c=void 0;if(s[0]===m[0]&&s[1]===m[1]){var f=[s,void 0,!1];h=f[0],c=f[2]}else if(u[0]===m[0]&&u[1]===m[1]){var g=[u,void 0,!0];h=g[0],c=g[2]}else{var d=K(In(o.geometry.coordinates,a.geometry.coordinates,Z(v)),3);h=d[0],c=d[2]}var p=void 0;h&&(p=U(h,{dist:$(v,h,y),multiFeatureIndex:n,location:x+$(o,h,y)})),p&&p.properties.dist<_.properties.dist&&(_=bn(xn({},p),{properties:bn(xn({},p.properties),{index:c?i+1:i})})),x+=l}}),_}function kn(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))}function En(t,e){var n=function(t,e){var n=K(t,3),r=n[0],i=n[1],o=n[2],s=K(e,3);return r*s[0]+i*s[1]+o*s[2]}(t,e)/(kn(t)*kn(e));return Math.acos(Math.min(Math.max(n,-1),1))}function Nn(t){var e=x(t[1]),n=x(t[0]);return[Math.cos(e)*Math.cos(n),Math.cos(e)*Math.sin(n),Math.sin(e)]}function Sn(t){var e=K(t,3),n=e[0],r=e[1],i=e[2],o=ct(Math.asin(i));return[ct(Math.atan2(r,n)),o]}function In(t,e,D){var n,r,i,o,s,a,u,l,h,c,f=Nn(t),g=Nn(e),d=K(Nn(D),3),p=d[0],v=d[1],y=d[2],F=(n=g,r=K(f,3),i=r[0],o=r[1],s=r[2],a=K(n,3),u=a[0],l=a[1],h=a[2],[o*h-s*l,s*u-i*h,i*l-o*u]),m=K(F,3),_=m[0],x=m[1],b=m[2],w=x*y-b*v,k=b*p-_*y,E=_*v-x*p,N=E*x-k*b,S=w*b-E*_,I=k*_-w*x,M=1/Math.sqrt(Math.pow(N,2)+Math.pow(S,2)+Math.pow(I,2)),C=[N*M,S*M,I*M],L=[-1*N*M,-1*S*M,-1*I*M],T=En(f,g),P=En(f,C),R=En(g,C),O=En(f,L),A=En(g,L);return En(f,c=P<O&&P<A||R<O&&R<A?C:L)>T||En(g,c)>T?$(Sn(c),Sn(f))<=$(Sn(c),Sn(g))?[Sn(f),!0,!1]:[Sn(g),!1,!0]:[Sn(c),!1,!1]}function Mn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Cn(n){if(n.__esModule)return n;var e=n.default;if("function"==typeof e){var r=function t(){return this instanceof t?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(t){var e=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(r,t,e.get?e:{enumerable:!0,get:function(){return n[t]}})}),r}var Ln=(fn||(fn=1,cn=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==_r(e)&&"object"==_r(n)){if(e.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(o=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n}),cn),Tn=Mn(Ln);function Pn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!W(n=n||{}))throw new Error("options is invalid");var s,a=n.tolerance||0,r=[],u=ln(),i=hn(t);u.load(i);var l=[];return At(e,function(i){var o=!1;i&&(N(u.search(i),function(t){if(!1===o){var e=E(i).sort(),n=E(t).sort();if(Tn(e,n))o=!0,s=s?Rn(s,i)||s:i;else if(0===a?c(e[0],t)&&c(e[1],t):wn(t,e[0]).properties.dist<=a&&wn(t,e[1]).properties.dist<=a)o=!0,s=s?Rn(s,i)||s:i;else if(0===a?c(n[0],i)&&c(n[1],i):wn(i,n[0]).properties.dist<=a&&wn(i,n[1]).properties.dist<=a)if(s){var r=Rn(s,t);r?s=r:l.push(t)}else s=t}}),!1===o&&s&&(r.push(s),l.length&&(r=r.concat(l),l=[]),s=void 0))}),s&&r.push(s),j(r)}function Rn(t,e){var n=E(e),r=E(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;if(Tn(n[0],i))s.unshift(n[1]);else if(Tn(n[0],o))s.push(n[1]);else if(Tn(n[1],i))s.unshift(n[0]);else{if(!Tn(n[1],o))return;s.push(n[0])}return t}function On(t,e){var n=lt(Nt(t[0],t[1])),r=lt(Nt(e[0],e[1]));return n===r||(r-n)%180==0}function An(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Dn(t,e){return!!Fn(e.coordinates[0],t.coordinates)||!!Fn(e.coordinates[e.coordinates.length-1],t.coordinates)}function Fn(t,e){return t[0]===e[0]&&t[1]===e[1]}function Bn(t){return t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]}function zn(t){for(var e=0;e<t.length-1;e++)for(var n=t[e],r=e+1;r<t.length-2;r++){if(c(n,Y([t[r],t[r+1]])))return!0}return!1}function Vn(t,e,n){for(var r=z(t),i=n+1;i<e.length;i++)if(!Se(r,z(e[i]))&&be(r,Y(e[i][0])))return!1;return!0}function qn(t,e){var n=H(t),r=H(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Un(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return c(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return V(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Un(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!c(t.coordinates[r],e))return!1;n||(n=c(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=V(t.coordinates[i],e))){n=!1;break}r=V(t.coordinates[i],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!c(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){var n=J(e),r=J(t);if(!Gn(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length;o++){if(!V(t.coordinates[o],e))return!1;if(i||(i=V(t.coordinates[o],e,{ignoreBoundary:!0})),!i&&o<t.coordinates.length-1)i=V(Yn(t.coordinates[o],t.coordinates[o+1]),e,{ignoreBoundary:!0})}return i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=J(t);if(!Gn(J(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!V(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Gn(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function Un(t,e){return t[0]===e[0]&&t[1]===e[1]}function Yn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function jn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=J(t);return U([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}var Xn,Wn={exports:{}};var Zn=(Xn||(Xn=1,function(t,e){t.exports=function(){function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function z(t,e){return z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},z(t,e)}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function q(t,e,n){return q=V()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&z(i,n.prototype),i},q.apply(null,arguments)}function e(t){var r="function"==typeof Map?new Map:void 0;return e=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return q(t,arguments,x(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),z(n,t)},e(t)}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G(t,e){if(e&&("object"==_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)}function u(r){var i=V();return function(){var t,e=x(r);if(i){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return G(this,t)}}function b(t,e,n){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},b(t,e,n||t)}function U(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Y(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}var c=function(){function a(){d(this,a),a.constructor_.apply(this,arguments)}return p(a,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=a.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=a.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==a.JOIN_ROUND&&(this._quadrantSegments=a.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(t){this._joinStyle=t}},{key:"setSimplifyFactor",value:function(t){this._simplifyFactor=t<0?0:t}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(t){this._endCapStyle=t}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(t){this._mitreLimit=t}},{key:"setSingleSided",value:function(t){this._isSingleSided=t}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=a.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=a.CAP_ROUND,this._joinStyle=a.JOIN_ROUND,this._mitreLimit=a.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=a.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(i),this.setJoinStyle(o),this.setMitreLimit(s)}}},{key:"bufferDistanceError",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}]),a}();c.CAP_ROUND=1,c.CAP_FLAT=2,c.CAP_SQUARE=3,c.JOIN_ROUND=1,c.JOIN_MITRE=2,c.JOIN_BEVEL=3,c.DEFAULT_QUADRANT_SEGMENTS=8,c.DEFAULT_MITRE_LIMIT=5,c.DEFAULT_SIMPLIFY_FACTOR=.01;var W=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this,t)).name=Object.keys({Exception:r})[0],e}return p(r,[{key:"toString",value:function(){return this.message}}]),r}(e(Error)),k=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this,t)).name=Object.keys({IllegalArgumentException:r})[0],e}return r}(W),Z=function(){function t(){d(this,t)}return p(t,[{key:"filter",value:function(t){}}]),t}();function i(){}function H(){}function n(){}var $,J,K,Q,tt,et,nt,rt,it=function(){function t(){d(this,t)}return p(t,null,[{key:"equalsWithTolerance",value:function(t,e,n){return Math.abs(t-e)<=n}}]),t}(),ot=function(){function n(t,e){d(this,n),this.low=e||0,this.high=t||0}return p(n,null,[{key:"toBinaryString",value:function(t){var e,n="";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?"1":"0";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?"1":"0";return n}}]),n}();function T(){}function st(){}T.NaN=NaN,T.isNaN=function(t){return Number.isNaN(t)},T.isInfinite=function(t){return!Number.isFinite(t)},T.MAX_VALUE=Number.MAX_VALUE,T.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,T.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(et=2146435072,nt=new Float64Array(1),rt=new Int32Array(nt.buffer),T.doubleToLongBits=function(t){nt[0]=t;var e=0|rt[0],n=0|rt[1];return(n&et)===et&&0!=(1048575&n)&&0!==e&&(e=0,n=2146959360),new ot(n,e)},T.longBitsToDouble=function(t){return rt[0]=t.low,rt[1]=t.high,nt[0]}):($=1023,J=Math.log2,K=Math.floor,Q=Math.pow,tt=function(){for(var t=53;t>0;t--){var e=Q(2,t)-1;if(K(J(e))+1===t)return e}return 0}(),T.doubleToLongBits=function(t){var e,n,r,i,o,s,a,u,l;if(t<0||1/t===Number.NEGATIVE_INFINITY?(s=1<<31,t=-t):s=0,0===t)return new ot(u=s,l=0);if(t===1/0)return new ot(u=2146435072|s,l=0);if(t!=t)return new ot(u=2146959360,l=0);if(i=0,l=0,(e=K(t))>1)if(e<=tt)(i=K(J(e)))<=20?(l=0,u=e<<20-i&1048575):(l=e%(n=Q(2,r=i-20))<<32-r,u=e/n&1048575);else for(r=e,l=0;0!==(r=K(n=r/2));)i++,l>>>=1,l|=(1&u)<<31,u>>>=1,n!==r&&(u|=524288);if(a=i+$,o=0===e,e=t-e,i<52&&0!==e)for(r=0;;){if((n=2*e)>=1?(e=n-1,o?(a--,o=!1):(r<<=1,r|=1,i++)):(e=n,o?0==--a&&(i++,o=!1):(r<<=1,i++)),20===i)u|=r,r=0;else if(52===i){l|=r;break}if(1===n){i<20?u|=r<<20-i:i<52&&(l|=r<<52-i);break}}return u|=a<<20,new ot(u|=s,l)},T.longBitsToDouble=function(t){var e,n,r,i,o=t.high,s=t.low,a=o&1<<31?-1:1;for(r=((2146435072&o)>>20)-$,i=0,n=1<<19,e=1;e<=20;e++)o&n&&(i+=Q(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)s&n&&(i+=Q(2,-e)),n>>>=1;if(-1023===r){if(0===i)return 0*a;r=-1022}else{if(1024===r)return 0===i?a/0:NaN;i+=1}return a*i*Q(2,r)});var at=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this,t)).name=Object.keys({RuntimeException:r})[0],e}return r}(W),ut=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,null,[{key:"constructor_",value:function(){if(0===arguments.length)at.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];at.constructor_.call(this,t)}}}]),n}(at),h=function(){function o(){d(this,o)}return p(o,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)o.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new ut("Should never reach here"+(null!==t?": "+t:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var t=arguments[0];o.isTrue(t,null)}else if(2===arguments.length){var e=arguments[1];if(!arguments[0])throw null===e?new ut:new ut(e)}}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];o.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(!r.equals(n))throw new ut("Expected "+n+" but encountered "+r+(null!==i?": "+i:""))}}}]),o}(),t=new ArrayBuffer(8),lt=new Float64Array(t),ht=new Int32Array(t),P=function(){function s(){d(this,s),s.constructor_.apply(this,arguments)}return p(s,[{key:"getM",value:function(){return T.NaN}},{key:"setOrdinate",value:function(t,e){switch(t){case s.X:this.x=e;break;case s.Y:this.y=e;break;case s.Z:this.setZ(e);break;default:throw new k("Invalid ordinate index: "+t)}}},{key:"equals2D",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!it.equalsWithTolerance(this.x,e.x,n)&&!!it.equalsWithTolerance(this.y,e.y,n)}}},{key:"setM",value:function(t){throw new k("Invalid ordinate index: "+s.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(t){switch(t){case s.X:return this.x;case s.Y:return this.y;case s.Z:return this.getZ()}throw new k("Invalid ordinate index: "+t)}},{key:"equals3D",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||T.isNaN(this.getZ())&&T.isNaN(t.getZ()))}},{key:"equals",value:function(t){return t instanceof s&&this.equals2D(t)}},{key:"equalInZ",value:function(t,e){return it.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:"setX",value:function(t){this.x=t}},{key:"compareTo",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(t){this.z=t}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return h.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+r*r)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(t){this.y=t}},{key:"distance",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*t+s.hashCode(this.x))+s.hashCode(this.y)}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:"interfaces_",get:function(){return[i,H,n]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)s.constructor_.call(this,0,0);else if(1===arguments.length){var t=arguments[0];s.constructor_.call(this,t.x,t.y,t.getZ())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];s.constructor_.call(this,e,n,s.NULL_ORDINATE)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this.x=r,this.y=i,this.z=o}}},{key:"hashCode",value:function(t){return lt[0]=t,ht[0]^ht[1]}}]),s}(),ct=function(){function i(){d(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"compare",value:function(t,e){var n=i.compare(t.x,e.x);if(0!==n)return n;var r=i.compare(t.y,e.y);return 0!==r?r:this._dimensionsToTest<=2?0:i.compare(t.getZ(),e.getZ())}},{key:"interfaces_",get:function(){return[st]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)i.constructor_.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new k("only 2 or 3 dimensions may be specified");this._dimensionsToTest=t}}},{key:"compare",value:function(t,e){return t<e?-1:t>e?1:T.isNaN(t)?T.isNaN(e)?0:-1:T.isNaN(e)?1:0}}]),i}();P.DimensionalComparator=ct,P.NULL_ORDINATE=T.NaN,P.X=0,P.Y=1,P.Z=2,P.M=3;var f=function(){function u(){d(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(t){if(!(t instanceof u))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()}},{key:"intersection",value:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new u;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny;return new u(e,this._maxx<t._maxx?this._maxx:t._maxx,n,this._maxy<t._maxy?this._maxy:t._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof P){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof u){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof u){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof P){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){if(arguments[0]instanceof P&&arguments[1]instanceof P){var n=arguments[0],r=arguments[1];return!(this.isNull()||(n.x<r.x?n.x:r.x)>this._maxx||(n.x>r.x?n.x:r.x)<this._minx||(n.y<r.y?n.y:r.y)>this._maxy||(n.y>r.y?n.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return!this.isNull()&&!(i>this._maxx||i<this._minx||o>this._maxy||o<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof P){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof u){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:"translate",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(t){return!(!this.isNull()&&!t.isNull())||t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:"expandBy",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof u){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof P){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}}},{key:"centre",value:function(){return this.isNull()?null:new P((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof u){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:"hashCode",value:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+P.hashCode(this._minx))+P.hashCode(this._maxx))+P.hashCode(this._miny))+P.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[i,n]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof P){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof u){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(i,o,s,a)}}},{key:"intersects",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(r.x,i.x),h=Math.max(r.x,i.x);return!(l>u||h<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(r.y,i.y),h=Math.max(r.y,i.y),l>u||h<a))}}}]),u}(),g=function(){function e(){d(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(t){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(t){return this===t||this.equalsExact(t,0)}},{key:"geometryChanged",value:function(){this.apply(e.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,r)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(t){if(t.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION)throw new k("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:"norm",value:function(){var t=this.copy();return t.normalize(),t}},{key:"reverse",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:"copy",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new f(this._envelope)}},{key:"setSRID",value:function(t){this._SRID=t}},{key:"setUserData",value:function(t){this._userData=t}},{key:"compare",value:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(t){return this.getClass()===t.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===e.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===e.TYPECODE_MULTIPOINT||this.getTypeCode()===e.TYPECODE_MULTILINESTRING||this.getTypeCode()===e.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[H,i,n]}},{key:"getClass",value:function(){return e}}],[{key:"hasNonEmptyElements",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}]),e}();g.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},g.TYPECODE_POINT=0,g.TYPECODE_MULTIPOINT=1,g.TYPECODE_LINESTRING=2,g.TYPECODE_LINEARRING=3,g.TYPECODE_MULTILINESTRING=4,g.TYPECODE_POLYGON=5,g.TYPECODE_MULTIPOLYGON=6,g.TYPECODE_GEOMETRYCOLLECTION=7,g.TYPENAME_POINT="Point",g.TYPENAME_MULTIPOINT="MultiPoint",g.TYPENAME_LINESTRING="LineString",g.TYPENAME_LINEARRING="LinearRing",g.TYPENAME_MULTILINESTRING="MultiLineString",g.TYPENAME_POLYGON="Polygon",g.TYPENAME_MULTIPOLYGON="MultiPolygon",g.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",g.geometryChangedFilter={get interfaces_(){return[Z]},filter:function(t){t.geometryChangedAction()}};var v=function(){function e(){d(this,e)}return p(e,null,[{key:"toLocationSymbol",value:function(t){switch(t){case e.EXTERIOR:return"e";case e.BOUNDARY:return"b";case e.INTERIOR:return"i";case e.NONE:return"-"}throw new k("Unknown location value: "+t)}}]),e}();v.INTERIOR=0,v.BOUNDARY=1,v.EXTERIOR=2,v.NONE=-1;var ft=function(){function t(){d(this,t)}return p(t,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),t}(),gt=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this,t)).name=Object.keys({NoSuchElementException:r})[0],e}return r}(W),dt=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this,t)).name=Object.keys({UnsupportedOperationException:r})[0],e}return r}(W),pt=function(t){a(n,t);var e=u(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"contains",value:function(){}}]),n}(ft),vt=function(t,e){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this)).map=new Map,t instanceof ft&&e.addAll(t),e}return p(r,[{key:"contains",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:"add",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:"addAll",value:function(t){var e,n=X(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new dt}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new yt(this.map)}},{key:e,value:function(){return this.map}}]),r}(pt,Symbol.iterator),yt=function(){function i(t){d(this,i),this.iterator=t.values();var e=this.iterator.next(),n=e.done,r=e.value;this.done=n,this.value=r}return p(i,[{key:"next",value:function(){if(this.done)throw new gt;var t=this.value,e=this.iterator.next(),n=e.done,r=e.value;return this.done=n,this.value=r,t}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new dt}}]),i}(),y=function(){function e(){d(this,e)}return p(e,null,[{key:"opposite",value:function(t){return t===e.LEFT?e.RIGHT:t===e.RIGHT?e.LEFT:t}}]),e}();y.ON=0,y.LEFT=1,y.RIGHT=2;var mt=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this,t)).name=Object.keys({EmptyStackException:r})[0],e}return r}(W),_t=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this,t)).name=Object.keys({IndexOutOfBoundsException:r})[0],e}return r}(W),xt=function(t){a(n,t);var e=u(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),n}(ft),bt=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),(t=e.call(this)).array=[],t}return p(n,[{key:"add",value:function(t){return this.array.push(t),!0}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new _t;return this.array[t]}},{key:"push",value:function(t){return this.array.push(t),t}},{key:"pop",value:function(){if(0===this.array.length)throw new mt;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new mt;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(t){return this.array.indexOf(t)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),n}(xt);function E(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var wt=function(){function e(t){d(this,e),this.str=t}return p(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),kt=function(){function e(t){d(this,e),this.value=t}return p(e,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:"compare",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"isNan",value:function(t){return Number.isNaN(t)}},{key:"valueOf",value:function(t){return new e(t)}}]),e}(),Et=function(){function t(){d(this,t)}return p(t,null,[{key:"isWhitespace",value:function(t){return t<=32&&t>=0||127===t}},{key:"toUpperCase",value:function(t){return t.toUpperCase()}}]),t}(),m=function(){function _(){d(this,_),_.constructor_.apply(this,arguments)}return p(_,[{key:"le",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:"extractSignificantDigits",value:function(t,e){var n=this.abs(),r=_.magnitude(n._hi),i=_.TEN.pow(r);(n=n.divide(i)).gt(_.TEN)?(n=n.divide(_.TEN),r+=1):n.lt(_.ONE)&&(n=n.multiply(_.TEN),r-=1);for(var o=r+1,s=new wt,a=_.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var l=Math.trunc(n._hi);if(l<0)break;var h=!1,c=0;l>9?(h=!0,c="9"):c="0"+l,s.append(c),n=n.subtract(_.valueOf(l)).multiply(_.TEN),h&&n.selfAdd(_.TEN);var f=!0,g=_.magnitude(n._hi);if(g<0&&Math.abs(g)>=a-u&&(f=!1),!f)break}return e[0]=r,s.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof _){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(t){return this.le(t)?this:t}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null,h=null,c=null;return u=this._hi/n,c=(i=(l=_.SPLIT*u)-(i=l-u))*(s=(c=_.SPLIT*n)-(s=c-n))-(h=u*n)+i*(a=n-s)+(o=u-i)*s+o*a,c=u+(l=(this._hi-h-c+this._lo-u*r)/n),this._hi=c,this._lo=u-c+l,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof _){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;return n=(o=this._hi/t._hi)-(e=(s=_.SPLIT*o)-(e=s-o)),u=e*(r=(u=_.SPLIT*t._hi)-(r=u-t._hi))-(a=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,new _(u=o+(s=(this._hi-a-u+this._lo-o*t._lo)/t._hi),o-u+s)}if("number"==typeof arguments[0]){var l=arguments[0];return T.isNaN(l)?_.createNaN():_.copy(this).selfDivide(l,0)}}},{key:"ge",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:"pow",value:function(t){if(0===t)return _.valueOf(1);var e=new _(this),n=_.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return _.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new _(t,e)}},{key:"compareTo",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}}},{key:"max",value:function(t){return this.ge(t)?this:t}},{key:"sqrt",value:function(){if(this.isZero())return _.valueOf(0);if(this.isNegative())return _.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=_.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return o=(i=this._hi+e)-(s=i-this._hi),r=(a=(o=e-s+(this._hi-o))+this._lo)+(i-(n=i+a)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],h=null,c=null,f=null,g=null,d=null,p=null,v=null;g=this._hi+u,c=this._lo+l,d=g-(p=g-this._hi),f=c-(v=c-this._lo);var y=(h=g+(p=(d=u-p+(this._hi-d))+c))+(p=(f=l-v+(this._lo-f))+(p+(g-h))),m=p+(h-y);return this._hi=y,this._lo=m,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,l=null;i=(u=_.SPLIT*this._hi)-this._hi,l=_.SPLIT*n,i=u-i,o=this._hi-i,s=l-n;var h=(u=this._hi*n)+(l=i*(s=l-s)-u+i*(a=n-s)+o*s+o*a+(this._hi*r+this._lo*n)),c=l+(i=u-h);return this._hi=h,this._lo=c,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return _.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new _(t,e)}},{key:"negate",value:function(){return this.isNaN()?this:new _(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:"multiply",value:function(){if(arguments[0]instanceof _){var t=arguments[0];return t.isNaN()?_.createNaN():_.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return T.isNaN(e)?_.createNaN():_.copy(this).selfMultiply(e,0)}}},{key:"isNaN",value:function(){return T.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var t=_.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+_.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+_.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i}},{key:"reciprocal",value:function(){var t,e,n,r,i=null,o=null,s=null,a=null;t=(n=1/this._hi)-(i=(s=_.SPLIT*n)-(i=s-n)),o=(a=_.SPLIT*this._hi)-this._hi;var u=n+(s=(1-(r=n*this._hi)-(a=i*(o=a-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new _(u,n-u+s)}},{key:"toSciNotation",value:function(){if(this.isZero())return _.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=_.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r}},{key:"abs",value:function(){return this.isNaN()?_.NaN:this.isNegative()?this.negate():new _(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:"add",value:function(){if(arguments[0]instanceof _){var t=arguments[0];return _.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.copy(this).selfAdd(e)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof _){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}}},{key:"gt",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?_.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[n,i,H]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof _){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];_.constructor_.call(this,_.parse(n))}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];return _.determinant(_.valueOf(t),_.valueOf(e),_.valueOf(n),_.valueOf(r))}if(arguments[3]instanceof _&&arguments[2]instanceof _&&arguments[0]instanceof _&&arguments[1]instanceof _){var i=arguments[1],o=arguments[2],s=arguments[3];return arguments[0].multiply(s).selfSubtract(i.multiply(o))}}},{key:"sqr",value:function(t){return _.valueOf(t).selfMultiply(t)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var t=arguments[0];return _.parse(t)}if("number"==typeof arguments[0])return new _(arguments[0])}},{key:"sqrt",value:function(t){return _.valueOf(t).sqrt()}},{key:"parse",value:function(e){for(var t=0,n=e.length;Et.isWhitespace(e.charAt(t));)t++;var r=!1;if(t<n){var i=e.charAt(t);"-"!==i&&"+"!==i||(t++,"-"===i&&(r=!0))}for(var o=new _,s=0,a=0,u=0,l=!1;!(t>=n);){var h=e.charAt(t);if(t++,Et.isDigit(h)){var c=h-"0";o.selfMultiply(_.TEN),o.selfAdd(c),s++}else{if("."!==h){if("e"===h||"E"===h){var f=e.substring(t);try{u=kt.parseInt(f)}catch(t){throw t instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+f+" in string "+e):t}break}throw new NumberFormatException("Unexpected character '"+h+"' at position "+t+" in string "+e)}a=s,l=!0}}var g=o;l||(a=s);var d=s-a-u;if(0===d)g=o;else if(d>0){var p=_.TEN.pow(d);g=o.divide(p)}else if(d<0){var v=_.TEN.pow(-d);g=o.multiply(v)}return r?g.negate():g}},{key:"createNaN",value:function(){return new _(T.NaN,T.NaN)}},{key:"copy",value:function(t){return new _(t)}},{key:"magnitude",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r}},{key:"stringOfChar",value:function(t,e){for(var n=new wt,r=0;r<e;r++)n.append(t);return n.toString()}}]),_}();m.PI=new m(3.141592653589793,12246467991473532e-32),m.TWO_PI=new m(6.283185307179586,24492935982947064e-32),m.PI_2=new m(1.5707963267948966,6123233995736766e-32),m.E=new m(2.718281828459045,14456468917292502e-32),m.NaN=new m(T.NaN,T.NaN),m.EPS=123259516440783e-46,m.SPLIT=134217729,m.MAX_PRINT_DIGITS=32,m.TEN=m.valueOf(10),m.ONE=m.valueOf(1),m.SCI_NOT_EXPONENT_CHAR="E",m.SCI_NOT_ZERO="0.0E0";var Nt=function(){function u(){d(this,u)}return p(u,null,[{key:"orientationIndex",value:function(t,e,n){var r=u.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=m.valueOf(e.x).selfAdd(-t.x),o=m.valueOf(e.y).selfAdd(-t.y),s=m.valueOf(n.x).selfAdd(-e.x),a=m.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof m&&arguments[2]instanceof m&&arguments[0]instanceof m&&arguments[1]instanceof m){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=m.valueOf(r),u=m.valueOf(i),l=m.valueOf(o),h=m.valueOf(s);return a.multiply(h).selfSubtract(u.multiply(l)).signum()}}},{key:"intersection",value:function(t,e,n,r){var i=new m(t.y).selfSubtract(e.y),o=new m(e.x).selfSubtract(t.x),s=new m(t.x).selfMultiply(e.y).selfSubtract(new m(e.x).selfMultiply(t.y)),a=new m(n.y).selfSubtract(r.y),u=new m(r.x).selfSubtract(n.x),l=new m(n.x).selfMultiply(r.y).selfSubtract(new m(r.x).selfMultiply(n.y)),h=o.multiply(l).selfSubtract(u.multiply(s)),c=a.multiply(s).selfSubtract(i.multiply(l)),f=i.multiply(u).selfSubtract(a.multiply(o)),g=h.selfDivide(f).doubleValue(),d=c.selfDivide(f).doubleValue();return T.isNaN(g)||T.isInfinite(g)||T.isNaN(d)||T.isInfinite(d)?null:new P(g,d)}},{key:"orientationIndexFilter",value:function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return u.signum(s);r=i+o}else{if(!(i<0))return u.signum(s);if(o>=0)return u.signum(s);r=-i-o}var a=u.DP_SAFE_EPSILON*r;return s>=a||-s>=a?u.signum(s):2}},{key:"signum",value:function(t){return t>0?1:t<0?-1:0}}]),u}();Nt.DP_SAFE_EPSILON=1e-15;var N=function(){function t(){d(this,t)}return p(t,[{key:"getM",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return T.NaN}},{key:"setOrdinate",value:function(t,e,n){}},{key:"getZ",value:function(t){return this.hasZ()?this.getOrdinate(t,2):T.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(t,e){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(t){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(t){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(t){}},{key:"copy",value:function(){}},{key:"getY",value:function(t){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[H]}}]),t}();N.X=0,N.Y=1,N.Z=2,N.M=3;var _=function(){function w(){d(this,w)}return p(w,null,[{key:"index",value:function(t,e,n){return Nt.orientationIndex(t,e,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var t=arguments[0],e=t.length-1;if(e<3)throw new k("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(n)&&s!==r);var a=r;do{a=(a+1)%e}while(t[a].equals2D(n)&&a!==r);var u=t[s],l=t[a];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var h=w.index(u,n,l);return 0===h?u.x>l.x:h>0}if(E(arguments[0],N)){var c=arguments[0],f=c.size()-1;if(f<3)throw new k("Ring has fewer than 4 points, so orientation cannot be determined");for(var g=c.getCoordinate(0),d=0,p=1;p<=f;p++){var v=c.getCoordinate(p);v.y>g.y&&(g=v,d=p)}var y=null,m=d;do{(m-=1)<0&&(m=f),y=c.getCoordinate(m)}while(y.equals2D(g)&&m!==d);var _=null,x=d;do{x=(x+1)%f,_=c.getCoordinate(x)}while(_.equals2D(g)&&x!==d);if(y.equals2D(g)||_.equals2D(g)||y.equals2D(_))return!1;var b=w.index(y,g,_);return 0===b?y.x>_.x:b>0}}}]),w}();_.CLOCKWISE=-1,_.RIGHT=_.CLOCKWISE,_.COUNTERCLOCKWISE=1,_.LEFT=_.COUNTERCLOCKWISE,_.COLLINEAR=0,_.STRAIGHT=_.COLLINEAR;var St=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var t=this._minDe.getEdge().getCoordinates();h.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=_.index(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===_.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===_.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=y.LEFT;return n[e].y<n[e+1].y&&(r=y.RIGHT),r}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:"findRightmostEdgeAtNode",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}h.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===y.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),t}(),It=function(t){a(i,t);var r=u(i);function i(t,e){var n;return d(this,i),(n=r.call(this,e?t+" [ "+e+" ]":t)).pt=e?new P(e):void 0,n.name=Object.keys({TopologyException:i})[0],n}return p(i,[{key:"getCoordinate",value:function(){return this.pt}}]),i}(at),Mt=function(){function t(){d(this,t),this.array=[]}return p(t,[{key:"addLast",value:function(t){this.array.push(t)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),t}(),w=function(t,e){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this)).array=[],t instanceof ft&&e.addAll(t),e}return p(r,[{key:"interfaces_",get:function(){return[xt,ft]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(t){var e,n=X(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.array.push(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"set",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:"iterator",value:function(){return new Ct(this)}},{key:"get",value:function(t){if(t<0||t>=this.size())throw new _t;return this.array[t]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(n){n?this.array.sort(function(t,e){return n.compare(t,e)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:e,value:function(){return this.array.values()}}]),r}(xt,Symbol.iterator),Ct=function(){function e(t){d(this,e),this.arrayList=t,this.position=0}return p(e,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new gt;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),e}(),Lt=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"clearVisitedEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new It("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(y.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:"create",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(y.RIGHT)>=1&&e.getDepth(y.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:"computeDepths",value:function(t){var e=new vt,n=new Mt,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}}},{key:"compareTo",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var t=new f,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env}},{key:"addReachable",value:function(t){var e=new bt;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:"copySymDepths",value:function(t){var e=t.getSym();e.setDepth(y.LEFT,t.getDepth(y.RIGHT)),e.setDepth(y.RIGHT,t.getDepth(y.LEFT))}},{key:"add",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new w,this._nodes=new w,this._rightMostCoord=null,this._env=null,this._finder=new St}}]),t}(),Tt=function(){function t(){d(this,t)}return p(t,null,[{key:"intersection",value:function(t,e,n,r){var i=t.x<e.x?t.x:e.x,o=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,a=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,c=n.y>r.y?n.y:r.y,f=((i>u?i:u)+(s<h?s:h))/2,g=((o>l?o:l)+(a<c?a:c))/2,d=t.x-f,p=t.y-g,v=e.x-f,y=e.y-g,m=n.x-f,_=n.y-g,x=r.x-f,b=r.y-g,w=p-y,k=v-d,E=d*y-v*p,N=_-b,S=x-m,I=m*b-x*_,M=w*S-N*k,C=(k*I-S*E)/M,L=(N*E-w*I)/M;return T.isNaN(C)||T.isInfinite(C)||T.isNaN(L)||T.isInfinite(L)?null:new P(C+f,L+g)}}]),t}(),l=function(){function t(){d(this,t)}return p(t,null,[{key:"arraycopy",value:function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++}},{key:"getProperty",value:function(t){return{"line.separator":"\n"}[t]}}]),t}(),Pt=function(){function n(){d(this,n)}return p(n,null,[{key:"log10",value:function(t){var e=Math.log(t);return T.isInfinite(e)||T.isNaN(e)?e:e/n.LOG_10}},{key:"min",value:function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}}},{key:"wrap",value:function(t,e){return t<0?e- -t%e:t%e}},{key:"max",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[0];return r>s&&(s=r),i>s&&(s=i),o>s&&(s=o),s}}},{key:"average",value:function(t,e){return(t+e)/2}}]),n}();Pt.LOG_10=Math.log(10);var Rt=function(){function l(){d(this,l)}return p(l,null,[{key:"segmentToSegment",value:function(t,e,n,r){if(t.equals(e))return l.pointToSegment(t,n,r);if(n.equals(r))return l.pointToSegment(r,t,e);var i=!1;if(f.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(u<0||u>1||a<0||a>1)&&(i=!0)}}else i=!0;return i?Pt.min(l.pointToSegment(t,n,r),l.pointToSegment(e,n,r),l.pointToSegment(n,t,e),l.pointToSegment(r,t,e)):0}},{key:"pointToSegment",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;if(i<=0)return t.distance(e);if(i>=1)return t.distance(n);var o=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(o)*Math.sqrt(r)}},{key:"pointToLinePerpendicular",value:function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)}},{key:"pointToSegmentString",value:function(t,e){if(0===e.length)throw new k("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=l.pointToSegment(t,e[r],e[r+1]);i<n&&(n=i)}return n}}]),l}(),Ot=function(){function t(){d(this,t)}return p(t,[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||E(arguments[0],N);else if(2===arguments.length);else if(3===arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}]),t}(),At=function(){function t(){d(this,t)}return p(t,[{key:"filter",value:function(t){}}]),t}(),Dt=function(){function t(){d(this,t)}return p(t,null,[{key:"ofLine",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new P;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,l=a-i,h=u-o;n+=Math.sqrt(l*l+h*h),i=a,o=u}return n}}]),t}(),Ft=function t(){d(this,t)},Bt=function(){function g(){d(this,g)}return p(g,null,[{key:"copyCoord",value:function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))}},{key:"isRing",value:function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,N.X)===t.getOrdinate(e-1,N.X)&&t.getOrdinate(0,N.Y)===t.getOrdinate(e-1,N.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(E(arguments[0],N)&&Number.isInteger(arguments[1])){var t=arguments[0],e=arguments[1];g.scroll(t,e,g.isRing(t))}else if(E(arguments[0],N)&&arguments[1]instanceof P){var n=arguments[0],r=arguments[1],i=g.indexOf(r,n);if(i<=0)return null;g.scroll(n,i)}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s<=0)return null;for(var u=o.copy(),l=a?o.size()-1:o.size(),h=0;h<l;h++)for(var c=0;c<o.getDimension();c++)o.setOrdinate(h,c,u.getOrdinate((s+h)%l,c));if(a)for(var f=0;f<o.getDimension();f++)o.setOrdinate(l,f,o.getOrdinate(0,f))}}},{key:"isEqual",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var s=t.getOrdinate(i,o),a=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||T.isNaN(s)&&T.isNaN(a)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var t=arguments[0];return g.minCoordinateIndex(t,0,t.size()-1)}if(3===arguments.length){for(var e=arguments[0],n=arguments[2],r=-1,i=null,o=arguments[1];o<=n;o++){var s=e.getCoordinate(o);(null===i||i.compareTo(s)>0)&&(i=s,r=o)}return r}}},{key:"extend",value:function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(g.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)g.copy(e,i-1,r,o,1);return r}},{key:"reverse",value:function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)g.swap(t,r,e-r)}},{key:"swap",value:function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}}},{key:"copy",value:function(t,e,n,r,i){for(var o=0;o<i;o++)g.copyCoord(t,e+o,n,r+o)}},{key:"ensureValidRing",value:function(t,e){var n=e.size();return 0===n?e:n<=3?g.createClosedRing(t,e,4):e.getOrdinate(0,N.X)===e.getOrdinate(n-1,N.X)&&e.getOrdinate(0,N.Y)===e.getOrdinate(n-1,N.Y)?e:g.createClosedRing(t,e,n+1)}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,N.X)&&t.y===e.getOrdinate(n,N.Y))return n;return-1}},{key:"createClosedRing",value:function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();g.copy(e,0,r,0,i);for(var o=i;o<n;o++)g.copy(e,0,r,o,1);return r}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.size();n++){var r=t.getCoordinate(n);(null===e||e.compareTo(r)>0)&&(e=r)}return e}}]),g}(),S=function(){function e(){d(this,e)}return p(e,null,[{key:"toDimensionSymbol",value:function(t){switch(t){case e.FALSE:return e.SYM_FALSE;case e.TRUE:return e.SYM_TRUE;case e.DONTCARE:return e.SYM_DONTCARE;case e.P:return e.SYM_P;case e.L:return e.SYM_L;case e.A:return e.SYM_A}throw new k("Unknown dimension value: "+t)}},{key:"toDimensionValue",value:function(t){switch(Et.toUpperCase(t)){case e.SYM_FALSE:return e.FALSE;case e.SYM_TRUE:return e.TRUE;case e.SYM_DONTCARE:return e.DONTCARE;case e.SYM_P:return e.P;case e.SYM_L:return e.L;case e.SYM_A:return e.A}throw new k("Unknown dimension symbol: "+t)}}]),e}();S.P=0,S.L=1,S.A=2,S.FALSE=-1,S.TRUE=-2,S.DONTCARE=-3,S.SYM_FALSE="F",S.SYM_TRUE="T",S.SYM_DONTCARE="*",S.SYM_P="0",S.SYM_L="1",S.SYM_A="2";var zt=function(){function t(){d(this,t)}return p(t,[{key:"filter",value:function(t){}}]),t}(),Vt=function(){function t(){d(this,t)}return p(t,[{key:"filter",value:function(t,e){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),t}(),qt=function(t){a(i,t);var e=u(i);function i(){var t;return d(this,i),t=e.call(this),i.constructor_.apply(r(t),arguments),t}return p(i,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new f:this._points.expandEnvelope(new f)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new i(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof g){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0}return b(x(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();Bt.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?S.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var t=this._points.copy();return Bt.reverse(t),this.getFactory().createLineString(t)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return g.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return Dt.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}}},{key:"apply",value:function(){if(E(arguments[0],At))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(E(arguments[0],Vt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(E(arguments[0],zt)||E(arguments[0],Z))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new dt}},{key:"isEquivalentClass",value:function(t){return t instanceof i}},{key:"getCoordinateN",value:function(t){return this._points.getCoordinate(t)}},{key:"getGeometryType",value:function(){return g.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new k("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t}},{key:"isCoordinate",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:"interfaces_",get:function(){return[Ft]}}],[{key:"constructor_",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];g.constructor_.call(this,e),this.init(t)}}}]),i}(g),Gt=function t(){d(this,t)},Ut=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new f;var t=new f;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new n(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof g){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return b(x(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return S.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return g.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:"apply",value:function(){if(E(arguments[0],At)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(E(arguments[0],Vt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(E(arguments[0],zt)||E(arguments[0],Z))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return g.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),h.isTrue(t.size()<=1),this._coordinates=t}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Gt]}}],[{key:"constructor_",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];g.constructor_.call(this,e),this.init(t)}}]),n}(g),Yt=function(){function n(){d(this,n)}return p(n,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];return Math.abs(n.ofRingSigned(t))}if(E(arguments[0],N)){var e=arguments[0];return Math.abs(n.ofRingSigned(e))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(E(arguments[0],N)){var s=arguments[0],a=s.size();if(a<3)return 0;var u=new P,l=new P,h=new P;s.getCoordinate(0,l),s.getCoordinate(1,h);var c=l.x;h.x-=c;for(var f=0,g=1;g<a-1;g++)u.y=l.y,l.x=h.x,l.y=h.y,s.getCoordinate(g+1,h),h.x-=c,f+=l.x*(u.y-h.y);return f/2}}}]),n}(),jt=function(){function t(){d(this,t)}return p(t,null,[{key:"sort",value:function(){var n=arguments,t=arguments[0];if(1===arguments.length)t.sort(function(t,e){return t.compareTo(e)});else if(2===arguments.length)t.sort(function(t,e){return n[1].compare(t,e)});else if(3===arguments.length){var e=t.slice(arguments[1],arguments[2]);e.sort();var r=t.slice(0,arguments[1]).concat(e,t.slice(arguments[2],t.length));t.splice(0,t.length);var i,o=X(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(s)}}catch(n){o.e(n)}finally{o.f()}}else if(4===arguments.length){var a=t.slice(arguments[1],arguments[2]);a.sort(function(t,e){return n[3].compare(t,e)});var u=t.slice(0,arguments[1]).concat(a,t.slice(arguments[2],t.length));t.splice(0,t.length);var l,h=X(u);try{for(h.s();!(l=h.n()).done;){var c=l.value;t.push(c)}}catch(n){h.e(n)}finally{h.f()}}}},{key:"asList",value:function(t){var e,n=new w,r=X(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.add(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"copyOf",value:function(t,e){return t.slice(0,e)}}]),t}(),Xt=function t(){d(this,t)},Wt=function(t){a(s,t);var e=u(s);function s(){var t;return d(this,s),t=e.call(this),s.constructor_.apply(r(t),arguments),t}return p(s,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t}},{key:"getArea",value:function(){var t=0;t+=Yt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Yt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:"copyInternal",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new s(t,e,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),l=t.getY(a);if(u!==o==(l!==s))return!1;o=u,s=l}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof g){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,i=n._shell;if(!r.equalsExact(i,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],e))return!1;return!0}return b(x(s.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);jt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=e.getCoordinateSequence(),i=Bt.minCoordinateIndex(r,0,r.size()-2);Bt.scroll(r,i,!0),_.isCCW(r)===n&&Bt.reverse(r)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:"getTypeCode",value:function(){return g.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,s=i._shell,a=o.compareToSameClass(s,r);if(0!==a)return a;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),h=0;h<u&&h<l;){var c=this.getInteriorRingN(h),f=i.getInteriorRingN(h),g=c.compareToSameClass(f,r);if(0!==g)return g;h++}return h<u?1:h<l?-1:0}}},{key:"apply",value:function(){if(E(arguments[0],At)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(E(arguments[0],Vt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(E(arguments[0],zt))arguments[0].filter(this);else if(E(arguments[0],Z)){var i=arguments[0];i.filter(this),this._shell.apply(i);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(i)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:"getGeometryType",value:function(){return g.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(t){return this._holes[t]}},{key:"interfaces_",get:function(){return[Xt]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(g.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),g.hasNullElements(e))throw new k("holes must not contain null elements");if(t.isEmpty()&&g.hasNonEmptyElements(e))throw new k("shell is empty but holes are not");this._shell=t,this._holes=e}}]),s}(g),Zt=function(t){a(n,t);var e=u(n);function n(){return d(this,n),e.apply(this,arguments)}return n}(pt),Ht=function(t){a(r,t);var n=u(r);function r(t){var e;return d(this,r),(e=n.call(this)).array=[],t instanceof ft&&e.addAll(t),e}return p(r,[{key:"contains",value:function(t){var e,n=X(this.array);try{for(n.s();!(e=n.n()).done;)if(0===e.value.compareTo(t))return!0}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"add",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++)if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t);return this.array.push(t),!0}},{key:"addAll",value:function(t){var e,n=X(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new dt}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new $t(this.array)}}]),r}(Zt),$t=function(){function e(t){d(this,e),this.array=t,this.position=0}return p(e,[{key:"next",value:function(){if(this.position===this.array.length)throw new gt;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new dt}}]),e}(),I=function(t){a(i,t);var e=u(i);function i(){var t;return d(this,i),t=e.call(this),i.constructor_.apply(r(t),arguments),t}return p(i,[{key:"computeEnvelopeInternal",value:function(){for(var t=new f,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:"getGeometryN",value:function(t){return this._geometries[t]}},{key:"getCoordinates",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t}},{key:"getArea",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new i(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof g){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0}return b(x(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();jt.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var t=S.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:"reverseInternal",value:function(){for(var t=this._geometries.length,e=new w(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:"getTypeCode",value:function(){return g.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var t=S.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:"getLength",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:"getNumPoints",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var t=arguments[0],e=new Ht(jt.asList(this._geometries)),n=new Ht(jt.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),s=i.getNumGeometries(),a=0;a<o&&a<s;){var u=this.getGeometryN(a),l=i.getGeometryN(a),h=u.compareToSameClass(l,r);if(0!==h)return h;a++}return a<o?1:a<s?-1:0}}},{key:"apply",value:function(){if(E(arguments[0],At))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(E(arguments[0],Vt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(E(arguments[0],zt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(E(arguments[0],Z)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}}},{key:"getBoundary",value:function(){return g.checkNotGeometryCollection(this),h.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return g.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];if(g.constructor_.call(this,e),null===t&&(t=[]),g.hasNullElements(t))throw new k("geometries must not contain null elements");this._geometries=t}}}]),i}(g),Jt=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof g){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&b(x(n.prototype),"equalsExact",this).call(this,t,e)}return b(x(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return b(x(n.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return S.FALSE}},{key:"getTypeCode",value:function(){return g.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return g.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Gt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];I.constructor_.call(this,t,e)}}]),n}(I),Kt=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"copyInternal",value:function(){return new n(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return S.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||b(x(n.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var t=this._points.copy();return Bt.reverse(t),this.getFactory().createLinearRing(t)}},{key:"getTypeCode",value:function(){return g.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!b(x(n.prototype),"isClosed",this).call(this))throw new k("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<n.MINIMUM_VALID_SIZE)throw new k("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return g.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];qt.constructor_.call(this,t,e),this.validateConstruction()}}]),n}(qt);Kt.MINIMUM_VALID_SIZE=4;var Qt=function(t){a(i,t);var e=u(i);function i(){var t;return d(this,i),t=e.call(this),i.constructor_.apply(r(t),arguments),t}return p(i,[{key:"setOrdinate",value:function(t,e){switch(t){case i.X:this.x=e;break;case i.Y:this.y=e;break;default:throw new k("Invalid ordinate index: "+t)}}},{key:"getZ",value:function(){return P.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y}throw new k("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new k("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)P.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof i){var t=arguments[0];P.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof P){var e=arguments[0];P.constructor_.call(this,e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];P.constructor_.call(this,n,r,P.NULL_ORDINATE)}}}]),i}(P);Qt.X=0,Qt.Y=1,Qt.Z=-1,Qt.M=-1;var te=function(t){a(o,t);var e=u(o);function o(){var t;return d(this,o),t=e.call(this),o.constructor_.apply(r(t),arguments),t}return p(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case o.X:this.x=e;break;case o.Y:this.y=e;break;case o.M:this._m=e;break;default:throw new k("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getZ",value:function(){return P.NULL_ORDINATE}},{key:"getOrdinate",value:function(t){switch(t){case o.X:return this.x;case o.Y:return this.y;case o.M:return this._m}throw new k("Invalid ordinate index: "+t)}},{key:"setZ",value:function(t){throw new k("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)P.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var t=arguments[0];P.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof P){var e=arguments[0];P.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];P.constructor_.call(this,n,r,P.NULL_ORDINATE),this._m=i}}}]),o}(P);te.X=0,te.Y=1,te.Z=-1,te.M=2;var ee=function(t){a(s,t);var e=u(s);function s(){var t;return d(this,s),t=e.call(this),s.constructor_.apply(r(t),arguments),t}return p(s,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(t,e){switch(t){case P.X:this.x=e;break;case P.Y:this.y=e;break;case P.Z:this.z=e;break;case P.M:this._m=e;break;default:throw new k("Invalid ordinate index: "+t)}}},{key:"setM",value:function(t){this._m=t}},{key:"getOrdinate",value:function(t){switch(t){case P.X:return this.x;case P.Y:return this.y;case P.Z:return this.getZ();case P.M:return this.getM()}throw new k("Invalid ordinate index: "+t)}},{key:"copy",value:function(){return new s(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)P.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof s){var t=arguments[0];P.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof P){var e=arguments[0];P.constructor_.call(this,e),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];P.constructor_.call(this,n,r,i),this._m=o}}}]),s}(P),ne=function(){function r(){d(this,r)}return p(r,null,[{key:"measures",value:function(t){return t instanceof Qt?0:t instanceof te||t instanceof ee?1:0}},{key:"dimension",value:function(t){return t instanceof Qt?2:t instanceof te?3:t instanceof ee?4:3}},{key:"create",value:function(){if(1===arguments.length){var t=arguments[0];return r.create(t,0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return 2===e?new Qt:3===e&&0===n?new P:3===e&&1===n?new te:4===e&&1===n?new ee:new P}}}]),r}(),re=function(t){a(_,t);var e=u(_);function _(){var t;return d(this,_),t=e.call(this),_.constructor_.apply(r(t),arguments),t}return p(_,[{key:"getCoordinate",value:function(t){return this.get(t)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&E(arguments[0],ft)){for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return b(x(_.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var t=b(x(_.prototype),"clone",this).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(_.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(_.coordArrayType);for(var t=this.size(),e=new Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];return b(x(_.prototype),"add",this).call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof P&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;b(x(_.prototype),"add",this).call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],a);else for(var l=s.length-1;l>=0;l--)this.add(s[l],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof P){var h=arguments[0],c=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(c))return null;if(h<f&&this.get(h).equals2D(c))return null}}b(x(_.prototype),"add",this).call(this,h,c)}}else if(4===arguments.length){var g=arguments[0],d=arguments[1],p=arguments[2],v=arguments[3],y=1;p>v&&(y=-1);for(var m=p;m!==v;m+=y)this.add(g[m],d);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}]),_}(w);re.coordArrayType=new Array(0).fill(null);var M=function(){function i(){d(this,i)}return p(i,null,[{key:"isRing",value:function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))}},{key:"ptNotInList",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(i.indexOf(r,e)<0)return r}return null}},{key:"scroll",value:function(t,e){var n=i.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);l.arraycopy(t,n,r,0,t.length-n),l.arraycopy(t,0,r,t.length-n,n),l.arraycopy(r,0,t,0,t.length)}},{key:"equals",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}}},{key:"intersection",value:function(t,e){for(var n=new re,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()}},{key:"measures",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,r=X(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n=Math.max(n,ne.measures(i))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"hasRepeatedPoints",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(t){return i.hasRepeatedPoints(t)?new re(t,!1).toCoordinateArray():t}},{key:"reverse",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}}},{key:"removeNull",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=r[i+u].copy()}},{key:"isEqualReversed",value:function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0}},{key:"envelope",value:function(t){for(var e=new f,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:"toCoordinateArray",value:function(t){return t.toArray(i.coordArrayType)}},{key:"dimension",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,r=X(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n=Math.max(n,ne.dimension(i))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(t,e){return e.length>=t?e:[]}},{key:"indexOf",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:"increasingDirection",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1}},{key:"compare",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0}},{key:"minCoordinate",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:"extract",value:function(t,e,n){e=Pt.clamp(e,0,t.length);var r=(n=Pt.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i}}]),i}(),ie=function(){function t(){d(this,t)}return p(t,[{key:"compare",value:function(t,e){var n=t,r=e;return M.compare(n,r)}},{key:"interfaces_",get:function(){return[st]}}]),t}(),oe=function(){function t(){d(this,t)}return p(t,[{key:"compare",value:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=M.compare(n,r);return M.isEqualReversed(n,r)?0:i}},{key:"OLDcompare",value:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=M.increasingDirection(n),o=M.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(r[a]);if(0!==l)return l;s+=i,a+=o}return 0}},{key:"interfaces_",get:function(){return[st]}}]),t}();M.ForwardComparator=ie,M.BidirectionalComparator=oe,M.coordArrayType=new Array(0).fill(null);var se=function(){function e(t){d(this,e),this.str=t}return p(e,[{key:"append",value:function(t){this.str+=t}},{key:"setCharAt",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:"toString",value:function(){return this.str}}]),e}(),ae=function(){function y(){d(this,y),y.constructor_.apply(this,arguments)}return p(y,[{key:"getM",value:function(t){return this.hasM()?this._coordinates[t].getM():T.NaN}},{key:"setOrdinate",value:function(t,e,n){switch(e){case N.X:this._coordinates[t].x=n;break;case N.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:"getZ",value:function(t){return this.hasZ()?this._coordinates[t].getZ():T.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(t,e){switch(e){case N.X:return this._coordinates[t].x;case N.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:"getCoordinate",value:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:"getCoordinateCopy",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:"createCoordinate",value:function(){return ne.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(t){return this._coordinates[t].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:"copy",value:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[e]),t[e]=n}return new y(t,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var t=new se(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"}},{key:"getY",value:function(t){return this._coordinates[t].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[N,n]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];y.constructor_.call(this,t,M.dimension(t),M.measures(t))}else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this._coordinates[n]=new P}else if(E(arguments[0],N)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];y.constructor_.call(this,o,s,M.measures(o))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var l=0;l<a;l++)this._coordinates[l]=ne.create(u)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var h=arguments[0],c=arguments[1],f=arguments[2];this._dimension=c,this._measures=f,this._coordinates=null===h?new Array(0).fill(null):h}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var g=arguments[0],d=arguments[1],p=arguments[2];this._coordinates=new Array(g).fill(null),this._dimension=d,this._measures=p;for(var v=0;v<g;v++)this._coordinates[v]=this.createCoordinate()}}}]),y}(),ue=function(){function t(){d(this,t)}return p(t,[{key:"readResolve",value:function(){return t.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ae(arguments[0]);if(E(arguments[0],N))return new ae(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new ae(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new ae(arguments[0],n+e,e)}}}},{key:"interfaces_",get:function(){return[Ot,n]}}],[{key:"instance",value:function(){return t.instanceObject}}]),t}();ue.instanceObject=new ue;var le=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof g){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&b(x(n.prototype),"equalsExact",this).call(this,t,e)}return b(x(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return g.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new w,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))}},{key:"getGeometryType",value:function(){return g.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Xt]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];I.constructor_.call(this,t,e)}}]),n}(I),he=function(){function t(){d(this,t)}return p(t,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),t}(),ce=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),(t=e.call(this)).map=new Map,t}return p(n,[{key:"get",value:function(t){return this.map.get(t)||null}},{key:"put",value:function(t,e){return this.map.set(t,e),e}},{key:"values",value:function(){for(var t=new w,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:"entrySet",value:function(){var e=new vt;return this.map.entries().forEach(function(t){return e.add(t)}),e}},{key:"size",value:function(){return this.map.size()}}]),n}(he),fe=function(){function r(){d(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"equals",value:function(t){if(!(t instanceof r))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale}},{key:"compareTo",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return kt.compare(n,r)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===r.FLOATING||this._modelType===r.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var t="UNKNOWN";return this._modelType===r.FLOATING?t="Floating":this._modelType===r.FLOATING_SINGLE?t="Floating-Single":this._modelType===r.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var t=arguments[0];return T.isNaN(t)||this._modelType===r.FLOATING_SINGLE?t:this._modelType===r.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof P){var e=arguments[0];if(this._modelType===r.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}}},{key:"getMaximumSignificantDigits",value:function(){var t=16;return this._modelType===r.FLOATING?t=16:this._modelType===r.FLOATING_SINGLE?t=6:this._modelType===r.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t}},{key:"setScale",value:function(t){this._scale=Math.abs(t)}},{key:"interfaces_",get:function(){return[n,i]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=r.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var t=arguments[0];this._modelType=t,t===r.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this._modelType=r.FIXED,this.setScale(e)}else if(arguments[0]instanceof r){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},{key:"mostPrecise",value:function(t,e){return t.compareTo(e)>=0?t:e}}]),r}(),ge=function(){function e(){d(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"readResolve",value:function(){return e.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[n]}}],[{key:"constructor_",value:function(){this._name=null;var t=arguments[0];this._name=t,e.nameToTypeMap.put(t,this)}}]),e}();ge.nameToTypeMap=new ce,fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE"),fe.maximumPreciseValue=9007199254740992;var de=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"copyInternal",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof g){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&b(x(n.prototype),"equalsExact",this).call(this,t,e)}return b(x(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?S.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return g.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new dt}},{key:"getGeometryType",value:function(){return g.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[Ft]}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];I.constructor_.call(this,t,e)}}]),n}(I),pe=function(){function u(){d(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"createEmpty",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new k("Invalid dimension: "+t)}}},{key:"toGeometry",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new P(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new P(t.getMinX(),t.getMinY()),new P(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new P(t.getMinX(),t.getMinY()),new P(t.getMinX(),t.getMaxY()),new P(t.getMaxX(),t.getMaxY()),new P(t.getMaxX(),t.getMinY()),new P(t.getMinX(),t.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(E(arguments[0],N))return new qt(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new de(null,this):1===arguments.length?new de(arguments[0],this):void 0}},{key:"buildGeometry",value:function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getTypeCode();null===e&&(e=s),s!==e&&(n=!0),o instanceof I&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(u.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Wt)return this.createMultiPolygon(u.toPolygonArray(t));if(a instanceof qt)return this.createMultiLineString(u.toLineStringArray(t));if(a instanceof Ut)return this.createMultiPoint(u.toPointArray(t));h.shouldNeverReachHere("Unhandled geometry type: "+a.getGeometryType())}return a}},{key:"createMultiPointFromCoords",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof P){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(E(arguments[0],N))return new Ut(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(E(arguments[0],N)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Kt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Wt(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new I(null,this):1===arguments.length?new I(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(E(arguments[0],N))return new Kt(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new le(null,this):1===arguments.length?new le(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Jt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Jt(arguments[0],this);if(E(arguments[0],N)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());Bt.copy(t,n,r,0,1),e[n]=this.createPoint(r)}return this.createMultiPoint(e)}}}},{key:"interfaces_",get:function(){return[n]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)u.constructor_.call(this,new fe,0);else if(1===arguments.length){if(E(arguments[0],Ot)){var t=arguments[0];u.constructor_.call(this,new fe,0,t)}else if(arguments[0]instanceof fe){var e=arguments[0];u.constructor_.call(this,e,0,u.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];u.constructor_.call(this,n,r,u.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._precisionModel=i,this._coordinateSequenceFactory=s,this._SRID=o}}},{key:"toMultiPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toGeometryArray",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return ue.instance()}},{key:"toMultiLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLineStringArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toMultiPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toLinearRingArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPointArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"toPolygonArray",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:"createPointFromInternalCoord",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}]),u}(),ve="XY",ye="XYZ",me="XYM",_e="XYZM",xe={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},be="EMPTY",we=1,ke=2,Ee=3,Ne=4,Se=5,Ie=6;for(var Me in xe)xe[Me].toUpperCase();var Ce=function(){function e(t){d(this,e),this.wkt=t,this.index_=-1}return p(e,[{key:"isAlpha_",value:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}},{key:"isNumeric_",value:function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)}},{key:"isWhiteSpace_",value:function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var t,e=this.nextChar_(),n=this.index_,r=e;if("("==e)t=ke;else if(","==e)t=Se;else if(")"==e)t=Ee;else if(this.isNumeric_(e)||"-"==e)t=Ne,r=this.readNumber_();else if(this.isAlpha_(e))t=we,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=Ie}return{position:n,value:r,type:t}}},{key:"readNumber_",value:function(){var t,e=this.index_,n=!1,r=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:"readText_",value:function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}]),e}(),Le=function(){function n(t,e){d(this,n),this.lexer_=t,this.token_,this.layout_=ve,this.factory=e}return p(n,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(t){return this.token_.type==t}},{key:"match",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var t=ve,e=this.token_;if(this.isTokenType(we)){var n=e.value;"Z"===n?t=ye:"M"===n?t=me:"ZM"===n&&(t=_e),t!==ve&&this.consume_()}return t}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(ke)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(Se));if(this.match(Ee))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(ke)){var t=this.parsePoint_();if(this.match(Ee))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(ke)){var t=this.parsePointList_();if(this.match(Ee))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(ke)){var t=this.parseLineStringTextList_();if(this.match(Ee))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var t;if(this.match(ke)){if(t=this.token_.type==ke?this.parsePointTextList_():this.parsePointList_(),this.match(Ee))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(ke)){var t=this.parseLineStringTextList_();if(this.match(Ee))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(ke)){var t=this.parsePolygonTextList_();if(this.match(Ee))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var r=this.token_;if(!this.match(Ne))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var t=[this.parsePoint_()];this.match(Se);)t.push(this.parsePoint_());return t}},{key:"parsePointTextList_",value:function(){for(var t=[this.parsePointText_()];this.match(Se);)t.push(this.parsePointText_());return t}},{key:"parseLineStringTextList_",value:function(){for(var t=[this.parseLineStringText_()];this.match(Se);)t.push(this.parseLineStringText_());return t}},{key:"parsePolygonTextList_",value:function(){for(var t=[this.parsePolygonText_()];this.match(Se);)t.push(this.parsePolygonText_());return t}},{key:"isEmptyGeometry_",value:function(){var t=this.isTokenType(we)&&this.token_.value==be;return t&&this.consume_(),t}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var n=this.factory,r=function(t){return q(P,U(t))},t=function(t){var e=t.map(function(t){return n.createLinearRing(t.map(r))});return e.length>1?n.createPolygon(e[0],e.slice(1)):n.createPolygon(e[0])},e=this.token_;if(this.match(we)){var i=e.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==i){var o=this.parseGeometryCollectionText_();return n.createGeometryCollection(o)}switch(i){case"POINT":var s=this.parsePointText_();return s?n.createPoint(q(P,U(s))):n.createPoint();case"LINESTRING":var a=this.parseLineStringText_().map(r);return n.createLineString(a);case"LINEARRING":var u=this.parseLineStringText_().map(r);return n.createLinearRing(u);case"POLYGON":var l=this.parsePolygonText_();return l&&0!==l.length?t(l):n.createPolygon();case"MULTIPOINT":var h=this.parseMultiPointText_();if(!h||0===h.length)return n.createMultiPoint();var c=h.map(r).map(function(t){return n.createPoint(t)});return n.createMultiPoint(c);case"MULTILINESTRING":var f=this.parseMultiLineStringText_().map(function(t){return n.createLineString(t.map(r))});return n.createMultiLineString(f);case"MULTIPOLYGON":var g=this.parseMultiPolygonText_();if(!g||0===g.length)return n.createMultiPolygon();var d=g.map(t);return n.createMultiPolygon(d);default:throw new Error("Invalid geometry type: "+i)}}throw new Error(this.formatErrorMessage_())}}]),n}();function Te(t){if(t.isEmpty())return"";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(" ")}function Pe(t){for(var e=t.getCoordinates().map(function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e}),n=[],r=0,i=e.length;r<i;++r)n.push(e[r].join(" "));return n.join(", ")}function Re(t){var e=[];e.push("("+Pe(t.getExteriorRing())+")");for(var n=0,r=t.getNumInteriorRing();n<r;++n)e.push("("+Pe(t.getInteriorRingN(n))+")");return e.join(", ")}var Oe={Point:Te,LineString:Pe,LinearRing:Pe,Polygon:Re,MultiPoint:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push("("+Te(t.getGeometryN(n))+")");return e.join(", ")},MultiLineString:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push("("+Pe(t.getGeometryN(n))+")");return e.join(", ")},MultiPolygon:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push("("+Re(t.getGeometryN(n))+")");return e.join(", ")},GeometryCollection:function(t){for(var e=[],n=0,r=t.getNumGeometries();n<r;++n)e.push(Ae(t.getGeometryN(n)));return e.join(", ")}};function Ae(t){var e=t.getGeometryType(),n=Oe[e];e=e.toUpperCase();var r=function(t){var e="";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+="Z"),void 0===n.m||Number.isNaN(n.m)||(e+="M"),e}(t);return r.length>0&&(e+=" "+r),t.isEmpty()?e+" "+be:e+" ("+n(t)+")"}var De=function(){function e(t){d(this,e),this.geometryFactory=t||new pe,this.precisionModel=this.geometryFactory.getPrecisionModel()}return p(e,[{key:"read",value:function(t){var e=new Ce(t);return new Le(e,this.geometryFactory).parse()}},{key:"write",value:function(t){return Ae(t)}}]),e}(),Fe=function(){function e(t){d(this,e),this.parser=new De(t)}return p(e,[{key:"write",value:function(t){return this.parser.write(t)}}],[{key:"toLineString",value:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}]),e}(),C=function(){function n(){d(this,n),n.constructor_.apply(this,arguments)}return p(n,[{key:"getIndexAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:"getTopologySummary",value:function(){var t=new se;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()}},{key:"computeIntersection",value:function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:"getIntersection",value:function(t){return this._intPt[t]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==n.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(t,e){return n.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])}},{key:"isCollinear",value:function(){return this._result===n.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Fe.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Fe.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(t,e){return this._inputLines[t][e]}},{key:"isIntersection",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new P,this._intPt[1]=new P,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r>i?s:a)||t.equals(e)||(o=Math.max(s,a))}return h.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return h.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o}}]),n}();C.DONT_INTERSECT=0,C.DO_INTERSECT=1,C.COLLINEAR=2,C.NO_INTERSECTION=0,C.POINT_INTERSECTION=1,C.COLLINEAR_INTERSECTION=2;var Be=function(t){a(o,t);var e=u(o);function o(){return d(this,o),e.call(this)}return p(o,[{key:"isInSegmentEnvelopes",value:function(t){var e=new f(this._inputLines[0][0],this._inputLines[0][1]),n=new f(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return b(x(o.prototype),"computeIntersection",this).apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,f.intersects(e,n,t)&&0===_.index(e,n,t)&&0===_.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=C.POINT_INTERSECTION,null;this._result=C.NO_INTERSECTION}},{key:"intersection",value:function(t,e,n,r){var i=this.intersectionSafe(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new P(o.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}},{key:"checkDD",value:function(t,e,n,r,i){var o=Nt.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);l.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&l.out.println("Distance = "+i.distance(o))}},{key:"intersectionSafe",value:function(t,e,n,r){var i=Tt.intersection(t,e,n,r);return null===i&&(i=o.nearestEndpoint(t,e,n,r)),i}},{key:"computeCollinearIntersection",value:function(t,e,n,r){var i=f.intersects(t,e,n),o=f.intersects(t,e,r),s=f.intersects(n,r,t),a=f.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,C.COLLINEAR_INTERSECTION):s&&a?(this._intPt[0]=t,this._intPt[1]=e,C.COLLINEAR_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?C.COLLINEAR_INTERSECTION:C.POINT_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?C.COLLINEAR_INTERSECTION:C.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?C.COLLINEAR_INTERSECTION:C.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?C.COLLINEAR_INTERSECTION:C.POINT_INTERSECTION):C.NO_INTERSECTION}},{key:"computeIntersect",value:function(t,e,n,r){if(this._isProper=!1,!f.intersects(t,e,n,r))return C.NO_INTERSECTION;var i=_.index(t,e,n),o=_.index(t,e,r);if(i>0&&o>0||i<0&&o<0)return C.NO_INTERSECTION;var s=_.index(n,r,t),a=_.index(n,r,e);return s>0&&a>0||s<0&&a<0?C.NO_INTERSECTION:0===i&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new P(n):0===o?this._intPt[0]=new P(r):0===s?this._intPt[0]=new P(t):0===a&&(this._intPt[0]=new P(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),C.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(t,e,n,r){var i=t,o=Rt.pointToSegment(t,n,r),s=Rt.pointToSegment(e,n,r);return s<o&&(o=s,i=e),(s=Rt.pointToSegment(n,t,e))<o&&(o=s,i=n),(s=Rt.pointToSegment(r,t,e))<o&&(o=s,i=r),i}}]),o}(C),ze=function(){function h(){d(this,h),h.constructor_.apply(this,arguments)}return p(h,[{key:"countSegment",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=_.index(t,e,this._p);if(i===_.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(i=-i),i===_.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==v.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?v.BOUNDARY:this._crossingCount%2==1?v.INTERIOR:v.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof P&&E(arguments[1],N)){for(var t=arguments[1],e=new h(arguments[0]),n=new P,r=new P,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof P&&arguments[1]instanceof Array){for(var o=arguments[1],s=new h(arguments[0]),a=1;a<o.length;a++){var u=o[a],l=o[a-1];if(s.countSegment(u,l),s.isOnSegment())return s.getLocation()}return s.getLocation()}}}]),h}(),Ve=function(){function n(){d(this,n)}return p(n,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof P&&E(arguments[1],N)){for(var t=arguments[0],e=arguments[1],n=new Be,r=new P,i=new P,o=e.size(),s=1;s<o;s++)if(e.getCoordinate(s-1,r),e.getCoordinate(s,i),n.computeIntersection(t,r,i),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof P&&arguments[1]instanceof Array){for(var a=arguments[0],u=arguments[1],l=new Be,h=1;h<u.length;h++){var c=u[h-1],f=u[h];if(l.computeIntersection(a,c,f),l.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(t,e){return ze.locatePointInRing(t,e)}},{key:"isInRing",value:function(t,e){return n.locateInRing(t,e)!==v.EXTERIOR}}]),n}(),L=function(){function a(){d(this,a),a.constructor_.apply(this,arguments)}return p(a,[{key:"setAllLocations",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:"isNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==v.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===v.NONE&&(this.location[e]=t)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[y.ON]=this.location[y.ON],e[y.LEFT]=v.NONE,e[y.RIGHT]=v.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===v.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var t=this.location[y.LEFT];this.location[y.LEFT]=this.location[y.RIGHT],this.location[y.RIGHT]=t}},{key:"toString",value:function(){var t=new wt;return this.location.length>1&&t.append(v.toLocationSymbol(this.location[y.LEFT])),t.append(v.toLocationSymbol(this.location[y.ON])),this.location.length>1&&t.append(v.toLocationSymbol(this.location[y.RIGHT])),t.toString()}},{key:"setLocations",value:function(t,e,n){this.location[y.ON]=t,this.location[y.LEFT]=e,this.location[y.RIGHT]=n}},{key:"get",value:function(t){return t<this.location.length?this.location[t]:v.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===v.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(y.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:"init",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(v.NONE)}},{key:"isEqualOnSide",value:function(t,e){return this.location[e]===t.location[e]}},{key:"allPositionsEqual",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[y.ON]=e}else if(arguments[0]instanceof a){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[y.ON]=i,this.location[y.LEFT]=o,this.location[y.RIGHT]=s}}}]),a}(),R=function(){function c(){d(this,c),c.constructor_.apply(this,arguments)}return p(c,[{key:"getGeometryCount",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:"setAllLocations",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:"isNull",value:function(t){return this.elt[t].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(t){return this.elt[t].isLine()}},{key:"merge",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new L(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(y.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:"toString",value:function(){var t=new wt;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:"isAnyNull",value:function(t){return this.elt[t].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(y.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}}},{key:"isEqualOnSide",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:"allPositionsEqual",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:"toLine",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new L(this.elt[t].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new L(t),this.elt[1]=new L(t)}else if(arguments[0]instanceof c){var e=arguments[0];this.elt[0]=new L(e.elt[0]),this.elt[1]=new L(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.elt[0]=new L(v.NONE),this.elt[1]=new L(v.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new L(i,o,s),this.elt[1]=new L(i,o,s)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new L(v.NONE,v.NONE,v.NONE),this.elt[1]=new L(v.NONE,v.NONE,v.NONE),this.elt[a].setLocations(u,l,h)}}},{key:"toLineLabel",value:function(t){for(var e=new c(v.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e}}]),c}(),qe=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=_.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new It("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new It("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();h.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(t){return this._pts.get(t)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this._pts.add(r[a])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:"containsPoint",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Ve.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0}},{key:"addHole",value:function(t){this._holes.add(t)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,y.RIGHT);if(n===v.NONE)return null;if(this._label.getLocation(e)===v.NONE)return this._label.setLocation(e,n),null}}},{key:"setShell",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:"toPolygon",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new w,this._pts=new w,this._label=new R(v.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new w,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}]),t}(),Ge=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"setEdgeRing",value:function(t,e){t.setMinEdgeRing(e)}},{key:"getNext",value:function(t){return t.getNextMin()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];qe.constructor_.call(this,t,e)}}]),n}(qe),Ue=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"buildMinimalRings",value:function(){var t=new w,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new Ge(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:"setEdgeRing",value:function(t,e){t.setEdgeRing(e)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:"getNext",value:function(t){return t.getNext()}}],[{key:"constructor_",value:function(){var t=arguments[0],e=arguments[1];qe.constructor_.call(this,t,e)}}]),n}(qe),Ye=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"setVisited",value:function(t){this._isVisited=t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(t){this._label=t}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:"updateIM",value:function(t){h.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}}}]),t}(),je=function(t){a(i,t);var e=u(i);function i(){var t;return d(this,i),t=e.call(this),i.constructor_.apply(r(t),arguments),t}return p(i,[{key:"isIncidentEdgeInResult",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(t){t.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(t){}},{key:"computeMergedLocation",value:function(t,e){var n=v.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==v.BOUNDARY&&(n=r)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return b(x(i.prototype),"setLabel",this).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new R(t,e):this._label.setLocation(t,e)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof i){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof R)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===v.NONE&&this._label.setLocation(n,r)}}},{key:"add",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:"setLabelBoundary",value:function(t){if(null===this._label)return null;var e=v.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case v.BOUNDARY:n=v.INTERIOR;break;case v.INTERIOR:default:n=v.BOUNDARY}this._label.setLocation(t,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new R(0,v.NONE)}}]),i}(Ye),Xe=function(t){a(n,t);var e=u(n);function n(){return d(this,n),e.apply(this,arguments)}return n}(he);function We(t){return null==t?0:t.color}function o(t){return null==t?null:t.parent}function Ze(t,e){null!==t&&(t.color=e)}function He(t){return null==t?null:t.left}function $e(t){return null==t?null:t.right}var Je=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),(t=e.call(this)).root_=null,t.size_=0,t}return p(n,[{key:"get",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:"put",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null}},{key:"fixAfterInsertion",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)o(t)===He(o(o(t)))?1===We(e=$e(o(o(t))))?(Ze(o(t),0),Ze(e,0),Ze(o(o(t)),1),t=o(o(t))):(t===$e(o(t))&&(t=o(t),this.rotateLeft(t)),Ze(o(t),0),Ze(o(o(t)),1),this.rotateRight(o(o(t)))):1===We(e=He(o(o(t))))?(Ze(o(t),0),Ze(e,0),Ze(o(o(t)),1),t=o(o(t))):(t===He(o(t))&&(t=o(t),this.rotateRight(t)),Ze(o(t),0),Ze(o(o(t)),1),this.rotateLeft(o(o(t))));this.root_.color=0}},{key:"values",value:function(){var t=new w,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=n.successor(e));)t.add(e.value);return t}},{key:"entrySet",value:function(){var t=new vt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=n.successor(e));)t.add(e);return t}},{key:"rotateLeft",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:"rotateRight",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:"getFirstEntry",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:"successor",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}]),n}(Xe),Ke=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"find",value:function(t){return this.nodeMap.get(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof P){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof je){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}}},{key:"print",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(t){for(var e=new w,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===v.BOUNDARY&&e.add(r)}return e}},{key:"add",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:"constructor_",value:function(){this.nodeMap=new Je,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}]),t}(),s=function(){function i(){d(this,i)}return p(i,null,[{key:"isNorthern",value:function(t){return t===i.NE||t===i.NW}},{key:"isOpposite",value:function(t,e){return t!==e&&2==(t-e+4)%4}},{key:"commonHalfPlane",value:function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:"isInHalfPlane",value:function(t,e){return e===i.SE?t===i.SE||t===i.SW:t===e||t===e+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new k("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?i.NE:i.SE:e>=0?i.NW:i.SW}if(arguments[0]instanceof P&&arguments[1]instanceof P){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new k("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?i.NE:i.SE:r.y>=n.y?i.NW:i.SW}}}]),i}();s.NE=0,s.NW=1,s.SW=2,s.SE=3;var Qe=function(){function u(){d(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"compareDirection",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:_.index(t._p0,t._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(t){this._node=t}},{key:"print",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)}},{key:"compareTo",value:function(t){var e=t;return this.compareDirection(e)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label}},{key:"computeLabel",value:function(t){}},{key:"init",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=s.quadrant(this._dx,this._dy),h.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];u.constructor_.call(this,e,n,r,null)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];u.constructor_.call(this,i),this.init(o,s),this._label=a}}}]),u}(),tn=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(t){return this._depth[t]}},{key:"setVisited",value:function(t){this._isVisited=t}},{key:"computeDirectedLabel",value:function(){this._label=new R(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new It("assigned depths do not match",this.getCoordinate());this._depth[t]=e}},{key:"isInteriorAreaEdge",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,y.LEFT)===v.INTERIOR&&this._label.getLocation(e,y.RIGHT)===v.INTERIOR||(t=!1);return t}},{key:"setNextMin",value:function(t){this._nextMin=t}},{key:"print",value:function(t){b(x(n.prototype),"print",this).call(this,t),t.print(" "+this._depth[y.LEFT]+"/"+this._depth[y.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")}},{key:"setMinEdgeRing",value:function(t){this._minEdgeRing=t}},{key:"isLineEdge",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,v.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,v.EXTERIOR);return t&&e&&n}},{key:"setEdgeRing",value:function(t){this._edgeRing=t}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:"setInResult",value:function(t){this._isInResult=t}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:"setSym",value:function(t){this._sym=t}},{key:"setVisitedEdge",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:"setEdgeDepths",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===y.LEFT&&(r=-1);var i=y.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(t){this._next=t}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Qe.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(t,e){return t===v.EXTERIOR&&e===v.INTERIOR?1:t===v.INTERIOR&&e===v.EXTERIOR?-1:0}}]),n}(Qe),en=function(){function t(){d(this,t)}return p(t,[{key:"createNode",value:function(t){return new je(t,null)}}]),t}(),nn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"printEdges",value:function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:"find",value:function(t){return this._nodes.find(t)}},{key:"addNode",value:function(){if(arguments[0]instanceof je){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof P){var e=arguments[0];return this._nodes.addNode(e)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(t){l.out.println(t)}},{key:"isBoundaryNode",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===v.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(t,e,n,r){return!!t.equals(n)&&_.index(t,e,r)===_.COLLINEAR&&s.quadrant(t,e)===s.quadrant(n,r)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(t){l.out.print(t)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null}},{key:"insertEdge",value:function(t){this._edges.add(t)}},{key:"findEdgeEnd",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:"addEdges",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new tn(n,!0),i=new tn(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}},{key:"add",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null}}],[{key:"constructor_",value:function(){if(this._edges=new w,this._nodes=null,this._edgeEndList=new w,0===arguments.length)this._nodes=new Ke(new en);else if(1===arguments.length){var t=arguments[0];this._nodes=new Ke(t)}}},{key:"linkResultDirectedEdges",value:function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}}]),t}(),rn=function(){function o(){d(this,o),o.constructor_.apply(this,arguments)}return p(o,[{key:"sortShellsAndHoles",value:function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}}},{key:"computePolygons",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e}},{key:"placeFreeHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=o.findEdgeRingContaining(r,t);if(null===i)throw new It("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}}},{key:"buildMinimalEdgeRings",value:function(t,e,n){for(var r=new w,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else r.add(o)}return r}},{key:"buildMaximalEdgeRings",value:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Ue(r,this._geometryFactory);e.add(i),i.setInResult()}}return e}},{key:"placePolygonHoles",value:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return h.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];nn.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new w,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new w;var t=arguments[0];this._geometryFactory=t}},{key:"findEdgeRingContaining",value:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();if(!h.equals(r)&&h.contains(r)){i=M.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;Ve.isInRing(i,l.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(s=(o=u).getLinearRing().getEnvelopeInternal())}}return o}}]),o}(),on=function(){function t(){d(this,t)}return p(t,[{key:"getBounds",value:function(){}}]),t}(),sn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[on,n]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}]),t}(),an=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"poll",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new w,this._items.add(null)}}]),t}(),un=function(){function t(){d(this,t)}return p(t,[{key:"insert",value:function(t,e){}},{key:"remove",value:function(t,e){}},{key:"query",value:function(){}}]),t}(),O=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(t){h.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[on,n]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new w,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}}}]),t}(),ln={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return ln.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?jt.sort(n,e):jt.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},singletonList:function(t){var e=new w;return e.add(t),e}},hn=function(){function c(){d(this,c)}return p(c,null,[{key:"maxDistance",value:function(t,e,n,r,i,o,s,a){var u=c.distance(t,e,i,o);return u=Math.max(u,c.distance(t,e,s,a)),u=Math.max(u,c.distance(n,r,i,o)),Math.max(u,c.distance(n,r,s,a))}},{key:"distance",value:function(t,e,n,r){var i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}},{key:"maximumDistance",value:function(t,e){var n=Math.min(t.getMinX(),e.getMinX()),r=Math.min(t.getMinY(),e.getMinY()),i=Math.max(t.getMaxX(),e.getMaxX()),o=Math.max(t.getMaxY(),e.getMaxY());return c.distance(n,r,i,o)}},{key:"minMaxDistance",value:function(t,e){var n=t.getMinX(),r=t.getMinY(),i=t.getMaxX(),o=t.getMaxY(),s=e.getMinX(),a=e.getMinY(),u=e.getMaxX(),l=e.getMaxY(),h=c.maxDistance(n,r,n,o,s,a,s,l);return h=Math.min(h,c.maxDistance(n,r,n,o,s,a,u,a)),h=Math.min(h,c.maxDistance(n,r,n,o,u,l,s,l)),h=Math.min(h,c.maxDistance(n,r,n,o,u,l,u,a)),h=Math.min(h,c.maxDistance(n,r,i,r,s,a,s,l)),h=Math.min(h,c.maxDistance(n,r,i,r,s,a,u,a)),h=Math.min(h,c.maxDistance(n,r,i,r,u,l,s,l)),h=Math.min(h,c.maxDistance(n,r,i,r,u,l,u,a)),h=Math.min(h,c.maxDistance(i,o,n,o,s,a,s,l)),h=Math.min(h,c.maxDistance(i,o,n,o,s,a,u,a)),h=Math.min(h,c.maxDistance(i,o,n,o,u,l,s,l)),h=Math.min(h,c.maxDistance(i,o,n,o,u,l,u,a)),h=Math.min(h,c.maxDistance(i,o,i,r,s,a,s,l)),h=Math.min(h,c.maxDistance(i,o,i,r,s,a,u,a)),h=Math.min(h,c.maxDistance(i,o,i,r,u,l,s,l)),Math.min(h,c.maxDistance(i,o,i,r,u,l,u,a))}}]),c}(),cn=function(){function u(){d(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"maximumDistance",value:function(){return hn.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(t,e){var n=u.isComposite(this._boundable1),r=u.isComposite(this._boundable2);if(n&&r)return u.area(this._boundable1)>u.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,t,e),null):(this.expand(this._boundable2,this._boundable1,!0,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,t,e),null;throw new k("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(u.isComposite(this._boundable1)||u.isComposite(this._boundable2))}},{key:"compareTo",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:"expand",value:function(t,e,n,r,i){for(var o=t.getChildBoundables().iterator();o.hasNext();){var s=o.next(),a=null;(a=n?new u(e,s,this._itemDistance):new u(s,e,this._itemDistance)).getDistance()<i&&r.add(a)}}},{key:"getBoundable",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(t){return t.getBounds().getArea()}},{key:"isComposite",value:function(t){return t instanceof O}}]),u}(),fn=function(){function t(){d(this,t)}return p(t,[{key:"visitItem",value:function(t){}}]),t}(),gn=function(){function e(){d(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"queryInternal",value:function(){if(E(arguments[2],fn)&&arguments[0]instanceof Object&&arguments[1]instanceof O)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),r=0;r<n.size();r++){var i=n.get(r);this.getIntersectsOp().intersects(i.getBounds(),t)&&(i instanceof O?this.queryInternal(t,i,e):i instanceof sn?e.visitItem(i.getItem()):h.shouldNeverReachHere())}else if(E(arguments[2],xt)&&arguments[0]instanceof Object&&arguments[1]instanceof O)for(var o=arguments[0],s=arguments[2],a=arguments[1].getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof O?this.queryInternal(o,l,s):l instanceof sn?s.add(l.getItem()):h.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(t){return t.get(t.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof O?t+=this.size(n):n instanceof sn&&(t+=1)}return t}}},{key:"removeItem",value:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof sn&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new w:t}if(1===arguments.length){for(var e=arguments[0],n=new w,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof O){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof sn?n.add(i.getItem()):h.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(t,e){h.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new sn(t,e))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var t=arguments[0],e=new w;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(h.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof O?this.boundablesAtLevel(n,s,i):(h.isTrue(s instanceof sn),-1===n&&i.add(s))}return null}}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new w;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,r)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var s=null,a=r.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof O&&(o=this.remove(n,u,i))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(s),o}}},{key:"createHigherLevels",value:function(t,e){h.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof O){var r=this.depth(n);r>t&&(t=r)}}return t+1}}},{key:"createParentBoundables",value:function(t,e){h.isTrue(!t.isEmpty());var n=new w;n.add(this.createNode(e));var r=new w(t);ln.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[n]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new w,this._nodeCapacity=null,0===arguments.length)e.constructor_.call(this,e.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];h.isTrue(t>1,"Node capacity must be greater than 1"),this._nodeCapacity=t}}},{key:"compareDoubles",value:function(t,e){return t>e?1:t<e?-1:0}}]),e}();gn.IntersectsOp=function(){},gn.DEFAULT_NODE_CAPACITY=10;var dn=function(){function t(){d(this,t)}return p(t,[{key:"distance",value:function(t,e){}}]),t}(),pn=function(t){a(l,t);var e=u(l);function l(){var t;return d(this,l),t=e.call(this),l.constructor_.apply(r(t),arguments),t}return p(l,[{key:"createParentBoundablesFromVerticalSlices",value:function(t,e){h.isTrue(t.length>0);for(var n=new w,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,T.POSITIVE_INFINITY,e)}if(3===arguments.length){var n=arguments[0],r=arguments[2],i=arguments[1],o=new an;o.add(n);for(var s=new an;!o.isEmpty()&&i>=0;){var a=o.poll(),u=a.getDistance();if(u>=i)break;a.isLeaves()?s.size()<r?s.add(a):(s.peek().getDistance()>u&&(s.poll(),s.add(a)),i=s.peek().getDistance()):a.expandToQueue(o,i)}return l.getItems(s)}}},{key:"createNode",value:function(t){return new vn(t)}},{key:"size",value:function(){return 0===arguments.length?b(x(l.prototype),"size",this).call(this):b(x(l.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof f))return b(x(l.prototype),"insert",this).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;b(x(l.prototype),"insert",this).call(this,t,e)}},{key:"getIntersectsOp",value:function(){return l.intersectsOp}},{key:"verticalSlices",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new w;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r}},{key:"query",value:function(){if(1===arguments.length){var t=arguments[0];return b(x(l.prototype),"query",this).call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];b(x(l.prototype),"query",this).call(this,e,n)}}},{key:"getComparator",value:function(){return l.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(t,e){return b(x(l.prototype),"createParentBoundables",this).call(this,t,e)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof f){var t=arguments[0],e=arguments[1];return b(x(l.prototype),"remove",this).call(this,t,e)}return b(x(l.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?b(x(l.prototype),"depth",this).call(this):b(x(l.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(t,e){h.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new w(t);ln.sort(r,l.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(E(arguments[0],dn)){var t=arguments[0];if(this.isEmpty())return null;var e=new cn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof cn){var n=arguments[0],r=T.POSITIVE_INFINITY,i=null,o=new an;for(o.add(n);!o.isEmpty()&&r>0;){var s=o.poll(),a=s.getDistance();if(a>=r)break;s.isLeaves()?(r=a,i=s):s.expandToQueue(o,r)}return null===i?null:[i.getBoundable(0).getItem(),i.getBoundable(1).getItem()]}}else{if(2===arguments.length){var u=arguments[0],l=arguments[1];if(this.isEmpty()||u.isEmpty())return null;var h=new cn(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(h)}if(3===arguments.length){var c=arguments[2],f=new sn(arguments[0],arguments[1]),g=new cn(this.getRoot(),f,c);return this.nearestNeighbour(g)[0]}if(4===arguments.length){var d=arguments[2],p=arguments[3],v=new sn(arguments[0],arguments[1]),y=new cn(this.getRoot(),v,d);return this.nearestNeighbourK(y,p)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=T.POSITIVE_INFINITY,r=new an;for(r.add(t);!r.isEmpty();){var i=r.poll(),o=i.getDistance();if(o>e)return!1;if(i.maximumDistance()<=e)return!0;if(i.isLeaves()){if((n=o)<=e)return!0}else i.expandToQueue(r,n)}return!1}if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2],l=new cn(this.getRoot(),s.getRoot(),a);return this.isWithinDistance(l,u)}}},{key:"interfaces_",get:function(){return[un,n]}}],[{key:"constructor_",value:function(){if(0===arguments.length)l.constructor_.call(this,l.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];gn.constructor_.call(this,t)}}},{key:"centreX",value:function(t){return l.avg(t.getMinX(),t.getMaxX())}},{key:"avg",value:function(t,e){return(t+e)/2}},{key:"getItems",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var r=t.poll();e[n]=r.getBoundable(0).getItem(),n++}return e}},{key:"centreY",value:function(t){return l.avg(t.getMinY(),t.getMaxY())}}]),l}(gn),vn=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"computeBounds",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new f(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:"constructor_",value:function(){var t=arguments[0];O.constructor_.call(this,t)}}]),n}(O);pn.STRtreeNode=vn,pn.xComparator=new(function(){function t(){d(this,t)}return p(t,[{key:"interfaces_",get:function(){return[st]}},{key:"compare",value:function(t,e){return gn.compareDoubles(pn.centreX(t.getBounds()),pn.centreX(e.getBounds()))}}]),t}()),pn.yComparator=new(function(){function t(){d(this,t)}return p(t,[{key:"interfaces_",get:function(){return[st]}},{key:"compare",value:function(t,e){return gn.compareDoubles(pn.centreY(t.getBounds()),pn.centreY(e.getBounds()))}}]),t}()),pn.intersectsOp=new(function(){function t(){d(this,t)}return p(t,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(t,e){return t.intersects(e)}}]),t}()),pn.DEFAULT_NODE_CAPACITY=10;var yn=function(){function o(){d(this,o)}return p(o,null,[{key:"relativeSign",value:function(t,e){return t<e?-1:t>e?1:0}},{key:"compare",value:function(t,e,n){if(e.equals2D(n))return 0;var r=o.relativeSign(e.x,n.x),i=o.relativeSign(e.y,n.y);switch(t){case 0:return o.compareValue(r,i);case 1:return o.compareValue(i,r);case 2:return o.compareValue(i,-r);case 3:return o.compareValue(-r,i);case 4:return o.compareValue(-r,-i);case 5:return o.compareValue(-i,-r);case 6:return o.compareValue(-i,r);case 7:return o.compareValue(r,-i)}return h.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}]),o}(),mn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?yn.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new P(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}}]),t}(),_n=function(){function t(){d(this,t)}return p(t,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),t}(),xn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getSplitCoordinates",value:function(){var t=new re;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var t=new w;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new P(t.coord),new P(e.coord)];var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new P(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return i&&(o[s]=new P(e.coord)),o}},{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"findCollapsesFromExistingVertices",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(kt.valueOf(e+1))}}},{key:"addEdgeCoordinates",value:function(t,e,n){var r=this.createSplitEdgePts(t,e);n.add(r,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}}},{key:"findCollapseIndex",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(kt.valueOf(e[0])),r=i}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:"createSplitEdge",value:function(t,e){var n=this.createSplitEdgePts(t,e);return new En(n,this._edge.getData())}},{key:"add",value:function(t,e){var n=new mn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(h.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new at("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new at("bad split edge end point at "+i)}}],[{key:"constructor_",value:function(){this._nodeMap=new Je,this._edge=null;var t=arguments[0];this._edge=t}}]),t}(),bn=function(){function u(){d(this,u)}return p(u,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new k("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof P&&arguments[1]instanceof P){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new k("Cannot compute the octant for two identical points "+i);return u.octant(s,a)}}}]),u}(),wn=function(){function t(){d(this,t)}return p(t,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(t){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(t){}},{key:"getData",value:function(){}}]),t}(),kn=function(){function t(){d(this,t)}return p(t,[{key:"addIntersection",value:function(t,e){}},{key:"interfaces_",get:function(){return[wn]}}]),t}(),En=function(){function i(){d(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(t){return this._pts[t]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:"setData",value:function(t){this._data=t}},{key:"safeOctant",value:function(t,e){return t.equals2D(e)?0:bn.octant(t,e)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new P(arguments[0].getIntersection(r));this.addIntersection(i,n)}}},{key:"toString",value:function(){return Fe.toLineString(new ae(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)}},{key:"addIntersections",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}},{key:"interfaces_",get:function(){return[kn]}}],[{key:"constructor_",value:function(){this._nodeList=new xn(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var t=arguments[0],e=new w;return i.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)}}]),i}(),A=function(){function u(){d(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof u){var t=arguments[0],e=_.index(this.p0,this.p1,t.p0),n=_.index(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof P){var r=arguments[0];return _.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(t){if(!(t instanceof u))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)}},{key:"intersection",value:function(t){var e=new Be;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof P){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new P(t);var e=this.projectionFactor(t),n=new P;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof u){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new u(s,a)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(t){return 0===t?this.p0:this.p1}},{key:"distancePerpendicular",value:function(t){return Rt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return u.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?T.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r}},{key:"closestPoints",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=T.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(i=s.distance(t.p1))<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(i=a.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:"reverse",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:"equalsTopo",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:"lineIntersection",value:function(t){return Tt.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}return new P(n-u,r+a)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||T.isNaN(e))&&(e=1),e}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),i=e*e+n*n,o=e*e-n*n,s=t.getX(),a=t.getY();return new P((-o*s-2*e*n*a-2*e*r)/i,(o*a-2*e*n*s-2*n*r)/i)}},{key:"distance",value:function(){if(arguments[0]instanceof u){var t=arguments[0];return Rt.segmentToSegment(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof P){var e=arguments[0];return Rt.pointToSegment(e,this.p0,this.p1)}}},{key:"pointAlong",value:function(t){var e=new P;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:"hashCode",value:function(){var t=T.doubleToLongBits(this.p0.x);t^=31*T.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=T.doubleToLongBits(this.p1.x);return n^=31*T.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[i,n]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)u.constructor_.call(this,new P,new P);else if(1===arguments.length){var t=arguments[0];u.constructor_.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];u.constructor_.call(this,new P(r,i),new P(o,s))}}},{key:"midPoint",value:function(t,e){return new P((t.x+e.x)/2,(t.y+e.y)/2)}}]),u}(),Nn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new A,this._overlapSeg2=new A}}]),t}(),Sn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getLineSegment",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:"computeSelect",value:function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(n-e==1)return r.select(this,e),null;if(!t.intersects(i,o))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)}},{key:"getCoordinates",value:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5];if(r-n==1&&s-o==1)return a.overlap(this,n,i,o),null;if(!this.overlaps(n,r,i,o,s))return null;var u=Math.trunc((n+r)/2),l=Math.trunc((o+s)/2);n<u&&(o<l&&this.computeOverlaps(n,u,i,o,l,a),l<s&&this.computeOverlaps(n,u,i,l,s,a)),u<r&&(o<l&&this.computeOverlaps(u,r,i,o,l,a),l<s&&this.computeOverlaps(u,r,i,l,s,a))}}},{key:"setId",value:function(t){this._id=t}},{key:"select",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:"getEnvelope",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new f(t,e)}return this._env}},{key:"overlaps",value:function(t,e,n,r,i){return f.intersects(this._pts[t],this._pts[e],n._pts[r],n._pts[i])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r}}]),t}(),In=function(){function a(){d(this,a)}return p(a,null,[{key:"findChainEnd",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=s.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||s.quadrant(t[i-1],t[i])===r);)i++;return i-1}},{key:"getChains",value:function(){if(1===arguments.length){var t=arguments[0];return a.getChains(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=new w,i=0;do{var o=a.findChainEnd(e,i),s=new Sn(e,i,o,n);r.add(s),i=o}while(i<e.length-1);return r}}}]),a}(),Mn=function(){function t(){d(this,t)}return p(t,[{key:"computeNodes",value:function(t){}},{key:"getNodedSubstrings",value:function(){}}]),t}(),Cn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"setSegmentIntersector",value:function(t){this._segInt=t}},{key:"interfaces_",get:function(){return[Mn]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}]),t}(),Ln=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(t){for(var e=In.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var t=new Tn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new w,this._index=new pn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Cn.constructor_.call(this,t)}}}]),n}(Cn),Tn=function(t){a(o,t);var e=u(o);function o(){var t;return d(this,o),t=e.call(this),o.constructor_.apply(r(t),arguments),t}return p(o,[{key:"overlap",value:function(){if(4!==arguments.length)return b(x(o.prototype),"overlap",this).apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],r=arguments[0].getContext(),i=e.getContext();this._si.processIntersections(r,t,i,n)}}],[{key:"constructor_",value:function(){this._si=null;var t=arguments[0];this._si=t}}]),o}(Nn);Ln.SegmentOverlapAction=Tn;var Pn=function(){function a(){d(this,a),a.constructor_.apply(this,arguments)}return p(a,[{key:"isDeletable",value:function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r)}},{key:"deleteShallowConcavities",value:function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=a.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r}},{key:"isShallowConcavity",value:function(t,e,n,r){return _.index(t,e,n)===this._angleOrientation&&Rt.pointToSegment(e,t,n)<r}},{key:"isShallowSampled",value:function(t,e,n,r,i){var o=Math.trunc((r-n)/a.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<r;s+=o)if(!this.isShallow(t,e,this._inputLine[s],i))return!1;return!0}},{key:"isConcave",value:function(t,e,n){return _.index(t,e,n)===this._angleOrientation}},{key:"simplify",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=_.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===a.DELETE;)e++;return e}},{key:"isShallow",value:function(t,e,n,r){return Rt.pointToSegment(e,t,n)<r}},{key:"collapseLine",value:function(){for(var t=new re,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==a.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=_.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:"simplify",value:function(t,e){return new a(t).simplify(e)}}]),a}();Pn.INIT=0,Pn.DELETE=1,Pn.KEEP=1,Pn.NUM_PTS_TO_CHECK=10;var Rn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getCoordinates",value:function(){return this._ptList.toArray(t.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(t){this._precisionModel=t}},{key:"addPt",value:function(t){var e=new P(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])}},{key:"isRedundant",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new pe).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var t=new P(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:"setMinimumVertexDistance",value:function(t){this._minimimVertexDistance=t}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new w}}]),t}();Rn.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var D=function(){function o(){d(this,o)}return p(o,null,[{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"normalize",value:function(t){for(;t>Math.PI;)t-=o.PI_TIMES_2;for(;t<=-Math.PI;)t+=o.PI_TIMES_2;return t}},{key:"angle",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}}},{key:"isAcute",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0}},{key:"isObtuse",value:function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0}},{key:"interiorAngle",value:function(t,e,n){var r=o.angle(e,t),i=o.angle(e,n);return Math.abs(i-r)}},{key:"normalizePositive",value:function(t){if(t<0){for(;t<0;)t+=o.PI_TIMES_2;t>=o.PI_TIMES_2&&(t=0)}else{for(;t>=o.PI_TIMES_2;)t-=o.PI_TIMES_2;t<0&&(t=0)}return t}},{key:"angleBetween",value:function(t,e,n){var r=o.angle(e,t),i=o.angle(e,n);return o.diff(r,i)}},{key:"diff",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getTurn",value:function(t,e){var n=Math.sin(e-t);return n>0?o.COUNTERCLOCKWISE:n<0?o.CLOCKWISE:o.NONE}},{key:"angleBetweenOriented",value:function(t,e,n){var r=o.angle(e,t),i=o.angle(e,n)-r;return i<=-Math.PI?i+o.PI_TIMES_2:i>Math.PI?i-o.PI_TIMES_2:i}}]),o}();D.PI_TIMES_2=2*Math.PI,D.PI_OVER_2=Math.PI/2,D.PI_OVER_4=Math.PI/4,D.COUNTERCLOCKWISE=_.COUNTERCLOCKWISE,D.CLOCKWISE=_.CLOCKWISE,D.NONE=_.COLLINEAR;var On=function(){function i(){d(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"addNextSegment",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=_.index(this._s0,this._s1,this._s2),r=n===_.CLOCKWISE&&this._side===y.LEFT||n===_.COUNTERCLOCKWISE&&this._side===y.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:"addLineEndCap",value:function(t,e){var n=new A(t,e),r=new A;this.computeOffsetSegment(n,y.LEFT,this._distance,r);var i=new A;this.computeOffsetSegment(n,y.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case c.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(e,a+Math.PI/2,a-Math.PI/2,_.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case c.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case c.CAP_SQUARE:var u=new P;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var l=new P(r.p1.x+u.x,r.p1.y+u.y),h=new P(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(t,e,n,r){var i=Tt.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==i&&(r<=0?1:i.distance(t)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(i),null;this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===c.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===c.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(t){this._segList.addPt(new P(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new P(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new P(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new P(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(t,e){this._segList.addPts(t,e)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);r===_.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,a,h,r,i),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(t,e,n,r){var i=this._seg0.p1,o=D.angle(i,this._seg0.p0),s=D.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,a=D.normalize(o+s),u=D.normalize(a+Math.PI),l=r*n,h=n-l*Math.abs(Math.sin(s)),c=i.x+l*Math.cos(u),f=i.y+l*Math.sin(u),g=new P(c,f),d=new A(i,g),p=d.pointAlongOffset(1,h),v=d.pointAlongOffset(1,-h);this._side===y.LEFT?(this._segList.addPt(p),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(p))}},{key:"addDirectedFillet",value:function(t,e,n,r,i){var o=r===_.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var u=s/a,l=new P,h=0;h<a;h++){var c=e+o*h*u;l.x=t.x+i*Math.cos(c),l.y=t.y+i*Math.sin(c),this._segList.addPt(l)}}},{key:"computeOffsetSegment",value:function(t,e,n,r){var i=e===y.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,l=i*n*s/a;r.p0.x=t.p0.x-l,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-l,r.p1.y=t.p1.y+u}},{key:"addInsideTurn",value:function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new P((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new P((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(t){var e=new P(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:"init",value:function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Rn,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===c.JOIN_BEVEL||this._bufParams.getJoinStyle()===c.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,_.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new A,this._seg1=new A,this._offset0=new A,this._offset1=new A,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new Be,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===c.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}]),i}();On.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,On.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,On.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,On.MAX_CLOSING_SEG_LEN_FACTOR=80;var An=function(){function i(){d(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"getOffsetCurve",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&M.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Pn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],y.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=Pn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],y.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);e===y.RIGHT&&(r=-r);var i=Pn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(t,e){var n=this.simplifyTolerance(this._distance),r=Pn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],y.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=Pn.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],y.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()}},{key:"computePointCurve",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case c.CAP_ROUND:e.createCircle(t);break;case c.CAP_SQUARE:e.createSquare(t)}}},{key:"getLineCurve",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return i.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Pn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],y.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=Pn.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],y.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(a[l],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(t){return new On(this._precisionModel,this._bufParams,t)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:"copyCoordinates",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new P(t[n]);return e}}]),i}(),Dn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new w,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(E(arguments[2],xt)&&arguments[0]instanceof P&&arguments[1]instanceof tn){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||_.index(this._seg.p0,this._seg.p1,o)===_.RIGHT)){var h=s.getDepth(y.LEFT);this._seg.p0.equals(u[l])||(h=s.getDepth(y.RIGHT));var c=new Fn(this._seg,h);a.add(c)}}else if(E(arguments[2],xt)&&arguments[0]instanceof P&&E(arguments[1],xt))for(var f=arguments[0],g=arguments[2],d=arguments[1].iterator();d.hasNext();){var p=d.next();p.isForward()&&this.findStabbedSegments(f,p,g)}}},{key:"getDepth",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:ln.min(e)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new A;var t=arguments[0];this._subgraphs=t}}]),t}(),Fn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"compareTo",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)}},{key:"compareX",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new A(t),this._leftDepth=e}}]),t}();Dn.DepthSegment=Fn;var Bn=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,null,[{key:"constructor_",value:function(){W.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),n}(W),zn=function(){function x(){d(this,x),x.constructor_.apply(this,arguments)}return p(x,[{key:"getY",value:function(){var t=this.y/this.w;if(T.isNaN(t)||T.isInfinite(t))throw new Bn;return t}},{key:"getX",value:function(){var t=this.x/this.w;if(T.isNaN(t)||T.isInfinite(t))throw new Bn;return t}},{key:"getCoordinate",value:function(){var t=new P;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof x&&arguments[1]instanceof x){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof P&&arguments[1]instanceof P){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2];this.x=a,this.y=u,this.w=l}else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3],d=h.y-c.y,p=c.x-h.x,v=h.x*c.y-c.x*h.y,y=f.y-g.y,m=g.x-f.x,_=f.x*g.y-g.x*f.y;this.x=p*_-m*v,this.y=y*v-d*_,this.w=d*m-y*p}}}]),x}(),Vn=function(){function f(){d(this,f),f.constructor_.apply(this,arguments)}return p(f,[{key:"area",value:function(){return f.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return f.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(t){if(null===t)throw new k("Supplied point is null.");return f.interpolateZ(t,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return f.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return f.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return f.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return f.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return f.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return f.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:"area",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:"signedArea",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:"det",value:function(t,e,n,r){return t*r-e*n}},{key:"interpolateZ",value:function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,l=r.y-o,h=s*l-a*u,c=t.x-i,f=t.y-o,g=(l*c-a*f)/h,d=(-u*c+s*f)/h;return e.getZ()+g*(n.getZ()-e.getZ())+d*(r.getZ()-e.getZ())}},{key:"longestSideLength",value:function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s}},{key:"circumcentreDD",value:function(t,e,n){var r=m.valueOf(t.x).subtract(n.x),i=m.valueOf(t.y).subtract(n.y),o=m.valueOf(e.x).subtract(n.x),s=m.valueOf(e.y).subtract(n.y),a=m.determinant(r,i,o,s).multiply(2),u=r.sqr().add(i.sqr()),l=o.sqr().add(s.sqr()),h=m.determinant(i,u,s,l),c=m.determinant(r,u,o,l),f=m.valueOf(n.x).subtract(h.divide(a)).doubleValue(),g=m.valueOf(n.y).add(c.divide(a)).doubleValue();return new P(f,g)}},{key:"isAcute",value:function(t,e,n){return!!D.isAcute(t,e,n)&&!!D.isAcute(e,n,t)&&!!D.isAcute(n,t,e)}},{key:"circumcentre",value:function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,l=2*f.det(o,s,a,u),h=f.det(s,o*o+s*s,u,a*a+u*u),c=f.det(o,o*o+s*s,a,a*a+u*u);return new P(r-h/l,i+c/l)}},{key:"perpendicularBisector",value:function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new zn(t.x+n/2,t.y+r/2,1),o=new zn(t.x-r+n/2,t.y+n+r/2,1);return new zn(i,o)}},{key:"angleBisector",value:function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new P(t.x+i*o,t.y+i*s)}},{key:"area3D",value:function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.getZ()-t.getZ(),s=n.x-t.x,a=n.y-t.y,u=n.getZ()-t.getZ(),l=i*u-o*a,h=o*s-r*u,c=r*a-i*s,f=l*l+h*h+c*c;return Math.sqrt(f)/2}},{key:"centroid",value:function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new P(r,i)}},{key:"inCentre",value:function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new P(a,u)}}]),f}(),qn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"addRingSide",value:function(t,e,n,r,i){if(0===e&&t.length<Kt.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=Kt.MINIMUM_VALID_SIZE&&_.isCCW(t)&&(o=i,s=r,n=y.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)}},{key:"addRingBothSides",value:function(t,e){this.addRingSide(t,e,y.LEFT,v.EXTERIOR,v.INTERIOR),this.addRingSide(t,e,y.RIGHT,v.INTERIOR,v.EXTERIOR)}},{key:"addPoint",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,v.EXTERIOR,v.INTERIOR)}},{key:"addPolygon",value:function(t){var e=this._distance,n=y.LEFT;this._distance<0&&(e=-this._distance,n=y.RIGHT);var r=t.getExteriorRing(),i=M.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addRingSide(i,e,n,v.EXTERIOR,v.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=M.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addRingSide(a,e,y.opposite(n),v.INTERIOR,v.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(t,e){var n=new Vn(t[0],t[1],t[2]),r=n.inCentre();return Rt.pointToSegment(r,n.p0,n.p1)<Math.abs(e)}},{key:"addLineString",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=M.removeRepeatedPoints(t.getCoordinates());if(M.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,v.EXTERIOR,v.INTERIOR)}}},{key:"addCurve",value:function(t,e,n){if(null===t||t.length<2)return null;var r=new En(t,new R(0,v.BOUNDARY,e,n));this._curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(t){if(t.isEmpty())return null;if(t instanceof Wt)this.addPolygon(t);else if(t instanceof qt)this.addLineString(t);else if(t instanceof Ut)this.addPoint(t);else if(t instanceof Jt)this.addCollection(t);else if(t instanceof de)this.addCollection(t);else if(t instanceof le)this.addCollection(t);else{if(!(t instanceof I))throw new dt(t.getGeometryType());this.addCollection(t)}}},{key:"isErodedCompletely",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i}},{key:"addCollection",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new w;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}}]),t}(),Gn=function(){function t(){d(this,t)}return p(t,[{key:"locate",value:function(t){}}]),t}(),Un=function(){function e(){d(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,e.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new gt;var t=this._parent.getGeometryN(this._index++);return t instanceof I?(this._subcollectionIterator=new e(t),this._subcollectionIterator.next()):t}},{key:"remove",value:function(){throw new dt(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[_n]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:"isAtomic",value:function(t){return!(t instanceof I)}}]),e}(),Yn=function(){function a(){d(this,a),a.constructor_.apply(this,arguments)}return p(a,[{key:"locate",value:function(t){return a.locate(t,this._geom)}},{key:"interfaces_",get:function(){return[Gn]}}],[{key:"constructor_",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:"locatePointInPolygon",value:function(t,e){if(e.isEmpty())return v.EXTERIOR;var n=e.getExteriorRing(),r=a.locatePointInRing(t,n);if(r!==v.INTERIOR)return r;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),s=a.locatePointInRing(t,o);if(s===v.BOUNDARY)return v.BOUNDARY;if(s===v.INTERIOR)return v.EXTERIOR}return v.INTERIOR}},{key:"locatePointInRing",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?Ve.locateInRing(t,e.getCoordinates()):v.EXTERIOR}},{key:"containsPointInPolygon",value:function(t,e){return v.EXTERIOR!==a.locatePointInPolygon(t,e)}},{key:"locateInGeometry",value:function(t,e){if(e instanceof Wt)return a.locatePointInPolygon(t,e);if(e instanceof I)for(var n=new Un(e);n.hasNext();){var r=n.next();if(r!==e){var i=a.locateInGeometry(t,r);if(i!==v.EXTERIOR)return i}}return v.EXTERIOR}},{key:"isContained",value:function(t,e){return v.EXTERIOR!==a.locate(t,e)}},{key:"locate",value:function(t,e){return e.isEmpty()?v.EXTERIOR:e.getEnvelopeInternal().intersects(t)?a.locateInGeometry(t,e):v.EXTERIOR}}]),a}(),jn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getNextCW",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(t){for(var e=v.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,y.LEFT)!==v.NONE&&(e=r.getLocation(t,y.LEFT))}if(e===v.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,y.ON)===v.NONE&&a.setLocation(t,y.ON,i),a.isArea(t)){var u=a.getLocation(t,y.LEFT),l=a.getLocation(t,y.RIGHT);if(l!==v.NONE){if(l!==i)throw new It("side location conflict",s.getCoordinate());u===v.NONE&&h.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),i=u}else h.isTrue(a.getLocation(t,y.LEFT)===v.NONE,"found single null side"),a.setLocation(t,y.RIGHT,i),a.setLocation(t,y.LEFT,i)}}}},{key:"getCoordinate",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:"print",value:function(t){l.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"isAreaLabelsConsistent",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,y.LEFT);h.isTrue(r!==v.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var s=o.next().getLabel();h.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,y.LEFT),u=s.getLocation(t,y.RIGHT);if(a===u)return!1;if(u!==i)return!1;i=a}return!0}},{key:"findIndex",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new w(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(t,e,n){return this._ptInAreaLocation[t]===v.NONE&&(this._ptInAreaLocation[t]=Yn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:"toString",value:function(){var t=new wt;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()}},{key:"computeEdgeEndLabels",value:function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)}},{key:"computeLabelling",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===v.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),u=0;u<2;u++)if(a.isAnyNull(u)){var l=v.NONE;if(e[u])l=v.EXTERIOR;else{var h=s.getCoordinate();l=this.getLocation(u,h,t)}a.setAllLocationsIfNull(u,l)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Je,this._edgeList=null,this._ptInAreaLocation=[v.NONE,v.NONE]}}]),t}(),Xn=function(t){a(o,t);var e=u(o);function o(){var t;return d(this,o),t=e.call(this),o.constructor_.apply(r(t),arguments),t}return p(o,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new It("no outgoing dirEdge found",this.getCoordinate());h.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}}},{key:"insert",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:"getRightmostEdge",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return s.isNorthern(i)&&s.isNorthern(o)?n:s.isNorthern(i)||s.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(h.shouldNeverReachHere("found two horizontal edges incident on node"),null):r}},{key:"print",value:function(t){l.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new w;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)}},{key:"computeDepths",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(y.LEFT),r=t.getDepth(y.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new It("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],s=arguments[2],a=arguments[0];a<o;a++){var u=this._edgeList.get(a);u.setEdgeDepths(y.RIGHT,s),s=u.getDepth(y.LEFT)}return s}}},{key:"mergeSymLabels",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(h.isTrue(null!==e,"found null for first outgoing dirEdge"),h.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var t=v.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=v.INTERIOR;break}if(r.isInResult()){t=v.EXTERIOR;break}}}if(t===v.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===v.INTERIOR):(s.isInResult()&&(i=v.EXTERIOR),a.isInResult()&&(i=v.INTERIOR))}}},{key:"computeLabelling",value:function(t){b(x(o.prototype),"computeLabelling",this).call(this,t),this._label=new R(v.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==v.INTERIOR&&i!==v.BOUNDARY||this._label.setLocation(r,v.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),o}(jn),Wn=function(t){a(n,t);var e=u(n);function n(){return d(this,n),e.call(this)}return p(n,[{key:"createNode",value:function(t){return new je(t,new Xn)}}]),n}(en),Zn=function(){function n(){d(this,n),n.constructor_.apply(this,arguments)}return p(n,[{key:"compareTo",value:function(t){var e=t;return n.compareOriented(this._pts,this._orientation,e._pts,e._orientation)}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=n.orientation(t)}},{key:"orientation",value:function(t){return 1===M.increasingDirection(t)}},{key:"compareOriented",value:function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,l=r?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=i)===s,f=(l+=o)===a;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}}}]),n}(),Hn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"print",value:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")}},{key:"addAll",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:"findEdgeIndex",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(t){return this._edges.get(t)}},{key:"findEqualEdge",value:function(t){var e=new Zn(t.getCoordinates());return this._ocaMap.get(e)}},{key:"add",value:function(t){this._edges.add(t);var e=new Zn(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:"constructor_",value:function(){this._edges=new w,this._ocaMap=new Je}}]),t}(),$n=function(){function t(){d(this,t)}return p(t,[{key:"processIntersections",value:function(t,e,n,r){}},{key:"isDone",value:function(){}}]),t}(),Jn=function(){function o(){d(this,o),o.constructor_.apply(this,arguments)}return p(o,[{key:"isTrivialIntersection",value:function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(o.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[$n]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:"isAdjacentSegments",value:function(t,e){return 1===Math.abs(t-e)}}]),o}(),Kn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)}},{key:"compareTo",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:"isEndPoint",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new P(t),this.segmentIndex=e,this.dist=n}}]),t}(),Qn=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"print",value:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}}},{key:"addEndpoints",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:"createSplitEdge",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),s=0;o[s++]=new P(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return i&&(o[s]=e.coord),new or(o,new R(this.edge._label))}},{key:"add",value:function(t,e,n){var r=new Kn(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Je,this.edge=null;var t=arguments[0];this.edge=t}}]),t}(),tr=function(){function r(){d(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])||r.isTrue(this._matrix[v.INTERIOR][v.BOUNDARY])||r.isTrue(this._matrix[v.BOUNDARY][v.INTERIOR])||r.isTrue(this._matrix[v.BOUNDARY][v.BOUNDARY]))&&this._matrix[v.EXTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.BOUNDARY]===S.FALSE}},{key:"isCoveredBy",value:function(){return(r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])||r.isTrue(this._matrix[v.INTERIOR][v.BOUNDARY])||r.isTrue(this._matrix[v.BOUNDARY][v.INTERIOR])||r.isTrue(this._matrix[v.BOUNDARY][v.BOUNDARY]))&&this._matrix[v.INTERIOR][v.EXTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.EXTERIOR]===S.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this._matrix[n][r]=S.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._matrix[i][o]=s}}},{key:"isContains",value:function(){return r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&this._matrix[v.EXTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.BOUNDARY]===S.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,S.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._matrix[i][o]<s&&(this._matrix[i][o]=s)}}},{key:"setAtLeastIfValid",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:"isWithin",value:function(){return r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&this._matrix[v.INTERIOR][v.EXTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.EXTERIOR]===S.FALSE}},{key:"isTouches",value:function(t,e){return t>e?this.isTouches(e,t):(t===S.A&&e===S.A||t===S.L&&e===S.L||t===S.L&&e===S.A||t===S.P&&e===S.A||t===S.P&&e===S.L)&&this._matrix[v.INTERIOR][v.INTERIOR]===S.FALSE&&(r.isTrue(this._matrix[v.INTERIOR][v.BOUNDARY])||r.isTrue(this._matrix[v.BOUNDARY][v.INTERIOR])||r.isTrue(this._matrix[v.BOUNDARY][v.BOUNDARY]))}},{key:"isOverlaps",value:function(t,e){return t===S.P&&e===S.P||t===S.A&&e===S.A?r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&r.isTrue(this._matrix[v.INTERIOR][v.EXTERIOR])&&r.isTrue(this._matrix[v.EXTERIOR][v.INTERIOR]):t===S.L&&e===S.L&&1===this._matrix[v.INTERIOR][v.INTERIOR]&&r.isTrue(this._matrix[v.INTERIOR][v.EXTERIOR])&&r.isTrue(this._matrix[v.EXTERIOR][v.INTERIOR])}},{key:"isEquals",value:function(t,e){return t===e&&r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&this._matrix[v.INTERIOR][v.EXTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.EXTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.BOUNDARY]===S.FALSE}},{key:"toString",value:function(){for(var t=new se("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,S.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:"setAll",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:"get",value:function(t,e){return this._matrix[t][e]}},{key:"transpose",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:"matches",value:function(t){if(9!==t.length)throw new k("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!r.matches(this._matrix[e][n],t.charAt(3*e+n)))return!1;return!0}},{key:"add",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:"isDisjoint",value:function(){return this._matrix[v.INTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.INTERIOR][v.BOUNDARY]===S.FALSE&&this._matrix[v.BOUNDARY][v.INTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.BOUNDARY]===S.FALSE}},{key:"isCrosses",value:function(t,e){return t===S.P&&e===S.L||t===S.P&&e===S.A||t===S.L&&e===S.A?r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&r.isTrue(this._matrix[v.INTERIOR][v.EXTERIOR]):t===S.L&&e===S.P||t===S.A&&e===S.P||t===S.A&&e===S.L?r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&r.isTrue(this._matrix[v.EXTERIOR][v.INTERIOR]):t===S.L&&e===S.L&&0===this._matrix[v.INTERIOR][v.INTERIOR]}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(S.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];r.constructor_.call(this),this.set(t)}else if(arguments[0]instanceof r){var e=arguments[0];r.constructor_.call(this),this._matrix[v.INTERIOR][v.INTERIOR]=e._matrix[v.INTERIOR][v.INTERIOR],this._matrix[v.INTERIOR][v.BOUNDARY]=e._matrix[v.INTERIOR][v.BOUNDARY],this._matrix[v.INTERIOR][v.EXTERIOR]=e._matrix[v.INTERIOR][v.EXTERIOR],this._matrix[v.BOUNDARY][v.INTERIOR]=e._matrix[v.BOUNDARY][v.INTERIOR],this._matrix[v.BOUNDARY][v.BOUNDARY]=e._matrix[v.BOUNDARY][v.BOUNDARY],this._matrix[v.BOUNDARY][v.EXTERIOR]=e._matrix[v.BOUNDARY][v.EXTERIOR],this._matrix[v.EXTERIOR][v.INTERIOR]=e._matrix[v.EXTERIOR][v.INTERIOR],this._matrix[v.EXTERIOR][v.BOUNDARY]=e._matrix[v.EXTERIOR][v.BOUNDARY],this._matrix[v.EXTERIOR][v.EXTERIOR]=e._matrix[v.EXTERIOR][v.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===S.SYM_DONTCARE||e===S.SYM_TRUE&&(t>=0||t===S.TRUE)||e===S.SYM_FALSE&&t===S.FALSE||e===S.SYM_P&&t===S.P||e===S.SYM_L&&t===S.L||e===S.SYM_A&&t===S.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[1];return new r(arguments[0]).matches(n)}}},{key:"isTrue",value:function(t){return t>=0||t===S.TRUE}}]),r}(),er=function(){function e(){d(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),l.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:"ensureCapacity",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=jt.copyOf(this._data,e)}},{key:"toArray",value:function(){var t=new Array(this._size).fill(null);return l.arraycopy(this._data,0,t,0,this._size),t}},{key:"add",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0===arguments.length)e.constructor_.call(this,10);else if(1===arguments.length){var t=arguments[0];this._data=new Array(t).fill(null)}}}]),e}(),nr=function(){function i(){d(this,i)}return p(i,[{key:"getChainStartIndices",value:function(t){var e=0,n=new er(Math.trunc(t.length/2));n.add(e);do{var r=this.findChainEnd(t,e);n.add(r),e=r}while(e<t.length-1);return n.toArray()}},{key:"findChainEnd",value:function(t,e){for(var n=s.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&s.quadrant(t[r-1],t[r])===n;)r++;return r-1}},{key:"OLDgetChainStartIndices",value:function(t){var e=0,n=new w;n.add(e);do{var r=this.findChainEnd(t,e);n.add(r),e=r}while(e<t.length-1);return i.toIntArray(n)}}],[{key:"toIntArray",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}]),i}(),rr=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:"getMinX",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5];if(o-i==1&&u-a==1)return l.addIntersections(this.e,i,s.e,a),null;if(!this.overlaps(i,o,s,a,u))return null;var h=Math.trunc((i+o)/2),c=Math.trunc((a+u)/2);i<h&&(a<c&&this.computeIntersectsForChain(i,h,s,a,c,l),c<u&&this.computeIntersectsForChain(i,h,s,c,u,l)),h<o&&(a<c&&this.computeIntersectsForChain(h,o,s,a,c,l),c<u&&this.computeIntersectsForChain(h,o,s,c,u,l))}}},{key:"overlaps",value:function(t,e,n,r,i){return f.intersects(this.pts[t],this.pts[e],n.pts[r],n.pts[i])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new nr;this.startIndex=e.getChainStartIndices(this.pts)}}]),t}(),ir=function(){function s(){d(this,s),s.constructor_.apply(this,arguments)}return p(s,[{key:"getDepth",value:function(t,e){return this._depth[t][e]}},{key:"setDepth",value:function(t,e,n){this._depth[t][e]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==s.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===s.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===s.NULL_VALUE}}},{key:"normalize",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}}},{key:"getDelta",value:function(t){return this._depth[t][y.RIGHT]-this._depth[t][y.LEFT]}},{key:"getLocation",value:function(t,e){return this._depth[t][e]<=0?v.EXTERIOR:v.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==v.EXTERIOR&&r!==v.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=s.depthAtLocation(r):this._depth[e][n]+=s.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===v.INTERIOR&&this._depth[i][o]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this._depth[t][e]=s.NULL_VALUE}},{key:"depthAtLocation",value:function(t){return t===v.EXTERIOR?0:t===v.INTERIOR?1:s.NULL_VALUE}}]),s}();ir.NULL_VALUE=-1;var or=function(t){a(s,t);var e=u(s);function s(){var t;return d(this,s),t=e.call(this),s.constructor_.apply(r(t),arguments),t}return p(s,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new s(t,R.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(t){this._isIsolated=t}},{key:"setName",value:function(t){this._name=t}},{key:"equals",value:function(t){if(!(t instanceof s))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}}},{key:"print",value:function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(t){s.updateIM(this._label,t)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new rr(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new f;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:"addIntersection",value:function(t,e,n,r){var i=new P(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)}},{key:"toString",value:function(){var t=new se;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()}},{key:"isPointwiseEqual",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:"setDepthDelta",value:function(t){this._depthDelta=t}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Qn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ir,this._depthDelta=0,1===arguments.length){var t=arguments[0];s.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof tr&&arguments[0]instanceof R))return b(x(s),"updateIM",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,y.ON),t.getLocation(1,y.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,y.LEFT),t.getLocation(1,y.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,y.RIGHT),t.getLocation(1,y.RIGHT),2))}}]),s}(Ye),sr=function(){function s(){d(this,s),s.constructor_.apply(this,arguments)}return p(s,[{key:"setWorkingPrecisionModel",value:function(t){this._workingPrecisionModel=t}},{key:"insertUniqueEdge",value:function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new R(t.getLabel())).flip(),n.merge(r);var i=s.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(s.depthDelta(t.getLabel()))}},{key:"buildSubgraphs",value:function(t,e){for(var n=new w,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Dn(n).getDepth(o);i.computeDepth(s),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}}},{key:"createSubgraphs",value:function(t){for(var e=new w,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Lt;i.create(r),e.add(i)}}return ln.sort(e,ln.reverseOrder()),e}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Ln,n=new Be;return n.setPrecisionModel(t),e.setSegmentIntersector(new Jn(n)),e}},{key:"buffer",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new An(n,this._bufParams),i=new qn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new nn(new Wn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new rn(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)}},{key:"computeNodedEdges",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=i.getData(),a=new or(i.getCoordinates(),new R(s));this.insertUniqueEdge(a)}}}},{key:"setNoder",value:function(t){this._workingNoder=t}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn;var t=arguments[0];this._bufParams=t}},{key:"depthDelta",value:function(t){var e=t.getLocation(0,y.LEFT),n=t.getLocation(0,y.RIGHT);return e===v.INTERIOR&&n===v.EXTERIOR?1:e===v.EXTERIOR&&n===v.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(t){for(var e=new pe,n=new w;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)}}]),s}(),ar=function(){function i(){d(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"rescale",value:function(){if(E(arguments[0],ft))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&l.out.println(n)}}},{key:"scale",value:function(){if(E(arguments[0],ft)){for(var t=arguments[0],e=new w(t.size()),n=t.iterator();n.hasNext();){var r=n.next();e.add(new En(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),s=0;s<i.length;s++)o[s]=new P(Math.round((i[s].x-this._offsetX)*this._scaleFactor),Math.round((i[s].y-this._offsetY)*this._scaleFactor),i[s].getZ());return M.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:"computeNodes",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:"interfaces_",get:function(){return[Mn]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];i.constructor_.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],r=arguments[1];this._noder=n,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}]),i}(),ur=function(){function r(){d(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new at("found endpt/interior pt intersection at index "+o+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var l=0;l<a.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3];if(h===f&&c===g)return null;var d=h.getCoordinates()[c],p=h.getCoordinates()[c+1],v=f.getCoordinates()[g],y=f.getCoordinates()[g+1];if(this._li.computeIntersection(d,p,v,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,p)||this.hasInteriorIntersection(this._li,v,y)))throw new at("found non-noded intersection at "+d+"-"+p+" and "+v+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])}},{key:"hasInteriorIntersection",value:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(t,e,n){if(t.equals(n))throw new at("found non-noded collapse at "+r.fact.createLineString([t,e,n]))}}],[{key:"constructor_",value:function(){this._li=new Be,this._segStrings=null;var t=arguments[0];this._segStrings=t}}]),r}();ur.fact=new pe;var lr=function(){function e(){d(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"intersectsScaled",value:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return h.isTrue(!(s&&a),"Found bad envelope test"),a}},{key:"initCorners",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new P(this._maxx,this._maxy),this._corner[1]=new P(this._minx,this._maxy),this._corner[2]=new P(this._minx,this._miny),this._corner[3]=new P(this._maxx,this._miny)}},{key:"intersects",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(t){return Math.round(t*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var t=e.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new f(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))}},{key:"addSnappedNode",value:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new k("Scale factor must be non-zero");1!==e&&(this._pt=new P(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new P,this._p1Scaled=new P),this.initCorners(this._pt)}}]),e}();lr.SAFE_ENV_EXPANSION_FACTOR=.75;var hr=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new A}}]),t}(),cr=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"snap",value:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new fr(e,n,r);return this._index.query(i,new(function(){function t(){d(this,t)}return p(t,[{key:"interfaces_",get:function(){return[fn]}},{key:"visitItem",value:function(t){t.select(i,o)}}]),t}())),o.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var t=arguments[0];this._index=t}}]),t}(),fr=function(t){a(n,t);var e=u(n);function n(){var t;return d(this,n),t=e.call(this),n.constructor_.apply(r(t),arguments),t}return p(n,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Sn))return b(x(n.prototype),"select",this).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}}]),n}(hr);cr.HotPixelSnapAction=fr;var gr=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"processIntersections",value:function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[$n]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new w}}]),t}(),dr=function(){function t(){d(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"checkCorrectness",value:function(t){var e=En.getNodedSubstrings(t),n=new ur(e);try{n.checkValid()}catch(t){if(!(t instanceof W))throw t;t.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:"findInteriorIntersections",value:function(t,e){var n=new gr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(E(arguments[0],ft))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof En)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new lr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}}},{key:"computeNodes",value:function(t){this._nodedSegStrings=t,this._noder=new Ln,this._pointSnapper=new cr(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:"computeIntersectionSnaps",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new lr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}}},{key:"interfaces_",get:function(){return[Mn]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Be,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}]),t}(),pr=function(){function l(){d(this,l),l.constructor_.apply(this,arguments)}return p(l,[{key:"bufferFixedPrecision",value:function(t){var e=new ar(new dr(new fe(1)),t.getScale()),n=new sr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var t=l.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof It))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var e=arguments[0],n=l.precisionScaleFactor(this._argGeom,this._distance,e),r=new fe(n);this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:"bufferOriginalPrecision",value:function(){try{var t=new sr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof at))throw t;this._saveException=t}}},{key:"getResultGeometry",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new c,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var t=arguments[1];return new l(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof g&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new l(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof c&&arguments[0]instanceof g&&"number"==typeof arguments[1]){var i=arguments[1];return new l(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],s=arguments[2],a=arguments[3],u=new l(arguments[0]);return u.setQuadrantSegments(s),u.setEndCapStyle(a),u.getResultGeometry(o)}}},{key:"precisionScaleFactor",value:function(t,e,n){var r=t.getEnvelopeInternal(),i=Pt.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)}}]),l}();pr.CAP_ROUND=c.CAP_ROUND,pr.CAP_BUTT=c.CAP_FLAT,pr.CAP_FLAT=c.CAP_FLAT,pr.CAP_SQUARE=c.CAP_SQUARE,pr.MAX_PRECISION_DIGITS=12;var vr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],yr=function(){function e(t){d(this,e),this.geometryFactory=t||new pe}return p(e,[{key:"read",value:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!F[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==vr.indexOf(n)?F[n].call(this,e.coordinates):"GeometryCollection"===n?F[n].call(this,e.geometries):F[n].call(this,e)}},{key:"write",value:function(t){var e=t.getGeometryType();if(!mr[e])throw new Error("Geometry is not supported");return mr[e].call(this,t)}}]),e}(),F={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!F[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=F.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(q(P,U(r)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new P(t[0],t[1]),new P(t[2],t[1]),new P(t[2],t[3]),new P(t[0],t[3]),new P(t[0],t[1])])},Point:function(t){var e=q(P,U(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(F.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=F.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(F.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=F.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],s=F.coordinates.call(this,o),a=this.geometryFactory.createLinearRing(s);r.push(a)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(F.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},mr={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:"Point",coordinates:mr.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=mr.Point.call(this,r);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(mr.coordinate.call(this,i))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=mr.LineString.call(this,r);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=mr.LineString.call(this,t._shell);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=mr.LineString.call(this,i);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=mr.Polygon.call(this,r);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(mr[i].call(this,r))}return{type:"GeometryCollection",geometries:e}}};return{BufferOp:pr,GeoJSONReader:function(){function e(t){d(this,e),this.parser=new yr(t||new pe)}return p(e,[{key:"read",value:function(t){return this.parser.read(t)}}]),e}(),GeoJSONWriter:function(){function t(){d(this,t),this.parser=new yr(this.geometryFactory)}return p(t,[{key:"write",value:function(t){return this.parser.write(t)}}]),t}()}}()}(Wn)),Wn.exports),Hn=Mn(Zn);function $n(){return new Jn}function Jn(){this.reset()}Jn.prototype={constructor:Jn,reset:function(){this.s=this.t=0},add:function(t){Qn(Kn,t,this.t),Qn(this,Kn.s,this.s),this.s?this.t+=Kn.t:this.s=Kn.t},valueOf:function(){return this.s}};var Kn=new Jn;function Qn(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var P=1e-6,L=Math.PI,tr=L/2,er=L/4,nr=2*L,rr=180/L,ir=L/180,R=Math.abs,or=Math.atan,sr=Math.atan2,T=Math.cos,O=Math.sin,ar=Math.sqrt;function ur(t){return t>1?0:t<-1?L:Math.acos(t)}function lr(t){return t>1?tr:t<-1?-tr:Math.asin(t)}function hr(){}function cr(t,e){t&&gr.hasOwnProperty(t.type)&&gr[t.type](t,e)}var fr={Feature:function(t,e){cr(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)cr(n[r].geometry,e)}},gr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){dr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)dr(n[r],e,0)},Polygon:function(t,e){pr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)pr(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)cr(n[r],e)}};function dr(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function pr(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)dr(t[n],e,1);e.polygonEnd()}function vr(t){return[sr(t[1],t[0]),lr(t[2])]}function yr(t){var e=t[0],n=t[1],r=T(n);return[r*T(e),r*O(e),O(n)]}function mr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function br(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function wr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function kr(t){var e=ar(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Er(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t}function Nr(t,e){return[t>L?t-nr:t<-L?t+nr:t,e]}function Sr(n){return function(t,e){return[(t+=n)>L?t-nr:t<-L?t+nr:t,e]}}function Ir(t){var e=Sr(t);return e.invert=Sr(-t),e}function Mr(t,e){var a=T(t),u=O(t),l=T(e),h=O(e);function n(t,e){var n=T(e),r=T(t)*n,i=O(t)*n,o=O(e),s=o*a+r*u;return[sr(i*l-s*h,r*a-o*u),lr(s*l+i*h)]}return n.invert=function(t,e){var n=T(e),r=T(t)*n,i=O(t)*n,o=O(e),s=o*l-i*h;return[sr(i*l+o*h,r*a+s*u),lr(s*a-r*u)]},n}function Cr(t,e){(e=yr(e))[0]-=t,kr(e);var n=ur(-e[1]);return((-e[2]<0?-n:n)+nr-P)%nr}function Lr(){var n,e=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){e.push(n=[])},lineEnd:hr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}}function Tr(t,e){return R(t[0]-e[0])<P&&R(t[1]-e[1])<P}function Pr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Rr(t,e,n,r,o){var s,i,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],i=t[e];if(Tr(r,i)){for(o.lineStart(),s=0;s<e;++s)o.point((r=t[s])[0],r[1]);o.lineEnd()}else a.push(n=new Pr(r,t,null,!0)),u.push(n.o=new Pr(r,null,n,!1)),a.push(n=new Pr(i,t,null,!1)),u.push(n.o=new Pr(i,null,n,!0))}}),a.length){for(u.sort(e),Or(a),Or(u),s=0,i=u.length;s<i;++s)u[s].e=n=!n;for(var l,h,c=a[0];;){for(var f=c,g=!0;f.v;)if((f=f.n)===c)return;l=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(g)for(s=0,i=l.length;s<i;++s)o.point((h=l[s])[0],h[1]);else r(f.x,f.n.x,1,o);f=f.n}else{if(g)for(l=f.p.z,s=l.length-1;s>=0;--s)o.point((h=l[s])[0],h[1]);else r(f.x,f.p.x,-1,o);f=f.p}l=(f=f.o).z,g=!g}while(!f.v);o.lineEnd()}}}function Or(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Ar(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Dr(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}$n(),$n(),$n(),Nr.invert=Nr,function(t){var n;1===t.length&&(n=t,t=function(t,e){return Ar(n(t),e)})}(Ar);var Fr=1e9,Br=-Fr;function zr(y,m,_,x){function b(t,e){return y<=t&&t<=_&&m<=e&&e<=x}function w(t,e,n,r){var i=0,o=0;if(null==t||(i=s(t,n))!==(o=s(e,n))||a(t,e)<0^n>0)do{r.point(0===i||3===i?y:_,i>1?x:m)}while((i=(i+n+4)%4)!==o);else r.point(e[0],e[1])}function s(t,e){return R(t[0]-y)<P?e>0?0:3:R(t[0]-_)<P?e>0?2:1:R(t[1]-m)<P?e>0?1:0:e>0?3:2}function k(t,e){return a(t.x,e.x)}function a(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var i,c,o,s,a,u,l,h,f,g,d,p=r,t=Lr(),e={point:n,lineStart:function(){e.point=v,c&&c.push(o=[]);g=!0,f=!1,l=h=NaN},lineEnd:function(){i&&(v(s,a),u&&f&&t.rejoin(),i.push(t.result()));e.point=n,f&&p.lineEnd()},polygonStart:function(){p=t,i=[],c=[],d=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=c.length;e<n;++e)for(var r,i,o=c[e],s=1,a=o.length,u=o[0],l=u[0],h=u[1];s<a;++s)r=l,i=h,l=(u=o[s])[0],h=u[1],i<=x?h>x&&(l-r)*(x-i)>(h-i)*(y-r)&&++t:h<=x&&(l-r)*(x-i)<(h-i)*(y-r)&&--t;return t}(),e=d&&t,n=(i=Dr(i)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),w(null,null,1,r),r.lineEnd()),n&&Rr(i,k,t,w,r),r.polygonEnd());p=r,i=c=o=null}};function n(t,e){b(t,e)&&p.point(t,e)}function v(t,e){var n=b(t,e);if(c&&o.push([t,e]),g)s=t,a=e,u=n,g=!1,n&&(p.lineStart(),p.point(t,e));else if(n&&f)p.point(t,e);else{var r=[l=Math.max(Br,Math.min(Fr,l)),h=Math.max(Br,Math.min(Fr,h))],i=[t=Math.max(Br,Math.min(Fr,t)),e=Math.max(Br,Math.min(Fr,e))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,h=1,c=e[0]-a,f=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<l)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>l&&(l=s)}if(s=i-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>l&&(l=s)}else if(c>0){if(s<l)return;s<h&&(h=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<h&&(h=s)}return l>0&&(t[0]=a+l*c,t[1]=u+l*f),h<1&&(e[0]=a+h*c,e[1]=u+h*f),!0}}}}}(r,i,y,m,_,x)?n&&(p.lineStart(),p.point(t,e),d=!1):(f||(p.lineStart(),p.point(r[0],r[1])),p.point(i[0],i[1]),n||p.lineEnd(),d=!1)}l=t,h=e,f=n}return e}}var Vr=$n();function qr(t){return t}$n(),$n(),$n();var Gr=1/0,Ur=Gr,Yr=-Gr,jr=Yr,Xr={point:function(t,e){t<Gr&&(Gr=t);t>Yr&&(Yr=t);e<Ur&&(Ur=e);e>jr&&(jr=e)},lineStart:hr,lineEnd:hr,polygonStart:hr,polygonEnd:hr,result:function(){var t=[[Gr,Ur],[Yr,jr]];return Yr=jr=-(Ur=Gr=1/0),t}};function Wr(m,_,x,b){return function(r,a){var u,l,h,i=_(a),e=r.invert(b[0],b[1]),c=Lr(),f=_(c),g=!1,n={point:o,lineStart:s,lineEnd:d,polygonStart:function(){n.point=p,n.lineStart=v,n.lineEnd=y,l=[],u=[]},polygonEnd:function(){n.point=o,n.lineStart=s,n.lineEnd=d,l=Dr(l);var t=function(t,e){var n=e[0],r=e[1],i=[O(n),-T(n),0],o=0,s=0;Vr.reset();for(var a=0,u=t.length;a<u;++a)if(h=(l=t[a]).length)for(var l,h,c=l[h-1],f=c[0],g=c[1]/2+er,d=O(g),p=T(g),v=0;v<h;++v,f=m,d=x,p=b,c=y){var y=l[v],m=y[0],_=y[1]/2+er,x=O(_),b=T(_),w=m-f,k=w>=0?1:-1,E=k*w,N=E>L,S=d*x;if(Vr.add(sr(S*k*O(E),p*b+S*T(E))),o+=N?w+k*nr:w,N^f>=n^m>=n){var I=xr(yr(c),yr(y));kr(I);var M=xr(i,I);kr(M);var C=(N^w>=0?-1:1)*lr(M[2]);(r>C||r===C&&(I[0]||I[1]))&&(s+=N^w>=0?1:-1)}}return(o<-P||o<P&&Vr<-P)^1&s}(u,e);l.length?(g||(a.polygonStart(),g=!0),Rr(l,Hr,t,x,a)):t&&(g||(a.polygonStart(),g=!0),a.lineStart(),x(null,null,1,a),a.lineEnd()),g&&(a.polygonEnd(),g=!1),l=u=null},sphere:function(){a.polygonStart(),a.lineStart(),x(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function o(t,e){var n=r(t,e);m(t=n[0],e=n[1])&&a.point(t,e)}function t(t,e){var n=r(t,e);i.point(n[0],n[1])}function s(){n.point=t,i.lineStart()}function d(){n.point=o,i.lineEnd()}function p(t,e){h.push([t,e]);var n=r(t,e);f.point(n[0],n[1])}function v(){f.lineStart(),h=[]}function y(){p(h[0][0],h[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),o=c.result(),s=o.length;if(h.pop(),u.push(h),h=null,s)if(1&i){if((e=(n=o[0]).length-1)>0){for(g||(a.polygonStart(),g=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else s>1&&2&i&&o.push(o.pop().concat(o.shift())),l.push(o.filter(Zr))}return n}}function Zr(t){return t.length>1}function Hr(t,e){return((t=t.x)[0]<0?t[1]-tr-P:tr-t[1])-((e=e.x)[0]<0?e[1]-tr-P:tr-e[1])}$n();var $r=Wr(function(){return!0},function(i){var o,s=NaN,a=NaN,u=NaN;return{lineStart:function(){i.lineStart(),o=1},point:function(t,e){var n=t>0?L:-L,r=R(t-s);R(r-L)<P?(i.point(s,a=(a+e)/2>0?tr:-tr),i.point(u,a),i.lineEnd(),i.lineStart(),i.point(n,a),i.point(t,a),o=0):u!==n&&r>=L&&(R(s-u)<P&&(s-=u*P),R(t-n)<P&&(t-=n*P),a=function(t,e,n,r){var i,o,s=O(t-n);return R(s)>P?or((O(e)*(o=T(r))*O(n)-O(r)*(i=T(e))*O(t))/(i*o*s)):(e+r)/2}(s,a,t,e),i.point(u,a),i.lineEnd(),i.lineStart(),i.point(n,a),o=0),i.point(s=t,a=e),u=n},lineEnd:function(){i.lineEnd(),s=a=NaN},clean:function(){return 2-o}}},function(t,e,n,r){var i;if(null==t)i=n*tr,r.point(-L,i),r.point(0,i),r.point(L,i),r.point(L,0),r.point(L,-i),r.point(0,-i),r.point(-L,-i),r.point(-L,0),r.point(-L,i);else if(R(t[0]-e[0])>P){var o=t[0]<e[0]?L:-L;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])},[-L,-tr]);function Jr(i,o){var S=T(i),g=S>0,d=R(S)>P;function p(t,e){return T(t)*T(e)>S}function v(t,e,n){var r=[1,0,0],i=xr(yr(t),yr(e)),o=mr(i,i),s=i[0],a=o-s*s;if(!a)return!n&&t;var u=S*o/a,l=-S*s/a,h=xr(r,i),c=wr(r,u);br(c,wr(i,l));var f=h,g=mr(c,f),d=mr(f,f),p=g*g-d*(mr(c,c)-1);if(!(p<0)){var v=ar(p),y=wr(f,(-g-v)/d);if(br(y,c),y=vr(y),!n)return y;var m,_=t[0],x=e[0],b=t[1],w=e[1];x<_&&(m=_,_=x,x=m);var k=x-_,E=R(k-L)<P;if(!E&&w<b&&(m=b,b=w,w=m),E||k<P?E?b+w>0^y[1]<(R(y[0]-_)<P?b:w):b<=y[1]&&y[1]<=w:k>L^(_<=y[0]&&y[0]<=x)){var N=wr(f,(-g+v)/d);return br(N,c),[y,vr(N)]}}}function y(t,e){var n=g?i:L-i,r=0;return t<-n?r|=1:t>n&&(r|=2),e<-n?r|=4:e>n&&(r|=8),r}return Wr(p,function(a){var u,l,h,c,f;return{lineStart:function(){c=h=!1,f=1},point:function(t,e){var n,r=[t,e],i=p(t,e),o=g?i?0:y(t,e):i?y(t+(t<0?L:-L),e):0;if(!u&&(c=h=i)&&a.lineStart(),i!==h&&(!(n=v(u,r))||Tr(u,n)||Tr(r,n))&&(r[0]+=P,r[1]+=P,i=p(r[0],r[1])),i!==h)f=0,i?(a.lineStart(),n=v(r,u),a.point(n[0],n[1])):(n=v(u,r),a.point(n[0],n[1]),a.lineEnd()),u=n;else if(d&&u&&g^i){var s;o&l||!(s=v(r,u,!0))||(f=0,g?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!i||u&&Tr(u,r)||a.point(r[0],r[1]),u=r,h=i,l=o},lineEnd:function(){h&&a.lineEnd(),u=null},clean:function(){return f|(c&&h)<<1}}},function(t,e,n,r){!function(t,e,n,r,i,o){if(n){var s=T(e),a=O(e),u=r*n;null==i?(i=e+r*nr,o=e-u/2):(i=Cr(s,i),o=Cr(s,o),(r>0?i<o:i>o)&&(i+=r*nr));for(var l,h=i;r>0?h>o:h<o;h-=u)l=vr([s,-a*T(h),-a*O(h)]),t.point(l[0],l[1])}}(r,i,o,n,t,e)},g?[0,-i]:[-L,i-L])}function Kr(r){return function(t){var e=new Qr;for(var n in r)e[n]=r[n];return e.stream=t,e}}function Qr(){}function ti(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&fr.hasOwnProperty(t.type)?fr[t.type](t,e):cr(t,e)}(n,t.stream(Xr));var s=Xr.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,l=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,l])}Qr.prototype={constructor:Qr,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ei=16,ni=T(30*ir);function ri(t,e){return+e?function(C,L){function T(t,e,n,r,i,o,s,a,u,l,h,c,f,g){var d=s-t,p=a-e,v=d*d+p*p;if(v>4*L&&f--){var y=r+l,m=i+h,_=o+c,x=ar(y*y+m*m+_*_),b=lr(_/=x),w=R(R(_)-1)<P||R(n-u)<P?(n+u)/2:sr(m,y),k=C(w,b),E=k[0],N=k[1],S=E-t,I=N-e,M=p*S-d*I;(M*M/v>L||R((d*S+p*I)/v-.5)>.3||r*l+i*h+o*c<ni)&&(T(t,e,n,r,i,o,E,N,w,y/=x,m/=x,_,f,g),g.point(E,N),T(E,N,w,y,m,_,s,a,u,l,h,c,f,g))}}return function(i){var n,r,o,s,a,u,l,h,c,f,g,d,p={point:t,lineStart:e,lineEnd:y,polygonStart:function(){i.polygonStart(),p.lineStart=m},polygonEnd:function(){i.polygonEnd(),p.lineStart=e}};function t(t,e){t=C(t,e),i.point(t[0],t[1])}function e(){h=NaN,p.point=v,i.lineStart()}function v(t,e){var n=yr([t,e]),r=C(t,e);T(h,c,l,f,g,d,h=r[0],c=r[1],l=t,f=n[0],g=n[1],d=n[2],ei,i),i.point(h,c)}function y(){p.point=t,i.lineEnd()}function m(){e(),p.point=_,p.lineEnd=x}function _(t,e){v(n=t,e),r=h,o=c,s=f,a=g,u=d,p.point=v}function x(){T(h,c,l,f,g,d,r,o,n,s,a,u,ei,i),p.lineEnd=y,y()}return p}}(t,e):function(n){return Kr({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}(t)}var ii=Kr({point:function(t,e){this.stream.point(t*ir,e*ir)}});function oi(t){return function(t){var n,r,i,e,o,s,a,u,l,h,c=150,f=480,g=250,d=0,p=0,v=0,y=0,m=0,_=null,x=$r,b=null,w=qr,k=.5,E=ri(I,k);function N(t){return[(t=o(t[0]*ir,t[1]*ir))[0]*c+r,i-t[1]*c]}function S(t){return(t=o.invert((t[0]-r)/c,(i-t[1])/c))&&[t[0]*rr,t[1]*rr]}function I(t,e){return[(t=n(t,e))[0]*c+r,i-t[1]*c]}function M(){o=Er(e=function(t,e,n){return(t%=nr)?e||n?Er(Ir(t),Mr(e,n)):Ir(t):e||n?Mr(e,n):Nr}(v,y,m),n);var t=n(d,p);return r=f-t[0]*c,i=g+t[1]*c,C()}function C(){return l=h=null,N}return N.stream=function(t){return l&&h===t?l:l=ii(x(e,E(w(h=t))))},N.clipAngle=function(t){return arguments.length?(x=+t?Jr(_=t*ir,6*ir):(_=null,$r),C()):_*rr},N.clipExtent=function(t){return arguments.length?(w=null==t?(b=s=a=u=null,qr):zr(b=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),C()):null==b?null:[[b,s],[a,u]]},N.scale=function(t){return arguments.length?(c=+t,M()):c},N.translate=function(t){return arguments.length?(f=+t[0],g=+t[1],M()):[f,g]},N.center=function(t){return arguments.length?(d=t[0]%360*ir,p=t[1]%360*ir,M()):[d*rr,p*rr]},N.rotate=function(t){return arguments.length?(v=t[0]%360*ir,y=t[1]%360*ir,m=t.length>2?t[2]%360*ir:0,M()):[v*rr,y*rr,m*rr]},N.precision=function(t){return arguments.length?(E=ri(I,k=t*t),C()):ar(k)},N.fitExtent=function(t,e){return ti(N,t,e)},N.fitSize=function(t,e){return function(t,e,n){return ti(t,[[0,0],e],n)}(N,t,e)},function(){return n=t.apply(this,arguments),N.invert=n.invert&&S,M()}}(function(){return t})()}function si(o){return function(t,e){var n=T(t),r=T(e),i=o(n*r);return[i*r*O(t),i*O(e)]}}function ai(s){return function(t,e){var n=ar(t*t+e*e),r=s(n),i=O(r),o=T(r);return[sr(t*i,n*o),lr(n&&e*i/n)]}}si(function(t){return ar(2/(1+t))}).invert=ai(function(t){return 2*lr(t/2)});var ui=si(function(t){return(t=ur(t))&&t/O(t)});function li(){return oi(ui).scale(79.4188).clipAngle(179.999)}function hi(t,e){return[t,e]}ui.invert=ai(function(t){return t}),hi.invert=hi;var ci=Hn.BufferOp,fi=Hn.GeoJSONReader,gi=Hn.GeoJSONWriter;function di(t,n,r,i){var e=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var s=[];return Pt(t,function(t){var e=di(t,n,r,i);e&&s.push(e)}),j(s)}var a=function(t){var e=jn(t).geometry.coordinates,n=[-e[0],-e[1]];return li().rotate(n).scale(d)}(o),u={type:o.type,coordinates:vi(o.coordinates,a)},l=(new fi).read(u),h=st(at(n,r),"meters"),c=ci.bufferOp(l,h,i);if(!pi((c=(new gi).write(c)).coordinates))return G({type:c.type,coordinates:yi(c.coordinates,a)},e)}function pi(t){return Array.isArray(t[0])?pi(t[0]):isNaN(t[0])}function vi(t,e){return"object"!==_r(t[0])?e(t):t.map(function(t){return vi(t,e)})}function yi(t,e){return"object"!==_r(t[0])?e.invert(t):t.map(function(t){return yi(t,e)})}function mi(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=0,s=0,a=0;return Pt(t,function(t,e,n){var r=i.weight?null==n?void 0:n[i.weight]:void 0;if(!X(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+e);(r=Number(r))>0&&w(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),U([o/a,s/a],i.properties,i)}function _i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,i=0;return w(t,function(t){n+=t[0],r+=t[1],i++},!0),U([n/i,r/i],e.properties)}function xi(s,t,e,n,r){var i=n.tolerance||.001,a=0,u=0,l=0,h=0;if(N(e,function(t){var e,n=null==(e=t.properties)?void 0:e.weight,r=null==n?1:n;if(!X(r=Number(r)))throw new Error("weight value must be a number");if(r>0){h+=1;var i=r*$(t,s);0===i&&(i=1);var o=r/i;a+=t.geometry.coordinates[0]*o,u+=t.geometry.coordinates[1]*o,l+=o}}),h<1)throw new Error("no features to measure");var o=a/l,c=u/l;return 1===h||0===r||Math.abs(o-t[0])<i&&Math.abs(c-t[1])<i?U([o,c],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([o,c]),xi([o,c],s,e,n,r-1))}var bi={exports:{}},wi=Cn(un),ki=function(){return i(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei;if(g(this,t),this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)},[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r}},{key:"_down",value:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),s=e[o],a=o+1;if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}])}();function Ei(t,e){return t<e?-1:t>e?1:0}var Ni,Si,Ii,Mi,Ci,Li=Cn(Object.freeze({__proto__:null,default:ki})),Ti={exports:{}};function Pi(){if(Ci)return Ti.exports;Ci=1;var i=(Si||(Si=1,Ni=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=(r-n)/2,u=0,l=a-1;u<a;l=u++){var h=e[n+2*u+0],c=e[n+2*u+1],f=e[n+2*l+0],g=e[n+2*l+1];c>o!=g>o&&i<(f-h)*(o-c)/(g-c)+h&&(s=!s)}return s}),Ni),o=(Mi||(Mi=1,Ii=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=r-n,u=0,l=a-1;u<a;l=u++){var h=e[u+n][0],c=e[u+n][1],f=e[l+n][0],g=e[l+n][1];c>o!=g>o&&i<(f-h)*(o-c)/(g-c)+h&&(s=!s)}return s}),Ii);return Ti.exports=function(t,e,n,r){return e.length>0&&Array.isArray(e[0])?o(t,e,n,r):i(t,e,n,r)},Ti.exports.nested=o,Ti.exports.flat=i,Ti.exports}var Ri,Oi,Ai={exports:{}};Ai.exports;function Di(){return Ri||(Ri=1,function(t,e){!function(t){var O=134217729,A=33306690738754706e-32;function D(t,e,n,r,i){var o,s,a,u,l=e[0],h=r[0],c=0,f=0;h>l==h>-l?(o=l,l=e[++c]):(o=h,h=r[++f]);var g=0;if(c<t&&f<n)for(h>l==h>-l?(a=o-((s=l+o)-l),l=e[++c]):(a=o-((s=h+o)-h),h=r[++f]),o=s,0!==a&&(i[g++]=a);c<t&&f<n;)h>l==h>-l?(a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c]):(a=o-((s=o+h)-(u=s-o))+(h-u),h=r[++f]),o=s,0!==a&&(i[g++]=a);for(;c<t;)a=o-((s=o+l)-(u=s-o))+(l-u),l=e[++c],o=s,0!==a&&(i[g++]=a);for(;f<n;)a=o-((s=o+h)-(u=s-o))+(h-u),h=r[++f],o=s,0!==a&&(i[g++]=a);return 0===o&&0!==g||(i[g++]=o),g}function e(t){return new Float64Array(t)}var h=33306690738754716e-32,F=22204460492503146e-32,B=11093356479670487e-47,z=e(4),V=e(8),q=e(12),G=e(16),U=e(4);t.orient2d=function(t,e,n,r,i,o){var s=(e-o)*(n-i),a=(t-i)*(r-o),u=s-a;if(0===s||0===a||s>0!=a>0)return u;var l=Math.abs(s+a);return Math.abs(u)>=h*l?u:-function(t,e,n,r,i,o,s){var a,u,l,h,c,f,g,d,p,v,y,m,_,x,b,w,k,E,N=t-i,S=n-i,I=e-o,M=r-o;c=(b=(d=N-(g=(f=O*N)-(f-N)))*(v=M-(p=(f=O*M)-(f-M)))-((x=N*M)-g*p-d*p-g*v))-(y=b-(k=(d=I-(g=(f=O*I)-(f-I)))*(v=S-(p=(f=O*S)-(f-S)))-((w=I*S)-g*p-d*p-g*v))),z[0]=b-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-w),z[1]=_-(y+c)+(c-w),c=(E=m+y)-m,z[2]=m-(E-c)+(y-c),z[3]=E;var C=function(t,e){for(var n=e[0],r=1;r<t;r++)n+=e[r];return n}(4,z),L=F*s;if(C>=L||-C>=L)return C;if(a=t-(N+(c=t-N))+(c-i),l=n-(S+(c=n-S))+(c-i),u=e-(I+(c=e-I))+(c-o),h=r-(M+(c=r-M))+(c-o),0===a&&0===u&&0===l&&0===h)return C;if(L=B*s+A*Math.abs(C),(C+=N*h+M*a-(I*l+S*u))>=L||-C>=L)return C;c=(b=(d=a-(g=(f=O*a)-(f-a)))*(v=M-(p=(f=O*M)-(f-M)))-((x=a*M)-g*p-d*p-g*v))-(y=b-(k=(d=u-(g=(f=O*u)-(f-u)))*(v=S-(p=(f=O*S)-(f-S)))-((w=u*S)-g*p-d*p-g*v))),U[0]=b-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-w),U[1]=_-(y+c)+(c-w),c=(E=m+y)-m,U[2]=m-(E-c)+(y-c),U[3]=E;var T=D(4,z,4,U,V);c=(b=(d=N-(g=(f=O*N)-(f-N)))*(v=h-(p=(f=O*h)-(f-h)))-((x=N*h)-g*p-d*p-g*v))-(y=b-(k=(d=I-(g=(f=O*I)-(f-I)))*(v=l-(p=(f=O*l)-(f-l)))-((w=I*l)-g*p-d*p-g*v))),U[0]=b-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-w),U[1]=_-(y+c)+(c-w),c=(E=m+y)-m,U[2]=m-(E-c)+(y-c),U[3]=E;var P=D(T,V,4,U,q);c=(b=(d=a-(g=(f=O*a)-(f-a)))*(v=h-(p=(f=O*h)-(f-h)))-((x=a*h)-g*p-d*p-g*v))-(y=b-(k=(d=u-(g=(f=O*u)-(f-u)))*(v=l-(p=(f=O*l)-(f-l)))-((w=u*l)-g*p-d*p-g*v))),U[0]=b-(y+c)+(c-k),c=(_=x-((m=x+y)-(c=m-x))+(y-c))-(y=_-w),U[1]=_-(y+c)+(c-w),c=(E=m+y)-m,U[2]=m-(E-c)+(y-c),U[3]=E;var R=D(P,q,4,U,G);return G[R-1]}(t,e,n,r,i,o,l)},t.orient2dfast=function(t,e,n,r,i,o){return(e-o)*(n-i)-(t-i)*(r-o)},Object.defineProperty(t,"__esModule",{value:!0})}(e)}(0,Ai.exports)),Ai.exports}var Fi=function(){if(Oi)return bi.exports;Oi=1;var m=wi,v=Li,_=Pi(),r=Di().orient2d;function t(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)_(t[o],a)||u.push(t[o]);return function(t){t.sort(M);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&k(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&k(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}(u)}(t),i=new m(16);i.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},i.compareMinX=function(t,e){return t[0]-e[0]},i.compareMinY=function(t,e){return t[1]-e[1]},i.load(t);for(var o,s=[],a=0;a<r.length;a++){var u=r[a];i.remove(u),o=N(u,o),s.push(o)}var l=new m(16);for(a=0;a<s.length;a++)l.insert(E(s[a]));for(var h=e*e,c=n*n;s.length;){var f=s.shift(),g=f.p,d=f.next.p,p=S(g,d);if(!(p<c)){var v=p/h;(u=x(i,f.prev.p,g,d,f.next.next.p,v,l))&&Math.min(S(u,g),S(u,d))<=v&&(s.push(f),s.push(N(u,f)),i.remove(u),l.remove(f),l.insert(E(f)),l.insert(E(f.next)))}}f=o;var y=[];do{y.push(f.p),f=f.next}while(f!==o);return y.push(f.p),y}function x(t,e,n,r,i,o,s){for(var a=new v([],y),u=t.data;u;){for(var l=0;l<u.children.length;l++){var h=u.children[l],c=u.leaf?I(h,n,r):b(n,r,h);c>o||a.push({node:h,dist:c})}for(;a.length&&!a.peek().node.children;){var f=a.pop(),g=f.node,d=I(g,e,n),p=I(g,r,i);if(f.dist<d&&f.dist<p&&w(n,g,s)&&w(r,g,s))return g}(u=a.pop())&&(u=u.node)}return null}function y(t,e){return t.dist-e.dist}function b(t,e,n){if(a(t,n)||a(e,n))return 0;var r=u(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=u(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=u(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=u(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function a(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function w(t,e,n){for(var r,i,o,s,a=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),c=n.search({minX:a,minY:u,maxX:l,maxY:h}),f=0;f<c.length;f++)if(r=c[f].p,i=c[f].next.p,o=t,r!==(s=e)&&i!==o&&k(r,i,o)>0!=k(r,i,s)>0&&k(o,s,r)>0!=k(o,s,i)>0)return!1;return!0}function k(t,e,n){return r(t[0],t[1],e[0],e[1],n[0],n[1])}function E(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function N(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function S(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function I(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function u(t,e,n,r,i,o,s,a){var u,l,h,c,f=n-t,g=r-e,d=s-i,p=a-o,v=t-i,y=e-o,m=f*f+g*g,_=f*d+g*p,x=d*d+p*p,b=f*v+g*y,w=d*v+p*y,k=m*x-_*_,E=k,N=k;0===k?(l=0,E=1,c=w,N=x):(c=m*w-_*b,(l=_*w-x*b)<0?(l=0,c=w,N=x):l>E&&(l=E,c=w+_,N=x)),c<0?(c=0,-b<0?l=0:-b>m?l=E:(l=-b,E=m)):c>N&&(c=N,-b+_<0?l=0:-b+_>m?l=E:(l=-b+_,E=m));var S=(1-(h=0===c?0:c/N))*i+h*s-((1-(u=0===l?0:l/E))*t+u*n),I=(1-h)*o+h*a-((1-u)*e+u*r);return S*S+I*I}function M(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}return v.default&&(v=v.default),bi.exports=t,bi.exports.default=t,bi.exports}(),Bi=Mn(Fi);function zi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.concavity=e.concavity||1/0;var n=[];if(w(t,function(t){n.push([t[0],t[1]])}),!n.length)return null;var r=Bi(n,e.concavity);return r.length>3?z([r]):null}function Vi(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],s=0;s<r;s++)o.push(Et(t,e,-360*s/r,n).geometry.coordinates);return o.push(o[0]),z([o],i)}function p(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return qi(t);case"FeatureCollection":return function(e){var n={type:"FeatureCollection"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return qi(t)}),n}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ui(t);default:throw new Error("unknown GeoJSON type")}}function qi(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=Gi(e.properties),null==e.geometry?n.geometry=null:n.geometry=Ui(e.geometry),n}function Gi(n){var r={};return n?(Object.keys(n).forEach(function(t){var e=n[t];"object"===_r(e)?null===e?r[t]=null:Array.isArray(e)?r[t]=e.map(function(t){return t}):r[t]=Gi(e):r[t]=e}),r):r}function Ui(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return Ui(t)}),e):(e.coordinates=Yi(t.coordinates),e)}function Yi(t){var e=t;return"object"!==_r(e[0])?e.slice():e.map(function(t){return Yi(t)})}function ji(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return N(t,function(t){Hi(t.properties,e)&&n.push(t)}),j(n)}function Xi(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=Zi(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(j(u),s,o)}}function Wi(t,e,r,i){var o=i;return Xi(t,e,function(t,e,n){o=0===n&&void 0===i?t:r(o,t,e,n)}),o}function Zi(t,i){var o={};return N(t,function(t,e){var n=t.properties||{};if(Object.prototype.hasOwnProperty.call(n,String(i))){var r=n[i];Object.prototype.hasOwnProperty.call(o,r)?o[r].push(e):o[r]=[e]}}),o}function Hi(t,e){if(void 0===t)return!1;var n=_r(e);if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Hi(t,e[r]))return!1;return!0}return $i(t,e)}function $i(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Ji(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var Ki,Qi,to,eo,no,ro,io=Object.freeze({__proto__:null,applyFilter:Hi,clusterEach:Xi,clusterReduce:Wi,createBins:Zi,filterProperties:Ji,getCluster:ji,propertiesContainsFilter:$i}),oo=Ze;function so(){return Qi||(Qi=1,Ki={eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}),Ki}var ao=function(){if(ro)return no;ro=1;var t=so(),e=function(){if(eo)return to;eo=1;var t=so(),x=t.eudist,b=t.dist;return to={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?x:b,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];for(o&&s.join("_"),r.push(s);r.length<e;){for(var a=[],u=r.length,l=0,h=[],c=0;c<i;c++){for(var f=1/0,g=0;g<u;g++){var d=n(t[c],r[g]);d<=f&&(f=d)}a[c]=f}for(var p=0;p<i;p++)l+=a[p];for(var v=0;v<i;v++)h[v]={i:v,v:t[v],pr:a[v]/l,cs:0};h.sort(function(t,e){return t.pr-e.pr}),h[0].cs=h[0].pr;for(var y=1;y<i;y++)h[y].cs=h[y-1].cs+h[y].pr;for(var m=Math.random(),_=0;_<i-1&&h[_++].cs<m;);r.push(h[_-1].v)}return r}},to}(),F=t.eudist;t.mandist,t.dist;var B=e.kmrand,z=e.kmpp;function V(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}return no=function(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,l=r||1e4,h=t.length,c=t[0].length,f=c>0,g=[];if(n)i="kmrand"==n?B(t,e):"kmpp"==n?z(t,e):n;else for(var d={};i.length<e;){var p=Math.floor(Math.random()*h);d[p]||(d[p]=!0,i.push(t[p]))}do{V(e,0,g);for(var v=0;v<h;v++){for(var y=1/0,m=0,_=0;_<e;_++){(a=f?F(t[v],i[_]):Math.abs(t[v]-i[_]))<=y&&(y=a,m=_)}s[v]=m,g[m]++}for(var x=[],b=(o=[],0);b<e;b++)x[b]=f?V(c,0,x[b]):0,o[b]=i[b];if(f){for(var w=0;w<e;w++)i[w]=[];for(var k=0;k<h;k++)for(var E=x[s[k]],N=t[k],S=0;S<c;S++)E[S]+=N[S];u=!0;for(var I=0;I<e;I++){for(var M=i[I],C=x[I],L=o[I],D=g[I],T=0;T<c;T++)M[T]=C[T]/D||0;if(u)for(var P=0;P<c;P++)if(L[P]!=M[P]){u=!1;break}}}else{for(var R=0;R<h;R++){x[s[R]]+=t[R]}for(var O=0;O<e;O++)i[O]=x[O]/g[O]||0;u=!0;for(var A=0;A<e;A++)if(o[A]!=i[A]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:e,idxs:s,centroids:i}},no}(),uo=Mn(ao);var lo=Ze;function ho(t,n){var o=!1;return j(function(t){if(t.length<3)return[];t.sort(fo);var e,n,r,i,o,s,a=t.length-1,u=t[a].x,l=t[0].x,h=t[a].y,c=h,f=1e-12;for(;a--;)t[a].y<h&&(h=t[a].y),t[a].y>c&&(c=t[a].y);var g,d=l-u,p=c-h,v=d>p?d:p,y=.5*(l+u),m=.5*(c+h),_=[new co({__sentinel:!0,x:y-20*v,y:m-v},{__sentinel:!0,x:y,y:m+20*v},{__sentinel:!0,x:y+20*v,y:m-v})],x=[],b=[];a=t.length;for(;a--;){for(b.length=0,g=_.length;g--;)(d=t[a].x-_[g].x)>0&&d*d>_[g].r?(x.push(_[g]),_.splice(g,1)):d*d+(p=t[a].y-_[g].y)*p>_[g].r||(b.push(_[g].a,_[g].b,_[g].b,_[g].c,_[g].c,_[g].a),_.splice(g,1));for(go(b),g=b.length;g;)n=b[--g],e=b[--g],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>f&&_.push(new co(e,n,r))}Array.prototype.push.apply(x,_),a=x.length;for(;a--;)(x[a].a.__sentinel||x[a].b.__sentinel||x[a].c.__sentinel)&&x.splice(a,1);return x}(t.features.map(function(t){var e={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return n?e.z=t.properties[n]:3===t.geometry.coordinates.length&&(o=!0,e.z=t.geometry.coordinates[2]),e})).map(function(t){var e=[t.a.x,t.a.y],n=[t.b.x,t.b.y],r=[t.c.x,t.c.y],i={};return o?(e.push(t.a.z),n.push(t.b.z),r.push(t.c.z)):i={a:t.a.z,b:t.b.z,c:t.c.z},z([[e,n,r,e]],i)}))}var co=i(function t(e,n,r){g(this,t),this.a=e,this.b=n,this.c=r;var i,o,s=n.x-e.x,a=n.y-e.y,u=r.x-e.x,l=r.y-e.y,h=s*(e.x+n.x)+a*(e.y+n.y),c=u*(e.x+r.x)+l*(e.y+r.y),f=2*(s*(r.y-n.y)-a*(r.x-n.x));this.x=(l*h-a*c)/f,this.y=(s*c-u*h)/f,i=this.x-e.x,o=this.y-e.y,this.r=i*i+o*o});function fo(t,e){return e.x-t.x}function go(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function po(t){return t}function vo(t,e){var o=function(t){if(null==t)return po;var o,s,a=t.scale[0],u=t.scale[1],l=t.translate[0],h=t.translate[1];return function(t,e){e||(o=s=0);var n=2,r=t.length,i=new Array(r);for(i[0]=(o+=t[0])*a+l,i[1]=(s+=t[1])*u+h;n<r;)i[n]=t[n],++n;return i}}(t.transform),s=t.arcs;function i(t,e){e.length&&e.pop();for(var n=s[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(o(n[r],r));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,i)}function a(t){return o(t)}function u(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function n(t){for(var e=u(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(n)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=a(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(a);break;case"LineString":n=u(e.arcs);break;case"MultiLineString":n=e.arcs.map(u);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}function yo(u,i){var o={},l={},h={},s=[],a=-1;function t(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){o[t<0?~t:t]=1}),s.push(r)}}return i.forEach(function(t,e){var n,r=u.arcs[t<0?~t:t];r.length<3&&!r[1][0]&&!r[1][1]&&(n=i[++a],i[a]=t,i[e]=n)}),i.forEach(function(t){var e,n,r=function(t){var e,n=u.arcs[t<0?~t:t],r=n[0];u.transform?(e=[0,0],n.forEach(function(t){e[0]+=t[0],e[1]+=t[1]})):e=n[n.length-1];return t<0?[e,r]:[r,e]}(t),i=r[0],o=r[1];if(e=h[i])if(delete h[e.end],e.push(t),e.end=o,n=l[o]){delete l[n.start];var s=n===e?e:e.concat(n);l[s.start=e.start]=h[s.end=n.end]=s}else l[e.start]=h[e.end]=e;else if(e=l[o])if(delete l[e.start],e.unshift(t),e.start=i,n=h[i]){delete h[n.end];var a=n===e?e:n.concat(e);l[a.start=n.start]=h[a.end=e.end]=a}else l[e.start]=h[e.end]=e;else l[(e=[t]).start=i]=h[e.end=o]=e}),t(h,l),t(l,h),i.forEach(function(t){o[t<0?~t:t]||s.push([t])}),s}function mo(t){return vo(t,_o.apply(this,arguments))}function _o(a,t){var u={},n=[],r=[];function i(e){e.forEach(function(t){t.forEach(function(t){(u[t=t<0?~t:t]||(u[t]=[])).push(e)})}),n.push(e)}function l(t){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(vo(a,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}}),n.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,r.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),n.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:r.map(function(t){var e,n=[];if(t.forEach(function(t){t.forEach(function(t){t.forEach(function(t){u[t<0?~t:t].length<2&&n.push(t)})})}),(e=(n=yo(a,n)).length)>1)for(var r,i,o=1,s=l(n[0]);o<e;++o)(r=l(n[o]))>s&&(i=n[0],n[0]=n[o],n[o]=i,s=r);return n}).filter(function(t){return t.length>0})}}var xo=Object.prototype.hasOwnProperty;function bo(o,s,a,t,u,e){3===arguments.length&&(t=e=Array,u=null);for(var l=new t(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),h=new e(o),c=o-1,n=0;n<o;++n)l[n]=u;return{set:function(t,e){for(var n=s(t)&c,r=l[n],i=0;r!=u;){if(a(r,t))return h[n]=e;if(++i>=o)throw new Error("full hashmap");r=l[n=n+1&c]}return l[n]=t,h[n]=e,e},maybeSet:function(t,e){for(var n=s(t)&c,r=l[n],i=0;r!=u;){if(a(r,t))return h[n];if(++i>=o)throw new Error("full hashmap");r=l[n=n+1&c]}return l[n]=t,h[n]=e,e},get:function(t,e){for(var n=s(t)&c,r=l[n],i=0;r!=u;){if(a(r,t))return h[n];if(++i>=o)break;r=l[n=n+1&c]}return e},keys:function(){for(var t=[],e=0,n=l.length;e<n;++e){var r=l[e];r!=u&&t.push(r)}return t}}}function wo(t,e){return t[0]===e[0]&&t[1]===e[1]}var ko=new ArrayBuffer(16),Eo=new Float64Array(ko),No=new Uint32Array(ko);function So(t){Eo[0]=t[0],Eo[1]=t[1];var e=No[0]^No[1];return 2147483647&(e=e<<5^e>>7^No[2]^No[3])}function Io(t){var e,n,r,i,o=t.coordinates,s=t.lines,a=t.rings,u=function(){for(var t=bo(1.4*o.length,b,w,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),l=new Int32Array(o.length),h=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int8Array(o.length),g=0;for(e=0,n=o.length;e<n;++e)l[e]=h[e]=c[e]=-1;for(e=0,n=s.length;e<n;++e){var d=s[e],p=d[0],v=d[1];for(r=u[p],i=u[++p],++g,f[r]=1;++p<=v;)x(e,r,r=i,i=u[p]);++g,f[i]=1}for(e=0,n=o.length;e<n;++e)l[e]=-1;for(e=0,n=a.length;e<n;++e){var y=a[e],m=y[0]+1,_=y[1];for(x(e,u[_-1],r=u[m-1],i=u[m]);++m<=_;)x(e,r,r=i,i=u[m])}function x(t,e,n,r){if(l[n]!==t){l[n]=t;var i=h[n];if(i>=0){var o=c[n];i===e&&o===r||i===r&&o===e||(++g,f[n]=1)}else h[n]=e,c[n]=r}}function b(t){return So(o[t])}function w(t,e){return wo(o[t],o[e])}l=h=c=null;var k,E=function(i,o,s,t,a){3===arguments.length&&(t=Array,a=null);for(var u=new t(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),l=i-1,e=0;e<i;++e)u[e]=a;return{add:function(t){for(var e=o(t)&l,n=u[e],r=0;n!=a;){if(s(n,t))return!0;if(++r>=i)throw new Error("full hashset");n=u[e=e+1&l]}return u[e]=t,!0},has:function(t){for(var e=o(t)&l,n=u[e],r=0;n!=a;){if(s(n,t))return!0;if(++r>=i)break;n=u[e=e+1&l]}return!1},values:function(){for(var t=[],e=0,n=u.length;e<n;++e){var r=u[e];r!=a&&t.push(r)}return t}}}(1.4*g,So,wo);for(e=0,n=o.length;e<n;++e)f[k=u[e]]&&E.add(o[k]);return E}function Mo(t,e,n,r){Co(t,e,n),Co(t,e,e+r),Co(t,e+r,n)}function Co(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Lo(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?To:"Feature"===n.type?Po:Ro)(n);return r}function To(t){var e={type:"GeometryCollection",geometries:t.features.map(Po)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Po(t){var e,n=Ro(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Ro(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Ro)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Oo(t,e){var n=function(t){var r=1/0,i=1/0,o=-1/0,s=-1/0;function e(t){null!=t&&xo.call(n,t.type)&&n[t.type](t)}var n={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){a(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(a)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(l)}};function a(t){var e=t[0],n=t[1];e<r&&(r=e),e>o&&(o=e),n<i&&(i=n),n>s&&(s=n)}function u(t){t.forEach(a)}function l(t){t.forEach(u)}for(var h in t)e(t[h]);return o>=r&&s>=i?[r,i,o,s]:void 0}(t=Lo(t)),r=function(t){var e,n,r,i,h=t.coordinates,o=t.lines,s=t.rings,a=o.length+s.length;for(delete t.lines,delete t.rings,r=0,i=o.length;r<i;++r)for(e=o[r];e=e.next;)++a;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++a;var l=bo(2*a*1.4,So,wo),c=t.arcs=[];for(r=0,i=o.length;r<i;++r){e=o[r];do{u(e)}while(e=e.next)}for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)do{u(n)}while(n=n.next);else f(n);function u(t){var e,n,r,i,o,s,a,u;if(r=l.get(e=h[t[0]]))for(a=0,u=r.length;a<u;++a)if(g(i=r[a],t))return t[0]=i[0],void(t[1]=i[1]);if(o=l.get(n=h[t[1]]))for(a=0,u=o.length;a<u;++a)if(d(s=o[a],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):l.set(e,[t]),o?o.push(t):l.set(n,[t]),c.push(t)}function f(t){var e,n,r,i,o;if(n=l.get(h[t[0]]))for(i=0,o=n.length;i<o;++i){if(p(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(v(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=l.get(e=h[t[0]+y(t)]))for(i=0,o=n.length;i<o;++i){if(p(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(v(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):l.set(e,[t]),c.push(t)}function g(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!wo(h[n],h[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!wo(h[n],h[o]))return!1;return!0}function p(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var o=y(t),s=y(e),a=0;a<i;++a)if(!wo(h[n+(a+o)%i],h[r+(a+s)%i]))return!1;return!0}function v(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],s=i-n;if(s!==o-r)return!1;for(var a=y(t),u=s-y(e),l=0;l<s;++l)if(!wo(h[n+(l+a)%s],h[o-(l+u)%s]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],r=e,i=r,o=h[r];++r<n;){var s=h[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}return t}(function(t){var e,n,r,i=Io(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],l=u[0],h=u[1];++l<h;)i.has(o[l])&&(e={0:l,1:u[1]},u[1]=l,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var c=a[n],f=c[0],g=f,d=c[1],p=i.has(o[f]);++g<d;)i.has(o[g])&&(p?(e={0:g,1:c[1]},c[1]=g,c=c.next=e):(Mo(o,f,d,d-g),o[d]=o[f],p=!0,g=f));return t}(function(t){var i=-1,o=[],s=[],a=[];function e(t){t&&xo.call(n,t.type)&&n[t.type](t)}var n={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function r(t){for(var e=0,n=t.length;e<n;++e)a[++i]=t[e];var r={0:i-n+1,1:i};return o.push(r),r}function u(t){for(var e=0,n=t.length;e<n;++e)a[++i]=t[e];var r={0:i-n+1,1:i};return s.push(r),r}function l(t){return t.map(u)}for(var h in t)e(t[h]);return{type:"Topology",coordinates:a,lines:o,rings:s,objects:t}}(t))),i=r.coordinates,o=bo(1.4*r.arcs.length,Ao,Do);function s(t){t&&xo.call(a,t.type)&&a[t.type](t)}t=r.objects,r.bbox=n,r.arcs=r.arcs.map(function(t,e){return o.set(t,e),i.slice(t[0],t[1]+1)}),delete r.coordinates,i=null;var a={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=u(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(u)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function u(t){var e=[];do{var n=o.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(u)}for(var h in t)s(t[h]);return r}function Ao(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Do(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function Fo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!W(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==bt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=p(t));var r=[],i=Bt(t,function(t,e){var n=function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Bo(r[0]),s=Bo(r[r.length-1]),a=Bo(i[0]),u=Bo(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(a===s)n=r.concat(i.slice(1));else if(o===a)n=r.slice(1).reverse().concat(i);else{if(s!==u)return null;n=r.concat(i.reverse().slice(1))}return Y(n)}(t,e);return n||(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:et(r.map(function(t){return t.coordinates})):null}function Bo(t){return t[0].toString()+","+t[1].toString()}function zo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!W(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==bt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=p(t));var r=function(t){var e={};b(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);if(1===n.length)return n[0];return null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return Fo(i,e);case"Polygon":return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("FeatureCollection"!==bt(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=p(t));var n=[];b(t,function(t){n.push(t.geometry)});var r=Oo({geoms:it(n).geometry});return mo(r,r.objects.geoms.geometries)}(i,e);default:throw new Error(r+" is not supported")}}var Vo=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,qo=Math.ceil,Go=Math.floor,Uo="[BigNumber Error] ",Yo=Uo+"Number primitive has more than 15 significant digits: ",jo=1e14,A=14,Xo=9007199254740991,Wo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zo=1e7,D=1e9;function Ho(t){var e=0|t;return t>0||t===e?e:e-1}function $o(t){for(var e,n,r=1,i=t.length,o=t[0]+"";r<i;){for(e=t[r++]+"",n=A-e.length;n--;e="0"+e);o+=e}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function Jo(t,e){var n,r,i=t.c,o=e.c,s=t.s,a=e.s,u=t.e,l=e.e;if(!s||!a)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=u==l,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>l^n?1:-1;for(a=(u=i.length)<(l=o.length)?u:l,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^n?1:-1;return u==l?0:u>l^n?1:-1}function F(t,e,n,r){if(t<e||t>n||t!==Go(t))throw Error(Uo+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Ko(t){var e=t.c.length-1;return Ho(t.e/A)==e&&t.c[e]%2!=0}function Qo(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function ts(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(++e>(r=t.length)){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var es=function t(e){var m,c,f,n,l,s,a,u,h,g,r=M.prototype={constructor:M,toString:null,valueOf:null},p=new M(1),_=20,x=4,d=-7,v=21,y=-1e7,b=1e7,w=!1,o=1,k=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},N="0123456789abcdefghijklmnopqrstuvwxyz",S=!0;function M(t,e){var n,r,i,o,s,a,u,l,h=this;if(!(h instanceof M))return new M(t,e);if(null==e){if(t&&!0===t._isBigNumber)return h.s=t.s,void(!t.c||t.e>b?h.c=h.e=null:t.e<y?h.c=[h.e=0]:(h.e=t.e,h.c=t.c.slice()));if((a="number"==typeof t)&&0*t==0){if(h.s=1/t<0?(t=-t,-1):1,t===~~t){for(o=0,s=t;s>=10;s/=10,o++);return void(o>b?h.c=h.e=null:(h.e=o,h.c=[t]))}l=String(t)}else{if(!Vo.test(l=String(t)))return f(h,l,a);h.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(o=l.indexOf("."))>-1&&(l=l.replace(".","")),(s=l.search(/e/i))>0?(o<0&&(o=s),o+=+l.slice(s+1),l=l.substring(0,s)):o<0&&(o=l.length)}else{if(F(e,2,N.length,"Base"),10==e&&S)return L(h=new M(t),_+h.e+1,x);if(l=String(t),a="number"==typeof t){if(0*t!=0)return f(h,l,a,e);if(h.s=1/t<0?(l=l.slice(1),-1):1,M.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(Yo+t)}else h.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(n=N.slice(0,e),o=s=0,u=l.length;s<u;s++)if(n.indexOf(r=l.charAt(s))<0){if("."==r){if(s>o){o=u;continue}}else if(!i&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){i=!0,s=-1,o=0;continue}return f(h,String(t),a,e)}a=!1,(o=(l=c(l,e,10,h.s)).indexOf("."))>-1?l=l.replace(".",""):o=l.length}for(s=0;48===l.charCodeAt(s);s++);for(u=l.length;48===l.charCodeAt(--u););if(l=l.slice(s,++u)){if(u-=s,a&&M.DEBUG&&u>15&&(t>Xo||t!==Go(t)))throw Error(Yo+h.s*t);if((o=o-s-1)>b)h.c=h.e=null;else if(o<y)h.c=[h.e=0];else{if(h.e=o,h.c=[],s=(o+1)%A,o<0&&(s+=A),s<u){for(s&&h.c.push(+l.slice(0,s)),u-=A;s<u;)h.c.push(+l.slice(s,s+=A));s=A-(l=l.slice(s)).length}else s-=u;for(;s--;l+="0");h.c.push(+l)}}else h.c=[h.e=0]}function i(t,e,n,r){var i,o,s,a,u;if(null==n?n=x:F(n,0,8),!t.c)return t.toString();if(i=t.c[0],s=t.e,null==e)u=$o(t.c),u=1==r||2==r&&(s<=d||s>=v)?Qo(u,s):ts(u,s,"0");else if(o=(t=L(new M(t),e,n)).e,a=(u=$o(t.c)).length,1==r||2==r&&(e<=o||o<=d)){for(;a<e;u+="0",a++);u=Qo(u,o)}else if(e-=s,u=ts(u,o,"0"),o+1>a){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=o-a)>0)for(o+1==a&&(u+=".");e--;u+="0");return t.s<0&&i?"-"+u:u}function I(t,e){for(var n,r,i=1,o=new M(t[0]);i<t.length;i++)(!(r=new M(t[i])).s||(n=Jo(o,r))===e||0===n&&o.s===e)&&(o=r);return o}function C(t,e,n){for(var r=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,r++);return(n=r+n*A-1)>b?t.c=t.e=null:n<y?t.c=[t.e=0]:(t.e=n,t.c=e),t}function L(t,e,n,r){var i,o,s,a,u,l,h,c=t.c,f=Wo;if(c){t:{for(i=1,a=c[0];a>=10;a/=10,i++);if((o=e-i)<0)o+=A,s=e,u=c[l=0],h=Go(u/f[i-s-1]%10);else if((l=qo((o+1)/A))>=c.length){if(!r)break t;for(;c.length<=l;c.push(0));u=h=0,i=1,s=(o%=A)-A+1}else{for(u=a=c[l],i=1;a>=10;a/=10,i++);h=(s=(o%=A)-A+i)<0?0:Go(u/f[i-s-1]%10)}if(r=r||e<0||null!=c[l+1]||(s<0?u:u%f[i-s-1]),r=n<4?(h||r)&&(0==n||n==(t.s<0?3:2)):h>5||5==h&&(4==n||r||6==n&&(o>0?s>0?u/f[i-s]:0:c[l-1])%10&1||n==(t.s<0?8:7)),e<1||!c[0])return c.length=0,r?(e-=t.e+1,c[0]=f[(A-e%A)%A],t.e=-e||0):c[0]=t.e=0,t;if(0==o?(c.length=l,a=1,l--):(c.length=l+1,a=f[A-o],c[l]=s>0?Go(u/f[i-s]%f[s])*a:0),r)for(;;){if(0==l){for(o=1,s=c[0];s>=10;s/=10,o++);for(s=c[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(t.e++,c[0]==jo&&(c[0]=1));break}if(c[l]+=a,c[l]!=jo)break;c[l--]=0,a=1}for(o=c.length;0===c[--o];c.pop());}t.e>b?t.c=t.e=null:t.e<y&&(t.c=[t.e=0])}return t}function T(t){var e,n=t.e;return null===n?t.toString():(e=$o(t.c),e=n<=d||n>=v?Qo(e,n):ts(e,n,"0"),t.s<0?"-"+e:e)}return M.clone=t,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(t){var e,n;if(null!=t){if("object"!=_r(t))throw Error(Uo+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(F(n=t[e],0,D,e),_=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(F(n=t[e],0,8,e),x=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(F(n[0],-D,0,e),F(n[1],0,D,e),d=n[0],v=n[1]):(F(n,-D,D,e),d=-(v=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)F(n[0],-D,-1,e),F(n[1],1,D,e),y=n[0],b=n[1];else{if(F(n,-D,D,e),!n)throw Error(Uo+e+" cannot be zero: "+n);y=-(b=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(Uo+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!n,Error(Uo+"crypto unavailable");w=n}else w=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(F(n=t[e],0,9,e),o=n),t.hasOwnProperty(e="POW_PRECISION")&&(F(n=t[e],0,D,e),k=n),t.hasOwnProperty(e="FORMAT")){if("object"!=_r(n=t[e]))throw Error(Uo+e+" not an object: "+n);E=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(Uo+e+" invalid: "+n);S="0123456789"==n.slice(0,10),N=n}}return{DECIMAL_PLACES:_,ROUNDING_MODE:x,EXPONENTIAL_AT:[d,v],RANGE:[y,b],CRYPTO:w,MODULO_MODE:o,POW_PRECISION:k,FORMAT:E,ALPHABET:N}},M.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!M.DEBUG)return!0;var e,n,r=t.c,i=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-D&&i<=D&&i===Go(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break t}if((e=(i+1)%A)<1&&(e+=A),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=jo||n!==Go(n))break t;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(Uo+"Invalid BigNumber: "+t)},M.maximum=M.max=function(){return I(arguments,-1)},M.minimum=M.min=function(){return I(arguments,1)},M.random=(n=9007199254740992,l=Math.random()*n&2097151?function(){return Go(Math.random()*n)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,i,o,s=0,a=[],u=new M(p);if(null==t?t=_:F(t,0,D),i=qo(t/A),w)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));s<i;)(o=131072*e[s]+(e[s+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[s]=n[0],e[s+1]=n[1]):(a.push(o%1e14),s+=2);s=i/2}else{if(!crypto.randomBytes)throw w=!1,Error(Uo+"crypto unavailable");for(e=crypto.randomBytes(i*=7);s<i;)(o=281474976710656*(31&e[s])+1099511627776*e[s+1]+4294967296*e[s+2]+16777216*e[s+3]+(e[s+4]<<16)+(e[s+5]<<8)+e[s+6])>=9e15?crypto.randomBytes(7).copy(e,s):(a.push(o%1e14),s+=7);s=i/7}if(!w)for(;s<i;)(o=l())<9e15&&(a[s++]=o%1e14);for(i=a[--s],t%=A,i&&t&&(o=Wo[A-t],a[s]=Go(i/o)*o);0===a[s];a.pop(),s--);if(s<0)a=[r=0];else{for(r=-1;0===a[0];a.splice(0,1),r-=A);for(s=1,o=a[0];o>=10;o/=10,s++);s<A&&(r-=A-s)}return u.e=r,u.c=a,u}),M.sum=function(){for(var t=1,e=arguments,n=new M(e[0]);t<e.length;)n=n.plus(e[t++]);return n},c=function(){var v="0123456789";function y(t,e,n,r){for(var i,o,s=[0],a=0,u=t.length;a<u;){for(o=s.length;o--;s[o]*=e);for(s[0]+=r.indexOf(t.charAt(a++)),i=0;i<s.length;i++)s[i]>n-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}return function(t,e,n,r,i){var o,s,a,u,l,h,c,f,g=t.indexOf("."),d=_,p=x;for(g>=0&&(u=k,k=0,t=t.replace(".",""),h=(f=new M(e)).pow(t.length-g),k=u,f.c=y(ts($o(h.c),h.e,"0"),10,n,v),f.e=f.c.length),a=u=(c=y(t,e,n,i?(o=N,v):(o=v,N))).length;0==c[--u];c.pop());if(!c[0])return o.charAt(0);if(g<0?--a:(h.c=c,h.e=a,h.s=r,c=(h=m(h,f,d,p,n)).c,l=h.r,a=h.e),g=c[s=a+d+1],u=n/2,l=l||s<0||null!=c[s+1],l=p<4?(null!=g||l)&&(0==p||p==(h.s<0?3:2)):g>u||g==u&&(4==p||l||6==p&&1&c[s-1]||p==(h.s<0?8:7)),s<1||!c[0])t=l?ts(o.charAt(1),-d,o.charAt(0)):o.charAt(0);else{if(c.length=s,l)for(--n;++c[--s]>n;)c[s]=0,s||(++a,c=[1].concat(c));for(u=c.length;!c[--u];);for(g=0,t="";g<=u;t+=o.charAt(c[g++]));t=ts(t,a,o.charAt(0))}return t}}(),m=function(){function N(t,e,n){var r,i,o,s,a=0,u=t.length,l=e%Zo,h=e/Zo|0;for(t=t.slice();u--;)a=((i=l*(o=t[u]%Zo)+(r=h*o+(s=t[u]/Zo|0)*l)%Zo*Zo+a)/n|0)+(r/Zo|0)+h*s,t[u]=i%n;return a&&(t=[a].concat(t)),t}function S(t,e,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(t[i]!=e[i]){o=t[i]>e[i]?1:-1;break}return o}function I(t,e,n,r){for(var i=0;n--;)t[n]-=i,i=t[n]<e[n]?1:0,t[n]=i*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(t,e,n,r,i){var o,s,a,u,l,h,c,f,g,d,p,v,y,m,_,x,b,w=t.s==e.s?1:-1,k=t.c,E=e.c;if(!(k&&k[0]&&E&&E[0]))return new M(t.s&&e.s&&(k?!E||k[0]!=E[0]:E)?k&&0==k[0]||!E?0*w:w/0:NaN);for(g=(f=new M(w)).c=[],w=n+(s=t.e-e.e)+1,i||(i=jo,s=Ho(t.e/A)-Ho(e.e/A),w=w/A|0),a=0;E[a]==(k[a]||0);a++);if(E[a]>(k[a]||0)&&s--,w<0)g.push(1),u=!0;else{for(m=k.length,x=E.length,a=0,w+=2,(l=Go(i/(E[0]+1)))>1&&(E=N(E,l,i),k=N(k,l,i),x=E.length,m=k.length),y=x,p=(d=k.slice(0,x)).length;p<x;d[p++]=0);b=E.slice(),b=[0].concat(b),_=E[0],E[1]>=i/2&&_++;do{if(l=0,(o=S(E,d,x,p))<0){if(v=d[0],x!=p&&(v=v*i+(d[1]||0)),(l=Go(v/_))>1)for(l>=i&&(l=i-1),c=(h=N(E,l,i)).length,p=d.length;1==S(h,d,c,p);)l--,I(h,x<c?b:E,c,i),c=h.length,o=1;else 0==l&&(o=l=1),c=(h=E.slice()).length;if(c<p&&(h=[0].concat(h)),I(d,h,p,i),p=d.length,-1==o)for(;S(E,d,x,p)<1;)l++,I(d,x<p?b:E,p,i),p=d.length}else 0===o&&(l++,d=[0]);g[a++]=l,d[0]?d[p++]=k[y]||0:(d=[k[y]],p=1)}while((y++<m||null!=d[0])&&w--);u=null!=d[0],g[0]||g.splice(0,1)}if(i==jo){for(a=1,w=g[0];w>=10;w/=10,a++);L(f,n+(f.e=a+s*A-1)+1,r,u)}else f.e=s,f.r=+u;return f}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,a=/^([^.]+)\.$/,u=/^\.([^.]+)$/,h=/^-?(Infinity|NaN)$/,g=/^\s*\+(?=[\w.])|^\s+|\s+$/g,f=function(t,e,n,r){var i,o=n?e:e.replace(g,"");if(h.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(s,function(t,e,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?t:e}),r&&(i=r,o=o.replace(a,"$1").replace(u,"0.$1")),e!=o))return new M(o,i);if(M.DEBUG)throw Error(Uo+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},r.absoluteValue=r.abs=function(){var t=new M(this);return t.s<0&&(t.s=1),t},r.comparedTo=function(t,e){return Jo(this,new M(t,e))},r.decimalPlaces=r.dp=function(t,e){var n,r,i,o=this;if(null!=t)return F(t,0,D),null==e?e=x:F(e,0,8),L(new M(o),t+o.e+1,e);if(!(n=o.c))return null;if(r=((i=n.length-1)-Ho(this.e/A))*A,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},r.dividedBy=r.div=function(t,e){return m(this,new M(t,e),_,x)},r.dividedToIntegerBy=r.idiv=function(t,e){return m(this,new M(t,e),0,1)},r.exponentiatedBy=r.pow=function(t,e){var n,r,i,o,s,a,u,l,h=this;if((t=new M(t)).c&&!t.isInteger())throw Error(Uo+"Exponent not an integer: "+T(t));if(null!=e&&(e=new M(e)),s=t.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!t.c||!t.c[0])return l=new M(Math.pow(+T(h),s?t.s*(2-Ko(t)):+T(t))),e?l.mod(e):l;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new M(NaN);(r=!a&&h.isInteger()&&e.isInteger())&&(h=h.mod(e))}else{if(t.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||s&&h.c[1]>=24e7:h.c[0]<8e13||s&&h.c[0]<=9999975e7)))return o=h.s<0&&Ko(t)?-0:0,h.e>-1&&(o=1/o),new M(a?1/o:o);k&&(o=qo(k/A+2))}for(s?(n=new M(.5),a&&(t.s=1),u=Ko(t)):u=(i=Math.abs(+T(t)))%2,l=new M(p);;){if(u){if(!(l=l.times(h)).c)break;o?l.c.length>o&&(l.c.length=o):r&&(l=l.mod(e))}if(i){if(0===(i=Go(i/2)))break;u=i%2}else if(L(t=t.times(n),t.e+1,1),t.e>14)u=Ko(t);else{if(0===(i=+T(t)))break;u=i%2}h=h.times(h),o?h.c&&h.c.length>o&&(h.c.length=o):r&&(h=h.mod(e))}return r?l:(a&&(l=p.div(l)),e?l.mod(e):o?L(l,k,x,undefined):l)},r.integerValue=function(t){var e=new M(this);return null==t?t=x:F(t,0,8),L(e,e.e+1,t)},r.isEqualTo=r.eq=function(t,e){return 0===Jo(this,new M(t,e))},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(t,e){return Jo(this,new M(t,e))>0},r.isGreaterThanOrEqualTo=r.gte=function(t,e){return 1===(e=Jo(this,new M(t,e)))||0===e},r.isInteger=function(){return!!this.c&&Ho(this.e/A)>this.c.length-2},r.isLessThan=r.lt=function(t,e){return Jo(this,new M(t,e))<0},r.isLessThanOrEqualTo=r.lte=function(t,e){return-1===(e=Jo(this,new M(t,e)))||0===e},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&0==this.c[0]},r.minus=function(t,e){var n,r,i,o,s=this,a=s.s;if(e=(t=new M(t,e)).s,!a||!e)return new M(NaN);if(a!=e)return t.s=-e,s.plus(t);var u=s.e/A,l=t.e/A,h=s.c,c=t.c;if(!u||!l){if(!h||!c)return h?(t.s=-e,t):new M(c?s:NaN);if(!h[0]||!c[0])return c[0]?(t.s=-e,t):new M(h[0]?s:3==x?-0:0)}if(u=Ho(u),l=Ho(l),h=h.slice(),a=u-l){for((o=a<0)?(a=-a,i=h):(l=u,i=c),i.reverse(),e=a;e--;i.push(0));i.reverse()}else for(r=(o=(a=h.length)<(e=c.length))?a:e,a=e=0;e<r;e++)if(h[e]!=c[e]){o=h[e]<c[e];break}if(o&&(i=h,h=c,c=i,t.s=-t.s),(e=(r=c.length)-(n=h.length))>0)for(;e--;h[n++]=0);for(e=jo-1;r>a;){if(h[--r]<c[r]){for(n=r;n&&!h[--n];h[n]=e);--h[n],h[r]+=jo}h[r]-=c[r]}for(;0==h[0];h.splice(0,1),--l);return h[0]?C(t,h,l):(t.s=3==x?-1:1,t.c=[t.e=0],t)},r.modulo=r.mod=function(t,e){var n,r,i=this;return t=new M(t,e),!i.c||!t.s||t.c&&!t.c[0]?new M(NaN):!t.c||i.c&&!i.c[0]?new M(i):(9==o?(r=t.s,t.s=1,n=m(i,t,0,3),t.s=r,n.s*=r):n=m(i,t,0,o),(t=i.minus(n.times(t))).c[0]||1!=o||(t.s=i.s),t)},r.multipliedBy=r.times=function(t,e){var n,r,i,o,s,a,u,l,h,c,f,g,d,p,v,y=this,m=y.c,_=(t=new M(t,e)).c;if(!(m&&_&&m[0]&&_[0]))return!y.s||!t.s||m&&!m[0]&&!_||_&&!_[0]&&!m?t.c=t.e=t.s=null:(t.s*=y.s,m&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=Ho(y.e/A)+Ho(t.e/A),t.s*=y.s,(u=m.length)<(c=_.length)&&(d=m,m=_,_=d,i=u,u=c,c=i),i=u+c,d=[];i--;d.push(0));for(p=jo,v=Zo,i=c;--i>=0;){for(n=0,f=_[i]%v,g=_[i]/v|0,o=i+(s=u);o>i;)n=((l=f*(l=m[--s]%v)+(a=g*l+(h=m[s]/v|0)*f)%v*v+d[o]+n)/p|0)+(a/v|0)+g*h,d[o--]=l%p;d[o]=n}return n?++r:d.splice(0,1),C(t,d,r)},r.negated=function(){var t=new M(this);return t.s=-t.s||null,t},r.plus=function(t,e){var n,r=this,i=r.s;if(e=(t=new M(t,e)).s,!i||!e)return new M(NaN);if(i!=e)return t.s=-e,r.minus(t);var o=r.e/A,s=t.e/A,a=r.c,u=t.c;if(!o||!s){if(!a||!u)return new M(i/0);if(!a[0]||!u[0])return u[0]?t:new M(a[0]?r:0*i)}if(o=Ho(o),s=Ho(s),a=a.slice(),i=o-s){for(i>0?(s=o,n=u):(i=-i,n=a),n.reverse();i--;n.push(0));n.reverse()}for((i=a.length)-(e=u.length)<0&&(n=u,u=a,a=n,e=i),i=0;e;)i=(a[--e]=a[e]+u[e]+i)/jo|0,a[e]=jo===a[e]?0:a[e]%jo;return i&&(a=[i].concat(a),++s),C(t,a,s)},r.precision=r.sd=function(t,e){var n,r,i,o=this;if(null!=t&&t!==!!t)return F(t,1,D),null==e?e=x:F(e,0,8),L(new M(o),t,e);if(!(n=o.c))return null;if(r=(i=n.length-1)*A+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return t&&o.e+1>r&&(r=o.e+1),r},r.shiftedBy=function(t){return F(t,-9007199254740991,Xo),this.times("1e"+t)},r.squareRoot=r.sqrt=function(){var t,e,n,r,i,o=this,s=o.c,a=o.s,u=o.e,l=_+4,h=new M("0.5");if(1!==a||!s||!s[0])return new M(!a||a<0&&(!s||s[0])?NaN:s?o:1/0);if(0==(a=Math.sqrt(+T(o)))||a==1/0?(((e=$o(s)).length+u)%2==0&&(e+="0"),a=Math.sqrt(+e),u=Ho((u+1)/2)-(u<0||u%2),n=new M(e=a==1/0?"5e"+u:(e=a.toExponential()).slice(0,e.indexOf("e")+1)+u)):n=new M(a+""),n.c[0])for((a=(u=n.e)+l)<3&&(a=0);;)if(i=n,n=h.times(i.plus(m(o,i,l,1))),$o(i.c).slice(0,a)===(e=$o(n.c)).slice(0,a)){if(n.e<u&&--a,"9999"!=(e=e.slice(a-3,a+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(L(n,n.e+_+2,1),t=!n.times(n).eq(o));break}if(!r&&(L(i,i.e+_+2,0),i.times(i).eq(o))){n=i;break}l+=4,a+=4,r=1}return L(n,n.e+_+1,x,t)},r.toExponential=function(t,e){return null!=t&&(F(t,0,D),t++),i(this,t,e,1)},r.toFixed=function(t,e){return null!=t&&(F(t,0,D),t=t+this.e+1),i(this,t,e)},r.toFormat=function(t,e,n){var r,i=this;if(null==n)null!=t&&e&&"object"==_r(e)?(n=e,e=null):t&&"object"==_r(t)?(n=t,t=e=null):n=E;else if("object"!=_r(n))throw Error(Uo+"Argument not an object: "+n);if(r=i.toFixed(t,e),i.c){var o,s=r.split("."),a=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",h=s[0],c=s[1],f=i.s<0,g=f?h.slice(1):h,d=g.length;if(u&&(o=a,a=u,u=o,d-=o),a>0&&d>0){for(o=d%a||a,h=g.substr(0,o);o<d;o+=a)h+=l+g.substr(o,a);u>0&&(h+=l+g.slice(o)),f&&(h="-"+h)}r=c?h+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?c.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):c):h}return(n.prefix||"")+r+(n.suffix||"")},r.toFraction=function(t){var e,n,r,i,o,s,a,u,l,h,c,f,g=this,d=g.c;if(null!=t&&(!(a=new M(t)).isInteger()&&(a.c||1!==a.s)||a.lt(p)))throw Error(Uo+"Argument "+(a.isInteger()?"out of range: ":"not an integer: ")+T(a));if(!d)return new M(g);for(e=new M(p),l=n=new M(p),r=u=new M(p),f=$o(d),o=e.e=f.length-g.e-1,e.c[0]=Wo[(s=o%A)<0?A+s:s],t=!t||a.comparedTo(e)>0?o>0?e:l:a,s=b,b=1/0,a=new M(f),u.c[0]=0;h=m(a,e,0,1),1!=(i=n.plus(h.times(r))).comparedTo(t);)n=r,r=i,l=u.plus(h.times(i=l)),u=i,e=a.minus(h.times(i=e)),a=i;return i=m(t.minus(n),r,0,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=g.s,c=m(l,r,o*=2,x).minus(g).abs().comparedTo(m(u,n,o,x).minus(g).abs())<1?[l,r]:[u,n],b=s,c},r.toNumber=function(){return+T(this)},r.toPrecision=function(t,e){return null!=t&&F(t,1,D),i(this,t,e,2)},r.toString=function(t){var e,n=this,r=n.s,i=n.e;return null===i?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==t?e=i<=d||i>=v?Qo($o(n.c),i):ts($o(n.c),i,"0"):10===t&&S?e=ts($o((n=L(new M(n),_+i+1,x)).c),n.e,"0"):(F(t,2,N.length,"Base"),e=c(ts($o(n.c),i,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},r.valueOf=r.toJSON=function(){return T(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,null!=e&&M.set(e),M}(),ns=function(t){function e(t){return g(this,e),o(this,e,[t])}return n(e,t),i(e)}(i(function t(e){g(this,t),l(this,"key",void 0),l(this,"left",null),l(this,"right",null),this.key=e})),rs=function(){return i(function t(){g(this,t),l(this,"size",0),l(this,"modificationCount",0),l(this,"splayCount",0)},[{key:"splay",value:function(t){var e=this.root;if(null==e)return this.compare(t,t),-1;for(var n,r=null,i=null,o=null,s=null,a=e,u=this.compare;;)if((n=u(a.key,t))>0){var l=a.left;if(null==l)break;if((n=u(l.key,t))>0&&(a.left=l.right,l.right=a,null==(l=(a=l).left)))break;null==r?i=a:r.left=a,r=a,a=l}else{if(!(n<0))break;var h=a.right;if(null==h)break;if((n=u(h.key,t))<0&&(a.right=h.left,h.left=a,null==(h=(a=h).right)))break;null==o?s=a:o.right=a,o=a,a=h}return null!=o&&(o.right=a.left,a.left=s),null!=r&&(r.left=a.right,a.right=i),this.root!==a&&(this.root=a,this.splayCount++),n}},{key:"splayMin",value:function(t){for(var e=t,n=e.left;null!=n;){var r=n;e.left=r.right,r.right=e,n=(e=r).left}return e}},{key:"splayMax",value:function(t){for(var e=t,n=e.right;null!=n;){var r=n;e.right=r.left,r.left=e,n=(e=r).right}return e}},{key:"_delete",value:function(t){if(null==this.root)return null;if(0!=this.splay(t))return null;var e=this.root,n=e,r=e.left;if(this.size--,null==r)this.root=e.right;else{var i=e.right;(e=this.splayMax(r)).right=i,this.root=e}return this.modificationCount++,n}},{key:"addNewRoot",value:function(t,e){this.size++,this.modificationCount++;var n=this.root;null!=n?(e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t):this.root=t}},{key:"_first",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMin(t),this.root)}},{key:"_last",value:function(){var t=this.root;return null==t?null:(this.root=this.splayMax(t),this.root)}},{key:"clear",value:function(){this.root=null,this.size=0,this.modificationCount++}},{key:"has",value:function(t){return this.validKey(t)&&0==this.splay(t)}},{key:"defaultCompare",value:function(){return function(t,e){return t<e?-1:t>e?1:0}}},{key:"wrap",value:function(){var e=this;return{getRoot:function(){return e.root},setRoot:function(t){e.root=t},getSize:function(){return e.size},getModificationCount:function(){return e.modificationCount},getSplayCount:function(){return e.splayCount},setSplayCount:function(t){e.splayCount=t},splay:function(t){return e.splay(t)},has:function(t){return e.has(t)}}}}])}(),is=function(t){function s(t,e){var n;return g(this,s),l(n=o(this,s),"root",null),l(n,"compare",void 0),l(n,"validKey",void 0),l(n,Symbol.toStringTag,"[object Set]"),n.compare=null!=t?t:n.defaultCompare(),n.validKey=null!=e?e:function(t){return null!=t&&null!=t},n}return n(s,t),i(s,[{key:"delete",value:function(t){return!!this.validKey(t)&&null!=this._delete(t)}},{key:"deleteAll",value:function(t){var e,n=B(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.delete(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"forEach",value:function(t){for(var e,n=this[Symbol.iterator]();!(e=n.next()).done;)t(e.value,e.value,this)}},{key:"add",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new ns(t),e),this}},{key:"addAndReturn",value:function(t){var e=this.splay(t);return 0!=e&&this.addNewRoot(new ns(t),e),this.root.key}},{key:"addAll",value:function(t){var e,n=B(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.add(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"isEmpty",value:function(){return null==this.root}},{key:"isNotEmpty",value:function(){return null!=this.root}},{key:"single",value:function(){if(0==this.size)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}},{key:"first",value:function(){if(0==this.size)throw"Bad state: No element";return this._first().key}},{key:"last",value:function(){if(0==this.size)throw"Bad state: No element";return this._last().key}},{key:"lastBefore",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(t)<0)return this.root.key;var e=this.root.left;if(null==e)return null;for(var n=e.right;null!=n;)n=(e=n).right;return e.key}},{key:"firstAfter",value:function(t){if(null==t)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(t)>0)return this.root.key;var e=this.root.right;if(null==e)return null;for(var n=e.left;null!=n;)n=(e=n).left;return e.key}},{key:"retainAll",value:function(t){var e,n=new s(this.compare,this.validKey),r=this.modificationCount,i=B(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(r!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(o)&&0==this.splay(o)&&n.add(this.root.key)}}catch(t){i.e(t)}finally{i.f()}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}},{key:"lookup",value:function(t){return this.validKey(t)?0!=this.splay(t)?null:this.root.key:null}},{key:"intersection",value:function(t){var e,n=new s(this.compare,this.validKey),r=B(this);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.has(i)&&n.add(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"difference",value:function(t){var e,n=new s(this.compare,this.validKey),r=B(this);try{for(r.s();!(e=r.n()).done;){var i=e.value;t.has(i)||n.add(i)}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"union",value:function(t){var e=this.clone();return e.addAll(t),e}},{key:"clone",value:function(){var t=new s(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}},{key:"copyNode",value:function(t){if(null==t)return null;var e=new ns(t.key);return function t(e,n){var r,i;do{if(r=e.left,i=e.right,null!=r){var o=new ns(r.key);n.left=o,t(r,o)}if(null!=i){var s=new ns(i.key);n.right=s,e=i,n=s}}while(null!=i)}(t,e),e}},{key:"toSet",value:function(){return this.clone()}},{key:"entries",value:function(){return new as(this.wrap())}},{key:"keys",value:function(){return this[Symbol.iterator]()}},{key:"values",value:function(){return this[Symbol.iterator]()}},{key:Symbol.iterator,value:function(){return new ss(this.wrap())}}])}(rs),os=function(){return i(function t(e){g(this,t),l(this,"tree",void 0),l(this,"path",new Array),l(this,"modificationCount",null),l(this,"splayCount",void 0),this.tree=e,this.splayCount=e.getSplayCount()},[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}},{key:"current",value:function(){if(!this.path.length)return null;var t=this.path[this.path.length-1];return this.getValue(t)}},{key:"rebuildPath",value:function(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}},{key:"findLeftMostDescendent",value:function(t){for(;null!=t;)this.path.push(t),t=t.left}},{key:"moveNext",value:function(){if(this.modificationCount!=this.tree.getModificationCount()){if(null==this.modificationCount){this.modificationCount=this.tree.getModificationCount();for(var t=this.tree.getRoot();null!=t;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);var e=this.path[this.path.length-1],n=e.right;if(null!=n){for(;null!=n;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}}])}(),ss=function(t){function e(){return g(this,e),o(this,e,arguments)}return n(e,t),i(e,[{key:"getValue",value:function(t){return t.key}}])}(os),as=function(t){function e(){return g(this,e),o(this,e,arguments)}return n(e,t),i(e,[{key:"getValue",value:function(t){return[t.key,t.key]}}])}(os),us=function(t){return function(){return t}},ls=function(n){var r=n?function(t,e){return e.minus(t).abs().isLessThanOrEqualTo(n)}:us(!1);return function(t,e){return r(t,e)?0:t.comparedTo(e)}};function hs(o){var u=o?function(t,e,n,r,i){return t.exponentiatedBy(2).isLessThanOrEqualTo(r.minus(e).exponentiatedBy(2).plus(i.minus(n).exponentiatedBy(2)).times(o))}:us(!1);return function(t,e,n){var r=t.x,i=t.y,o=n.x,s=n.y,a=i.minus(s).times(e.x.minus(o)).minus(r.minus(o).times(e.y.minus(s)));return u(a,r,i,o,s)?0:a.comparedTo(0)}}var cs=function(t){return t},fs=function(t){if(t){var e=new is(ls(t)),n=new is(ls(t)),r=function(t,e){return e.addAndReturn(t)},i=function(t){return{x:r(t.x,e),y:r(t.y,n)}};return i({x:new es(0),y:new es(0)}),i}return cs},gs=function(t){return{set:function(t){ds=gs(t)},reset:function(){return gs(t)},compare:ls(t),snap:fs(t),orient:hs(t)}},ds=gs(),ps=function(t,e){return t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y)},vs=function(t,e){if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;var n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y}}},ys=function(t,e){return t.x.times(e.y).minus(t.y.times(e.x))},ms=function(t,e){return t.x.times(e.x).plus(t.y.times(e.y))},_s=function(t){return ms(t,t).sqrt()},xs=function(t,e,n){var r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return ms(i,r).div(_s(i)).div(_s(r))},bs=function(t,e,n){return e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n}},ws=function(t,e,n){return e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))}},ks=function(){function r(t,e){g(this,r),l(this,"point",void 0),l(this,"isLeft",void 0),l(this,"segment",void 0),l(this,"otherSE",void 0),l(this,"consumedBy",void 0),void 0===t.events?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=e}return i(r,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(a){var u=this,l=new Map,h=function(t){var e,n,r,i,o,s=t.otherSE;l.set(t,{sine:(e=u.point,n=a.point,r=s.point,i={x:n.x.minus(e.x),y:n.y.minus(e.y)},o={x:r.x.minus(e.x),y:r.y.minus(e.y)},ys(o,i).div(_s(o)).div(_s(i))),cosine:xs(u.point,a.point,s.point)})};return function(t,e){l.has(t)||h(t),l.has(e)||h(e);var n=l.get(t),r=n.sine,i=n.cosine,o=l.get(e),s=o.sine,a=o.cosine;return r.isGreaterThanOrEqualTo(0)&&s.isGreaterThanOrEqualTo(0)?i.isLessThan(a)?1:i.isGreaterThan(a)?-1:0:r.isLessThan(0)&&s.isLessThan(0)?i.isLessThan(a)?-1:i.isGreaterThan(a)?1:0:s.isLessThan(r)?-1:s.isGreaterThan(r)?1:0}}}],[{key:"compare",value:function(t,e){var n=r.comparePoints(t.point,e.point);return 0!==n?n:(t.point!==e.point&&t.link(e),t.isLeft!==e.isLeft?t.isLeft?1:-1:Ts.compare(t.segment,e.segment))}},{key:"comparePoints",value:function(t,e){return t.x.isLessThan(e.x)?-1:t.x.isGreaterThan(e.x)?1:t.y.isLessThan(e.y)?-1:t.y.isGreaterThan(e.y)?1:0}}])}(),Es=function(){function x(t){g(this,x),l(this,"events",void 0),l(this,"poly",void 0),l(this,"_isExteriorRing",void 0),l(this,"_enclosingRing",void 0),this.events=t;for(var e=0,n=t.length;e<n;e++)t[e].segment.ringOut=this;this.poly=null}return i(x,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==ds.orient(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===ds.orient(s,t,a)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,c=[],f=l;f!=h;f+=u)c.push([e[f].x.toNumber(),e[f].y.toNumber()]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];ks.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;var s,a;if(o.ringOut!==i.ringOut)return(null===(s=o.ringOut)||void 0===s?void 0:s.enclosingRing())!==i.ringOut?i.ringOut:null===(a=i.ringOut)||void 0===a?void 0:a.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}],[{key:"factory",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(i.isInResult()&&!i.ringOut){for(var o=null,s=i.leftSE,a=i.rightSE,u=[s],l=s.point,h=[];o=s,s=a,u.push(s),s.point!==l;)for(;;){var c=s.getAvailableLinkedEvents();if(0===c.length){var f=u[0].point,g=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(f.x,", ").concat(f.y,"]. Last matching segment found ends at [").concat(g.x,", ").concat(g.y,"]."))}if(1===c.length){a=c[0].otherSE;break}for(var d=null,p=0,v=h.length;p<v;p++)if(h[p].point===s.point){d=p;break}if(null===d){h.push({index:u.length,point:s.point});var y=s.getLeftmostComparator(o);a=c.sort(y)[0].otherSE;break}var m=h.splice(d)[0],_=u.splice(m.index);_.unshift(_[0].otherSE),e.push(new x(_.reverse()))}e.push(new x(u))}}return e}}])}(),Ns=function(){return i(function t(e){g(this,t),l(this,"exteriorRing",void 0),l(this,"interiorRings",void 0),this.exteriorRing=e,e.poly=this,this.interiorRings=[]},[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=this.exteriorRing.getGeom();if(null===t)return null;for(var e=[t],n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();null!==i&&e.push(i)}return e}}])}(),Ss=function(){return i(function t(e){g(this,t),l(this,"rings",void 0),l(this,"polys",void 0),this.rings=e,this.polys=this._composePolys(e)},[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new Ns(i));else{var o,s=i.enclosingRing();null!=s&&s.poly||e.push(new Ns(s)),null==s||null===(o=s.poly)||void 0===o||o.addInterior(i)}}return e}}])}(),Is=function(){return i(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ts.compare;g(this,t),l(this,"queue",void 0),l(this,"tree",void 0),l(this,"segments",void 0),this.queue=e,this.tree=new is(n),this.segments=[]},[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);var r=e,i=e;do{r=this.tree.lastBefore(r)}while(null!=r&&null!=r.consumedBy);do{i=this.tree.firstAfter(i)}while(null!=i&&null!=i.consumedBy);if(t.isLeft){var o=null;if(r){var s=r.getIntersection(e);if(null!==s&&(e.isAnEndpoint(s)||(o=s),!r.isAnEndpoint(s)))for(var a=this._splitSafely(r,s),u=0,l=a.length;u<l;u++)n.push(a[u])}var h=null;if(i){var c=i.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(h=c),!i.isAnEndpoint(c)))for(var f=this._splitSafely(i,c),g=0,d=f.length;g<d;g++)n.push(f[g])}if(null!==o||null!==h){var p=null;if(null===o)p=h;else if(null===h)p=o;else{p=ks.comparePoints(o,h)<=0?o:h}this.queue.delete(e.rightSE),n.push(e.rightSE);for(var v=e.split(p),y=0,m=v.length;y<m;y++)n.push(v[y])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){var _=r.getIntersection(i);if(null!==_){if(!r.isAnEndpoint(_))for(var x=this._splitSafely(r,_),b=0,w=x.length;b<w;b++)n.push(x[b]);if(!i.isAnEndpoint(_))for(var k=this._splitSafely(i,_),E=0,N=k.length;E<N;E++)n.push(k[E])}}this.tree.delete(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.delete(t);var n=t.rightSE;this.queue.delete(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.add(t),r}}])}(),Ms=new(function(){return i(function t(){g(this,t),l(this,"type",void 0),l(this,"numMultiPolys",void 0)},[{key:"run",value:function(t,e,n){Ms.type=t;for(var r=[new Os(e,!0)],i=0,o=n.length;i<o;i++)r.push(new Os(n[i],!1));if(Ms.numMultiPolys=r.length,"difference"===Ms.type)for(var s=r[0],a=1;a<r.length;)null!==vs(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===Ms.type)for(var u=0,l=r.length;u<l;u++)for(var h=r[u],c=u+1,f=r.length;c<f;c++)if(null===vs(h.bbox,r[c].bbox))return[];for(var g=new is(ks.compare),d=0,p=r.length;d<p;d++)for(var v=r[d].getSweepEvents(),y=0,m=v.length;y<m;y++)g.add(v[y]);var _=new Is(g),x=null;for(0!=g.size&&(x=g.first(),g.delete(x));x;){for(var b=_.process(x),w=0,k=b.length;w<k;w++){var E=b[w];void 0===E.consumedBy&&g.add(E)}0!=g.size?(x=g.first(),g.delete(x)):x=null}ds.reset();var N=Es.factory(_.segments);return new Ss(N).getGeom()}}])}()),Cs=Ms,Ls=0,Ts=function(){function c(t,e,n,r){g(this,c),l(this,"id",void 0),l(this,"leftSE",void 0),l(this,"rightSE",void 0),l(this,"rings",void 0),l(this,"windings",void 0),l(this,"ringOut",void 0),l(this,"consumedBy",void 0),l(this,"prev",void 0),l(this,"_prevInResult",void 0),l(this,"_beforeState",void 0),l(this,"_afterState",void 0),l(this,"_isInResult",void 0),this.id=++Ls,this.leftSE=t,t.segment=this,t.otherSE=e,this.rightSE=e,e.segment=this,e.otherSE=t,this.rings=n,this.windings=r}return i(c,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t.isLessThan(e)?t:e},ur:{x:this.rightSE.point.x,y:t.isGreaterThan(e)?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}},{key:"isAnEndpoint",value:function(t){return t.x.eq(this.leftSE.point.x)&&t.y.eq(this.leftSE.point.y)||t.x.eq(this.rightSE.point.x)&&t.y.eq(this.rightSE.point.y)}},{key:"comparePoint",value:function(t){return ds.orient(this.leftSE.point,t,this.rightSE.point)}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=vs(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,u=ps(e,s)&&0===this.comparePoint(s),l=ps(n,i)&&0===t.comparePoint(i),h=ps(e,a)&&0===this.comparePoint(a),c=ps(n,o)&&0===t.comparePoint(o);if(l&&u)return c&&!h?o:!c&&h?a:null;if(l)return h&&i.x.eq(a.x)&&i.y.eq(a.y)?null:i;if(u)return c&&o.x.eq(s.x)&&o.y.eq(s.y)?null:s;if(c&&h)return null;if(c)return o;if(h)return a;var f=function(t,e,n,r){if(e.x.isZero())return ws(n,r,t.x);if(r.x.isZero())return ws(t,e,n.x);if(e.y.isZero())return bs(n,r,t.y);if(r.y.isZero())return bs(t,e,n.y);var i=ys(e,r);if(i.isZero())return null;var o={x:n.x.minus(t.x),y:n.y.minus(t.y)},s=ys(o,e).div(i),a=ys(o,r).div(i),u=t.x.plus(a.times(e.x)),l=n.x.plus(s.times(r.x)),h=t.y.plus(a.times(e.y)),c=n.y.plus(s.times(r.y));return{x:u.plus(l).div(2),y:h.plus(c).div(2)}}(i,this.vector(),s,t.vector());return null===f?null:ps(r,f)?ds.snap(f):null}},{key:"split",value:function(t){var e=[],n=void 0!==t.events,r=new ks(t,!0),i=new ks(t,!1),o=this.rightSE;this.replaceRightSE(i),e.push(i),e.push(r);var s=new c(r,o,this.rings.slice(),this.windings.slice());return ks.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),ks.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(r.checkForConsuming(),i.checkForConsuming()),e}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var e=this,n=t;e.consumedBy;)e=e.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var r=c.compare(e,n);if(0!==r){if(r>0){var i=e;e=n,n=i}if(e.prev===n){var o=e;e=n,n=o}for(var s=0,a=n.rings.length;s<a;s++){var u=n.rings[s],l=n.windings[s],h=e.rings.indexOf(u);-1===h?(e.rings.push(u),e.windings.push(l)):e.windings[h]+=l}n.rings=null,n.windings=null,n.consumedBy=e,n.leftSE.consumedBy=e.leftSE,n.rightSE.consumedBy=e.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],u=e.indexOf(s);-1===u?(e.push(s),n.push(a)):n[u]+=a}for(var l=[],h=[],c=0,f=e.length;c<f;c++)if(0!==n[c]){var g=e[c],d=g.poly;if(-1===h.indexOf(d))if(g.isExterior)l.push(d);else{-1===h.indexOf(d)&&h.push(d);var p=l.indexOf(g.poly);-1!==p&&l.splice(p,1)}}for(var v=0,y=l.length;v<y;v++){var m=l[v].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(Cs.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===Cs.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e)}return this._isInResult}}],[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o.isLessThan(n))return 1;if(i.isLessThan(r))return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,u=t.rightSE.point.y,l=e.rightSE.point.y;if(n.isLessThan(r)){if(a.isLessThan(s)&&a.isLessThan(u))return 1;if(a.isGreaterThan(s)&&a.isGreaterThan(u))return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n.isGreaterThan(r)){if(s.isLessThan(a)&&s.isLessThan(l))return-1;if(s.isGreaterThan(a)&&s.isGreaterThan(l))return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var g=t.comparePoint(e.rightSE.point);return g<0?1:g>0?-1:1}if(s.isLessThan(a))return-1;if(s.isGreaterThan(a))return 1;if(i.isLessThan(o)){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i.isGreaterThan(o)){var p=t.comparePoint(e.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!i.eq(o)){var v=u.minus(s),y=i.minus(n),m=l.minus(a),_=o.minus(r);if(v.isGreaterThan(y)&&m.isLessThan(_))return 1;if(v.isLessThan(y)&&m.isGreaterThan(_))return-1}return i.isGreaterThan(o)?1:i.isLessThan(o)||u.isLessThan(l)?-1:u.isGreaterThan(l)?1:t.id<e.id?-1:t.id>e.id?1:0}},{key:"fromRing",value:function(t,e,n){var r,i,o,s=ks.comparePoints(t,e);if(s<0)r=t,i=e,o=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));r=e,i=t,o=-1}return new c(new ks(r,!0),new ks(i,!1),[n],[o])}}])}(),Ps=function(){return i(function t(e,n,r){if(g(this,t),l(this,"poly",void 0),l(this,"isExterior",void 0),l(this,"segments",void 0),l(this,"bbox",void 0),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=ds.snap({x:new es(e[0][0]),y:new es(e[0][1])});this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,s=1,a=e.length;s<a;s++){if("number"!=typeof e[s][0]||"number"!=typeof e[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=ds.snap({x:new es(e[s][0]),y:new es(e[s][1])});u.x.eq(o.x)&&u.y.eq(o.y)||(this.segments.push(Ts.fromRing(o,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),o=u)}i.x.eq(o.x)&&i.y.eq(o.y)||this.segments.push(Ts.fromRing(o,i,this))},[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}])}(),Rs=function(){return i(function t(e,n){if(g(this,t),l(this,"multiPoly",void 0),l(this,"exteriorRing",void 0),l(this,"interiorRings",void 0),l(this,"bbox",void 0),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ps(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new Ps(e[r],this,!1);o.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n},[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}])}(),Os=function(){return i(function t(e,n){if(g(this,t),l(this,"isSubject",void 0),l(this,"polys",void 0),l(this,"bbox",void 0),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:new es(Number.POSITIVE_INFINITY),y:new es(Number.POSITIVE_INFINITY)},ur:{x:new es(Number.NEGATIVE_INFINITY),y:new es(Number.NEGATIVE_INFINITY)}};for(var r=0,i=e.length;r<i;r++){var o=new Rs(e[r],this);o.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n},[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}])}(),As=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Cs.run("union",t,n)},Ds=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Cs.run("intersection",t,n)},Fs=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Cs.run("difference",t,n)},Bs=ds.set,zs=Object.freeze({__proto__:null,difference:Fs,intersection:Ds,setPrecision:Bs,union:As,xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Cs.run("xor",t,n)}});function Vs(t){if(!t)throw new Error("geojson is required");var e=[];return b(t,function(t){e.push(t)}),j(e)}function qs(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=Z(t),i=Z(e),o=r[0]-i[0],s=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(s):Math.pow(Math.pow(o,n)+Math.pow(s,n),1/n)}function Gs(t,e){var n,r,i=(e=e||{}).threshold||1e4,o=e.p||2,s=null!=(n=e.binary)&&n,a=e.alpha||-1,u=null!=(r=e.standardization)&&r,l=[];N(t,function(t){l.push(_i(t))});for(var h=[],c=0;c<l.length;c++)h[c]=[];for(var f=0;f<l.length;f++)for(var g=f;g<l.length;g++){f===g&&(h[f][g]=0);var d=qs(l[f],l[g],o);h[f][g]=d,h[g][f]=d}for(var p=0;p<l.length;p++)for(var v=0;v<l.length;v++){var y=h[p][v];0!==y&&(h[p][v]=s?y<=i?1:0:y<=i?Math.pow(y,a):0)}if(u)for(var m=0;m<l.length;m++)for(var _=h[m].reduce(function(t,e){return t+e},0),x=0;x<l.length;x++)h[m][x]=h[m][x]/_;return h}function Us(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e<0,o=ft(Math.abs(e),r.units,"meters");i&&(o=-Math.abs(o));var s=Z(t),a=function(t,e,n,r){r=void 0===r?d:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=x(t[1]),a=x(n),u=i*Math.cos(a),l=s+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var h=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),c=Math.abs(h)>1e-11?u/h:Math.cos(s),f=i*Math.sin(a)/c;return[(180*(o+f)/Math.PI+540)%360-180,180*l/Math.PI]}(s,o,n);return a[0]+=a[0]-s[0]>180?-360:s[0]-a[0]>180?360:0,U(a,r.properties)}function Ys(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Z(t),i=Z(e);i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0;var o=function(t,e,n){var r=n=void 0===n?d:Number(n),i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?s/u:Math.cos(i);return Math.sqrt(s*s+l*l*a*a)*r}(r,i);return ft(o,"meters",n.units)}function js(t,i,e){if(!W(e=e||{}))throw new Error("options is invalid");var n=e.pivot,r=e.mutate;if(!t)throw new Error("geojson is required");if(null==i||isNaN(i))throw new Error("angle is required");if(0===i)return t;var o=null!=n?n:_i(t);return!1!==r&&void 0!==r||(t=p(t)),w(t,function(t){var e=Nt(o,t)+i,n=Ys(o,t),r=E(Us(o,n,e));t[0]=r[0],t[1]=r[1]}),t}function Xs(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",s=r.angle||0,a=r.pivot||t,u=r.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!W(r))throw new Error("options must be an object");if(!X(i))throw new Error("steps must be a number");if(!X(s))throw new Error("angle must be a number");var l=Z(t);if("degrees"!==o){var h=Us(t,e,90,{units:o}),c=Us(t,n,0,{units:o});e=Z(h)[0]-l[0],n=Z(c)[1]-l[1]}for(var f=[],g=0;g<i;g+=1){var d=-360*g/i,p=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Ws(d),2)),v=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Ws(d),2));if(d<-90&&d>=-270&&(p=-p),d<-180&&d>=-360&&(v=-v),"degrees"===o){var y=x(s),m=p*Math.cos(y)+v*Math.sin(y),_=v*Math.cos(y)-p*Math.sin(y);p=m,v=_}f.push([p+l[0],v+l[1]])}return f.push(f[0]),"degrees"===o?z([f],u):js(z([f],u),s,{pivot:a})}function Ws(t){var e=t*Math.PI/180;return Math.tan(e)}function Zs(t){return Jt(J(t))}function Hs(e){var n=[];return"FeatureCollection"===e.type?N(e,function(e){w(e,function(t){n.push(U(t,e.properties))})}):"Feature"===e.type?w(e,function(t){n.push(U(t,e.properties))}):w(e,function(t){n.push(U(t))}),j(n)}var $s=Math.PI/180,Js=180/Math.PI,Ks=function(t,e){this.lon=t,this.lat=e,this.x=$s*t,this.y=$s*e};Ks.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ks.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Ks(e,t)};var Qs=function(){this.coords=[],this.length=0};Qs.prototype.move_to=function(t){this.length++,this.coords.push(t)};var ta=function(t){this.properties=t||{},this.geometries=[]};ta.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},ta.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var ea=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ks(t.x,t.y),this.end=new Ks(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function na(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(Pt(t,function(t){n.push(t.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");var r=Ds.apply(zs,[n[0]].concat(I(n.slice(1))));return 0===r.length?null:1===r.length?z(r[0],e.properties):rt(r,e.properties)}function ra(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=JSON.stringify(n.properties||{}),i=K(t,4),o=i[0],s=i[1],a=i[2],u=i[3],l=(s+u)/2,h=(o+a)/2,c=2*e/$([o,l],[a,l],n)*(a-o),f=2*e/$([h,s],[h,u],n)*(u-s),g=c/2,d=2*g,p=Math.sqrt(3)/2*f,v=a-o,y=u-s,m=3/4*d,_=p,A=(v-d)/(d-g/2),x=Math.floor(A),D=(x*m-g/2-v)/2-g/2+m/2,b=Math.floor((y-p)/p),w=(y-b*p)/2,k=b*p-y>p/2;k&&(w-=p/4);for(var E=[],N=[],S=0;S<6;S++){var I=2*Math.PI/6*S;E.push(Math.cos(I)),N.push(Math.sin(I))}for(var M=[],C=0;C<=x;C++)for(var L=0;L<=b;L++){var T=C%2==1;if((0!==L||!T)&&(0!==L||!k)){var P=C*m+o-D,R=L*_+s+w;if(T&&(R-=p/2),!0===n.triangles)oa([P,R],c/2,f/2,JSON.parse(r),E,N).forEach(function(t){n.mask?na(j([n.mask,t]))&&M.push(t):M.push(t)});else{var O=ia([P,R],c/2,f/2,JSON.parse(r),E,N);n.mask?na(j([n.mask,O]))&&M.push(O):M.push(O)}}}return j(M)}function ia(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=t[0]+e*i[a],l=t[1]+n*o[a];s.push([u,l])}return s.push(s[0].slice()),z([s],r)}function oa(t,e,n,r,i,o){for(var s=[],a=0;a<6;a++){var u=[];u.push(t),u.push([t[0]+e*i[a],t[1]+n*o[a]]),u.push([t[0]+e*i[(a+1)%6],t[1]+n*o[(a+1)%6]]),u.push(t),s.push(z([u],r))}return s}function sa(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],s=t[2],a=t[3],u=e/$([i,o],[s,o],n)*(s-i),l=e/$([i,o],[i,a],n)*(a-o),h=s-i,c=a-o,f=Math.floor(h/u),g=(c-Math.floor(c/l)*l)/2,d=i+(h-f*u)/2;d<=s;){for(var p=o+g;p<=a;){var v=U([d,p],n.properties);n.mask?qn(v,n.mask)&&r.push(v):r.push(v),p+=l}d+=u}return j(r)}function aa(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[],o=t[0],s=t[1],a=t[2],u=t[3],l=a-o,h=ft(e,r.units,"degrees"),c=u-s,f=ft(n,r.units,"degrees"),g=Math.floor(Math.abs(l)/h),d=Math.floor(Math.abs(c)/f),p=(c-d*f)/2,v=o+(l-g*h)/2,y=0;y<g;y++){for(var m=s+p,_=0;_<d;_++){var x=z([[[v,m],[v,m+f],[v+h,m+f],[v+h,m],[v,m]]],r.properties);r.mask?Ue(r.mask,x)&&i.push(x):i.push(x),m+=f}v+=h}return j(i)}function ua(t,e){return aa(t,e,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function la(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=e/$([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/$([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),s=0,a=t[0];a<=t[2];){for(var u=0,l=t[1];l<=t[3];){var h=null,c=null;s%2==0&&u%2==0?(h=z([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=z([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)):s%2==0&&u%2==1?(h=z([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties),c=z([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties)):u%2==0&&s%2==1?(h=z([[[a,l],[a,l+o],[a+i,l+o],[a,l]]],n.properties),c=z([[[a,l],[a+i,l+o],[a+i,l],[a,l]]],n.properties)):u%2==1&&s%2==1&&(h=z([[[a,l],[a,l+o],[a+i,l],[a,l]]],n.properties),c=z([[[a,l+o],[a+i,l+o],[a+i,l],[a,l+o]]],n.properties)),n.mask?(na(j([n.mask,h]))&&r.push(h),na(j([n.mask,c]))&&r.push(c)):(r.push(h),r.push(c)),l+=o,u++}s++,a+=i}return j(r)}function ha(t,e,n){return t<e?(n-t)/(e-t):(t-n)/(t-e)}function ca(t,e,n,r){var i;return n>r&&(i=n,n=r,r=i),t<e?t<n?(n-t)/(e-t):(r-t)/(e-t):t>r?(t-r)/(t-e):(t-n)/(t-e)}function fa(t,e,n,r){return t<e?(n-t)/(e-t):(t-r)/(t-e)}function ga(t,e,n,r){return t<e?(r-t)/(e-t):(t-n)/(t-e)}function da(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function pa(t,e,n,r){var i=[];return t.polygons.forEach(function(t){t.forEach(function(t){t[0]+=e,t[1]+=n}),r.linearRing&&t.push(t[0]),i.push(t)}),i}function va(t,e,n,r){return 0===n?(t+=1,e+=r[0][1]):1===n?t+=r[0][0]:2===n?e+=r[0][1]:3===n&&(t+=r[0][0],e+=1),[t,e]}function ya(t,e,n){return 0===n?t++:1===n||(2===n?e++:3===n&&(t++,e++)),[t,e]}function ma(t,e,n,r,i){var o=r,s=i,a=0,u=0;if(this.x=e,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===r&&1===i)this.lowerBound=Math.min(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]),this.upperBound=Math.max(t[n][e],t[n][e+1],t[n+1][e+1],t[n+1][e]);else{if(r>1){for(;0!==o;)o>>=1,a++;r===1<<a-1&&a--,o=1<<a-1}if(i>1){for(;0!==s;)s>>=1,u++;i===1<<u-1&&u--,s=1<<u-1}this.childA=new ma(t,e,n,o,s),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,r-o>0&&(this.childB=new ma(t,e+o,n,r-o,s),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),i-s>0&&(this.childC=new ma(t,e+o,n+s,r-o,i-s),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),i-s>0&&(this.childD=new ma(t,e,n+s,o,i-s),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function _a(t){var e,n;if(!t)throw new Error("data is required");if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("data must be scalar field, i.e. array of arrays");if(t.length<2)throw new Error("data must contain at least two rows");if((n=t[0].length)<2)throw new Error("data must contain at least two columns");for(e=1;e<t.length;e++){if(!Array.isArray(t[e]))throw new Error("Row "+e+" is not an array");if(t[e].length!=n)throw new Error("unequal row lengths detected, please provide a regular grid")}this.data=t,this.root=new ma(t,0,0,t[0].length-1,t.length-1)}function xa(t,e,n){var r,i,o,s=!1,a=!1,u=null,l=null,h=null,c=null,f=null,g=[];if(!t)throw new Error("data is required");if(null==e)throw new Error("threshold is required");if(n&&"object"!==_r(n))throw new Error("options must be an object");if(r=function(t){var e,n,r,i,o;for(i=new da,t=t||{},o=Object.keys(i),e=0;e<o.length;e++)null!=(r=t[n=o[e]])&&(i[n]=r);return i.polygons_full=!i.polygons,i.interpolate=ha,i}(n),t instanceof _a)u=t,l=t.root,h=t.data,r.noQuadTree||(s=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");h=t}if(Array.isArray(e)){for(a=!0,r.noQuadTree||(s=!0),i=0;i<e.length;i++)if(isNaN(+e[i]))throw new Error("threshold["+i+"] is not a number")}else{if(isNaN(+e))throw new Error("threshold must be a number or array of numbers");e=[e]}return s&&!l&&(u=new _a(h),l=u.root,h=u.data),r.verbose&&(r.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),a&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),e.forEach(function(t,e){if(f=[],r.threshold=t,r.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+t),r.polygons)if(s)l.cellsBelowThreshold(r.threshold,!0).forEach(function(t){f=f.concat(pa(ba(h,t.x,t.y,r),t.x,t.y,r))});else for(o=0;o<h.length-1;++o)for(e=0;e<h[0].length-1;++e)f=f.concat(pa(ba(h,e,o,r),e,o,r));else{for(c=[],e=0;e<h[0].length-1;++e)c[e]=[];if(s)l.cellsBelowThreshold(r.threshold,!1).forEach(function(t){c[t.x][t.y]=ba(h,t.x,t.y,r)});else for(e=0;e<h[0].length-1;++e)for(o=0;o<h.length-1;++o)c[e][o]=ba(h,e,o,r);f=function(t,r,i){var o,s,a,u,l,h,c,f,g,d,p,v,y,m,_,x=[],b=t.length-1,w=t[0].length-1,k=["right","bottom","left","top"],E=[0,-1,0,1],N=[-1,0,1,0],S={bottom:1,left:2,top:3,right:0};return i.noFrame||function(t,e){var n,r,i,o,s;for(n=!0,r=t[0].length,i=t.length,s=0;s<i;s++)if(t[s][0]>=e||t[s][r-1]>=e){n=!1;break}if(n&&(t[i-1][0]>=e||t[i-1][r-1]>=e)&&(n=!1),n)for(o=0;o<r-1;o++)if(t[0][o]>=e||t[i-1][o]>e){n=!1;break}return n}(t,i.threshold)&&(i.linearRing?x.push([[0,0],[0,b],[w,b],[w,0],[0,0]]):x.push([[0,0],[0,b],[w,b],[w,0]])),r.forEach(function(t,n){t.forEach(function(t,e){for(o=null,s=0;s<4;s++)if(o=k[s],"object"===_r(t.edges[o])){for(l=[],a=t.edges[o],h=o,c=n,f=e,g=!1,d=[n+a.path[0][0],e+a.path[0][1]],l.push(d);!g&&"object"===_r((u=r[c][f]).edges[h]);)if(a=u.edges[h],delete u.edges[h],(p=a.path[1])[0]+=c,p[1]+=f,l.push(p),h=a.move.enter,c+=a.move.x,f+=a.move.y,void 0===r[c]||void 0===r[c][f]){if(!i.linearRing)break;if(v=0,y=0,c===w?(c--,v=0):c<0?(c++,v=2):f===b?(f--,v=3):f<0&&(f++,v=1),c===n&&f===e&&v===S[o]){g=!0,h=o;break}for(;;){if(m=!1,y>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==r[c]&&void 0!==r[c][f]&&(u=r[c][f],_=k[v],"object"===_r(u.edges[_]))){a=u.edges[_],l.push(va(c,f,v,a.path)),h=_,m=!0;break}if(m)break;if(l.push(ya(c,f,v)),f+=N[v],void 0!==r[c+=E[v]]&&void 0!==r[c][f]||(0===v&&f<0||1===v&&c<0||2===v&&f===b||3===v&&c===w)&&(c-=E[v],f-=N[v],v=(v+1)%4,y++),c===n&&f===e&&v===S[o]){g=!0,h=o;break}}}!i.linearRing||l[l.length-1][0]===d[0]&&l[l.length-1][1]===d[1]||l.push(d),x.push(l)}})}),x}(h,c,r)}a?g.push(f):g=f,"function"==typeof r.successCallback&&r.successCallback(g,t)}),g}function ba(t,e,n,r){var i,o,s,a,u,l,h=0,c=t[n+1][e],f=t[n+1][e+1],g=t[n][e+1],d=t[n][e],p=r.threshold;if(!(isNaN(d)||isNaN(g)||isNaN(f)||isNaN(c))){switch(h|=c>=p?8:0,h|=f>=p?4:0,h|=g>=p?2:0,l={cval:h=+(h|=d>=p?1:0),polygons:[],edges:{},x0:d,x1:g,x2:f,x3:c},h){case 0:r.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:i=r.interpolate(d,c,p),a=r.interpolate(d,g,p),r.polygons_full&&(l.edges.left={path:[[0,i],[a,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[a,0]]);break;case 13:a=r.interpolate(d,g,p),o=r.interpolate(g,f,p),r.polygons_full&&(l.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&l.polygons.push([[a,0],[1,o],[1,0]]);break;case 11:o=r.interpolate(g,f,p),s=r.interpolate(c,f,p),r.polygons_full&&(l.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&l.polygons.push([[1,o],[s,1],[1,1]]);break;case 7:i=r.interpolate(d,c,p),s=r.interpolate(c,f,p),r.polygons_full&&(l.edges.top={path:[[s,1],[0,i]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&l.polygons.push([[s,1],[0,i],[0,1]]);break;case 1:i=r.interpolate(d,c,p),a=r.interpolate(d,g,p),r.polygons_full&&(l.edges.bottom={path:[[a,0],[0,i]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&l.polygons.push([[a,0],[0,i],[0,1],[1,1],[1,0]]);break;case 2:a=r.interpolate(d,g,p),o=r.interpolate(g,f,p),r.polygons_full&&(l.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,o],[a,0]]);break;case 4:o=r.interpolate(g,f,p),s=r.interpolate(c,f,p),r.polygons_full&&(l.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[s,1],[1,o],[1,0]]);break;case 8:i=r.interpolate(d,c,p),s=r.interpolate(c,f,p),r.polygons_full&&(l.edges.left={path:[[0,i],[s,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[s,1],[1,1],[1,0]]);break;case 12:i=r.interpolate(d,c,p),o=r.interpolate(g,f,p),r.polygons_full&&(l.edges.left={path:[[0,i],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[1,o],[1,0]]);break;case 9:a=r.interpolate(d,g,p),s=r.interpolate(c,f,p),r.polygons_full&&(l.edges.bottom={path:[[a,0],[s,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&l.polygons.push([[a,0],[s,1],[1,1],[1,0]]);break;case 3:i=r.interpolate(d,c,p),o=r.interpolate(g,f,p),r.polygons_full&&(l.edges.right={path:[[1,o],[0,i]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&l.polygons.push([[0,i],[0,1],[1,1],[1,o]]);break;case 6:a=r.interpolate(d,g,p),s=r.interpolate(c,f,p),r.polygons_full&&(l.edges.top={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[s,1],[a,0]]);break;case 10:i=r.interpolate(d,c,p),o=r.interpolate(g,f,p),a=r.interpolate(d,g,p),s=r.interpolate(c,f,p),u=(d+g+f+c)/4,r.polygons_full&&(u<p?(l.edges.left={path:[[0,i],[s,1]],move:{x:0,y:1,enter:"bottom"}},l.edges.right={path:[[1,o],[a,0]],move:{x:0,y:-1,enter:"top"}}):(l.edges.right={path:[[1,o],[s,1]],move:{x:0,y:1,enter:"bottom"}},l.edges.left={path:[[0,i],[a,0]],move:{x:0,y:-1,enter:"top"}})),r.polygons&&(u<p?l.polygons.push([[0,0],[0,i],[s,1],[1,1],[1,o],[a,0]]):(l.polygons.push([[0,0],[0,i],[a,0]]),l.polygons.push([[s,1],[1,1],[1,o]])));break;case 5:i=r.interpolate(d,c,p),o=r.interpolate(g,f,p),a=r.interpolate(d,g,p),s=r.interpolate(c,f,p),u=(d+g+f+c)/4,r.polygons_full&&(u<p?(l.edges.bottom={path:[[a,0],[0,i]],move:{x:-1,y:0,enter:"right"}},l.edges.top={path:[[s,1],[1,o]],move:{x:1,y:0,enter:"left"}}):(l.edges.top={path:[[s,1],[0,i]],move:{x:-1,y:0,enter:"right"}},l.edges.bottom={path:[[a,0],[1,o]],move:{x:1,y:0,enter:"left"}})),r.polygons&&(u<p?l.polygons.push([[0,i],[0,1],[s,1],[1,o],[1,0],[a,0]]):(l.polygons.push([[0,i],[0,1],[s,1]]),l.polygons.push([[a,0],[1,o],[1,0]])))}return l}}ea.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Js*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Js*Math.atan2(i,r),s]},ea.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,l=e&&e.offset?e.offset:10,h=180-l,c=-180+l,f=360-l,g=1;g<n.length;++g){var d=n[g-1][0],p=n[g][0],v=Math.abs(p-d);v>f&&(p>h&&d<c||d>h&&p<c)?a=!0:v>u&&(u=v)}var y=[];if(a&&u<l){var m=[];y.push(m);for(var _=0;_<n.length;++_){var x=parseFloat(n[_][0]);if(_>0&&Math.abs(x-n[_-1][0])>f){var b=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),k=parseFloat(n[_][0]),E=parseFloat(n[_][1]);if(b>-180&&b<c&&180===k&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<c){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(b>h&&b<180&&-180===k&&_+1<n.length&&n[_-1][0]>h&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(b<c&&k>h){var N=b;b=k,k=N;var S=w;w=E,E=S}if(b>h&&k<c&&(k+=360),b<=180&&k>=180&&b<k){var I=(180-b)/(k-b),M=I*E+(1-I)*w;m.push([n[_-1][0]>h?180:-180,M]),(m=[]).push([n[_-1][0]>h?-180:180,M]),y.push(m)}else m=[],y.push(m);m.push([x,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var C=[];y.push(C);for(var L=0;L<n.length;++L)C.push([n[L][0],n[L][1]])}for(var T=new ta(this.properties),P=0;P<y.length;++P){var R=new Qs;T.geometries.push(R);for(var O=y[P],A=0;A<O.length;++A)R.move_to(O[A])}return T},ma.prototype.cellsInBand=function(t,e,n){var r=[];return n=void 0===n||n,this.lowerBound>e||this.upperBound<t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(r=r.concat(this.childA.cellsInBand(t,e,n))),this.childB&&(r=r.concat(this.childB.cellsInBand(t,e,n))),this.childD&&(r=r.concat(this.childD.cellsInBand(t,e,n))),this.childC&&(r=r.concat(this.childC.cellsInBand(t,e,n)))):(n||this.lowerBound<=t||this.upperBound>=e)&&r.push({x:this.x,y:this.y})),r},ma.prototype.cellsBelowThreshold=function(t,e){var n=[];return e=void 0===e||e,this.lowerBound>t||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(t,e))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(t,e))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(t,e))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(t,e)))):(e||this.upperBound>=t)&&n.push({x:this.x,y:this.y})),n};var v={square:function(t,e,n,r,i,o){o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,0]])},triangle_bl:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,a],[s,0],[0,0]])},triangle_br:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[1,a],[1,0]])},triangle_tr:function(t,e,n,r,i,o){var s=o.interpolate(n,r,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[1,s],[a,1],[1,1]])},triangle_tl:function(t,e,n,r,i,o){var s=o.interpolate(i,r,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[s,1]])},tetragon_t:function(t,e,n,r,i,o){var s=o.interpolate(n,r,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,a],[0,1],[1,1],[1,s]])},tetragon_r:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[s,0],[a,1],[1,1],[1,0]])},tetragon_b:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,0]])},tetragon_l:function(t,e,n,r,i,o){var s=o.interpolate(i,r,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[a,0]])},tetragon_bl:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,i,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[a,0]])},tetragon_br:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate_b(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[1,l]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,u],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[1,l],[1,u],[a,0]])},tetragon_tr:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rb={path:[[1,l],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lt"}}),o.polygons&&t.polygons.push([[1,l],[s,1],[a,1],[1,u]])},tetragon_tl:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(e,i,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[0,l]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[s,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[a,1],[0,l],[0,u],[s,1]])},tetragon_lr:function(t,e,n,r,i,o){var s=o.interpolate_a(e,i,o.minV,o.maxV),a=o.interpolate_b(e,i,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[1,u],[1,l]])},tetragon_tb:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.tr={path:[[a,1],[u,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[l,0],[s,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&t.polygons.push([[l,0],[s,1],[a,1],[u,0]])},pentagon_tr:function(t,e,n,r,i,o){var s=o.interpolate(i,r,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[s,1],[1,a]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[s,1],[1,a],[1,0]])},pentagon_tl:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,0]])},pentagon_br:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,a],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[1,1],[1,a],[s,0]])},pentagon_bl:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[1,1],[1,0],[a,0]])},pentagon_tr_rl:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[1,u],[1,l]])},pentagon_rb_bt:function(t,e,n,r,i,o){var s=o.interpolate(n,r,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,n,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.rt={path:[[1,s],[a,0]],move:{x:0,y:-1,enter:"tr"}},t.edges.bl={path:[[u,0],[l,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[l,1],[1,1],[1,s],[a,0],[u,0]])},pentagon_bl_lr:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,i,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[1,l],[1,0]])},pentagon_lt_tb:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate_a(i,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[u,1],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[u,1],[l,0]])},pentagon_bl_tb:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(e,n,o.minV,o.maxV),l=o.interpolate_a(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[l,0],[0,s]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[a,1],[u,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[0,s],[0,1],[a,1],[u,0],[l,0]])},pentagon_lt_rl:function(t,e,n,r,i,o){var s=o.interpolate_a(e,i,o.minV,o.maxV),a=o.interpolate_b(e,i,o.minV,o.maxV),u=o.interpolate(i,r,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(t.edges.lt={path:[[0,a],[u,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,l],[0,s]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&t.polygons.push([[0,s],[0,a],[u,1],[1,1],[1,l]])},pentagon_tr_bt:function(t,e,n,r,i,o){var s=o.interpolate_a(i,r,o.minV,o.maxV),a=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[l,0],[s,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,1],[a,1],[1,u],[1,0],[l,0]])},pentagon_rb_lr:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate_b(n,r,o.minV,o.maxV),u=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[1,a]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[1,a],[1,u],[l,0]])},hexagon_lt_tr:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate_a(i,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[u,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[u,1],[1,l],[1,0]])},hexagon_bl_lt:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,i,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[l,1],[1,1],[1,0]])},hexagon_bl_rb:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate(e,i,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rt"}},t.edges.rt={path:[[1,l],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,1],[1,1],[1,l],[a,0]])},hexagon_tr_rb:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.tl={path:[[a,1],[1,u]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,l],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,1],[a,1],[1,u],[1,l],[s,0]])},hexagon_lt_rb:function(t,e,n,r,i,o){var s=o.interpolate(e,i,o.minV,o.maxV),a=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate(e,n,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,s],[a,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,s],[a,1],[1,1],[1,u],[l,0]])},hexagon_bl_tr:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV),u=o.interpolate(i,r,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[u,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,1],[u,1],[1,l],[1,0]])},heptagon_tr:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,i,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV),h=o.interpolate(i,r,o.minV,o.maxV),c=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:"br"}},t.edges.rt={path:[[1,c],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[h,1],[1,1],[1,c],[a,0]])},heptagon_bl:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate(e,i,o.minV,o.maxV),u=o.interpolate_a(i,r,o.minV,o.maxV),l=o.interpolate_b(i,r,o.minV,o.maxV),h=o.interpolate_b(n,r,o.minV,o.maxV),c=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.lb={path:[[0,a],[u,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[l,1],[1,h]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,c],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&t.polygons.push([[0,0],[0,a],[u,1],[l,1],[1,h],[1,c],[s,0]])},heptagon_tl:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate(e,i,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV),h=o.interpolate_b(n,r,o.minV,o.maxV),c=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rt"}},t.edges.tl={path:[[l,1],[1,h]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,c],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,1],[l,1],[1,h],[1,c],[a,0]])},heptagon_br:function(t,e,n,r,i,o){var s=o.interpolate(e,n,o.minV,o.maxV),a=o.interpolate_a(e,i,o.minV,o.maxV),u=o.interpolate_b(e,i,o.minV,o.maxV),l=o.interpolate_a(i,r,o.minV,o.maxV),h=o.interpolate_b(i,r,o.minV,o.maxV),c=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[h,1],[1,c]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&t.polygons.push([[s,0],[0,a],[0,u],[l,1],[h,1],[1,c],[1,0]])},octagon:function(t,e,n,r,i,o){var s=o.interpolate_a(e,n,o.minV,o.maxV),a=o.interpolate_b(e,n,o.minV,o.maxV),u=o.interpolate_a(e,i,o.minV,o.maxV),l=o.interpolate_b(e,i,o.minV,o.maxV),h=o.interpolate_a(i,r,o.minV,o.maxV),c=o.interpolate_b(i,r,o.minV,o.maxV),f=o.interpolate_b(n,r,o.minV,o.maxV),g=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(t.edges.bl={path:[[s,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},t.edges.lt={path:[[0,l],[h,1]],move:{x:0,y:1,enter:"bl"}},t.edges.tr={path:[[c,1],[1,f]],move:{x:1,y:0,enter:"lt"}},t.edges.rb={path:[[1,g],[a,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&t.polygons.push([[s,0],[0,u],[0,l],[h,1],[c,1],[1,f],[1,g],[a,0]])}};function wa(t,e,n,r){var i,o,s,a=!1,u=null,l=null,h=null,c=null,f=!1,g=[],d=[],p=[];if(!t)throw new Error("data is required");if(null==e)throw new Error("lowerBound is required");if(null==n)throw new Error("bandWidth is required");if(s=function(t){var e,n,r,i,o;for(i=new da,t=t||{},o=Object.keys(i),e=0;e<o.length;e++)null!=(r=t[n=o[e]])&&(i[n]=r);return i.polygons_full=!i.polygons,i.interpolate=ca,i.interpolate_a=fa,i.interpolate_b=ga,i}(r),t instanceof _a)u=t,l=t.root,h=t.data,s.noQuadTree||(a=!0);else{if(!Array.isArray(t)||!Array.isArray(t[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");h=t}if(Array.isArray(e)){for(f=!0,s.noQuadTree||(a=!0),i=0;i<e.length;i++)if(isNaN(+e[i]))throw new Error("lowerBound["+i+"] is not a number");if(Array.isArray(n)){if(e.length!==n.length)throw new Error("lowerBound and bandWidth have unequal lengths");for(i=0;i<n.length;i++)if(isNaN(+n[i]))throw new Error("bandWidth["+i+"] is not a number")}else{if(isNaN(+n))throw new Error("bandWidth must be a number");for(g=[],i=0;i<e.length;i++)g.push(n);n=g}}else{if(isNaN(+e))throw new Error("lowerBound must be a number");if(e=[e],isNaN(+n))throw new Error("bandWidth must be a number");n=[n]}return a&&!l&&(u=new _a(h),l=u.root,h=u.data),s.verbose&&(s.polygons?console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"):console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),f&&console.log("MarchingSquaresJS-isoBands: multiple bands requested, returning array of band polygons instead of polygons for a single band")),e.forEach(function(t,e){if(d=[],s.minV=t,s.maxV=t+n[e],s.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+t+":"+(t+n[e])+"]"),s.polygons)if(a)l.cellsInBand(s.minV,s.maxV,!0).forEach(function(t){d=d.concat(pa(Ea(h,t.x,t.y,s),t.x,t.y,s))});else for(o=0;o<h.length-1;++o)for(i=0;i<h[0].length-1;++i)d=d.concat(pa(Ea(h,i,o,s),i,o,s));else{for(c=[],i=0;i<h[0].length-1;++i)c[i]=[];if(a)l.cellsInBand(s.minV,s.maxV,!1).forEach(function(t){c[t.x][t.y]=Ea(h,t.x,t.y,s)});else for(i=0;i<h[0].length-1;++i)for(o=0;o<h.length-1;++o)c[i][o]=Ea(h,i,o,s);d=function(t,r,i){var o,s,a,u,l,h,c,f,g,d,p,v,y,m,_,x,b=[],w=t.length-1,k=t[0].length-1,E=[["rt","rb"],["br","bl"],["lb","lt"],["tl","tr"]],N=[0,-1,0,1],S=[-1,0,1,0],I=["bl","lb","lt","tl","tr","rt","rb","br"],M={bl:1,br:1,lb:2,lt:2,tl:3,tr:3,rt:0,rb:0};return function(t,e,n){var r,i,o,s,a;for(r=!0,i=t[0].length,o=t.length,a=0;a<o;a++)if(t[a][0]<e||t[a][0]>n||t[a][i-1]<e||t[a][i-1]>n){r=!1;break}if(r&&(t[o-1][0]<e||t[o-1][0]>n||t[o-1][i-1]<e||t[o-1][i-1]>n)&&(r=!1),r)for(s=0;s<i-1;s++)if(t[0][s]<e||t[0][s]>n||t[o-1][s]<e||t[o-1][s]>n){r=!1;break}return r}(t,i.minV,i.maxV)&&(i.linearRing?b.push([[0,0],[0,w],[k,w],[k,0],[0,0]]):b.push([[0,0],[0,w],[k,w],[k,0]])),r.forEach(function(t,n){t.forEach(function(t,e){for(o=null,a=0;a<8;a++)if(o=I[a],"object"===_r(t.edges[o])){for(s=[],u=t.edges[o],c=o,f=n,g=e,d=!1,p=[n+u.path[0][0],e+u.path[0][1]],s.push(p);!d&&"object"===_r((v=r[f][g]).edges[c]);)if(u=v.edges[c],delete v.edges[c],(_=u.path[1])[0]+=f,_[1]+=g,s.push(_),c=u.move.enter,f+=u.move.x,g+=u.move.y,void 0===r[f]||void 0===r[f][g]){if(y=0,m=0,f===k)f--,y=0;else if(f<0)f++,y=2;else if(g===w)g--,y=3;else{if(!(g<0))throw new Error("Left the grid somewhere in the interior!");g++,y=1}if(f===n&&g===e&&y===M[o]){d=!0,c=o;break}for(;;){if(x=!1,m>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==r[f]&&void 0!==r[f][g])for(v=r[f][g],l=0;l<E[y].length;l++)if(h=E[y][l],"object"===_r(v.edges[h])){u=v.edges[h],s.push(va(f,g,y,u.path)),c=h,x=!0;break}if(x)break;if(s.push(ya(f,g,y)),g+=S[y],void 0!==r[f+=N[y]]&&void 0!==r[f][g]||(0===y&&g<0||1===y&&f<0||2===y&&g===w||3===y&&f===k)&&(f-=N[y],g-=S[y],y=(y+1)%4,m++),f===n&&g===e&&y===M[o]){d=!0,c=o;break}}}!i.linearRing||s[s.length-1][0]===p[0]&&s[s.length-1][1]===p[1]||s.push(p),b.push(s)}})}),b}(h,c,s)}f?p.push(d):p=d,"function"==typeof s.successCallback&&s.successCallback(p,t,n[e])}),p}function ka(t,e,n,r,i,o){var s=(r+n+e+t)/4;return s>o?2:s<i?0:1}function Ea(t,e,n,r){var i,o,s=0,a=t[n+1][e],u=t[n+1][e+1],l=t[n][e+1],h=t[n][e],c=r.minV,f=r.maxV;if(!(isNaN(h)||isNaN(l)||isNaN(u)||isNaN(a))){switch(s|=a<c?0:a>f?128:64,s|=u<c?0:u>f?32:16,s|=l<c?0:l>f?8:4,o=0,i={cval:s=+(s|=h<c?0:h>f?2:1),polygons:[],edges:{},x0:h,x1:l,x2:u,x3:a,x:e,y:n},s){case 85:v.square(i,h,l,u,a,r);case 0:case 170:break;case 169:v.triangle_bl(i,h,l,u,a,r);break;case 166:v.triangle_br(i,h,l,u,a,r);break;case 154:v.triangle_tr(i,h,l,u,a,r);break;case 106:v.triangle_tl(i,h,l,u,a,r);break;case 1:v.triangle_bl(i,h,l,u,a,r);break;case 4:v.triangle_br(i,h,l,u,a,r);break;case 16:v.triangle_tr(i,h,l,u,a,r);break;case 64:v.triangle_tl(i,h,l,u,a,r);break;case 168:v.tetragon_bl(i,h,l,u,a,r);break;case 162:v.tetragon_br(i,h,l,u,a,r);break;case 138:v.tetragon_tr(i,h,l,u,a,r);break;case 42:v.tetragon_tl(i,h,l,u,a,r);break;case 2:v.tetragon_bl(i,h,l,u,a,r);break;case 8:v.tetragon_br(i,h,l,u,a,r);break;case 32:v.tetragon_tr(i,h,l,u,a,r);break;case 128:v.tetragon_tl(i,h,l,u,a,r);break;case 5:v.tetragon_b(i,h,l,u,a,r);break;case 20:v.tetragon_r(i,h,l,u,a,r);break;case 80:v.tetragon_t(i,h,l,u,a,r);break;case 65:v.tetragon_l(i,h,l,u,a,r);break;case 165:v.tetragon_b(i,h,l,u,a,r);break;case 150:v.tetragon_r(i,h,l,u,a,r);break;case 90:v.tetragon_t(i,h,l,u,a,r);break;case 105:v.tetragon_l(i,h,l,u,a,r);break;case 160:v.tetragon_lr(i,h,l,u,a,r);break;case 130:v.tetragon_tb(i,h,l,u,a,r);break;case 10:v.tetragon_lr(i,h,l,u,a,r);break;case 40:v.tetragon_tb(i,h,l,u,a,r);break;case 101:v.pentagon_tr(i,h,l,u,a,r);break;case 149:v.pentagon_tl(i,h,l,u,a,r);break;case 86:v.pentagon_bl(i,h,l,u,a,r);break;case 89:v.pentagon_br(i,h,l,u,a,r);break;case 69:v.pentagon_tr(i,h,l,u,a,r);break;case 21:v.pentagon_tl(i,h,l,u,a,r);break;case 84:v.pentagon_bl(i,h,l,u,a,r);break;case 81:v.pentagon_br(i,h,l,u,a,r);break;case 96:v.pentagon_tr_rl(i,h,l,u,a,r);break;case 24:v.pentagon_rb_bt(i,h,l,u,a,r);break;case 6:v.pentagon_bl_lr(i,h,l,u,a,r);break;case 129:v.pentagon_lt_tb(i,h,l,u,a,r);break;case 74:v.pentagon_tr_rl(i,h,l,u,a,r);break;case 146:v.pentagon_rb_bt(i,h,l,u,a,r);break;case 164:v.pentagon_bl_lr(i,h,l,u,a,r);break;case 41:v.pentagon_lt_tb(i,h,l,u,a,r);break;case 66:v.pentagon_bl_tb(i,h,l,u,a,r);break;case 144:v.pentagon_lt_rl(i,h,l,u,a,r);break;case 36:v.pentagon_tr_bt(i,h,l,u,a,r);break;case 9:v.pentagon_rb_lr(i,h,l,u,a,r);break;case 104:v.pentagon_bl_tb(i,h,l,u,a,r);break;case 26:v.pentagon_lt_rl(i,h,l,u,a,r);break;case 134:v.pentagon_tr_bt(i,h,l,u,a,r);break;case 161:v.pentagon_rb_lr(i,h,l,u,a,r);break;case 37:v.hexagon_lt_tr(i,h,l,u,a,r);break;case 148:v.hexagon_bl_lt(i,h,l,u,a,r);break;case 82:v.hexagon_bl_rb(i,h,l,u,a,r);break;case 73:v.hexagon_tr_rb(i,h,l,u,a,r);break;case 133:v.hexagon_lt_tr(i,h,l,u,a,r);break;case 22:v.hexagon_bl_lt(i,h,l,u,a,r);break;case 88:v.hexagon_bl_rb(i,h,l,u,a,r);break;case 97:v.hexagon_tr_rb(i,h,l,u,a,r);break;case 145:case 25:v.hexagon_lt_rb(i,h,l,u,a,r);break;case 70:case 100:v.hexagon_bl_tr(i,h,l,u,a,r);break;case 17:0===(o=ka(h,l,u,a,c,f))?(v.triangle_bl(i,h,l,u,a,r),v.triangle_tr(i,h,l,u,a,r)):v.hexagon_lt_rb(i,h,l,u,a,r);break;case 68:0===(o=ka(h,l,u,a,c,f))?(v.triangle_tl(i,h,l,u,a,r),v.triangle_br(i,h,l,u,a,r)):v.hexagon_bl_tr(i,h,l,u,a,r);break;case 153:2===(o=ka(h,l,u,a,c,f))?(v.triangle_bl(i,h,l,u,a,r),v.triangle_tr(i,h,l,u,a,r)):v.hexagon_lt_rb(i,h,l,u,a,r);break;case 102:2===(o=ka(h,l,u,a,c,f))?(v.triangle_tl(i,h,l,u,a,r),v.triangle_br(i,h,l,u,a,r)):v.hexagon_bl_tr(i,h,l,u,a,r);break;case 152:2===(o=ka(h,l,u,a,c,f))?(v.triangle_tr(i,h,l,u,a,r),v.tetragon_bl(i,h,l,u,a,r)):v.heptagon_tr(i,h,l,u,a,r);break;case 137:2===(o=ka(h,l,u,a,c,f))?(v.triangle_bl(i,h,l,u,a,r),v.tetragon_tr(i,h,l,u,a,r)):v.heptagon_bl(i,h,l,u,a,r);break;case 98:2===(o=ka(h,l,u,a,c,f))?(v.triangle_tl(i,h,l,u,a,r),v.tetragon_br(i,h,l,u,a,r)):v.heptagon_tl(i,h,l,u,a,r);break;case 38:2===(o=ka(h,l,u,a,c,f))?(v.triangle_br(i,h,l,u,a,r),v.tetragon_tl(i,h,l,u,a,r)):v.heptagon_br(i,h,l,u,a,r);break;case 18:0===(o=ka(h,l,u,a,c,f))?(v.triangle_tr(i,h,l,u,a,r),v.tetragon_bl(i,h,l,u,a,r)):v.heptagon_tr(i,h,l,u,a,r);break;case 33:0===(o=ka(h,l,u,a,c,f))?(v.triangle_bl(i,h,l,u,a,r),v.tetragon_tr(i,h,l,u,a,r)):v.heptagon_bl(i,h,l,u,a,r);break;case 72:0===(o=ka(h,l,u,a,c,f))?(v.triangle_tl(i,h,l,u,a,r),v.tetragon_br(i,h,l,u,a,r)):v.heptagon_tl(i,h,l,u,a,r);break;case 132:0===(o=ka(h,l,u,a,c,f))?(v.triangle_br(i,h,l,u,a,r),v.tetragon_tl(i,h,l,u,a,r)):v.heptagon_br(i,h,l,u,a,r);break;case 136:0===(o=ka(h,l,u,a,c,f))?(v.tetragon_tl(i,h,l,u,a,r),v.tetragon_br(i,h,l,u,a,r)):1===o?v.octagon(i,h,l,u,a,r):(v.tetragon_bl(i,h,l,u,a,r),v.tetragon_tr(i,h,l,u,a,r));break;case 34:0===(o=ka(h,l,u,a,c,f))?(v.tetragon_bl(i,h,l,u,a,r),v.tetragon_tr(i,h,l,u,a,r)):1===o?v.octagon(i,h,l,u,a,r):(v.tetragon_tl(i,h,l,u,a,r),v.tetragon_br(i,h,l,u,a,r))}return i}}var Na=Object.defineProperty,Sa=Object.getOwnPropertySymbols,Ia=Object.prototype.hasOwnProperty,Ma=Object.prototype.propertyIsEnumerable,Ca=function(t,e,n){return e in t?Na(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},La=function(t,e){for(var n in e||(e={}))Ia.call(e,n)&&Ca(t,n,e[n]);if(Sa){var r,i=B(Sa(e));try{for(i.s();!(r=i.n()).done;){n=r.value;Ma.call(e,n)&&Ca(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t};function Ta(t,e){if(!W(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;xt(t,"Point","input must contain Points");for(var o=function(t,n){var r={};N(t,function(t){var e=E(t)[1];r[e]||(r[e]=[]),r[e].push(t)});var e=Object.keys(r).map(function(t){return r[t].sort(function(t,e){return E(t)[0]-E(e)[0]})}),i=e.sort(function(t,e){return n?E(t[0])[1]-E(e[0])[1]:E(e[0])[1]-E(t[0])[1]});return i}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}function Pa(t){var e=t.map(function(t){return{ring:t,area:Gt(z([t]))}});return e.sort(function(t,e){return e.area-t.area}),e.map(function(t){return t.ring})}function Ra(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!Aa(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=z([e[r].lrCoordinates]),s=r+1;s<e.length;s++){if(!e[s].grouped)Oa(z([e[s].lrCoordinates]),o)&&(i.push(e[s].lrCoordinates),e[s].grouped=!0)}n.push(i)}return n}function Oa(t,e){for(var n=Hs(t),r=0;r<n.features.length;r++)if(!V(n.features[r],e))return!1;return!0}function Aa(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}var Da=Object.defineProperty,Fa=Object.getOwnPropertySymbols,Ba=Object.prototype.hasOwnProperty,za=Object.prototype.propertyIsEnumerable,Va=function(t,e,n){return e in t?Da(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},qa=function(t,e){for(var n in e||(e={}))Ba.call(e,n)&&Va(t,n,e[n]);if(Fa){var r,i=B(Fa(e));try{for(i.s();!(r=i.n()).done;){n=r.value;za.call(e,n)&&Va(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t};function Ga(t,e){if(!W(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;xt(t,"Point","input must contain Points");for(var o=function(t,n){var r={};N(t,function(t){var e=E(t)[1];r[e]||(r[e]=[]),r[e].push(t)});var e=Object.keys(r).map(function(t){return r[t].sort(function(t,e){return E(t)[0]-E(e)[0]})}),i=e.sort(function(t,e){return n?E(t[0])[1]-E(e[0])[1]:E(e[0])[1]-E(t[0])[1]});return i}(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],l=[],h=0;h<u.length;h++){var c=u[h];c.properties[n]?l.push(c.properties[n]):l.push(0),!0===i&&(c.properties.matrixPosition=[a,h])}s.push(l)}return s}function Ua(t,e,n,r,i,o,s,a){var u,l,h,c,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(a-o)*(n-t)-(s-i)*(r-e))?null!==f.x&&null!==f.y&&f:(c=(n-t)*(l=e-o)-(r-e)*(h=t-i),l=((s-i)*l-(a-o)*h)/u,h=c/u,f.x=t+l*(n-t),f.y=e+l*(r-e),l>=0&&l<=1&&(f.onLine1=!0),h>=0&&h<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function Ya(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Dt(t,function(t,e){var n=e.geometry.coordinates;return t+$(n[0],n[1],r)},0)}function ja(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.steps||64,s=Xa(n),a=Xa(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(s===a)return Y(Vi(t,e,i).geometry.coordinates[0],u);for(var l=s,h=s<a?a:a+360,c=l,f=[],g=0,d=(h-l)/o;c<=h;)f.push(Et(t,e,c,i).geometry.coordinates),c=l+ ++g*d;return Y(f,u)}function Xa(t){var e=t%360;return e<0&&(e+=360),e}function Wa(t,e,n,r){if(!W(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var s,a,u,l=i.length,h=0,c=0;c<i.length&&!(e>=h&&c===i.length-1);c++){if(h>e&&0===o.length){if(!(s=e-h))return o.push(i[c]),Y(o);a=kt(i[c],i[c-1])-180,u=Et(i[c],s,a,r),o.push(u.geometry.coordinates)}if(h>=n)return(s=n-h)?(a=kt(i[c],i[c-1])-180,u=Et(i[c],s,a,r),o.push(u.geometry.coordinates),Y(o)):(o.push(i[c]),Y(o));if(h>=e&&o.push(i[c]),c===i.length-1)return Y(o);h+=$(i[c],i[c+1],r)}if(h<e&&i.length===l)throw new Error("Start position is beyond line");var f=i[i.length-1];return Y([f,f])}function Za(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Ha(t,e){return t[0]*e[1]-e[0]*t[1]}function $a(t,e){return!function(t,e){return 0===Ha(Za(t),Za(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=Za(t),s=e[0],a=Za(e),u=Ha(o,a),l=function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(Ha((r=i,[(n=s)[0]-r[0],n[1]-r[1]]),a)/u,o));return l}(t,e)}function Ja(t,e,n){var g=[],d=ut(e,n),p=E(t),v=[];return p.forEach(function(t,e){if(e!==p.length-1){var n=(o=t,s=p[e+1],a=d,u=Math.sqrt((o[0]-s[0])*(o[0]-s[0])+(o[1]-s[1])*(o[1]-s[1])),l=o[0]+a*(s[1]-o[1])/u,h=s[0]+a*(s[1]-o[1])/u,c=o[1]+a*(o[0]-s[0])/u,f=s[1]+a*(o[0]-s[0])/u,[[l,c],[h,f]]);if(g.push(n),e>0){var r=g[e-1],i=$a(n,r);!1!==i&&(r[1]=i,n[0]=i),v.push(r[0]),e===p.length-2&&(v.push(n[0]),v.push(n[1]))}2===p.length&&(v.push(n[0]),v.push(n[1]))}var o,s,a,u,l,h,c,f}),Y(v,t.properties)}function Ka(t){var e=t[0],n=t[1],r=t[2],i=t[3];if($(t.slice(0,2),[r,n])>=$(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var s=(e+r)/2;return[s-(i-n)/2,n,s+(i-n)/2,i]}function Qa(t,e){if(!W(e=null!=e?e:{}))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return w(t,function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)}),t}function tu(r,t){var i=[],o=ln();return b(t,function(t){if(i.forEach(function(t,e){t.id=e}),i.length){var e=o.search(t);if(e.features.length){var n=nu(t,e);i=i.filter(function(t){return t.id!==n.id}),o.remove(n),N(eu(n,t),function(t){i.push(t),o.insert(t)})}}else(i=eu(r,t).features).forEach(function(t){t.bbox||(t.bbox=Ka(J(t)))}),o.load(j(i))}),j(i)}function eu(t,o){var s=[],e=E(t)[0],n=E(t)[t.geometry.coordinates.length-1];if(ru(e,Z(o))||ru(n,Z(o)))return j([t]);var r=ln(),i=hn(t);r.load(i);var a=r.search(o);if(!a.features.length)return j([t]);var u=nu(o,a),l=Lt(i,function(t,e,n){var r=E(e)[1],i=Z(o);return n===u.id?(t.push(i),s.push(Y(t)),ru(i,r)?[i]:[i,r]):(t.push(r),t)},[e]);return l.length>1&&s.push(Y(l)),j(s)}function nu(n,t){if(!t.features.length)throw new Error("lines must contain features");if(1===t.features.length)return t.features[0];var r,i=1/0;return N(t,function(t){var e=wn(t,n).properties.dist;e<i&&(r=t,i=e)}),r}function ru(t,e){return t[0]===e[0]&&t[1]===e[1]}function iu(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=H(t),o=i.coordinates,s=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(o=ou(o)),z([o],e);case"MultiLineString":var a=[],u=0;return o.forEach(function(t){if(n&&(t=ou(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(J(Y(t)));e>u?(a.unshift(t),u=e):a.push(t)}else a.push(t)}),z(a,e);default:throw new Error("geometry type "+s+" is not supported")}}function ou(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function su(t){return rt(t)}function au(t){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return t&&(e="Feature"===t.type?t.geometry.coordinates:t.coordinates),z(e)}function uu(t){var e,n=0,r=B(t);try{for(r.s();!(e=r.n()).done;){n+=e.value}}catch(t){r.e(t)}finally{r.f()}return n/t.length}var lu=Object.defineProperty,hu=Object.defineProperties,cu=Object.getOwnPropertyDescriptors,fu=Object.getOwnPropertySymbols,gu=Object.prototype.hasOwnProperty,du=Object.prototype.propertyIsEnumerable,pu=function(t,e,n){return e in t?lu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},vu=function(t,e){for(var n in e||(e={}))gu.call(e,n)&&pu(t,n,e[n]);if(fu){var r,i=B(fu(e));try{for(i.s();!(r=i.n()).done;){n=r.value;du.call(e,n)&&pu(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t},yu=function(t,e){return hu(t,cu(e))};function mu(r,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!r)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var o=1/0,s=0;N(t,function(t,e){var n=$(r,t,i);n<o&&(s=e,o=n)});var e=p(t.features[s]);return yu(vu({},e),{properties:yu(vu({},e.properties),{featureIndex:s,distanceToPoint:o})})}function _u(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!=(n=i.method)?n:"geodesic",s=null!=(r=i.units)?r:"kilometers";if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=U(t):"Point"===t.type?t=G(t):_t(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=Y(e):"LineString"===e.type?e=G(e):_t(e,"LineString","line");var a=1/0,u=t.geometry.coordinates;return At(e,function(t){if(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],r=function(t,e,n,r){if("geodesic"===r.method){return wn(Y([e,n]).geometry,t,{units:"degrees"}).properties.dist}var i=[n[0]-e[0],n[1]-e[1]],o=[t[0]-e[0],t[1]-e[1]],s=xu(o,i);if(s<=0)return Ys(t,e,{units:"degrees"});var a=xu(i,i);if(a<=s)return Ys(t,n,{units:"degrees"});var u=s/a,l=[e[0]+u*i[0],e[1]+u*i[1]];return Ys(t,l,{units:"degrees"})}(u,e,n,{method:o});r<a&&(a=r)}}),ft(a,"degrees",s)}function xu(t,e){return t[0]*e[0]+t[1]*e[1]}var bu=Object.defineProperty,wu=Object.getOwnPropertySymbols,ku=Object.prototype.hasOwnProperty,Eu=Object.prototype.propertyIsEnumerable,Nu=function(t,e,n){return e in t?bu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Su=function(t,e){for(var n in e||(e={}))ku.call(e,n)&&Nu(t,n,e[n]);if(wu){var r,i=B(wu(e));try{for(i.s();!(r=i.n()).done;){n=r.value;Eu.call(e,n)&&Nu(t,n,e[n])}}catch(t){i.e(t)}finally{i.f()}}return t};function Iu(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function Mu(t,e){var o=[];return N(t,function(n){var r=!1;if("Point"===n.geometry.type)Pt(e,function(t){V(n,t)&&(r=!0)}),r&&o.push(n);else{if("MultiPoint"!==n.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];Pt(e,function(e){w(n,function(t){V(t,e)&&(r=!0,i.push(t))})}),r&&o.push(nt(i,n.properties))}}),j(o)}function Cu(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function Lu(e,t){return t.geometry.coordinates[0].every(function(t){return V(U(t),e)})}var Tu=function(){return i(function t(e){g(this,t),this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1},[{key:"removeInnerEdge",value:function(e){this.innerEdges=this.innerEdges.filter(function(t){return t.from.id!==e.from.id})}},{key:"removeOuterEdge",value:function(e){this.outerEdges=this.outerEdges.filter(function(t){return t.to.id!==e.to.id})}},{key:"addOuterEdge",value:function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1}},{key:"sortOuterEdges",value:function(){var o=this;this.outerEdgesSorted||(this.outerEdges.sort(function(t,e){var n=t.to,r=e.to;if(n.coordinates[0]-o.coordinates[0]>=0&&r.coordinates[0]-o.coordinates[0]<0)return 1;if(n.coordinates[0]-o.coordinates[0]<0&&r.coordinates[0]-o.coordinates[0]>=0)return-1;if(n.coordinates[0]-o.coordinates[0]==0&&r.coordinates[0]-o.coordinates[0]==0)return n.coordinates[1]-o.coordinates[1]>=0||r.coordinates[1]-o.coordinates[1]>=0?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var i=Cu(o.coordinates,n.coordinates,r.coordinates);return i<0?1:i>0?-1:Math.pow(n.coordinates[0]-o.coordinates[0],2)+Math.pow(n.coordinates[1]-o.coordinates[1],2)-(Math.pow(r.coordinates[0]-o.coordinates[0],2)+Math.pow(r.coordinates[1]-o.coordinates[1],2))}),this.outerEdgesSorted=!0)}},{key:"getOuterEdges",value:function(){return this.sortOuterEdges(),this.outerEdges}},{key:"getOuterEdge",value:function(t){return this.sortOuterEdges(),this.outerEdges[t]}},{key:"addInnerEdge",value:function(t){this.innerEdges.push(t)}}],[{key:"buildId",value:function(t){return t.join(",")}}])}(),Pu=function(){function n(t,e){g(this,n),this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return i(n,[{key:"getSymetric",value:function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric}},{key:"deleteEdge",value:function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}},{key:"isEqual",value:function(t){return this.from.id===t.from.id&&this.to.id===t.to.id}},{key:"toString",value:function(){return"Edge { ".concat(this.from.id," -> ").concat(this.to.id," }")}},{key:"toLineString",value:function(){return Y([this.from.coordinates,this.to.coordinates])}},{key:"compareTo",value:function(t){return Cu(t.from.coordinates,t.to.coordinates,this.to.coordinates)}}])}(),Ru=function(){return i(function t(){g(this,t),this.edges=[],this.polygon=void 0,this.envelope=void 0},[{key:"push",value:function(t){this.edges.push(t),this.polygon=this.envelope=void 0}},{key:"get",value:function(t){return this.edges[t]}},{key:"length",get:function(){return this.edges.length}},{key:"forEach",value:function(t){this.edges.forEach(t)}},{key:"map",value:function(t){return this.edges.map(t)}},{key:"some",value:function(t){return this.edges.some(t)}},{key:"isValid",value:function(){return!0}},{key:"isHole",value:function(){var r=this,t=this.edges.reduce(function(t,e,n){return e.from.coordinates[1]>r.edges[t].from.coordinates[1]&&(t=n),t},0),e=(0===t?this.length:t)-1,n=(t+1)%this.length,i=Cu(this.edges[e].from.coordinates,this.edges[t].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[e].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0}},{key:"toMultiPoint",value:function(){return nt(this.edges.map(function(t){return t.from.coordinates}))}},{key:"toPolygon",value:function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=z([t])}},{key:"getEnvelope",value:function(){return this.envelope?this.envelope:this.envelope=Zs(this.toPolygon())}},{key:"inside",value:function(t){return V(t,this.toPolygon())}}],[{key:"findEdgeRingContaining",value:function(f,t){var g,d,p=f.getEnvelope();return t.forEach(function(t){var e,n,r,i,o,s,a=t.getEnvelope();if((d&&(g=d.getEnvelope()),n=p,r=(e=a).geometry.coordinates[0].map(function(t){return t[0]}),i=e.geometry.coordinates[0].map(function(t){return t[1]}),o=n.geometry.coordinates[0].map(function(t){return t[0]}),s=n.geometry.coordinates[0].map(function(t){return t[1]}),Math.max.apply(null,r)!==Math.max.apply(null,o)||Math.max.apply(null,i)!==Math.max.apply(null,s)||Math.min.apply(null,r)!==Math.min.apply(null,o)||Math.min.apply(null,i)!==Math.min.apply(null,s))&&Lu(a,p)){var u,l,h=B(f.map(function(t){return t.from.coordinates}));try{var c=function(){var r=l.value;t.some(function(t){return e=r,n=t.from.coordinates,e[0]===n[0]&&e[1]===n[1];var e,n})||(u=r)};for(h.s();!(l=h.n()).done;)c()}catch(t){h.e(t)}finally{h.f()}u&&t.inside(U(u))&&(d&&!Lu(g,a)||(d=t))}}),d}}])}();var Ou=function(){function e(){g(this,e),this.edges=[],this.nodes={}}return i(e,[{key:"getNode",value:function(t){var e=Tu.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Tu(t)),n}},{key:"addEdge",value:function(t,e){var n=new Pu(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)}},{key:"deleteDangles",value:function(){var e=this;Object.keys(this.nodes).map(function(t){return e.nodes[t]}).forEach(function(t){return e._removeIfDangle(t)})}},{key:"_removeIfDangle",value:function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}}},{key:"deleteCutEdges",value:function(){var e=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(t){t.label===t.symetric.label&&(e.removeEdge(t.symetric),e.removeEdge(t))})}},{key:"_computeNextCWEdges",value:function(n){var e=this;void 0===n?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):n.getOuterEdges().forEach(function(t,e){n.getOuterEdge((0===e?n.getOuterEdges().length:e)-1).symetric.next=t})}},{key:"_computeNextCCWEdges",value:function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,l=void 0;s.label===e&&(u=s),a.label===e&&(l=a),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)}},{key:"_findLabeledEdgeRings",value:function(){var n=[],r=0;return this.edges.forEach(function(t){if(!(t.label>=0)){n.push(t);var e=t;do{e.label=r,e=e.next}while(!t.isEqual(e));r++}}),n}},{key:"getEdgeRings",value:function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){n._findIntersectionNodes(e).forEach(function(t){n._computeNextCCWEdges(t,e.label)})});var e=[];return this.edges.forEach(function(t){t.ring||e.push(n._findEdgeRing(t))}),e}},{key:"_findIntersectionNodes",value:function(n){var t=[],r=n,e=function(){var e=0;r.from.getOuterEdges().forEach(function(t){t.label===n.label&&++e}),e>1&&t.push(r.from),r=r.next};do{e()}while(!n.isEqual(r));return t}},{key:"_findEdgeRing",value:function(t){var e=t,n=new Ru;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n}},{key:"removeNode",value:function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]}},{key:"removeEdge",value:function(e){this.edges=this.edges.filter(function(t){return!t.isEqual(e)}),e.deleteEdge()}}],[{key:"fromGeoJson",value:function(t){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '".concat(t.type,"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature"))}(t);var i=new e;return b(t,function(t){_t(t,"LineString","Graph::fromGeoJson"),It(t,function(t,e){if(t){var n=i.getNode(t),r=i.getNode(e);i.addEdge(n,r)}return e})}),i}}])}();function Au(t,l){var h,c;w(t,function(t,e,n,r,i){if(c!==i)l.push([]);else{var o=h[0],s=h[1],a=t[0],u=t[1];l[i].push([.75*o+.25*a,.75*s+.25*u]),l[i].push([.25*o+.75*a,.25*s+.75*u])}h=t,c=i},!1),l.forEach(function(t){t.push(t[0])})}function Du(t,l){var h,c,f;w(t,function(t,e,n,r,i){if(c!==r)l.push([[]]);else if(f!==i)l[r].push([]);else{var o=h[0],s=h[1],a=t[0],u=t[1];l[r][i].push([.75*o+.25*a,.75*s+.25*u]),l[r][i].push([.25*o+.75*a,.25*s+.75*u])}h=t,c=r,f=i},!1),l.forEach(function(t){t.forEach(function(t){t.push(t[0])})})}function Fu(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=t[o],a=t[o+1];o===t.length-1&&(a=t[0]);var u=zu(s,a,e);n<=0&&u>0?zu(e,s,r)<0||(r=s):n>0&&u<=0&&(Bu(e,s,i)||(i=s)),n=u}return[r,i]}function Bu(t,e,n){return zu(t,e,n)>0}function zu(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Vu(t){return Gu(t,"mercator",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function qu(t){return Gu(t,"wgs84",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Gu(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(e=e||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&X(t[0])?t="mercator"===n?Uu(t):Yu(t):(!0!==r&&(t=p(t)),w(t,function(t){var e="mercator"===n?Uu(t):Yu(t);t[0]=e[0],t[1]=e[1]})),t}function Uu(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]),o=[n*i*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return o[0]>r&&(o[0]=r),o[0]<-r&&(o[0]=-r),o[1]>r&&(o[1]=r),o[1]<-r&&(o[1]=-r),o}function Yu(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}var ju=Object.freeze({__proto__:null,toMercator:Vu,toWgs84:qu});var Xu={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function Wu(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function Zu(t){var n=[];return function t(e){return 0===e||1===e?1:n[e]>0?n[e]:n[e]=t(e-1)*e}(t)}function Hu(t){return Ju(t),$u(t)}function $u(t){return Array.isArray(t)?nl(t):t&&t.bbox?nl(t.bbox):[360*el(),180*el()]}function Ju(t){null!=t&&(Array.isArray(t)?dt(t):null!=t.bbox&&dt(t.bbox))}function Ku(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ju(e.bbox),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(U($u(e.bbox)));return j(n)}function Qu(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ju(i.bbox),null==t&&(t=1),void 0!==i.bbox&&null!==i.bbox||(i.bbox=[-180,-90,180,90]),X(i.num_vertices)&&void 0!==i.num_vertices||(i.num_vertices=10),X(i.max_radial_length)&&void 0!==i.max_radial_length||(i.max_radial_length=10);var e=Math.abs(i.bbox[0]-i.bbox[2]),n=Math.abs(i.bbox[1]-i.bbox[3]),r=Math.min(e/2,n/2);if(i.max_radial_length>r)throw new Error("max_radial_length is greater than the radius of the bbox");for(var o=[i.bbox[0]+i.max_radial_length,i.bbox[1]+i.max_radial_length,i.bbox[2]-i.max_radial_length,i.bbox[3]-i.max_radial_length],s=[],a=function(){var e,n=[],r=I(Array(i.num_vertices+1)).map(Math.random);r.forEach(function(t,e,n){n[e]=e>0?t+n[e-1]:t}),r.forEach(function(t){t=2*t*Math.PI/r[r.length-1];var e=Math.random();n.push([e*(i.max_radial_length||10)*Math.sin(t),e*(i.max_radial_length||10)*Math.cos(t)])}),n[n.length-1]=n[0],n=n.reverse().map((e=$u(o),function(t){return[t[0]+e[0],t[1]+e[1]]})),s.push(z([n]))},u=0;u<t;u++)a();return j(s)}function tl(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!W(e=e||{}))throw new Error("options is invalid");var n=e.bbox;Ju(n);var r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!X(r)||void 0===r||r<2)&&(r=10),X(i)&&void 0!==i||(i=1e-4),X(o)&&void 0!==o||(o=Math.PI/8);for(var s=[],a=0;a<t;a++){for(var u=[$u(n)],l=0;l<r-1;l++){var h=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,c=Math.random()*i;u.push([u[l][0]+c*Math.cos(h),u[l][1]+c*Math.sin(h)])}s.push(Y(u))}return j(s)}function el(){return Math.random()-.5}function nl(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var rl=Object.freeze({__proto__:null,randomLineString:tl,randomPoint:Ku,randomPolygon:Qu,randomPosition:Hu});function il(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return Pt(t,function(t){il(t,e)}),t;case"LineString":return ol(E(t),e),t;case"Polygon":return sl(E(t),e),t;case"MultiLineString":return E(t).forEach(function(t){ol(t,e)}),t;case"MultiPolygon":return E(t).forEach(function(t){sl(t,e)}),t;case"Point":case"MultiPoint":return t}}function ol(t,e){Qt(t)===e&&t.reverse()}function sl(t,e){Qt(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Qt(t[n])===e&&t[n].reverse()}function al(t){var e=t%360;return e<0&&(e+=360),e}function ul(n,r,t){if(!W(t=t||{}))throw new Error("options is invalid");var i=t.origin||"centroid",e=t.mutate||!1;if(!n)throw new Error("geojson required");if("number"!=typeof r||r<=0)throw new Error("invalid factor");var o=Array.isArray(i)||"object"===_r(i);return!0!==e&&(n=p(n)),"FeatureCollection"!==n.type||o?ll(n,r,i):(N(n,function(t,e){n.features[e]=ll(t,r,i)}),n)}function ll(t,i,e){var n="Point"===bt(t),o=function(t,e){null==e&&(e="centroid");if(Array.isArray(e)||"object"===_r(e))return Z(e);var n=t.bbox?t.bbox:J(t,{recompute:!0}),r=n[0],i=n[1],o=n[2],s=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return U([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return U([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return U([r,s]);case"ne":case"northeast":case"eastnorth":case"topright":return U([o,s]);case"center":return jn(t);case void 0:case null:case"centroid":return _i(t);default:throw new Error("invalid origin")}}(t,e);return 1===i||n||(w(t,function(t){var e=Ys(o,t),n=Nt(o,t),r=E(Us(o,e*i,n));t[0]=r[0],t[1]=r[1],3===t.length&&(t[2]*=i)}),delete t.bbox),t}function hl(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var cl={search:function(t,e,n,r){var i;t.cleanDirty();var o=(r=r||{}).heuristic||cl.heuristics.manhattan,s=null!=(i=r.closest)&&i,a=new dl(function(t){return t.f}),u=e;for(e.h=o(e,n),a.push(e);a.size()>0;){var l=a.pop();if(l===n)return hl(l);l.closed=!0;for(var h=t.neighbors(l),c=0,f=h.length;c<f;++c){var g=h[c];if(!g.closed&&!g.isWall()){var d=l.g+g.getCost(l),p=g.visited;(!p||d<g.g)&&(g.visited=!0,g.parent=l,g.h=g.h||o(g,n),g.g=d,g.f=g.g+g.h,t.markDirty(g),s&&(g.h<u.h||g.h===u.h&&g.g<u.g)&&(u=g),p?a.rescoreElement(g):a.push(g))}}}return s?hl(u):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function fl(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new gl(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function gl(t,e,n){this.x=t,this.y=e,this.weight=n}function dl(t){this.content=[],this.scoreFunction=t}function pl(t,e){for(var n=0;n<e.features.length;n++)if(V(t,e.features[n]))return!0;return!1}function vl(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return(o=t[0]-r)*o+(s=t[1]-i)*s}function yl(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=vl(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&yl(t,e,o,r,i),i.push(t[o]),n-o>1&&yl(t,o,n,r,i))}function ml(t,e){var n=t.length-1,r=[t[0]];return yl(t,0,n,e,r),r.push(t[n]),r}function _l(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:function(t,e){for(var n,r,i,o,s,a=t[0],u=[a],l=1,h=t.length;l<h;l++)n=t[l],i=a,o=void 0,s=void 0,o=(r=n)[0]-i[0],s=r[1]-i[1],o*o+s*s>e&&(u.push(n),a=n);return a!==n&&u.push(n),u}(t,r),t=ml(t,r)}function xl(t,r,i){return t.map(function(t){if(t.length<4)throw new Error("invalid polygon");for(var e=r,n=_l(t,e,i);!bl(n);)n=_l(t,e-=.01*e,i);return n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),n})}function bl(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}function wl(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}fl.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)cl.cleanNode(this.nodes[t])},fl.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)cl.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},fl.prototype.markDirty=function(t){this.dirtyNodes.push(t)},fl.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},fl.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],n=0,r=(e=o[s]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},gl.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},gl.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},gl.prototype.isWall=function(){return 0===this.weight},dl.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];(i=this.scoreFunction(u))<r&&(a=s)}if(o<e){var l=this.content[o];this.scoreFunction(l)<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var kl,El={exports:{}};var Nl=function(){if(kl)return El.exports;function t(t,e,n){n=n||2;var r,i,o,s,a,u,l,h=e&&e.length,c=h?e[0]*n:t.length,f=p(t,0,c,n,!0),g=[];if(!f||f.next===f.prev)return g;if(h&&(f=function(t,e,n,r){var i,o,s,a=[];for(i=0,o=e.length;i<o;i++)(s=p(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),a.push(x(s));for(a.sort(y),i=0;i<a.length;i++)n=m(a[i],n);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=s=t[1];for(var d=n;d<c;d+=n)(a=t[d])<r&&(r=a),(u=t[d+1])<i&&(i=u),a>o&&(o=a),u>s&&(s=u);l=0!==(l=Math.max(o-r,s-i))?32767/l:0}return v(f,g,n,r,i,l,0),g}function p(t,e,n,r,i){var o,s;if(i===L(t,e,n,r)>0)for(o=e;o<n;o+=r)s=I(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=I(o,t[o],t[o+1],s);return s&&a(s,s.next)&&(M(s),s=s.next),s}function h(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!a(r,r.next)&&0!==k(r.prev,r,r.next))r=r.next;else{if(M(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function v(t,e,n,r,i,o,s){if(t){!s&&o&&function(t,e,n,r){var i=t;do{0===i.z&&(i.z=b(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(u=l;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}(t,r,i,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?f(t,r,i,o):c(t))e.push(a.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),M(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?v(t=g(h(t),e,n),e,n,r,i,o,2):2===s&&d(t,e,n,r,i,o):v(h(t),e,n,r,i,o,1);break}}}function c(t){var e=t.prev,n=t,r=t.next;if(k(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,s=r.x,a=e.y,u=n.y,l=r.y,h=i<o?i<s?i:s:o<s?o:s,c=a<u?a<l?a:l:u<l?u:l,f=i>o?i>s?i:s:o>s?o:s,g=a>u?a>l?a:l:u>l?u:l,d=r.next;d!==e;){if(d.x>=h&&d.x<=f&&d.y>=c&&d.y<=g&&w(i,a,o,u,s,l,d.x,d.y)&&k(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function f(t,e,n,r){var i=t.prev,o=t,s=t.next;if(k(i,o,s)>=0)return!1;for(var a=i.x,u=o.x,l=s.x,h=i.y,c=o.y,f=s.y,g=a<u?a<l?a:l:u<l?u:l,d=h<c?h<f?h:f:c<f?c:f,p=a>u?a>l?a:l:u>l?u:l,v=h>c?h>f?h:f:c>f?c:f,y=b(g,d,e,n,r),m=b(p,v,e,n,r),_=t.prevZ,x=t.nextZ;_&&_.z>=y&&x&&x.z<=m;){if(_.x>=g&&_.x<=p&&_.y>=d&&_.y<=v&&_!==i&&_!==s&&w(a,h,u,c,l,f,_.x,_.y)&&k(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=g&&x.x<=p&&x.y>=d&&x.y<=v&&x!==i&&x!==s&&w(a,h,u,c,l,f,x.x,x.y)&&k(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=y;){if(_.x>=g&&_.x<=p&&_.y>=d&&_.y<=v&&_!==i&&_!==s&&w(a,h,u,c,l,f,_.x,_.y)&&k(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=m;){if(x.x>=g&&x.x<=p&&x.y>=d&&x.y<=v&&x!==i&&x!==s&&w(a,h,u,c,l,f,x.x,x.y)&&k(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function g(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!a(i,o)&&s(i,r,r.next,o)&&N(i,o)&&N(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),M(r),M(r.next),r=t=o),r=r.next}while(r!==t);return h(r)}function d(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&l(s,a)){var u=S(s,a);return s=h(s,s.next),u=h(u,u.next),v(s,e,n,r,i,o,0),void v(u,e,n,r,i,o,0)}a=a.next}s=s.next}while(s!==t)}function y(t,e){return t.x-e.x}function m(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s&&(s=a,n=r.x<r.next.x?r:r.next,a===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,l=n,h=n.x,c=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=h&&i!==r.x&&w(o<c?i:s,o,h,c,o<c?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),N(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&_(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(t,e);if(!n)return e;var r=S(n,t);return h(r,r.next),h(n,n.next)}function _(t,e){return k(t.prev,t,e.prev)<0&&k(e.next,t,t.next)<0}function b(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function x(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function w(t,e,n,r,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(r-a)>=(n-s)*(e-a)&&(n-s)*(o-a)>=(i-s)*(r-a)}function l(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&s(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(N(t,e)&&N(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(k(t.prev,t,e.prev)||k(t,e.prev,e))||a(t,e)&&k(t.prev,t,t.next)>0&&k(e.prev,e,e.next)>0)}function k(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function a(t,e){return t.x===e.x&&t.y===e.y}function s(t,e,n,r){var i=E(k(t,e,n)),o=E(k(t,e,r)),s=E(k(n,r,t)),a=E(k(n,r,e));return i!==o&&s!==a||(!(0!==i||!u(t,n,e))||(!(0!==o||!u(t,r,e))||(!(0!==s||!u(n,t,r))||!(0!==a||!u(n,e,r)))))}function u(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function E(t){return t>0?1:t<0?-1:0}function N(t,e){return k(t.prev,t,t.next)<0?k(t,e,t.next)>=0&&k(t,t.prev,e)>=0:k(t,e,t.prev)<0||k(t,t.next,e)<0}function S(t,e){var n=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function I(t,e,n,r){var i=new C(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function L(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}return kl=1,El.exports=t,El.exports.default=t,t.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(L(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(L(t,l,h,n))}var c=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,g=r[a+1]*n,d=r[a+2]*n;c+=Math.abs((t[f]-t[d])*(t[g+1]-t[f+1])-(t[f]-t[g])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},El.exports}(),Sl=Mn(Nl);function Il(t){var r=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),i=Sl(r.vertices,r.holes,2),e=[],o=[];i.forEach(function(t,e){var n=i[e];o.push([r.vertices[2*n],r.vertices[2*n+1]])});for(var n=0;n<o.length;n+=3){var s=o.slice(n,n+3);s.push(o[n]),e.push(z([s]))}return e}function Ml(t,g,e){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===e&&(e=1);var d=t.geometry.coordinates,p=[],v={};if(e){for(var n=[],r=0;r<d.length;r++)for(var i=0;i<d[r].length-1;i++)n.push(c(r,i));var o=new Ze;o.load(n)}for(var s=0;s<d.length;s++)for(var a=0;a<d[s].length-1;a++){if(e)o.search(c(s,a)).forEach(function(t){var e=t.ring,n=t.edge;h(s,a,e,n)});else for(var u=0;u<d.length;u++)for(var l=0;l<d[u].length-1;l++)h(s,a,u,l)}return g||(p={type:"Feature",geometry:{type:"MultiPoint",coordinates:p}}),p;function h(t,e,n,r){var i,o,s=d[t][e],a=d[t][e+1],u=d[n][r],l=d[n][r+1],h=function(t,e,n,r){if(Cl(t,n)||Cl(t,r)||Cl(e,n)||Cl(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],l=n[1],h=r[0],c=r[1],f=(i-s)*(l-c)-(o-a)*(u-h);if(0===f)return null;var g=((i*a-o*s)*(u-h)-(i-s)*(u*c-l*h))/f,d=((i*a-o*s)*(l-c)-(o-a)*(u*c-l*h))/f;return[g,d]}(s,a,u,l);if(null!==h&&(i=a[0]!==s[0]?(h[0]-s[0])/(a[0]-s[0]):(h[1]-s[1])/(a[1]-s[1]),o=l[0]!==u[0]?(h[0]-u[0])/(l[0]-u[0]):(h[1]-u[1])/(l[1]-u[1]),!(i>=1||i<=0||o>=1||o<=0))){var c=h,f=!v[c];f&&(v[c]=!0),g?p.push(g(h,t,e,s,a,i,n,r,u,l,o,f)):p.push(h)}}function c(t,e){var n,r,i,o,s=d[t][e],a=d[t][e+1];return s[0]<a[0]?(n=s[0],r=a[0]):(n=a[0],r=s[0]),s[1]<a[1]?(i=s[1],o=a[1]):(i=a[1],o=s[1]),{minX:n,minY:i,maxX:r,maxY:o,ring:t,edge:e}}}function Cl(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Cl(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Ll(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];Al(i[0],i[i.length-1])||i.push(i[0]);for(var o=0;o<i.length-1;o++)n.push(i[o])}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var s=n.length,a=Ml(t,function(t,e,n,r,i,o,s,a,u,l,h,c){return[t,e,n,r,i,o,s,a,u,l,h,c]}),u=a.length;if(0==u){var l=[];for(r=0;r<e;r++)l.push(z([t.geometry.coordinates[r]],{parent:-1,winding:Ol(t.geometry.coordinates[r])}));var h=j(l);return R(),O(),h}var c=[],f=[];for(r=0;r<e;r++){c.push([]);for(o=0;o<t.geometry.coordinates[r].length-1;o++)c[r].push([new Tl(t.geometry.coordinates[r][Dl(o+1,t.geometry.coordinates[r].length-1)],1,[r,o],[r,Dl(o+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new Pl(t.geometry.coordinates[r][o],[r,Dl(o-1,t.geometry.coordinates[r].length-1)],[r,o],void 0,void 0,!1,!0))}for(r=0;r<u;r++)c[a[r][1]][a[r][2]].push(new Tl(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&f.push(new Pl(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));var g=f.length;for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)c[r][o].sort(function(t,e){return t.param<e.param?-1:1});var d=[];for(r=0;r<g;r++)d.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var p=new Ze;p.load(d);for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(var v=0;v<c[r][o].length;v++){m=v==c[r][o].length-1?c[r][Dl(o+1,t.geometry.coordinates[r].length-1)][0].coord:c[r][o][v+1].coord;var y=p.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0];c[r][o][v].nxtIsectAlongEdgeIn=y.index}for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(v=0;v<c[r][o].length;v++){var m=c[r][o][v].coord,_=(y=p.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0]).index;_<s?f[_].nxtIsectAlongRingAndEdge2=c[r][o][v].nxtIsectAlongEdgeIn:Al(f[_].ringAndEdge1,c[r][o][v].ringAndEdgeIn)?f[_].nxtIsectAlongRingAndEdge1=c[r][o][v].nxtIsectAlongEdgeIn:f[_].nxtIsectAlongRingAndEdge2=c[r][o][v].nxtIsectAlongEdgeIn}var x=[];for(r=0,o=0;o<e;o++){var b=r;for(v=0;v<t.geometry.coordinates[o].length-1;v++)f[r].coord[0]<f[b].coord[0]&&(b=r),r++;var D=f[b].nxtIsectAlongRingAndEdge2;for(v=0;v<f.length;v++)if(f[v].nxtIsectAlongRingAndEdge1==b||f[v].nxtIsectAlongRingAndEdge2==b){var F=v;break}var B=Rl([f[F].coord,f[b].coord,f[D].coord],!0)?1:-1;x.push({isect:b,parent:-1,winding:B})}x.sort(function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1});for(l=[];x.length>0;){var w=x.pop(),k=w.isect,E=w.parent,N=w.winding,S=l.length,I=[f[k].coord],M=k;if(f[k].ringAndEdge1Walkable)var C=f[k].ringAndEdge1,L=f[k].nxtIsectAlongRingAndEdge1;else C=f[k].ringAndEdge2,L=f[k].nxtIsectAlongRingAndEdge2;for(;!Al(f[k].coord,f[L].coord);){I.push(f[L].coord);var T=void 0;for(r=0;r<x.length;r++)if(x[r].isect==L){T=r;break}if(null!=T&&x.splice(T,1),Al(C,f[L].ringAndEdge1)){if(C=f[L].ringAndEdge2,f[L].ringAndEdge2Walkable=!1,f[L].ringAndEdge1Walkable){var P={isect:L};Rl([f[M].coord,f[L].coord,f[f[L].nxtIsectAlongRingAndEdge2].coord],1==N)?(P.parent=E,P.winding=-N):(P.parent=S,P.winding=N),x.push(P)}M=L,L=f[L].nxtIsectAlongRingAndEdge2}else{if(C=f[L].ringAndEdge1,f[L].ringAndEdge1Walkable=!1,f[L].ringAndEdge2Walkable){P={isect:L};Rl([f[M].coord,f[L].coord,f[f[L].nxtIsectAlongRingAndEdge1].coord],1==N)?(P.parent=E,P.winding=-N):(P.parent=S,P.winding=N),x.push(P)}M=L,L=f[L].nxtIsectAlongRingAndEdge1}}I.push(f[L].coord),l.push(z([I],{index:S,parent:E,winding:N,netWinding:void 0}))}h=j(l);function R(){for(var t=[],e=0;e<h.features.length;e++)-1==h.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<h.features.length;r++)t[e]!=r&&V(h.features[t[e]].geometry.coordinates[0][0],h.features[r],{ignoreBoundary:!0})&&Gt(h.features[r])<Infinity&&(n=r);h.features[t[e]].properties.parent=n}}function O(){for(var t=0;t<h.features.length;t++)if(-1==h.features[t].properties.parent){var e=h.features[t].properties.winding;h.features[t].properties.netWinding=e,A(t,e)}}function A(t,e){for(var n=0;n<h.features.length;n++)if(h.features[n].properties.parent==t){var r=e+h.features[n].properties.winding;h.features[n].properties.netWinding=r,A(n,r)}}return R(),O(),h}var Tl=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Pl=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};function Rl(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Ol(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Rl([t[Dl(e-1,t.length-1)],t[e],t[Dl(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function Al(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Al(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Dl(t,e){return(t%e+e)%e}function Fl(t){return function(){return t}}function Bl(t){return t[0]}function zl(t){return t[1]}function Vl(){this._=null}function ql(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Gl(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ul(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Yl(t){for(;t.L;)t=t.L;return t}function jl(t,e,n,r){var i=[null,null],o=ph.push(i)-1;return i.left=t,i.right=e,n&&Wl(i,t,e,n),r&&Wl(i,e,t,r),gh[t.index].halfedges.push(o),gh[e.index].halfedges.push(o),i}function Xl(t,e,n){var r=[e,n];return r.left=t,r}function Wl(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Zl(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],l=s[1],h=0,c=1,f=a[0]-u,g=a[1]-l;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<h)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>h&&(h=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>h&&(h=o)}else if(f>0){if(o<h)return;o<c&&(c=o)}if(o=n-l,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<c&&(c=o)}else if(g>0){if(o>c)return;o>h&&(h=o)}if(o=i-l,g||!(o<0)){if(o/=g,g<0){if(o>c)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<c&&(c=o)}return!(h>0||c<1)||(h>0&&(t[0]=[u+h*f,l+h*g]),c<1&&(t[1]=[u+c*f,l+c*g]),!0)}}}}}function Hl(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],l=t.left,h=t.right,c=l[0],f=l[1],g=h[0],d=h[1],p=(c+g)/2,v=(f+d)/2;if(d===f){if(p<e||p>=r)return;if(c>g){if(u){if(u[1]>=i)return}else u=[p,n];o=[p,i]}else{if(u){if(u[1]<n)return}else u=[p,i];o=[p,n]}}else if(a=v-(s=(c-g)/(d-f))*p,s<-1||s>1)if(c>g){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function $l(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Jl(t,e){return e[+(e.left!==t.site)]}function Kl(t,e){return e[+(e.left===t.site)]}Vl.prototype={constructor:Vl,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Yl(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Gl(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ul(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ul(this,n),n=(t=n).U),n.C=!1,r.C=!0,Gl(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?Yl(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Gl(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ul(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Gl(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ul(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Gl(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ul(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Ql,th=[];function eh(){ql(this),this.x=this.y=this.arc=this.site=this.cy=null}function nh(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,l=r[1]-a,h=o[0]-s,c=o[1]-a,f=2*(u*c-l*h);if(!(f>=-vh)){var g=u*u+l*l,d=h*h+c*c,p=(c*g-l*d)/f,v=(u*d-h*g)/f,y=th.pop()||new eh;y.arc=t,y.site=i,y.x=p+s,y.y=(y.cy=v+a)+Math.sqrt(p*p+v*v),t.circle=y;for(var m=null,_=dh._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}dh.insert(m,y),m||(Ql=y)}}}}function rh(t){var e=t.circle;e&&(e.P||(Ql=e.N),dh.remove(e),th.push(e),ql(e),t.circle=null)}var ih=[];function oh(){ql(this),this.edge=this.site=this.circle=null}function sh(t){var e=ih.pop()||new oh;return e.site=t,e}function ah(t){rh(t),fh.remove(t),ih.push(t),ql(t)}function uh(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];ah(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<S&&Math.abs(r-u.circle.cy)<S;)o=u.P,a.unshift(u),ah(u),u=o;a.unshift(u),rh(u);for(var l=s;l.circle&&Math.abs(n-l.circle.x)<S&&Math.abs(r-l.circle.cy)<S;)s=l.N,a.push(l),ah(l),l=s;a.push(l),rh(l);var h,c=a.length;for(h=1;h<c;++h)l=a[h],u=a[h-1],Wl(l.edge,u.site,l.site,i);u=a[0],(l=a[c-1]).edge=jl(u.site,l.site,null,i),nh(u),nh(l)}function lh(t){for(var e,n,r,i,o=t[0],s=t[1],a=fh._;a;)if((r=hh(a,s)-o)>S)a=a.L;else{if(!((i=o-ch(a,s))>S)){r>-S?(e=a.P,n=a):i>-S?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){gh[t.index]={site:t,halfedges:[]}}(t);var u=sh(t);if(fh.insert(e,u),e||n){if(e===n)return rh(e),n=sh(e.site),fh.insert(u,n),u.edge=n.edge=jl(e.site,u.site),nh(e),void nh(n);if(n){rh(e),rh(n);var l=e.site,h=l[0],c=l[1],f=t[0]-h,g=t[1]-c,d=n.site,p=d[0]-h,v=d[1]-c,y=2*(f*v-g*p),m=f*f+g*g,_=p*p+v*v,x=[(v*m-g*_)/y+h,(f*_-p*m)/y+c];Wl(n.edge,l,d,x),u.edge=jl(l,t,null,x),n.edge=jl(t,d,null,x),nh(e),nh(n)}else u.edge=jl(e.site,u.site)}}function hh(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],l=u-e;if(!l)return a;var h=a-r,c=1/o-1/l,f=h/l;return c?(-f+Math.sqrt(f*f-2*c*(h*h/(-2*l)-u+l/2+i-o/2)))/c+r:(r+a)/2}function ch(t,e){var n=t.N;if(n)return hh(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var fh,gh,dh,ph,S=1e-6,vh=1e-12;function yh(t,e){return e[1]-t[1]||e[0]-t[0]}function mh(t,e){var n,r,i,o=t.sort(yh).pop();for(ph=[],gh=new Array(t.length),fh=new Vl,dh=new Vl;;)if(i=Ql,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(lh(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;uh(i.arc)}if(function(){for(var t,e,n,r,i=0,o=gh.length;i<o;++i)if((t=gh[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=$l(t,ph[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],l=+e[1][1];!function(t,e,n,r){for(var i,o=ph.length;o--;)Hl(i=ph[o],t,e,n,r)&&Zl(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>S||Math.abs(i[0][1]-i[1][1])>S)||delete ph[o]}(s,a,u,l),function(t,e,n,r){var i,o,s,a,u,l,h,c,f,g,d,p,v=gh.length,y=!0;for(i=0;i<v;++i)if(o=gh[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)ph[u[a]]||u.splice(a,1);for(a=0,l=u.length;a<l;)d=(g=Kl(o,ph[u[a]]))[0],p=g[1],c=(h=Jl(o,ph[u[++a%l]]))[0],f=h[1],(Math.abs(d-c)>S||Math.abs(p-f)>S)&&(u.splice(a,0,ph.push(Xl(s,g,Math.abs(d-t)<S&&r-p>S?[t,Math.abs(c-t)<S?f:r]:Math.abs(p-r)<S&&n-d>S?[Math.abs(f-r)<S?c:n,r]:Math.abs(d-n)<S&&p-e>S?[n,Math.abs(c-n)<S?f:e]:Math.abs(p-e)<S&&d-t>S?[Math.abs(f-e)<S?c:t,e]:null))-1),++l);l&&(y=!1)}if(y){var m,_,x,b=1/0;for(i=0,y=null;i<v;++i)(o=gh[i])&&(x=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<b&&(b=x,y=o);if(y){var w=[t,e],k=[t,r],E=[n,r],N=[n,e];y.halfedges.push(ph.push(Xl(s=y.site,w,k))-1,ph.push(Xl(s,k,E))-1,ph.push(Xl(s,E,N))-1,ph.push(Xl(s,N,w))-1)}}for(i=0;i<v;++i)(o=gh[i])&&(o.halfedges.length||delete gh[i])}(s,a,u,l)}this.edges=ph,this.cells=gh,fh=dh=ph=gh=null}mh.prototype={constructor:mh,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return Jl(e,n[t])});return t.data=e.site.data,t})},triangles:function(){var f=[],g=this.edges;return this.cells.forEach(function(t,e){if(r=(n=t.halfedges).length)for(var n,r,i,o,s,a,u=t.site,l=-1,h=g[n[r-1]],c=h.left===u?h.right:h.left;++l<r;)i=c,c=(h=g[n[l]]).left===u?h.right:h.left,i&&c&&e<i.index&&e<c.index&&(s=i,a=c,((o=u)[0]-a[0])*(s[1]-o[1])-(o[0]-s[0])*(a[1]-o[1])<0)&&f.push([u.data,i.data,c.data])}),f},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(s,a,t){for(var e,u,l=this,h=l._found||0,n=l.cells.length;!(u=l.cells[h]);)if(++h>=n)return null;var r=s-u.site[0],i=a-u.site[1],c=r*r+i*i;do{u=l.cells[e=h],h=null,u.halfedges.forEach(function(t){var e=l.edges[t],n=e.left;if(n!==u.site&&n||(n=e.right)){var r=s-n[0],i=a-n[1],o=r*r+i*i;o<c&&(c=o,h=n.index)}})}while(null!==h);return l._found=e,null==t||c<=t*t?u.site:null}},t.along=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=H(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var s=e-i;if(s){var a=kt(r[o],r[o-1])-180;return Et(r[o],s,a,n)}return U(r[o])}i+=$(r[o],r[o+1],n)}return U(r[r.length-1])},t.angle=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!W(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,s=n,a=lt(!0!==r.mercator?kt(o,i):Nt(o,i)),u=lt(!0!==r.mercator?kt(o,s):Nt(o,s));u<a&&(u+=360);var l=u-a;return!0===r.explementary?360-l:l},t.applyFilter=Hi,t.area=Gt,t.areaFactors=C,t.azimuthToBearing=ht,t.bbox=J,t.bboxClip=function(t,e){var n=H(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var s=[];return"LineString"===r&&(o=[o]),o.forEach(function(t){!function(t,e,n){var r,i,o,s,a,u=t.length,l=Ht(t[0],e),h=[];for(n||(n=[]),r=1;r<u;r++){for(s=t[r-1],i=o=Ht(a=t[r],e);;){if(!(l|i)){h.push(s),i!==o?(h.push(a),r<u-1&&(n.push(h),h=[])):r===u-1&&h.push(a);break}if(l&i)break;l?l=Ht(s=Zt(s,a,l,e),e):i=Ht(a=Zt(s,a,i,e),e)}l=o}h.length&&n.push(h)}(t,e,s)}),1===s.length?Y(s[0],i):et(s,i);case"Polygon":return z($t(o,e),i);case"MultiPolygon":return rt(o.map(function(t){return $t(t,e)}),i);default:throw new Error("geometry "+r+" not supported")}},t.bboxPolygon=Jt,t.bearing=kt,t.bearingToAzimuth=lt,t.bezierSpline=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=H(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),s=new Kt({duration:n,points:o,sharpness:r}),a=function(t){var e=s.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<s.duration;u+=10)a(u);return a(s.duration),Y(i,e.properties)},t.booleanClockwise=Qt,t.booleanConcave=function(t){var e=H(t).coordinates;if(e[0].length<=4)return!1;for(var n=!1,r=e[0].length-1,i=0;i<r;i++){var o=e[0][(i+2)%r][0]-e[0][(i+1)%r][0],s=e[0][(i+2)%r][1]-e[0][(i+1)%r][1],a=e[0][i][0]-e[0][(i+1)%r][0],u=o*(e[0][i][1]-e[0][(i+1)%r][1])-s*a;if(0===i)n=u>0;else if(n!==u>0)return!0}return!1},t.booleanContains=function(t,e){var n=H(t),r=H(e),i=n.type,o=r.type,s=n.coordinates,a=r.coordinates;switch(i){case"Point":if("Point"===o)return ie(s,a);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(ie(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){var n,r=B(e.coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,s=!1,a=B(t.coordinates);try{for(a.s();!(i=a.n()).done;){if(ie(o,i.value)){s=!0;break}}}catch(t){a.e(t)}finally{a.f()}if(!s)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return c(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){var n,r=!1,i=B(e.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(c({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(r=!0),!c({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}}catch(t){i.e(t)}finally{i.f()}return r}(n,r);case"MultiPoint":return function(t,e){var n,r=!1,i=B(e.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(c(o,t,{ignoreEndVertices:!0})&&(r=!0),!c(o,t))return!1}}catch(t){i.e(t)}finally{i.f()}if(r)return!0;return!1}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return V(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0,i=J(t),o=J(e);if(!re(i,o))return!1;for(;r<e.coordinates.length-1;r++){if(V({type:"Point",coordinates:oe(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}}return n}(n,r);case"Polygon":return ne(n,r);case"MultiPoint":return function(t,e){var n,r=B(e.coordinates);try{for(r.s();!(n=r.n()).done;){if(!V(n.value,t,{ignoreBoundary:!0}))return!1}}catch(t){r.e(t)}finally{r.f()}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":if("Polygon"===o)return function(t,e){return t.coordinates.some(function(t){return ne({type:"Polygon",coordinates:t},e)})}(n,r);throw new Error("feature2 "+o+" geometry not supported");default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanCrosses=be,t.booleanDisjoint=Se,t.booleanEqual=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).precision;if("number"!=typeof(n=null==n||isNaN(n)?6:n)||!(n>=0))throw new Error("precision must be a positive number");return H(t).type===H(e).type&&De(ze(t),ze(e),{precision:n})},t.booleanIntersects=Ue,t.booleanOverlap=function(t,n){var e=H(t),r=H(n),i=e.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(De(t,n,{precision:6}))return!1;var s=0;switch(i){case"MultiPoint":for(var a=0;a<e.coordinates.length;a++)for(var u=0;u<r.coordinates.length;u++){var l=e.coordinates[a],h=r.coordinates[u];if(l[0]===h[0]&&l[1]===h[1])return!0}return!1;case"LineString":case"MultiLineString":At(t,function(e){At(n,function(t){Pn(e,t).features.length&&s++})});break;case"Polygon":case"MultiPolygon":At(t,function(e){At(n,function(t){me(e,t).features.length&&s++})})}return s>0},t.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==An(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==An(e,"line2"))throw new Error("line2 must be a LineString");for(var n=hn(ze(t)).features,r=hn(ze(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!On(o,r[i].geometry.coordinates))return!1}return!0},t.booleanPointInPolygon=V,t.booleanPointOnLine=c,t.booleanTouches=function(t,e){var n=H(t),r=H(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"LineString":return Dn(n,r);case"MultiLineString":for(var s=!1,a=0;a<r.coordinates.length;a++)Dn(n,{type:"LineString",coordinates:r.coordinates[a]})&&(s=!0);return s;case"Polygon":for(var u=0;u<r.coordinates.length;u++)if(c(n,{type:"LineString",coordinates:r.coordinates[u]}))return!0;return!1;case"MultiPolygon":for(u=0;u<r.coordinates.length;u++)for(a=0;a<r.coordinates[u].length;a++)if(c(n,{type:"LineString",coordinates:r.coordinates[u][a]}))return!0;return!1;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"LineString":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||Dn({type:"Point",coordinates:n.coordinates[u]},r)&&(s=!0),c({type:"Point",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||Dn({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[a]})&&(s=!0),c({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||c({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||c({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[a][0]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[u]},{type:"Polygon",coordinates:r.coordinates[a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Dn(r,n);case"MultiPoint":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||Dn({type:"Point",coordinates:r.coordinates[u]},n)&&(s=!0),c({type:"Point",coordinates:r.coordinates[u]},n,{ignoreEndVertices:!0}))return!1;return s;case"LineString":var l=!1;if(Dn({type:"Point",coordinates:n.coordinates[0]},r)&&(l=!0),Dn({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},r)&&(l=!0),!1===l)return!1;for(u=0;u<n.coordinates.length;u++)if(c({type:"Point",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return l;case"MultiLineString":for(l=!1,u=0;u<r.coordinates.length;u++){Dn({type:"Point",coordinates:n.coordinates[0]},{type:"LineString",coordinates:r.coordinates[u]})&&(l=!0),Dn({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},{type:"LineString",coordinates:r.coordinates[u]})&&(l=!0);for(a=0;a<n.coordinates[u].length;a++)if(c({type:"Point",coordinates:n.coordinates[a]},{type:"LineString",coordinates:r.coordinates[u]},{ignoreEndVertices:!0}))return!1}return l;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)if(s||c({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates.length;u++){for(a=0;a<r.coordinates.length;a++)s||c({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[a][0]})&&(s=!0);if(V({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1}return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiLineString":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(Dn(r,{type:"LineString",coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)if(s||Dn({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[a]})&&(s=!0),c({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[a]},{ignoreEndVertices:!0}))return!1;return s;case"LineString":for(l=!1,u=0;u<n.coordinates.length;u++){Dn({type:"Point",coordinates:n.coordinates[u][0]},r)&&(l=!0),Dn({type:"Point",coordinates:n.coordinates[u][n.coordinates[u].length-1]},r)&&(l=!0);for(a=0;a<r.coordinates.length;a++)if(c({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[u]},{ignoreEndVertices:!0}))return!1}return l;case"MultiLineString":for(l=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++){Dn({type:"Point",coordinates:n.coordinates[u][0]},{type:"LineString",coordinates:r.coordinates[a]})&&(l=!0),Dn({type:"Point",coordinates:n.coordinates[u][n.coordinates[u].length-1]},{type:"LineString",coordinates:r.coordinates[a]})&&(l=!0);for(var h=0;h<n.coordinates[u].length;h++)if(c({type:"Point",coordinates:n.coordinates[u][h]},{type:"LineString",coordinates:r.coordinates[a]},{ignoreEndVertices:!0}))return!1}return l;case"Polygon":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<n.coordinates.length;a++)if(s||c({type:"Point",coordinates:n.coordinates[u][a]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[u][a]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<r.coordinates[0].length;u++)for(a=0;a<n.coordinates.length;a++)for(h=0;h<n.coordinates[a].length;h++)if(s||c({type:"Point",coordinates:n.coordinates[a][h]},{type:"LineString",coordinates:r.coordinates[0][u]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[a][h]},{type:"Polygon",coordinates:[r.coordinates[0][u]]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(c(r,{type:"LineString",coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||c({type:"Point",coordinates:r.coordinates[u]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:r.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return s;case"LineString":for(s=!1,u=0;u<r.coordinates.length;u++)if(s||c({type:"Point",coordinates:r.coordinates[u]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:r.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<r.coordinates.length;u++)for(a=0;a<r.coordinates[u].length;a++)if(s||c({type:"Point",coordinates:r.coordinates[u][a]},{type:"LineString",coordinates:n.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:r.coordinates[u][a]},n,{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)if(s||c({type:"Point",coordinates:n.coordinates[0][u]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[0][u]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<r.coordinates[0].length;u++)for(a=0;a<n.coordinates[0].length;a++)if(s||c({type:"Point",coordinates:n.coordinates[0][a]},{type:"LineString",coordinates:r.coordinates[0][u]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[0][a]},{type:"Polygon",coordinates:r.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Point":for(u=0;u<n.coordinates[0].length;u++)if(c(r,{type:"LineString",coordinates:n.coordinates[0][u]}))return!0;return!1;case"MultiPoint":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates.length;a++)if(s||c({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[0][u]})&&(s=!0),V({type:"Point",coordinates:r.coordinates[a]},{type:"Polygon",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;case"LineString":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates.length;a++)if(s||c({type:"Point",coordinates:r.coordinates[a]},{type:"LineString",coordinates:n.coordinates[0][u]})&&(s=!0),V({type:"Point",coordinates:r.coordinates[a]},{type:"Polygon",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return s;case"MultiLineString":for(s=!1,u=0;u<n.coordinates.length;u++)for(a=0;a<r.coordinates.length;a++)for(h=0;h<r.coordinates[a].length;h++)if(s||c({type:"Point",coordinates:r.coordinates[a][h]},{type:"LineString",coordinates:n.coordinates[u][0]})&&(s=!0),V({type:"Point",coordinates:r.coordinates[a][h]},{type:"Polygon",coordinates:[n.coordinates[u][0]]},{ignoreBoundary:!0}))return!1;return s;case"Polygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<n.coordinates[0][u].length;a++)if(s||c({type:"Point",coordinates:n.coordinates[0][u][a]},{type:"LineString",coordinates:r.coordinates[0]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[0][u][a]},r,{ignoreBoundary:!0}))return!1;return s;case"MultiPolygon":for(s=!1,u=0;u<n.coordinates[0].length;u++)for(a=0;a<r.coordinates[0].length;a++)for(h=0;h<n.coordinates[0].length;h++)if(s||c({type:"Point",coordinates:n.coordinates[0][u][h]},{type:"LineString",coordinates:r.coordinates[0][a]})&&(s=!0),V({type:"Point",coordinates:n.coordinates[0][u][h]},{type:"Polygon",coordinates:r.coordinates[0][a]},{ignoreBoundary:!0}))return!1;return s;default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},t.booleanValid=function(t){if(!t.type)return!1;var e=H(t),n=e.type,r=e.coordinates;switch(n){case"Point":return r.length>1;case"MultiPoint":for(var i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"LineString":if(r.length<2)return!1;for(i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"MultiLineString":if(r.length<2)return!1;for(i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"Polygon":for(i=0;i<e.coordinates.length;i++){if(r[i].length<4)return!1;if(!Bn(r[i]))return!1;if(zn(r[i]))return!1;if(i>0&&me(z([r[0]]),z([r[i]])).features.length>1)return!1}return!0;case"MultiPolygon":for(i=0;i<e.coordinates.length;i++)for(var o=e.coordinates[i],s=0;s<o.length;s++){if(o[s].length<4)return!1;if(!Bn(o[s]))return!1;if(zn(o[s]))return!1;if(0===s&&!Vn(o,e.coordinates,i))return!1;if(s>0&&me(z([o[0]]),z([o[s]])).features.length>1)return!1}return!0;default:return!1}},t.booleanWithin=qn,t.buffer=function(t,n,e){var r=(e=e||{}).units||"kilometers",i=e.steps||8;if(!t)throw new Error("geojson is required");if("object"!==_r(e))throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return Pt(t,function(t){var e=di(t,n,r,i);e&&o.push(e)}),j(o);case"FeatureCollection":return N(t,function(t){var e=di(t,n,r,i);e&&N(e,function(t){t&&o.push(t)})}),j(o)}return di(t,n,r,i)},t.center=jn,t.centerMean=mi,t.centerMedian=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!W(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!X(n))throw new Error("counter must be a number");var r=e.weight,i=mi(t,{weight:e.weight}),o=j([]);N(t,function(t){var e;o.features.push(_i(t,{properties:{weight:null==(e=t.properties)?void 0:e[r]}}))});var s={tolerance:e.tolerance,medianCandidates:[]};return xi(i.geometry.coordinates,[0,0],o,s,n)},t.centerOfMass=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(bt(e)){case"Point":return U(Z(e),n.properties);case"Polygon":var r=[];w(e,function(t){r.push(t)});var i,o,s,a,u,l,h,c,f=_i(e,{properties:n.properties}),g=f.geometry.coordinates,d=0,p=0,v=0,y=r.map(function(t){return[t[0]-g[0],t[1]-g[1]]});for(i=0;i<r.length-1;i++)a=(o=y[i])[0],l=o[1],u=(s=y[i+1])[0],v+=c=a*(h=s[1])-u*l,d+=(a+u)*c,p+=(l+h)*c;if(0===v)return f;var m=1/(6*(.5*v));return U([g[0]+m*d,g[1]+m*p],n.properties);default:var _=zi(e);return _?t(_,{properties:n.properties}):_i(e,{properties:n.properties})}},t.centroid=_i,t.circle=Vi,t.cleanCoords=ze,t.clone=p,t.cloneProperties=Gi,t.clusterEach=Xi,t.clusterReduce=Wi,t.clusters=io,t.clustersDbscan=function(c,f){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0!==t.mutate&&(c=p(c));var o=t.minPoints||3,g=ut(f,t.units),d=new oo(c.features.length),s=c.features.map(function(t){return!1}),a=c.features.map(function(t){return!1}),i=c.features.map(function(t){return!1}),u=c.features.map(function(t){return-1});d.load(c.features.map(function(t,e){var n=K(t.geometry.coordinates,2),r=n[0],i=n[1];return{minX:r,minY:i,maxX:r,maxY:i,index:e}}));var l=function(t){var r=c.features[t],e=K(r.geometry.coordinates,2),n=e[0],i=e[1],o=Math.max(i-g,-90),s=Math.min(i+g,90),a=o<0&&s>0?g:Math.abs(o)<Math.abs(s)?g/Math.cos(x(s)):g/Math.cos(x(o)),u=Math.max(n-a,-360),l=Math.min(n+a,360),h={minX:u,minY:o,maxX:l,maxY:s};return d.search(h).filter(function(t){var e=t.index,n=c.features[e];return $(r,n,{units:"kilometers"})<=f})},h=0;return c.features.forEach(function(t,e){if(!s[e]){var n=l(e);if(n.length>=o){var r=h;h++,s[e]=!0,function(t,e){for(var n=0;n<e.length;n++){var r=e[n].index;if(!s[r]){s[r]=!0;var i=l(r);i.length>=o&&e.push.apply(e,I(i))}a[r]||(a[r]=!0,u[r]=t)}}(r,n)}else i[e]=!0}}),c.features.forEach(function(t,e){var n=c.features[e];n.properties||(n.properties={}),u[e]>=0?(n.properties.dbscan=i[e]?"edge":"core",n.properties.cluster=u[e]):n.properties.dbscan="noise"}),c},t.clustersKmeans=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=p(t));var r=Tt(t),i=r.slice(0,e.numberOfClusters),o=uo(r,e.numberOfClusters,i),s={};return o.centroids.forEach(function(t,e){s[e]=t}),N(t,function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=s[n]}),t},t.collect=function(t,e,n,i){var o=new lo(6),r=e.features.map(function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null==(e=t.properties)?void 0:e[n]}});return o.load(r),t.features.forEach(function(e){e.properties||(e.properties={});var t=J(e),n=o.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}),r=[];n.forEach(function(t){V([t.minX,t.minY],e)&&r.push(t.property)}),e.properties[i]=r}),t},t.collectionOf=xt,t.combine=function(t){var o={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return N(t,function(t){var e,n,r,i;switch(null==(i=t.geometry)?void 0:i.type){case"Point":o.MultiPoint.coordinates.push(t.geometry.coordinates),o.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(e=o.MultiPoint.coordinates).push.apply(e,I(t.geometry.coordinates)),o.MultiPoint.properties.push(t.properties);break;case"LineString":o.MultiLineString.coordinates.push(t.geometry.coordinates),o.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(n=o.MultiLineString.coordinates).push.apply(n,I(t.geometry.coordinates)),o.MultiLineString.properties.push(t.properties);break;case"Polygon":o.MultiPolygon.coordinates.push(t.geometry.coordinates),o.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(r=o.MultiPolygon.coordinates).push.apply(r,I(t.geometry.coordinates)),o.MultiPolygon.properties.push(t.properties)}}),j(Object.keys(o).filter(function(t){return o[t].coordinates.length}).sort().map(function(t){return G({type:t,coordinates:o[t].coordinates},{collectedProperties:o[t].properties})}))},t.concave=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=a.maxEdge||1/0,e=function(t){var n=[],r={};return N(t,function(t){if(t.geometry){var e=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,e)||(n.push(t),r[e]=!0)}}),j(n)}(t),n=ho(e);if(n.features=n.features.filter(function(t){var e=t.geometry.coordinates[0][0],n=t.geometry.coordinates[0][1],r=t.geometry.coordinates[0][2],i=$(e,n,a),o=$(n,r,a),s=$(e,r,a);return i<=u&&o<=u&&s<=u}),n.features.length<1)return null;var r=zo(n);return 1===r.coordinates.length&&(r.coordinates=r.coordinates[0],r.type="Polygon"),G(r)},t.containsNumber=yt,t.convertArea=gt,t.convertLength=ft,t.convex=zi,t.coordAll=Tt,t.coordEach=w,t.coordReduce=It,t.createBins=Zi,t.degreesToRadians=x,t.destination=Et,t.difference=function(t){var e=[];if(Pt(t,function(t){e.push(t.coordinates)}),e.length<2)throw new Error("Must have at least two features");var n=t.features[0].properties||{},r=Fs.apply(zs,[e[0]].concat(I(e.slice(1))));return 0===r.length?null:1===r.length?z(r[0],n):rt(r,n)},t.dissolve=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!W(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;xt(t,"Polygon","dissolve");var r=[];if(!n)return Vs(rt(As.apply(null,t.features.map(function(t){return t.geometry.coordinates}))));var i={};N(t,function(t){t.properties&&(Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t))});for(var o=Object.keys(i),s=0;s<o.length;s++){var a=rt(As.apply(null,i[o[s]].map(function(t){return t.geometry.coordinates})));a&&a.properties&&(a.properties[n]=o[s],r.push(a))}return Vs(j(r))},t.distance=$,t.distanceWeight=Gs,t.earthRadius=d,t.ellipse=Xs,t.envelope=Zs,t.explode=Hs,t.factors=y,t.feature=G,t.featureCollection=j,t.featureEach=N,t.featureOf=_t,t.featureReduce=Lt,t.filterProperties=Ji,t.findPoint=Vt,t.findSegment=zt,t.flatten=Vs,t.flattenEach=b,t.flattenReduce=Ot,t.flip=function(t,e){var n;if(!W(e=e||{}))throw new Error("options is invalid");var r=null!=(n=e.mutate)&&n;if(!t)throw new Error("geojson is required");return!1!==r&&void 0!==r||(t=p(t)),w(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t},t.geojsonRbush=ln,t.geojsonType=mt,t.geomEach=Pt,t.geomReduce=Rt,t.geometry=e,t.geometryCollection=it,t.getCluster=ji,t.getCoord=Z,t.getCoords=E,t.getGeom=H,t.getType=bt,t.greatCircle=function(t,e,n){if("object"!==_r(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;if(t=Z(t),e=Z(e),r=r||{},i=i||100,t[0]===e[0]&&t[1]===e[1]){var s=Array(i);return s.fill([t[0],t[1]]),Y(s,r)}return o=o||10,new ea({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},t.helpers=vt,t.hexGrid=ra,t.interpolate=function(e,t,a){if("object"!==_r(a=a||{}))throw new Error("options is invalid");var n,u=a.gridType,l=a.property,h=a.weight,r=a.bbox;if(!e)throw new Error("points is required");if(xt(e,"Point","input must contain Points"),!t)throw new Error("cellSize is required");if(void 0!==h&&"number"!=typeof h)throw new Error("weight must be a number");switch(l=l||"elevation",u=u||"square",h=h||1,dt(r=null!=r?r:J(e)),u){case"point":case"points":n=sa(r,t,a);break;case"square":case"squares":n=ua(r,t,a);break;case"hex":case"hexes":n=ra(r,t,a);break;case"triangle":case"triangles":n=la(r,t,a);break;default:throw new Error("invalid gridType")}var c=[];return N(n,function(i){var o=0,s=0;N(e,function(t){var e,n=$("point"===u?i:_i(i),t,a);if(void 0!==l&&(e=t.properties[l]),void 0===e&&(e=t.geometry.coordinates[2]),void 0===e)throw new Error("zValue is missing");0===n&&(o=e);var r=1/Math.pow(n,h);s+=r,o+=r*e});var t=p(i);t.properties[l]=o/s,c.push(t)}),j(c)},t.intersect=na,t.invariant=wt,t.isNumber=X,t.isObject=W,t.isobands=function(t,e,n){if(!W(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(xt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!W(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=Ta(t,{zProperty:r,flip:!0}),a=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=Ra(Pa(wa(t,o,s-o)));r.push(l({groupedRings:a},n,o+"-"+s))}return r}(s,e,r);a=function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l;return t.map(function(t){return t.groupedRings=t.groupedRings.map(function(t){return t.map(function(t){return t.map(function(t){return[t[0]*h+s,t[1]*c+a]})})}),t})}(a,s,t);var u=a.map(function(t,e){if(o[e]&&!W(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=La(La({},i),o[e]);return n[r]=t[r],rt(t.groupedRings,n)});return j(u)},t.isolines=function(t,e,n){if(!W(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(xt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!W(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=Ga(t,{zProperty:r,flip:!0}),a=function(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,l=e.length-1,h=i/u,c=o/l,f=function(t){t[0]=t[0]*h+s,t[1]=t[1]*c+a};return t.forEach(function(t){w(t,f)}),t}(function(t,e,n,r,i){for(var o=[],s=0;s<e.length;s++){var a=+e[s],u=qa(qa({},r),i[s]);u[n]=a;var l=et(xa(t,a,{linearRing:!1,noFrame:!0}),u);o.push(l)}return o}(s,e,r,i,o),s,t);return j(a)},t.kinks=function(t){var e,n,o={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type){var r;e=(r=[]).concat.apply(r,I(n.coordinates))}else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(i){e.forEach(function(t){for(var e=0;e<i.length-1;e++)for(var n=e;n<t.length-1;n++){if(i===t){if(1===Math.abs(e-n))continue;if(0===e&&n===i.length-2&&i[e][0]===i[i.length-1][0]&&i[e][1]===i[i.length-1][1])continue}var r=Ua(i[e][0],i[e][1],i[e+1][0],i[e+1][1],t[n][0],t[n][1],t[n+1][0],t[n+1][1]);r&&o.features.push(U([r[0],r[1]]))}})}),o},t.length=Ya,t.lengthToDegrees=ut,t.lengthToRadians=at,t.lineArc=ja,t.lineChunk=function(t,e,n){if(!W(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return b(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=Ya(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){r(Wa(t,e*s,e*(s+1),{units:n}),s)}}(t,e,r,function(t){o.push(t)})}),j(o)},t.lineEach=Ft,t.lineIntersect=me,t.lineOffset=function(t,e,n){if(!W(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=bt(t),o=t.properties;switch(i){case"LineString":return Ja(t,e,r);case"MultiLineString":var s=[];return b(t,function(t){s.push(Ja(t,e,r).geometry.coordinates)}),et(s,o);default:throw new Error("geometry "+i+" is not supported")}},t.lineOverlap=Pn,t.lineReduce=Bt,t.lineSegment=hn,t.lineSlice=function(t,e,n){var r=E(n);if("LineString"!==bt(n))throw new Error("line must be a LineString");for(var i,o=wn(n,t),s=wn(n,e),a=[(i=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)a.push(r[u]);return a.push(i[1].geometry.coordinates),Y(a,n.properties)},t.lineSliceAlong=Wa,t.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=bt(t),r=bt(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Qa(e,{precision:7});switch(r){case"Point":return eu(t,i);case"MultiPoint":return tu(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return tu(t,me(t,i,{ignoreSelfIntersections:!0}))}},t.lineString=Y,t.lineStrings=tt,t.lineToPolygon=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.properties,s=null==(e=i.autoComplete)||e,a=null==(n=i.orderCoords)||n;if(null!=(r=i.mutate)&&r||(t=p(t)),"FeatureCollection"===t.type){var u=[];return t.features.forEach(function(t){u.push(E(iu(t,{},s,a)))}),rt(u,o)}return iu(t,o,s,a)},t.mask=function(t,e,n){var r,i=null!=(r=null==n?void 0:n.mutate)&&r,o=e;e&&!1===i&&(o=p(e));var s,a=au(o);return("FeatureCollection"===t.type?su(2===(s=t).features.length?As(s.features[0].geometry.coordinates,s.features[1].geometry.coordinates):As.apply(zs,s.features.map(function(t){return t.geometry.coordinates}))):"Feature"===t.type?su(As(t.geometry.coordinates)):su(As(t.coordinates))).geometry.coordinates.forEach(function(t){a.geometry.coordinates.push(t[0])}),a},t.meta=qt,t.midpoint=function(t,e){return Et(t,$(t,e)/2,kt(t,e))},t.moranIndex=function(t,e){var n,r,i=e.inputField,o=e.threshold||1e5,s=e.p||2,a=null!=(n=e.binary)&&n,u=Gs(t,{alpha:e.alpha||-1,binary:a,p:s,standardization:null==(r=e.standardization)||r,threshold:o}),l=[];N(t,function(t){var e=t.properties||{};l.push(e[i])});for(var h=uu(l),c=function(t){var e,n=uu(t),r=0,i=B(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;r+=Math.pow(o-n,2)}}catch(t){i.e(t)}finally{i.f()}return r/t.length}(l),f=0,g=0,d=0,p=0,v=u.length,y=0;y<v;y++){for(var m=0,_=0;_<v;_++)f+=u[y][_]*(l[y]-h)*(l[_]-h),g+=u[y][_],d+=Math.pow(u[y][_]+u[_][y],2),m+=u[y][_]+u[_][y];p+=Math.pow(m,2)}var x=f/g/c,b=-1/(v-1),w=(v*v*(d*=.5)-v*p+g*g*3)/((v-1)*(v+1)*(g*g))-b*b,k=Math.sqrt(w);return{expectedMoranIndex:b,moranIndex:x,stdNorm:k,zNorm:(x-b)/k}},t.multiLineString=et,t.multiPoint=nt,t.multiPolygon=rt,t.nearestNeighborAnalysis=function(t,e){var n=(e=e||{}).studyArea||Jt(J(t)),r=e.properties||{},i=e.units||"kilometers",o=[];N(t,function(t){o.push(_i(t))});var s=o.length,a=o.map(function(t,n){return $(t,mu(t,j(o.filter(function(t,e){return e!==n}))).geometry.coordinates,{units:i})}).reduce(function(t,e){return t+e},0)/s,u=s/gt(Gt(n),"meters",i),l=1/(2*Math.sqrt(u)),h=.26136/Math.sqrt(s*u);return r.nearestNeighborAnalysis={units:i,arealUnits:i+"²",observedMeanDistance:a,expectedMeanDistance:l,nearestNeighborIndex:a/l,numberOfPoints:s,zScore:(a-l)/h},n.properties=r,n},t.nearestPoint=mu,t.nearestPointOnLine=wn,t.nearestPointToLine=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.units,i=e.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return Pt(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if("LineString"!==bt(n))throw new Error("line must be a LineString");var s=1/0,a=null;return N(o,function(t){var e=_u(t,n,{units:r});e<s&&(s=e,a=t)}),a&&(a.properties=Su(Su(Su({},{dist:s}),a.properties),i)),a},t.planepoint=function(t,e){var n=Z(t),r=H(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i="Feature"===e.type&&e.properties||{},o=i.a,s=i.b,a=i.c,u=n[0],l=n[1],h=r[0][0],c=r[0][1],f=void 0!==o?o:r[0][2],g=r[1][0],d=r[1][1],p=void 0!==s?s:r[1][2],v=r[2][0],y=r[2][1],m=void 0!==a?a:r[2][2];return(m*(u-h)*(l-d)+f*(u-g)*(l-y)+p*(u-v)*(l-c)-p*(u-h)*(l-y)-m*(u-g)*(l-c)-f*(u-v)*(l-d))/((u-h)*(l-d)+(u-g)*(l-y)+(u-v)*(l-c)-(u-h)*(l-y)-(u-g)*(l-c)-(u-v)*(l-d))},t.point=U,t.pointGrid=sa,t.pointOnFeature=function(t){for(var e=function(t){if("FeatureCollection"!==t.type)return"Feature"!==t.type?j([G(t)]):j([t]);return t}(t),n=jn(e),r=!1,i=0;!r&&i<e.features.length;){var o=e.features[i].geometry,s=!1;if("Point"===o.type)n.geometry.coordinates[0]===o.coordinates[0]&&n.geometry.coordinates[1]===o.coordinates[1]&&(r=!0);else if("MultiPoint"===o.type)for(var a=!1,u=0;!a&&u<o.coordinates.length;)n.geometry.coordinates[0]===o.coordinates[u][0]&&n.geometry.coordinates[1]===o.coordinates[u][1]&&(r=!0,a=!0),u++;else if("LineString"===o.type)for(var l=0;!s&&l<o.coordinates.length-1;)Iu(n.geometry.coordinates[0],n.geometry.coordinates[1],o.coordinates[l][0],o.coordinates[l][1],o.coordinates[l+1][0],o.coordinates[l+1][1])&&(s=!0,r=!0),l++;else if("MultiLineString"===o.type)for(var h=0;h<o.coordinates.length;){s=!1;for(var c=0,f=o.coordinates[h];!s&&c<f.length-1;)Iu(n.geometry.coordinates[0],n.geometry.coordinates[1],f[c][0],f[c][1],f[c+1][0],f[c+1][1])&&(s=!0,r=!0),c++;h++}else"Polygon"!==o.type&&"MultiPolygon"!==o.type||V(n,o)&&(r=!0);i++}if(r)return n;for(var g=j([]),d=0;d<e.features.length;d++)g.features=g.features.concat(Hs(e.features[d]).features);return U(mu(n,g).geometry.coordinates)},t.pointToLineDistance=_u,t.pointToPolygonDistance=function e(n,t){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null!=(r=o.method)?r:"geodesic",a=null!=(i=o.units)?i:"kilometers";if(!n)throw new Error("point is required");if(!t)throw new Error("polygon or multi-polygon is required");var u,l=H(t);if("MultiPolygon"===l.type){var h=l.coordinates.map(function(t){return e(n,z(t),{method:s,units:a})});return Math.min.apply(Math,I(h.map(Math.abs)))*(V(n,t)?-1:1)}if(l.coordinates.length>1){var c=l.coordinates.map(function(t){return e(n,z([t]),{method:s,units:a})}),f=m(u=c)||_(u)||M(u)||k(),g=f[0],d=f.slice(1);if(g>=0)return g;var p=Math.min.apply(Math,I(d));return p<0?Math.abs(p):Math.min(p,Math.abs(g))}var v=_e(l),y=1/0;return b(v,function(t){y=Math.min(y,_u(n,t,{method:s,units:a}))}),V(n,l)?-y:y},t.points=q,t.pointsWithinPolygon=Mu,t.polygon=z,t.polygonSmooth=function(t,e){(e=e||{}).iterations=e.iterations||1;var c=e.iterations,f=[];if(!t)throw new Error("inputPolys is required");return Pt(t,function(t,e,n){if("Polygon"===t.type){for(var r=[[]],i=0;i<c;i++){var o=[],s=t;i>0&&(s=z(r).geometry),Au(s,o),r=o.slice(0)}f.push(z(r,n))}else{if("MultiPolygon"!==t.type)throw new Error("geometry is invalid, must be Polygon or MultiPolygon");for(var a=[[[]]],u=0;u<c;u++){var l=[],h=t;u>0&&(h=rt(a).geometry),Du(h,l),a=l.slice(0)}f.push(rt(a,n))}}),j(f)},t.polygonTangents=function(t,e){var n,r=E(t),i=E(e),o=[],s=[],a=J(e),u=0,l=null;switch(r[0]>a[0]&&r[0]<a[2]&&r[1]>a[1]&&r[1]<a[3]&&(u=(l=mu(t,Hs(e))).properties.featureIndex),bt(e)){case"Polygon":o=i[0][u],s=i[0][0],null!==l&&l.geometry.coordinates[1]<r[1]&&(s=i[0][u]),n=zu(i[0][0],i[0][i[0].length-1],r);var h=K(Fu(i[0],r,n,o,s),2);o=h[0],s=h[1];break;case"MultiPolygon":for(var c=0,f=0,g=0,d=0;d<i[0].length;d++){c=d;for(var p=!1,v=0;v<i[0][d].length;v++){if(f=v,g===u){p=!0;break}g++}if(p)break}o=i[0][c][f],s=i[0][c][f],n=zu(i[0][0][0],i[0][0][i[0][0].length-1],r),i.forEach(function(t){var e=K(Fu(t[0],r,n,o,s),2);o=e[0],s=e[1]})}return j([U(o),U(s)])},t.polygonToLine=_e,t.polygonize=function(t){var e=Ou.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){Ru.findEdgeRingContaining(t,r)&&r.push(t)}),j(r.map(function(t){return t.toPolygon()}))},t.polygons=Q,t.projection=ju,t.propEach=Mt,t.propReduce=Ct,t.propertiesContainsFilter=$i,t.quadratAnalysis=function(t,e){for(var n=(e=e||{}).studyBbox||J(t),r=e.confidenceLevel||20,i=t.features,o=i.length,s=Gt(Jt(n)),a=ua(n,Math.sqrt(s/o*2),{units:"meters"}).features,u={},l=0;l<a.length;l++)u[l]={box:J(a[l]),cnt:0};var h,c=0,f=B(i);try{for(f.s();!(h=f.n()).done;)for(var g=h.value,d=0,p=Object.keys(u);d<p.length;d++){var v=p[d],D=u[v].box;if(Wu(Z(g),D)){u[v].cnt+=1,c+=1;break}}}catch(t){f.e(t)}finally{f.f()}for(var y=0,m=0,_=Object.keys(u);m<_.length;m++){var x=u[_[m]].cnt;x>y&&(y=x)}for(var b=[],w=Object.keys(u).length,k=c/w,E=0,N=0;N<y+1;N++)E+=Math.exp(-k)*Math.pow(k,N)/Zu(N),b.push(E);for(var S=[],I=0,M=0;M<y+1;M++){for(var C=0,L=Object.keys(u);C<L.length;C++){u[L[C]].cnt===M&&(I+=1)}var F=I/w;S.push(F)}for(var T=0,P=0;P<y+1;P++){var R=Math.abs(b[P]-S[P]);R>T&&(T=R)}var O=Xu[r]/Math.sqrt(w),A={criticalValue:O,isRandom:!0,maxAbsoluteDifference:T,observedDistribution:S};return T>O&&(A.isRandom=!1),A},t.radiansToDegrees=ct,t.radiansToLength=st,t.random=rl,t.randomLineString=tl,t.randomPoint=Ku,t.randomPolygon=Qu,t.randomPosition=Hu,t.rectangleGrid=aa,t.rewind=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!W(r=r||{}))throw new Error("options is invalid");var i=null!=(e=r.mutate)&&e,o=null!=(n=r.reverse)&&n;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof o)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");i||"Point"===t.type||"MultiPoint"===t.type||(t=p(t));var s=[];switch(t.type){case"GeometryCollection":return Pt(t,function(t){il(t,o)}),t;case"FeatureCollection":return N(t,function(t){N(il(t,o),function(t){s.push(t)})}),j(s)}return il(t,o)},t.rhumbBearing=Nt,t.rhumbDestination=Us,t.rhumbDistance=Ys,t.round=ot,t.sample=function(t,e){if(!t)throw new Error("fc is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");var n=j(function(t,e){var n,r,i=t.slice(0),o=t.length,s=o-e;for(;o-- >s;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(s)}(t.features,e));return n},t.sector=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!W(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!==_r(i))throw new Error("options must be an object");if(al(n)===al(r))return Vi(t,e,i);var s=E(t),a=ja(t,e,n,r,i),u=[[s]];return w(a,function(t){u[0].push(t)}),u[0].push(s),z(u,o)},t.segmentEach=At,t.segmentReduce=Dt,t.shortestPath=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!W(n=n||{}))throw new Error("options is invalid");var r=n.obstacles||j([]),i=n.resolution||100;if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(i&&(!X(i)||i<=0))throw new Error("options.resolution must be a number, greater than 0");var o=Z(t),s=Z(e);if(t=U(o),e=U(s),"FeatureCollection"===r.type){if(0===r.features.length)return Y([o,s])}else{if("Polygon"!==r.type)throw new Error("invalid obstacles");r=j([G(H(r))])}var a=r;a.features.push(t),a.features.push(e);var u=K(J(ul(Jt(J(a)),1.15)),4),l=u[0],h=u[1],c=u[2],f=u[3],g=$([l,h],[c,h],n)/i;a.features.pop(),a.features.pop();for(var d,p,v=g/$([l,h],[c,h],n)*(c-l),y=g/$([l,h],[l,f],n)*(f-h),m=c-l,_=f-h,A=Math.floor(m/v),D=Math.floor(_/y),F=(m-A*v)/2,x=[],b=[],w=1/0,k=1/0,E=f-(_-D*y)/2,N=0;E>=h;){for(var S=[],I=[],M=l+F,C=0;M<=c;){var L=U([M,E]),T=pl(L,r);S.push(T?0:1),I.push(M+"|"+E);var P=$(L,t);!T&&P<w&&(w=P,d={x:C,y:N});var B=$(L,e);!T&&B<k&&(k=B,p={x:C,y:N}),M+=v,C++}b.push(S),x.push(I),E-=y,N++}var R=new fl(b,{diagonal:!0}),z=R.grid[d.y][d.x],V=R.grid[p.y][p.x],q=cl.search(R,z,V),O=[o];return q.forEach(function(t){var e=x[t.x][t.y].split("|");O.push([+e[0],+e[1]])}),O.push(s),ze(Y(O))},t.simplify=function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!W(i=null!=i?i:{}))throw new Error("options is invalid");var o=null!=(e=i.tolerance)?e:1,s=null!=(n=i.highQuality)&&n,a=null!=(r=i.mutate)&&r;if(!t)throw new Error("geojson is required");if(o&&o<0)throw new Error("invalid tolerance");return!0!==a&&(t=p(t)),Pt(t,function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;if(ze(t,{mutate:!0}),"GeometryCollection"!==r)switch(r){case"LineString":t.coordinates=_l(t.coordinates,e,n);break;case"MultiLineString":t.coordinates=t.coordinates.map(function(t){return _l(t,e,n)});break;case"Polygon":t.coordinates=xl(t.coordinates,e,n);break;case"MultiPolygon":t.coordinates=t.coordinates.map(function(t){return xl(t,e,n)})}}(t,o,s)}),t},t.square=Ka,t.squareGrid=ua,t.standardDeviationalEllipse=function(t,e){var n;if(!W(e=e||{}))throw new Error("options is invalid");var r=e.steps||64,i=e.weight,o=e.properties||{};if(!X(r))throw new Error("steps must be a number");if(!W(o))throw new Error("properties must be a number");var s=Tt(t).length,a=mi(t,{weight:i}),u=0,l=0,h=0;N(t,function(t){var e,n=i&&(null==(e=t.properties)?void 0:e[i])||1,r=wl(E(t),E(a));u+=Math.pow(r.x,2)*n,l+=Math.pow(r.y,2)*n,h+=r.x*r.y*n});var c=u-l,f=Math.sqrt(Math.pow(c,2)+4*Math.pow(h,2)),g=2*h,d=Math.atan((c+f)/g),p=180*d/Math.PI,v=0,y=0,m=0;N(t,function(t){var e,n=i&&(null==(e=t.properties)?void 0:e[i])||1,r=wl(E(t),E(a));v+=Math.pow(r.x*Math.cos(d)-r.y*Math.sin(d),2)*n,y+=Math.pow(r.x*Math.sin(d)+r.y*Math.cos(d),2)*n,m+=n});var _=Math.sqrt(2*v/m),x=Math.sqrt(2*y/m),b=Xs(a,_,x,{units:"degrees",angle:p,steps:r,properties:o}),w=Mu(t,j([b])),k={meanCenterCoordinates:E(a),semiMajorAxis:_,semiMinorAxis:x,numberOfFeatures:s,angle:p,percentageWithinEllipse:100*Tt(w).length/s};return b.properties=null!=(n=b.properties)?n:{},b.properties.standardDeviationalEllipse=k,b},t.tag=function(t,n,r,i){return t=p(t),n=p(n),N(t,function(e){e.properties||(e.properties={}),N(n,function(t){e.properties&&t.properties&&void 0===e.properties[i]&&V(e,t)&&(e.properties[i]=t.properties[r])})}),t},t.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Il(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(Il(t))}),e},t.tin=ho,t.toMercator=Vu,t.toWgs84=qu,t.transformRotate=js,t.transformScale=ul,t.transformTranslate=function(t,n,r,e){if(!W(e=e||{}))throw new Error("options is invalid");var i=e.units,o=e.zTranslation,s=e.mutate;if(!t)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===n&&0===o)return t;if(null==r||isNaN(r))throw new Error("direction is required");return n<0&&(n=-n,r+=180),!1!==s&&void 0!==s||(t=p(t)),w(t,function(t){var e=E(Us(t,n,r,{units:i}));t[0]=e[0],t[1]=e[1],o&&3===t.length&&(t[2]+=o)}),t},t.triangleGrid=la,t.truncate=Qa,t.union=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(Pt(t,function(t){n.push(t.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");var r=As.apply(zs,[n[0]].concat(I(n.slice(1))));return 0===r.length?null:1===r.length?z(r[0],e.properties):rt(r,e.properties)},t.unkinkPolygon=function(t){var n=[];return b(t,function(e){"Polygon"===e.geometry.type&&N(Ll(e),function(t){n.push(z(t.geometry.coordinates,e.properties))})}),j(n)},t.validateBBox=dt,t.validateId=pt,t.voronoi=function(n,t){if(!W(t=t||{}))throw new Error("options is invalid");var e=t.bbox||[-180,-85,180,85];if(!n)throw new Error("points is required");if(!Array.isArray(e))throw new Error("bbox is invalid");return xt(n,"Point","points"),j(function(){var i=Bl,o=zl,e=null;function n(r){return new mh(r.map(function(t,e){var n=[Math.round(i(t,e,r)/S)*S,Math.round(o(t,e,r)/S)*S];return n.index=e,n.data=t,n}),e)}return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(t){return arguments.length?(i="function"==typeof t?t:Fl(+t),n):i},n.y=function(t){return arguments.length?(o="function"==typeof t?t:Fl(+t),n):o},n.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},n.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],n):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},n}().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[e[0],e[1]],[e[2],e[3]]]).polygons(n.features).map(function(t,e){return Object.assign(function(t){return(t=t.slice()).push(t[0]),z([t])}(t),{properties:Gi(n.features[e].properties)})}))}})},{}],11:[function(t,e,n){"use strict";const{Deflate:r,deflate:i,deflateRaw:o,gzip:s}=t("./lib/deflate");const{Inflate:a,inflate:u,inflateRaw:l,ungzip:h}=t("./lib/inflate");const c=t("./lib/zlib/constants");e.exports.Deflate=r;e.exports.deflate=i;e.exports.deflateRaw=o;e.exports.gzip=s;e.exports.Inflate=a;e.exports.inflate=u;e.exports.inflateRaw=l;e.exports.ungzip=h;e.exports.constants=c},{"./lib/deflate":12,"./lib/inflate":13,"./lib/zlib/constants":17}],12:[function(t,e,n){"use strict";const s=t("./zlib/deflate");const r=t("./utils/common");const a=t("./utils/strings");const i=t("./zlib/messages");const o=t("./zlib/zstream");const u=Object.prototype.toString;const{Z_NO_FLUSH:l,Z_SYNC_FLUSH:h,Z_FULL_FLUSH:c,Z_FINISH:f,Z_OK:g,Z_STREAM_END:d,Z_DEFAULT_COMPRESSION:p,Z_DEFAULT_STRATEGY:v,Z_DEFLATED:y}=t("./zlib/constants");function m(t){this.options=r.assign({level:p,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:v},t||{});let e=this.options;if(e.raw&&e.windowBits>0){e.windowBits=-e.windowBits}else if(e.gzip&&e.windowBits>0&&e.windowBits<16){e.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new o;this.strm.avail_out=0;let n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==g){throw new Error(i[n])}if(e.header){s.deflateSetHeader(this.strm,e.header)}if(e.dictionary){let t;if(typeof e.dictionary==="string"){t=a.string2buf(e.dictionary)}else if(u.call(e.dictionary)==="[object ArrayBuffer]"){t=new Uint8Array(e.dictionary)}else{t=e.dictionary}n=s.deflateSetDictionary(this.strm,t);if(n!==g){throw new Error(i[n])}this._dict_set=true}}m.prototype.push=function(t,e){const n=this.strm;const r=this.options.chunkSize;let i,o;if(this.ended){return false}if(e===~~e)o=e;else o=e===true?f:l;if(typeof t==="string"){n.input=a.string2buf(t)}else if(u.call(t)==="[object ArrayBuffer]"){n.input=new Uint8Array(t)}else{n.input=t}n.next_in=0;n.avail_in=n.input.length;for(;;){if(n.avail_out===0){n.output=new Uint8Array(r);n.next_out=0;n.avail_out=r}if((o===h||o===c)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out));n.avail_out=0;continue}i=s.deflate(n,o);if(i===d){if(n.next_out>0){this.onData(n.output.subarray(0,n.next_out))}i=s.deflateEnd(this.strm);this.onEnd(i);this.ended=true;return i===g}if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out));n.avail_out=0;continue}if(n.avail_in===0)break}return true};m.prototype.onData=function(t){this.chunks.push(t)};m.prototype.onEnd=function(t){if(t===g){this.result=r.flattenChunks(this.chunks)}this.chunks=[];this.err=t;this.msg=this.strm.msg};function _(t,e){const n=new m(e);n.push(t,true);if(n.err){throw n.msg||i[n.err]}return n.result}function x(t,e){e=e||{};e.raw=true;return _(t,e)}function b(t,e){e=e||{};e.gzip=true;return _(t,e)}e.exports.Deflate=m;e.exports.deflate=_;e.exports.deflateRaw=x;e.exports.gzip=b;e.exports.constants=t("./zlib/constants")},{"./utils/common":14,"./utils/strings":15,"./zlib/constants":17,"./zlib/deflate":19,"./zlib/messages":24,"./zlib/zstream":26}],13:[function(t,e,n){"use strict";const u=t("./zlib/inflate");const r=t("./utils/common");const l=t("./utils/strings");const i=t("./zlib/messages");const o=t("./zlib/zstream");const s=t("./zlib/gzheader");const h=Object.prototype.toString;const{Z_NO_FLUSH:c,Z_FINISH:f,Z_OK:g,Z_STREAM_END:d,Z_NEED_DICT:p,Z_STREAM_ERROR:v,Z_DATA_ERROR:y,Z_MEM_ERROR:m}=t("./zlib/constants");function a(t){this.options=r.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;if(e.raw&&e.windowBits>=0&&e.windowBits<16){e.windowBits=-e.windowBits;if(e.windowBits===0){e.windowBits=-15}}if(e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)){e.windowBits+=32}if(e.windowBits>15&&e.windowBits<48){if((e.windowBits&15)===0){e.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new o;this.strm.avail_out=0;let n=u.inflateInit2(this.strm,e.windowBits);if(n!==g){throw new Error(i[n])}this.header=new s;u.inflateGetHeader(this.strm,this.header);if(e.dictionary){if(typeof e.dictionary==="string"){e.dictionary=l.string2buf(e.dictionary)}else if(h.call(e.dictionary)==="[object ArrayBuffer]"){e.dictionary=new Uint8Array(e.dictionary)}if(e.raw){n=u.inflateSetDictionary(this.strm,e.dictionary);if(n!==g){throw new Error(i[n])}}}}a.prototype.push=function(t,e){const r=this.strm;const i=this.options.chunkSize;const n=this.options.dictionary;let o,s,a;if(this.ended)return false;if(e===~~e)s=e;else s=e===true?f:c;if(h.call(t)==="[object ArrayBuffer]"){r.input=new Uint8Array(t)}else{r.input=t}r.next_in=0;r.avail_in=r.input.length;for(;;){if(r.avail_out===0){r.output=new Uint8Array(i);r.next_out=0;r.avail_out=i}o=u.inflate(r,s);if(o===p&&n){o=u.inflateSetDictionary(r,n);if(o===g){o=u.inflate(r,s)}else if(o===y){o=p}}while(r.avail_in>0&&o===d&&r.state.wrap>0&&t[r.next_in]!==0){u.inflateReset(r);o=u.inflate(r,s)}switch(o){case v:case y:case p:case m:this.onEnd(o);this.ended=true;return false}a=r.avail_out;if(r.next_out){if(r.avail_out===0||o===d){if(this.options.to==="string"){let t=l.utf8border(r.output,r.next_out);let e=r.next_out-t;let n=l.buf2string(r.output,t);r.next_out=e;r.avail_out=i-e;if(e)r.output.set(r.output.subarray(t,t+e),0);this.onData(n)}else{this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out))}}}if(o===g&&a===0)continue;if(o===d){o=u.inflateEnd(this.strm);this.onEnd(o);this.ended=true;return true}if(r.avail_in===0)break}return true};a.prototype.onData=function(t){this.chunks.push(t)};a.prototype.onEnd=function(t){if(t===g){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=r.flattenChunks(this.chunks)}}this.chunks=[];this.err=t;this.msg=this.strm.msg};function _(t,e){const n=new a(e);n.push(t);if(n.err)throw n.msg||i[n.err];return n.result}function x(t,e){e=e||{};e.raw=true;return _(t,e)}e.exports.Inflate=a;e.exports.inflate=_;e.exports.inflateRaw=x;e.exports.ungzip=_;e.exports.constants=t("./zlib/constants")},{"./utils/common":14,"./utils/strings":15,"./zlib/constants":17,"./zlib/gzheader":20,"./zlib/inflate":22,"./zlib/messages":24,"./zlib/zstream":26}],14:[function(t,e,n){"use strict";const i=(t,e)=>{return Object.prototype.hasOwnProperty.call(t,e)};e.exports.assign=function(t){const e=Array.prototype.slice.call(arguments,1);while(e.length){const n=e.shift();if(!n){continue}if(typeof n!=="object"){throw new TypeError(n+"must be non-object")}for(const r in n){if(i(n,r)){t[r]=n[r]}}}return t};e.exports.flattenChunks=r=>{let n=0;for(let t=0,e=r.length;t<e;t++){n+=r[t].length}const i=new Uint8Array(n);for(let e=0,n=0,t=r.length;e<t;e++){let t=r[e];i.set(t,n);n+=t.length}return i}},{}],15:[function(t,e,n){"use strict";let i=true;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){i=false}const a=new Uint8Array(256);for(let t=0;t<256;t++){a[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1}a[254]=a[254]=1;e.exports.string2buf=t=>{if(typeof TextEncoder==="function"&&TextEncoder.prototype.encode){return(new TextEncoder).encode(t)}let e,n,r,i,o,s=t.length,a=0;for(i=0;i<s;i++){n=t.charCodeAt(i);if((n&64512)===55296&&i+1<s){r=t.charCodeAt(i+1);if((r&64512)===56320){n=65536+(n-55296<<10)+(r-56320);i++}}a+=n<128?1:n<2048?2:n<65536?3:4}e=new Uint8Array(a);for(o=0,i=0;o<a;i++){n=t.charCodeAt(i);if((n&64512)===55296&&i+1<s){r=t.charCodeAt(i+1);if((r&64512)===56320){n=65536+(n-55296<<10)+(r-56320);i++}}if(n<128){e[o++]=n}else if(n<2048){e[o++]=192|n>>>6;e[o++]=128|n&63}else if(n<65536){e[o++]=224|n>>>12;e[o++]=128|n>>>6&63;e[o++]=128|n&63}else{e[o++]=240|n>>>18;e[o++]=128|n>>>12&63;e[o++]=128|n>>>6&63;e[o++]=128|n&63}}return e};const u=(e,n)=>{if(n<65534){if(e.subarray&&i){return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n))}}let r="";for(let t=0;t<n;t++){r+=String.fromCharCode(e[t])}return r};e.exports.buf2string=(n,t)=>{const r=t||n.length;if(typeof TextDecoder==="function"&&TextDecoder.prototype.decode){return(new TextDecoder).decode(n.subarray(0,t))}let i,o;const s=new Array(r*2);for(o=0,i=0;i<r;){let t=n[i++];if(t<128){s[o++]=t;continue}let e=a[t];if(e>4){s[o++]=65533;i+=e-1;continue}t&=e===2?31:e===3?15:7;while(e>1&&i<r){t=t<<6|n[i++]&63;e--}if(e>1){s[o++]=65533;continue}if(t<65536){s[o++]=t}else{t-=65536;s[o++]=55296|t>>10&1023;s[o++]=56320|t&1023}}return u(s,o)};e.exports.utf8border=(t,e)=>{e=e||t.length;if(e>t.length){e=t.length}let n=e-1;while(n>=0&&(t[n]&192)===128){n--}if(n<0){return e}if(n===0){return e}return n+a[t[n]]>e?n:e}},{}],16:[function(t,e,n){"use strict";const r=(t,e,n,r)=>{let i=t&65535|0,o=t>>>16&65535|0,s=0;while(n!==0){s=n>2e3?2e3:n;n-=s;do{i=i+e[r++]|0;o=o+i|0}while(--s);i%=65521;o%=65521}return i|o<<16|0};e.exports=r},{}],17:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],18:[function(t,e,n){"use strict";const r=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++){t=t&1?3988292384^t>>>1:t>>>1}e[n]=t}return e};const s=new Uint32Array(r());const i=(e,n,t,r)=>{const i=s;const o=r+t;e^=-1;for(let t=r;t<o;t++){e=e>>>8^i[(e^n[t])&255]}return e^-1};e.exports=i},{}],19:[function(t,e,D){"use strict";const{_tr_init:F,_tr_stored_block:u,_tr_flush_block:B,_tr_tally:a,_tr_align:z}=t("./trees");const V=t("./adler32");const o=t("./crc32");const q=t("./messages");const{Z_NO_FLUSH:l,Z_PARTIAL_FLUSH:G,Z_FULL_FLUSH:U,Z_FINISH:h,Z_BLOCK:Y,Z_OK:c,Z_STREAM_END:j,Z_STREAM_ERROR:f,Z_DATA_ERROR:X,Z_BUF_ERROR:n,Z_DEFAULT_COMPRESSION:W,Z_FILTERED:Z,Z_HUFFMAN_ONLY:s,Z_RLE:H,Z_FIXED:$,Z_DEFAULT_STRATEGY:J,Z_UNKNOWN:K,Z_DEFLATED:g}=t("./constants");const Q=9;const tt=15;const et=8;const nt=29;const rt=256;const r=rt+1+nt;const it=30;const ot=19;const st=2*r+1;const at=15;const d=3;const p=258;const v=p+d+1;const ut=32;const y=42;const m=57;const lt=69;const ht=73;const ct=91;const ft=103;const _=113;const x=666;const b=1;const w=2;const k=3;const E=4;const gt=3;const N=(t,e)=>{t.msg=q[e];return e};const dt=t=>{return t*2-(t>4?9:0)};const S=t=>{let e=t.length;while(--e>=0){t[e]=0}};const pt=t=>{let e,n;let r;let i=t.w_size;e=t.hash_size;r=e;do{n=t.head[--r];t.head[r]=n>=i?n-i:0}while(--e);e=i;r=e;do{n=t.prev[--r];t.prev[r]=n>=i?n-i:0}while(--e)};let vt=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;let I=vt;const M=t=>{const e=t.state;let n=e.pending;if(n>t.avail_out){n=t.avail_out}if(n===0){return}t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out);t.next_out+=n;e.pending_out+=n;t.total_out+=n;t.avail_out-=n;e.pending-=n;if(e.pending===0){e.pending_out=0}};const C=(t,e)=>{B(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e);t.block_start=t.strstart;M(t.strm)};const L=(t,e)=>{t.pending_buf[t.pending++]=e};const T=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255;t.pending_buf[t.pending++]=e&255};const yt=(t,e,n,r)=>{let i=t.avail_in;if(i>r){i=r}if(i===0){return 0}t.avail_in-=i;e.set(t.input.subarray(t.next_in,t.next_in+i),n);if(t.state.wrap===1){t.adler=V(t.adler,e,i,n)}else if(t.state.wrap===2){t.adler=o(t.adler,e,i,n)}t.next_in+=i;t.total_in+=i;return i};const mt=(t,e)=>{let n=t.max_chain_length;let r=t.strstart;let i;let o;let s=t.prev_length;let a=t.nice_match;const u=t.strstart>t.w_size-v?t.strstart-(t.w_size-v):0;const l=t.window;const h=t.w_mask;const c=t.prev;const f=t.strstart+p;let g=l[r+s-1];let d=l[r+s];if(t.prev_length>=t.good_match){n>>=2}if(a>t.lookahead){a=t.lookahead}do{i=e;if(l[i+s]!==d||l[i+s-1]!==g||l[i]!==l[r]||l[++i]!==l[r+1]){continue}r+=2;i++;do{}while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<f);o=p-(f-r);r=f-p;if(o>s){t.match_start=e;s=o;if(o>=a){break}g=l[r+s-1];d=l[r+s]}}while((e=c[e&h])>u&&--n!==0);if(s<=t.lookahead){return s}return t.lookahead};const P=t=>{const e=t.w_size;let n,r,i;do{r=t.window_size-t.lookahead-t.strstart;if(t.strstart>=e+(e-v)){t.window.set(t.window.subarray(e,e+e-r),0);t.match_start-=e;t.strstart-=e;t.block_start-=e;if(t.insert>t.strstart){t.insert=t.strstart}pt(t);r+=e}if(t.strm.avail_in===0){break}n=yt(t.strm,t.window,t.strstart+t.lookahead,r);t.lookahead+=n;if(t.lookahead+t.insert>=d){i=t.strstart-t.insert;t.ins_h=t.window[i];t.ins_h=I(t,t.ins_h,t.window[i+1]);while(t.insert){t.ins_h=I(t,t.ins_h,t.window[i+d-1]);t.prev[i&t.w_mask]=t.head[t.ins_h];t.head[t.ins_h]=i;i++;t.insert--;if(t.lookahead+t.insert<d){break}}}}while(t.lookahead<v&&t.strm.avail_in!==0)};const _t=(t,e)=>{let n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5;let r,i,o,s=0;let a=t.strm.avail_in;do{r=65535;o=t.bi_valid+42>>3;if(t.strm.avail_out<o){break}o=t.strm.avail_out-o;i=t.strstart-t.block_start;if(r>i+t.strm.avail_in){r=i+t.strm.avail_in}if(r>o){r=o}if(r<n&&(r===0&&e!==h||e===l||r!==i+t.strm.avail_in)){break}s=e===h&&r===i+t.strm.avail_in?1:0;u(t,0,0,s);t.pending_buf[t.pending-4]=r;t.pending_buf[t.pending-3]=r>>8;t.pending_buf[t.pending-2]=~r;t.pending_buf[t.pending-1]=~r>>8;M(t.strm);if(i){if(i>r){i=r}t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out);t.strm.next_out+=i;t.strm.avail_out-=i;t.strm.total_out+=i;t.block_start+=i;r-=i}if(r){yt(t.strm,t.strm.output,t.strm.next_out,r);t.strm.next_out+=r;t.strm.avail_out-=r;t.strm.total_out+=r}}while(s===0);a-=t.strm.avail_in;if(a){if(a>=t.w_size){t.matches=2;t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0);t.strstart=t.w_size;t.insert=t.strstart}else{if(t.window_size-t.strstart<=a){t.strstart-=t.w_size;t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0);if(t.matches<2){t.matches++}if(t.insert>t.strstart){t.insert=t.strstart}}t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart);t.strstart+=a;t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a}t.block_start=t.strstart}if(t.high_water<t.strstart){t.high_water=t.strstart}if(s){return E}if(e!==l&&e!==h&&t.strm.avail_in===0&&t.strstart===t.block_start){return w}o=t.window_size-t.strstart;if(t.strm.avail_in>o&&t.block_start>=t.w_size){t.block_start-=t.w_size;t.strstart-=t.w_size;t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0);if(t.matches<2){t.matches++}o+=t.w_size;if(t.insert>t.strstart){t.insert=t.strstart}}if(o>t.strm.avail_in){o=t.strm.avail_in}if(o){yt(t.strm,t.window,t.strstart,o);t.strstart+=o;t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o}if(t.high_water<t.strstart){t.high_water=t.strstart}o=t.bi_valid+42>>3;o=t.pending_buf_size-o>65535?65535:t.pending_buf_size-o;n=o>t.w_size?t.w_size:o;i=t.strstart-t.block_start;if(i>=n||(i||e===h)&&e!==l&&t.strm.avail_in===0&&i<=o){r=i>o?o:i;s=e===h&&t.strm.avail_in===0&&r===i?1:0;u(t,t.block_start,r,s);t.block_start+=r;M(t.strm)}return s?k:b};const xt=(t,e)=>{let n;let r;for(;;){if(t.lookahead<v){P(t);if(t.lookahead<v&&e===l){return b}if(t.lookahead===0){break}}n=0;if(t.lookahead>=d){t.ins_h=I(t,t.ins_h,t.window[t.strstart+d-1]);n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h];t.head[t.ins_h]=t.strstart}if(n!==0&&t.strstart-n<=t.w_size-v){t.match_length=mt(t,n)}if(t.match_length>=d){r=a(t,t.strstart-t.match_start,t.match_length-d);t.lookahead-=t.match_length;if(t.match_length<=t.max_lazy_match&&t.lookahead>=d){t.match_length--;do{t.strstart++;t.ins_h=I(t,t.ins_h,t.window[t.strstart+d-1]);n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h];t.head[t.ins_h]=t.strstart}while(--t.match_length!==0);t.strstart++}else{t.strstart+=t.match_length;t.match_length=0;t.ins_h=t.window[t.strstart];t.ins_h=I(t,t.ins_h,t.window[t.strstart+1])}}else{r=a(t,0,t.window[t.strstart]);t.lookahead--;t.strstart++}if(r){C(t,false);if(t.strm.avail_out===0){return b}}}t.insert=t.strstart<d-1?t.strstart:d-1;if(e===h){C(t,true);if(t.strm.avail_out===0){return k}return E}if(t.sym_next){C(t,false);if(t.strm.avail_out===0){return b}}return w};const i=(t,e)=>{let n;let r;let i;for(;;){if(t.lookahead<v){P(t);if(t.lookahead<v&&e===l){return b}if(t.lookahead===0){break}}n=0;if(t.lookahead>=d){t.ins_h=I(t,t.ins_h,t.window[t.strstart+d-1]);n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h];t.head[t.ins_h]=t.strstart}t.prev_length=t.match_length;t.prev_match=t.match_start;t.match_length=d-1;if(n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-v){t.match_length=mt(t,n);if(t.match_length<=5&&(t.strategy===Z||t.match_length===d&&t.strstart-t.match_start>4096)){t.match_length=d-1}}if(t.prev_length>=d&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-d;r=a(t,t.strstart-1-t.prev_match,t.prev_length-d);t.lookahead-=t.prev_length-1;t.prev_length-=2;do{if(++t.strstart<=i){t.ins_h=I(t,t.ins_h,t.window[t.strstart+d-1]);n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h];t.head[t.ins_h]=t.strstart}}while(--t.prev_length!==0);t.match_available=0;t.match_length=d-1;t.strstart++;if(r){C(t,false);if(t.strm.avail_out===0){return b}}}else if(t.match_available){r=a(t,0,t.window[t.strstart-1]);if(r){C(t,false)}t.strstart++;t.lookahead--;if(t.strm.avail_out===0){return b}}else{t.match_available=1;t.strstart++;t.lookahead--}}if(t.match_available){r=a(t,0,t.window[t.strstart-1]);t.match_available=0}t.insert=t.strstart<d-1?t.strstart:d-1;if(e===h){C(t,true);if(t.strm.avail_out===0){return k}return E}if(t.sym_next){C(t,false);if(t.strm.avail_out===0){return b}}return w};const bt=(t,e)=>{let n;let r;let i,o;const s=t.window;for(;;){if(t.lookahead<=p){P(t);if(t.lookahead<=p&&e===l){return b}if(t.lookahead===0){break}}t.match_length=0;if(t.lookahead>=d&&t.strstart>0){i=t.strstart-1;r=s[i];if(r===s[++i]&&r===s[++i]&&r===s[++i]){o=t.strstart+p;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o);t.match_length=p-(o-i);if(t.match_length>t.lookahead){t.match_length=t.lookahead}}}if(t.match_length>=d){n=a(t,1,t.match_length-d);t.lookahead-=t.match_length;t.strstart+=t.match_length;t.match_length=0}else{n=a(t,0,t.window[t.strstart]);t.lookahead--;t.strstart++}if(n){C(t,false);if(t.strm.avail_out===0){return b}}}t.insert=0;if(e===h){C(t,true);if(t.strm.avail_out===0){return k}return E}if(t.sym_next){C(t,false);if(t.strm.avail_out===0){return b}}return w};const wt=(t,e)=>{let n;for(;;){if(t.lookahead===0){P(t);if(t.lookahead===0){if(e===l){return b}break}}t.match_length=0;n=a(t,0,t.window[t.strstart]);t.lookahead--;t.strstart++;if(n){C(t,false);if(t.strm.avail_out===0){return b}}}t.insert=0;if(e===h){C(t,true);if(t.strm.avail_out===0){return k}return E}if(t.sym_next){C(t,false);if(t.strm.avail_out===0){return b}}return w};function R(t,e,n,r,i){this.good_length=t;this.max_lazy=e;this.nice_length=n;this.max_chain=r;this.func=i}const O=[new R(0,0,0,0,_t),new R(4,4,8,4,xt),new R(4,5,16,8,xt),new R(4,6,32,32,xt),new R(4,4,16,16,i),new R(8,16,32,32,i),new R(8,16,128,128,i),new R(8,32,128,256,i),new R(32,128,258,1024,i),new R(32,258,258,4096,i)];const kt=t=>{t.window_size=2*t.w_size;S(t.head);t.max_lazy_match=O[t.level].max_lazy;t.good_match=O[t.level].good_length;t.nice_match=O[t.level].nice_length;t.max_chain_length=O[t.level].max_chain;t.strstart=0;t.block_start=0;t.lookahead=0;t.insert=0;t.match_length=t.prev_length=d-1;t.match_available=0;t.ins_h=0};function Et(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=g;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new Uint16Array(st*2);this.dyn_dtree=new Uint16Array((2*it+1)*2);this.bl_tree=new Uint16Array((2*ot+1)*2);S(this.dyn_ltree);S(this.dyn_dtree);S(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new Uint16Array(at+1);this.heap=new Uint16Array(2*r+1);S(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new Uint16Array(2*r+1);S(this.depth);this.sym_buf=0;this.lit_bufsize=0;this.sym_next=0;this.sym_end=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}const A=t=>{if(!t){return 1}const e=t.state;if(!e||e.strm!==t||e.status!==y&&e.status!==m&&e.status!==lt&&e.status!==ht&&e.status!==ct&&e.status!==ft&&e.status!==_&&e.status!==x){return 1}return 0};const Nt=t=>{if(A(t)){return N(t,f)}t.total_in=t.total_out=0;t.data_type=K;const e=t.state;e.pending=0;e.pending_out=0;if(e.wrap<0){e.wrap=-e.wrap}e.status=e.wrap===2?m:e.wrap?y:_;t.adler=e.wrap===2?0:1;e.last_flush=-2;F(e);return c};const St=t=>{const e=Nt(t);if(e===c){kt(t.state)}return e};const It=(t,e)=>{if(A(t)||t.state.wrap!==2){return f}t.state.gzhead=e;return c};const Mt=(t,e,n,r,i,o)=>{if(!t){return f}let s=1;if(e===W){e=6}if(r<0){s=0;r=-r}else if(r>15){s=2;r-=16}if(i<1||i>Q||n!==g||r<8||r>15||e<0||e>9||o<0||o>$||r===8&&s!==1){return N(t,f)}if(r===8){r=9}const a=new Et;t.state=a;a.strm=t;a.status=y;a.wrap=s;a.gzhead=null;a.w_bits=r;a.w_size=1<<a.w_bits;a.w_mask=a.w_size-1;a.hash_bits=i+7;a.hash_size=1<<a.hash_bits;a.hash_mask=a.hash_size-1;a.hash_shift=~~((a.hash_bits+d-1)/d);a.window=new Uint8Array(a.w_size*2);a.head=new Uint16Array(a.hash_size);a.prev=new Uint16Array(a.w_size);a.lit_bufsize=1<<i+6;a.pending_buf_size=a.lit_bufsize*4;a.pending_buf=new Uint8Array(a.pending_buf_size);a.sym_buf=a.lit_bufsize;a.sym_end=(a.lit_bufsize-1)*3;a.level=e;a.strategy=o;a.method=n;return St(t)};const Ct=(t,e)=>{return Mt(t,e,g,tt,et,J)};const Lt=(r,e)=>{if(A(r)||e>Y||e<0){return r?N(r,f):f}const i=r.state;if(!r.output||r.avail_in!==0&&!r.input||i.status===x&&e!==h){return N(r,r.avail_out===0?n:f)}const t=i.last_flush;i.last_flush=e;if(i.pending!==0){M(r);if(r.avail_out===0){i.last_flush=-1;return c}}else if(r.avail_in===0&&dt(e)<=dt(t)&&e!==h){return N(r,n)}if(i.status===x&&r.avail_in!==0){return N(r,n)}if(i.status===y&&i.wrap===0){i.status=_}if(i.status===y){let t=g+(i.w_bits-8<<4)<<8;let e=-1;if(i.strategy>=s||i.level<2){e=0}else if(i.level<6){e=1}else if(i.level===6){e=2}else{e=3}t|=e<<6;if(i.strstart!==0){t|=ut}t+=31-t%31;T(i,t);if(i.strstart!==0){T(i,r.adler>>>16);T(i,r.adler&65535)}r.adler=1;i.status=_;M(r);if(i.pending!==0){i.last_flush=-1;return c}}if(i.status===m){r.adler=0;L(i,31);L(i,139);L(i,8);if(!i.gzhead){L(i,0);L(i,0);L(i,0);L(i,0);L(i,0);L(i,i.level===9?2:i.strategy>=s||i.level<2?4:0);L(i,gt);i.status=_;M(r);if(i.pending!==0){i.last_flush=-1;return c}}else{L(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(!i.gzhead.extra?0:4)+(!i.gzhead.name?0:8)+(!i.gzhead.comment?0:16));L(i,i.gzhead.time&255);L(i,i.gzhead.time>>8&255);L(i,i.gzhead.time>>16&255);L(i,i.gzhead.time>>24&255);L(i,i.level===9?2:i.strategy>=s||i.level<2?4:0);L(i,i.gzhead.os&255);if(i.gzhead.extra&&i.gzhead.extra.length){L(i,i.gzhead.extra.length&255);L(i,i.gzhead.extra.length>>8&255)}if(i.gzhead.hcrc){r.adler=o(r.adler,i.pending_buf,i.pending,0)}i.gzindex=0;i.status=lt}}if(i.status===lt){if(i.gzhead.extra){let e=i.pending;let n=(i.gzhead.extra.length&65535)-i.gzindex;while(i.pending+n>i.pending_buf_size){let t=i.pending_buf_size-i.pending;i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+t),i.pending);i.pending=i.pending_buf_size;if(i.gzhead.hcrc&&i.pending>e){r.adler=o(r.adler,i.pending_buf,i.pending-e,e)}i.gzindex+=t;M(r);if(i.pending!==0){i.last_flush=-1;return c}e=0;n-=t}let t=new Uint8Array(i.gzhead.extra);i.pending_buf.set(t.subarray(i.gzindex,i.gzindex+n),i.pending);i.pending+=n;if(i.gzhead.hcrc&&i.pending>e){r.adler=o(r.adler,i.pending_buf,i.pending-e,e)}i.gzindex=0}i.status=ht}if(i.status===ht){if(i.gzhead.name){let t=i.pending;let e;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>t){r.adler=o(r.adler,i.pending_buf,i.pending-t,t)}M(r);if(i.pending!==0){i.last_flush=-1;return c}t=0}if(i.gzindex<i.gzhead.name.length){e=i.gzhead.name.charCodeAt(i.gzindex++)&255}else{e=0}L(i,e)}while(e!==0);if(i.gzhead.hcrc&&i.pending>t){r.adler=o(r.adler,i.pending_buf,i.pending-t,t)}i.gzindex=0}i.status=ct}if(i.status===ct){if(i.gzhead.comment){let t=i.pending;let e;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>t){r.adler=o(r.adler,i.pending_buf,i.pending-t,t)}M(r);if(i.pending!==0){i.last_flush=-1;return c}t=0}if(i.gzindex<i.gzhead.comment.length){e=i.gzhead.comment.charCodeAt(i.gzindex++)&255}else{e=0}L(i,e)}while(e!==0);if(i.gzhead.hcrc&&i.pending>t){r.adler=o(r.adler,i.pending_buf,i.pending-t,t)}}i.status=ft}if(i.status===ft){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size){M(r);if(i.pending!==0){i.last_flush=-1;return c}}L(i,r.adler&255);L(i,r.adler>>8&255);r.adler=0}i.status=_;M(r);if(i.pending!==0){i.last_flush=-1;return c}}if(r.avail_in!==0||i.lookahead!==0||e!==l&&i.status!==x){let t=i.level===0?_t(i,e):i.strategy===s?wt(i,e):i.strategy===H?bt(i,e):O[i.level].func(i,e);if(t===k||t===E){i.status=x}if(t===b||t===k){if(r.avail_out===0){i.last_flush=-1}return c}if(t===w){if(e===G){z(i)}else if(e!==Y){u(i,0,0,false);if(e===U){S(i.head);if(i.lookahead===0){i.strstart=0;i.block_start=0;i.insert=0}}}M(r);if(r.avail_out===0){i.last_flush=-1;return c}}}if(e!==h){return c}if(i.wrap<=0){return j}if(i.wrap===2){L(i,r.adler&255);L(i,r.adler>>8&255);L(i,r.adler>>16&255);L(i,r.adler>>24&255);L(i,r.total_in&255);L(i,r.total_in>>8&255);L(i,r.total_in>>16&255);L(i,r.total_in>>24&255)}else{T(i,r.adler>>>16);T(i,r.adler&65535)}M(r);if(i.wrap>0){i.wrap=-i.wrap}return i.pending!==0?c:j};const Tt=t=>{if(A(t)){return f}const e=t.state.status;t.state=null;return e===_?N(t,X):c};const Pt=(t,e)=>{let n=e.length;if(A(t)){return f}const r=t.state;const i=r.wrap;if(i===2||i===1&&r.status!==y||r.lookahead){return f}if(i===1){t.adler=V(t.adler,e,n,0)}r.wrap=0;if(n>=r.w_size){if(i===0){S(r.head);r.strstart=0;r.block_start=0;r.insert=0}let t=new Uint8Array(r.w_size);t.set(e.subarray(n-r.w_size,n),0);e=t;n=r.w_size}const o=t.avail_in;const s=t.next_in;const a=t.input;t.avail_in=n;t.next_in=0;t.input=e;P(r);while(r.lookahead>=d){let t=r.strstart;let e=r.lookahead-(d-1);do{r.ins_h=I(r,r.ins_h,r.window[t+d-1]);r.prev[t&r.w_mask]=r.head[r.ins_h];r.head[r.ins_h]=t;t++}while(--e);r.strstart=t;r.lookahead=d-1;P(r)}r.strstart+=r.lookahead;r.block_start=r.strstart;r.insert=r.lookahead;r.lookahead=0;r.match_length=r.prev_length=d-1;r.match_available=0;t.next_in=s;t.input=a;t.avail_in=o;r.wrap=i;return c};e.exports.deflateInit=Ct;e.exports.deflateInit2=Mt;e.exports.deflateReset=St;e.exports.deflateResetKeep=Nt;e.exports.deflateSetHeader=It;e.exports.deflate=Lt;e.exports.deflateEnd=Tt;e.exports.deflateSetDictionary=Pt;e.exports.deflateInfo="pako deflate (from Nodeca project)"},{"./adler32":16,"./constants":17,"./crc32":18,"./messages":24,"./trees":25}],20:[function(t,e,n){"use strict";function r(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}e.exports=r},{}],21:[function(t,e,n){"use strict";const M=16209;const C=16191;e.exports=function t(e,n){let r;let i;let o;let s;let a;let u;let l;let h;let c;let f;let g;let d;let p;let v;let y;let m;let _;let x;let b;let w;let k;let E;let N,S;const I=e.state;r=e.next_in;N=e.input;i=r+(e.avail_in-5);o=e.next_out;S=e.output;s=o-(n-e.avail_out);a=o+(e.avail_out-257);u=I.dmax;l=I.wsize;h=I.whave;c=I.wnext;f=I.window;g=I.hold;d=I.bits;p=I.lencode;v=I.distcode;y=(1<<I.lenbits)-1;m=(1<<I.distbits)-1;t:do{if(d<15){g+=N[r++]<<d;d+=8;g+=N[r++]<<d;d+=8}_=p[g&y];e:for(;;){x=_>>>24;g>>>=x;d-=x;x=_>>>16&255;if(x===0){S[o++]=_&65535}else if(x&16){b=_&65535;x&=15;if(x){if(d<x){g+=N[r++]<<d;d+=8}b+=g&(1<<x)-1;g>>>=x;d-=x}if(d<15){g+=N[r++]<<d;d+=8;g+=N[r++]<<d;d+=8}_=v[g&m];n:for(;;){x=_>>>24;g>>>=x;d-=x;x=_>>>16&255;if(x&16){w=_&65535;x&=15;if(d<x){g+=N[r++]<<d;d+=8;if(d<x){g+=N[r++]<<d;d+=8}}w+=g&(1<<x)-1;if(w>u){e.msg="invalid distance too far back";I.mode=M;break t}g>>>=x;d-=x;x=o-s;if(w>x){x=w-x;if(x>h){if(I.sane){e.msg="invalid distance too far back";I.mode=M;break t}}k=0;E=f;if(c===0){k+=l-x;if(x<b){b-=x;do{S[o++]=f[k++]}while(--x);k=o-w;E=S}}else if(c<x){k+=l+c-x;x-=c;if(x<b){b-=x;do{S[o++]=f[k++]}while(--x);k=0;if(c<b){x=c;b-=x;do{S[o++]=f[k++]}while(--x);k=o-w;E=S}}}else{k+=c-x;if(x<b){b-=x;do{S[o++]=f[k++]}while(--x);k=o-w;E=S}}while(b>2){S[o++]=E[k++];S[o++]=E[k++];S[o++]=E[k++];b-=3}if(b){S[o++]=E[k++];if(b>1){S[o++]=E[k++]}}}else{k=o-w;do{S[o++]=S[k++];S[o++]=S[k++];S[o++]=S[k++];b-=3}while(b>2);if(b){S[o++]=S[k++];if(b>1){S[o++]=S[k++]}}}}else if((x&64)===0){_=v[(_&65535)+(g&(1<<x)-1)];continue n}else{e.msg="invalid distance code";I.mode=M;break t}break}}else if((x&64)===0){_=p[(_&65535)+(g&(1<<x)-1)];continue e}else if(x&32){I.mode=C;break t}else{e.msg="invalid literal/length code";I.mode=M;break t}break}}while(r<i&&o<a);b=d>>3;r-=b;d-=b<<3;g&=(1<<d)-1;e.next_in=r;e.next_out=o;e.avail_in=r<i?5+(i-r):5-(r-i);e.avail_out=o<a?257+(a-o):257-(o-a);I.hold=g;I.bits=d;return}},{}],22:[function(t,e,i){"use strict";const C=t("./adler32");const L=t("./crc32");const at=t("./inffast");const T=t("./inftrees");const ut=0;const P=1;const R=2;const{Z_FINISH:O,Z_BLOCK:lt,Z_TREES:A,Z_OK:D,Z_STREAM_END:ht,Z_NEED_DICT:ct,Z_STREAM_ERROR:F,Z_DATA_ERROR:B,Z_MEM_ERROR:z,Z_BUF_ERROR:ft,Z_DEFLATED:V}=t("./constants");const q=16180;const G=16181;const U=16182;const Y=16183;const j=16184;const X=16185;const W=16186;const Z=16187;const H=16188;const $=16189;const J=16190;const K=16191;const Q=16192;const gt=16193;const tt=16194;const dt=16195;const pt=16196;const vt=16197;const yt=16198;const et=16199;const nt=16200;const mt=16201;const _t=16202;const xt=16203;const bt=16204;const wt=16205;const rt=16206;const kt=16207;const Et=16208;const it=16209;const ot=16210;const Nt=16211;const o=852;const s=592;const a=15;const u=a;const St=t=>{return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)};function l(){this.strm=null;this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}const st=t=>{if(!t){return 1}const e=t.state;if(!e||e.strm!==t||e.mode<q||e.mode>Nt){return 1}return 0};const h=t=>{if(st(t)){return F}const e=t.state;t.total_in=t.total_out=e.total=0;t.msg="";if(e.wrap){t.adler=e.wrap&1}e.mode=q;e.last=0;e.havedict=0;e.flags=-1;e.dmax=32768;e.head=null;e.hold=0;e.bits=0;e.lencode=e.lendyn=new Int32Array(o);e.distcode=e.distdyn=new Int32Array(s);e.sane=1;e.back=-1;return D};const c=t=>{if(st(t)){return F}const e=t.state;e.wsize=0;e.whave=0;e.wnext=0;return h(t)};const f=(t,e)=>{let n;if(st(t)){return F}const r=t.state;if(e<0){n=0;e=-e}else{n=(e>>4)+5;if(e<48){e&=15}}if(e&&(e<8||e>15)){return F}if(r.window!==null&&r.wbits!==e){r.window=null}r.wrap=n;r.wbits=e;return c(t)};const g=(t,e)=>{if(!t){return F}const n=new l;t.state=n;n.strm=t;n.window=null;n.mode=q;const r=f(t,e);if(r!==D){t.state=null}return r};const d=t=>{return g(t,u)};let p=true;let n,r;const It=e=>{if(p){n=new Int32Array(512);r=new Int32Array(32);let t=0;while(t<144){e.lens[t++]=8}while(t<256){e.lens[t++]=9}while(t<280){e.lens[t++]=7}while(t<288){e.lens[t++]=8}T(P,e.lens,0,288,n,0,e.work,{bits:9});t=0;while(t<32){e.lens[t++]=5}T(R,e.lens,0,32,r,0,e.work,{bits:5});p=false}e.lencode=n;e.lenbits=9;e.distcode=r;e.distbits=5};const Mt=(t,e,n,r)=>{let i;const o=t.state;if(o.window===null){o.wsize=1<<o.wbits;o.wnext=0;o.whave=0;o.window=new Uint8Array(o.wsize)}if(r>=o.wsize){o.window.set(e.subarray(n-o.wsize,n),0);o.wnext=0;o.whave=o.wsize}else{i=o.wsize-o.wnext;if(i>r){i=r}o.window.set(e.subarray(n-r,n-r+i),o.wnext);r-=i;if(r){o.window.set(e.subarray(n-r,n),0);o.wnext=r;o.whave=o.wsize}else{o.wnext+=i;if(o.wnext===o.wsize){o.wnext=0}if(o.whave<o.wsize){o.whave+=i}}}return 0};const v=(t,e)=>{let n;let r,i;let o;let s;let a,u;let l;let h;let c,f;let g;let d;let p;let v=0;let y,m,_;let x,b,w;let k;let E;const N=new Uint8Array(4);let S;let I;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(st(t)||!t.output||!t.input&&t.avail_in!==0){return F}n=t.state;if(n.mode===K){n.mode=Q}s=t.next_out;i=t.output;u=t.avail_out;o=t.next_in;r=t.input;a=t.avail_in;l=n.hold;h=n.bits;c=a;f=u;E=D;t:for(;;){switch(n.mode){case q:if(n.wrap===0){n.mode=Q;break}while(h<16){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if(n.wrap&2&&l===35615){if(n.wbits===0){n.wbits=15}n.check=0;N[0]=l&255;N[1]=l>>>8&255;n.check=L(n.check,N,2,0);l=0;h=0;n.mode=G;break}if(n.head){n.head.done=false}if(!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg="incorrect header check";n.mode=it;break}if((l&15)!==V){t.msg="unknown compression method";n.mode=it;break}l>>>=4;h-=4;k=(l&15)+8;if(n.wbits===0){n.wbits=k}if(k>15||k>n.wbits){t.msg="invalid window size";n.mode=it;break}n.dmax=1<<n.wbits;n.flags=0;t.adler=n.check=1;n.mode=l&512?$:K;l=0;h=0;break;case G:while(h<16){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}n.flags=l;if((n.flags&255)!==V){t.msg="unknown compression method";n.mode=it;break}if(n.flags&57344){t.msg="unknown header flags set";n.mode=it;break}if(n.head){n.head.text=l>>8&1}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;n.check=L(n.check,N,2,0)}l=0;h=0;n.mode=U;case U:while(h<32){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if(n.head){n.head.time=l}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;N[2]=l>>>16&255;N[3]=l>>>24&255;n.check=L(n.check,N,4,0)}l=0;h=0;n.mode=Y;case Y:while(h<16){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if(n.head){n.head.xflags=l&255;n.head.os=l>>8}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;n.check=L(n.check,N,2,0)}l=0;h=0;n.mode=j;case j:if(n.flags&1024){while(h<16){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}n.length=l;if(n.head){n.head.extra_len=l}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;n.check=L(n.check,N,2,0)}l=0;h=0}else if(n.head){n.head.extra=null}n.mode=X;case X:if(n.flags&1024){g=n.length;if(g>a){g=a}if(g){if(n.head){k=n.head.extra_len-n.length;if(!n.head.extra){n.head.extra=new Uint8Array(n.head.extra_len)}n.head.extra.set(r.subarray(o,o+g),k)}if(n.flags&512&&n.wrap&4){n.check=L(n.check,r,g,o)}a-=g;o+=g;n.length-=g}if(n.length){break t}}n.length=0;n.mode=W;case W:if(n.flags&2048){if(a===0){break t}g=0;do{k=r[o+g++];if(n.head&&k&&n.length<65536){n.head.name+=String.fromCharCode(k)}}while(k&&g<a);if(n.flags&512&&n.wrap&4){n.check=L(n.check,r,g,o)}a-=g;o+=g;if(k){break t}}else if(n.head){n.head.name=null}n.length=0;n.mode=Z;case Z:if(n.flags&4096){if(a===0){break t}g=0;do{k=r[o+g++];if(n.head&&k&&n.length<65536){n.head.comment+=String.fromCharCode(k)}}while(k&&g<a);if(n.flags&512&&n.wrap&4){n.check=L(n.check,r,g,o)}a-=g;o+=g;if(k){break t}}else if(n.head){n.head.comment=null}n.mode=H;case H:if(n.flags&512){while(h<16){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if(n.wrap&4&&l!==(n.check&65535)){t.msg="header crc mismatch";n.mode=it;break}l=0;h=0}if(n.head){n.head.hcrc=n.flags>>9&1;n.head.done=true}t.adler=n.check=0;n.mode=K;break;case $:while(h<32){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}t.adler=n.check=St(l);l=0;h=0;n.mode=J;case J:if(n.havedict===0){t.next_out=s;t.avail_out=u;t.next_in=o;t.avail_in=a;n.hold=l;n.bits=h;return ct}t.adler=n.check=1;n.mode=K;case K:if(e===lt||e===A){break t}case Q:if(n.last){l>>>=h&7;h-=h&7;n.mode=rt;break}while(h<3){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}n.last=l&1;l>>>=1;h-=1;switch(l&3){case 0:n.mode=gt;break;case 1:It(n);n.mode=et;if(e===A){l>>>=2;h-=2;break t}break;case 2:n.mode=pt;break;case 3:t.msg="invalid block type";n.mode=it}l>>>=2;h-=2;break;case gt:l>>>=h&7;h-=h&7;while(h<32){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if((l&65535)!==(l>>>16^65535)){t.msg="invalid stored block lengths";n.mode=it;break}n.length=l&65535;l=0;h=0;n.mode=tt;if(e===A){break t}case tt:n.mode=dt;case dt:g=n.length;if(g){if(g>a){g=a}if(g>u){g=u}if(g===0){break t}i.set(r.subarray(o,o+g),s);a-=g;o+=g;u-=g;s+=g;n.length-=g;break}n.mode=K;break;case pt:while(h<14){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}n.nlen=(l&31)+257;l>>>=5;h-=5;n.ndist=(l&31)+1;l>>>=5;h-=5;n.ncode=(l&15)+4;l>>>=4;h-=4;if(n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols";n.mode=it;break}n.have=0;n.mode=vt;case vt:while(n.have<n.ncode){while(h<3){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}n.lens[M[n.have++]]=l&7;l>>>=3;h-=3}while(n.have<19){n.lens[M[n.have++]]=0}n.lencode=n.lendyn;n.lenbits=7;S={bits:n.lenbits};E=T(ut,n.lens,0,19,n.lencode,0,n.work,S);n.lenbits=S.bits;if(E){t.msg="invalid code lengths set";n.mode=it;break}n.have=0;n.mode=yt;case yt:while(n.have<n.nlen+n.ndist){for(;;){v=n.lencode[l&(1<<n.lenbits)-1];y=v>>>24;m=v>>>16&255;_=v&65535;if(y<=h){break}if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if(_<16){l>>>=y;h-=y;n.lens[n.have++]=_}else{if(_===16){I=y+2;while(h<I){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}l>>>=y;h-=y;if(n.have===0){t.msg="invalid bit length repeat";n.mode=it;break}k=n.lens[n.have-1];g=3+(l&3);l>>>=2;h-=2}else if(_===17){I=y+3;while(h<I){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}l>>>=y;h-=y;k=0;g=3+(l&7);l>>>=3;h-=3}else{I=y+7;while(h<I){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}l>>>=y;h-=y;k=0;g=11+(l&127);l>>>=7;h-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat";n.mode=it;break}while(g--){n.lens[n.have++]=k}}}if(n.mode===it){break}if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block";n.mode=it;break}n.lenbits=9;S={bits:n.lenbits};E=T(P,n.lens,0,n.nlen,n.lencode,0,n.work,S);n.lenbits=S.bits;if(E){t.msg="invalid literal/lengths set";n.mode=it;break}n.distbits=6;n.distcode=n.distdyn;S={bits:n.distbits};E=T(R,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S);n.distbits=S.bits;if(E){t.msg="invalid distances set";n.mode=it;break}n.mode=et;if(e===A){break t}case et:n.mode=nt;case nt:if(a>=6&&u>=258){t.next_out=s;t.avail_out=u;t.next_in=o;t.avail_in=a;n.hold=l;n.bits=h;at(t,f);s=t.next_out;i=t.output;u=t.avail_out;o=t.next_in;r=t.input;a=t.avail_in;l=n.hold;h=n.bits;if(n.mode===K){n.back=-1}break}n.back=0;for(;;){v=n.lencode[l&(1<<n.lenbits)-1];y=v>>>24;m=v>>>16&255;_=v&65535;if(y<=h){break}if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if(m&&(m&240)===0){x=y;b=m;w=_;for(;;){v=n.lencode[w+((l&(1<<x+b)-1)>>x)];y=v>>>24;m=v>>>16&255;_=v&65535;if(x+y<=h){break}if(a===0){break t}a--;l+=r[o++]<<h;h+=8}l>>>=x;h-=x;n.back+=x}l>>>=y;h-=y;n.back+=y;n.length=_;if(m===0){n.mode=wt;break}if(m&32){n.back=-1;n.mode=K;break}if(m&64){t.msg="invalid literal/length code";n.mode=it;break}n.extra=m&15;n.mode=mt;case mt:if(n.extra){I=n.extra;while(h<I){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}n.length+=l&(1<<n.extra)-1;l>>>=n.extra;h-=n.extra;n.back+=n.extra}n.was=n.length;n.mode=_t;case _t:for(;;){v=n.distcode[l&(1<<n.distbits)-1];y=v>>>24;m=v>>>16&255;_=v&65535;if(y<=h){break}if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if((m&240)===0){x=y;b=m;w=_;for(;;){v=n.distcode[w+((l&(1<<x+b)-1)>>x)];y=v>>>24;m=v>>>16&255;_=v&65535;if(x+y<=h){break}if(a===0){break t}a--;l+=r[o++]<<h;h+=8}l>>>=x;h-=x;n.back+=x}l>>>=y;h-=y;n.back+=y;if(m&64){t.msg="invalid distance code";n.mode=it;break}n.offset=_;n.extra=m&15;n.mode=xt;case xt:if(n.extra){I=n.extra;while(h<I){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}n.offset+=l&(1<<n.extra)-1;l>>>=n.extra;h-=n.extra;n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back";n.mode=it;break}n.mode=bt;case bt:if(u===0){break t}g=f-u;if(n.offset>g){g=n.offset-g;if(g>n.whave){if(n.sane){t.msg="invalid distance too far back";n.mode=it;break}}if(g>n.wnext){g-=n.wnext;d=n.wsize-g}else{d=n.wnext-g}if(g>n.length){g=n.length}p=n.window}else{p=i;d=s-n.offset;g=n.length}if(g>u){g=u}u-=g;n.length-=g;do{i[s++]=p[d++]}while(--g);if(n.length===0){n.mode=nt}break;case wt:if(u===0){break t}i[s++]=n.length;u--;n.mode=nt;break;case rt:if(n.wrap){while(h<32){if(a===0){break t}a--;l|=r[o++]<<h;h+=8}f-=u;t.total_out+=f;n.total+=f;if(n.wrap&4&&f){t.adler=n.check=n.flags?L(n.check,i,f,s-f):C(n.check,i,f,s-f)}f=u;if(n.wrap&4&&(n.flags?l:St(l))!==n.check){t.msg="incorrect data check";n.mode=it;break}l=0;h=0}n.mode=kt;case kt:if(n.wrap&&n.flags){while(h<32){if(a===0){break t}a--;l+=r[o++]<<h;h+=8}if(n.wrap&4&&l!==(n.total&4294967295)){t.msg="incorrect length check";n.mode=it;break}l=0;h=0}n.mode=Et;case Et:E=ht;break t;case it:E=B;break t;case ot:return z;case Nt:default:return F}}t.next_out=s;t.avail_out=u;t.next_in=o;t.avail_in=a;n.hold=l;n.bits=h;if(n.wsize||f!==t.avail_out&&n.mode<it&&(n.mode<rt||e!==O)){if(Mt(t,t.output,t.next_out,f-t.avail_out)){n.mode=ot;return z}}c-=t.avail_in;f-=t.avail_out;t.total_in+=c;t.total_out+=f;n.total+=f;if(n.wrap&4&&f){t.adler=n.check=n.flags?L(n.check,i,f,t.next_out-f):C(n.check,i,f,t.next_out-f)}t.data_type=n.bits+(n.last?64:0)+(n.mode===K?128:0)+(n.mode===et||n.mode===tt?256:0);if((c===0&&f===0||e===O)&&E===D){E=ft}return E};const y=t=>{if(st(t)){return F}let e=t.state;if(e.window){e.window=null}t.state=null;return D};const m=(t,e)=>{if(st(t)){return F}const n=t.state;if((n.wrap&2)===0){return F}n.head=e;e.done=false;return D};const _=(t,e)=>{const n=e.length;let r;let i;let o;if(st(t)){return F}r=t.state;if(r.wrap!==0&&r.mode!==J){return F}if(r.mode===J){i=1;i=C(i,e,n,0);if(i!==r.check){return B}}o=Mt(t,e,n,n);if(o){r.mode=ot;return z}r.havedict=1;return D};e.exports.inflateReset=c;e.exports.inflateReset2=f;e.exports.inflateResetKeep=h;e.exports.inflateInit=d;e.exports.inflateInit2=g;e.exports.inflate=v;e.exports.inflateEnd=y;e.exports.inflateGetHeader=m;e.exports.inflateSetDictionary=_;e.exports.inflateInfo="pako inflate (from Nodeca project)"},{"./adler32":16,"./constants":17,"./crc32":18,"./inffast":21,"./inftrees":23}],23:[function(t,e,n){"use strict";const P=15;const R=852;const O=592;const A=0;const D=1;const F=2;const B=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]);const z=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]);const V=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]);const q=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const r=(t,e,n,r,i,o,s,a)=>{const u=a.bits;let l=0;let h=0;let c=0,f=0;let g=0;let d=0;let p=0;let v=0;let y=0;let m=0;let _;let x;let b;let w;let k;let E=null;let N;const S=new Uint16Array(P+1);const I=new Uint16Array(P+1);let M=null;let C,L,T;for(l=0;l<=P;l++){S[l]=0}for(h=0;h<r;h++){S[e[n+h]]++}g=u;for(f=P;f>=1;f--){if(S[f]!==0){break}}if(g>f){g=f}if(f===0){i[o++]=1<<24|64<<16|0;i[o++]=1<<24|64<<16|0;a.bits=1;return 0}for(c=1;c<f;c++){if(S[c]!==0){break}}if(g<c){g=c}v=1;for(l=1;l<=P;l++){v<<=1;v-=S[l];if(v<0){return-1}}if(v>0&&(t===A||f!==1)){return-1}I[1]=0;for(l=1;l<P;l++){I[l+1]=I[l]+S[l]}for(h=0;h<r;h++){if(e[n+h]!==0){s[I[e[n+h]]++]=h}}if(t===A){E=M=s;N=20}else if(t===D){E=B;M=z;N=257}else{E=V;M=q;N=0}m=0;h=0;l=c;k=o;d=g;p=0;b=-1;y=1<<g;w=y-1;if(t===D&&y>R||t===F&&y>O){return 1}for(;;){C=l-p;if(s[h]+1<N){L=0;T=s[h]}else if(s[h]>=N){L=M[s[h]-N];T=E[s[h]-N]}else{L=32+64;T=0}_=1<<l-p;x=1<<d;c=x;do{x-=_;i[k+(m>>p)+x]=C<<24|L<<16|T|0}while(x!==0);_=1<<l-1;while(m&_){_>>=1}if(_!==0){m&=_-1;m+=_}else{m=0}h++;if(--S[l]===0){if(l===f){break}l=e[n+s[h]]}if(l>g&&(m&w)!==b){if(p===0){p=g}k+=c;d=l-p;v=1<<d;while(d+p<f){v-=S[d+p];if(v<=0){break}d++;v<<=1}y+=1<<d;if(t===D&&y>R||t===F&&y>O){return 1}b=m&w;i[b]=g<<24|d<<16|k-o|0}}if(m!==0){i[k+m]=l-p<<24|64<<16|0}a.bits=g;return 0};e.exports=r},{}],24:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],25:[function(D,t,F){"use strict";const B=4;const r=0;const i=1;const z=2;function e(t){let e=t.length;while(--e>=0){t[e]=0}}const V=0;const a=1;const q=2;const G=3;const U=258;const s=29;const u=256;const l=u+1+s;const h=30;const c=19;const v=2*l+1;const y=15;const o=16;const Y=7;const f=256;const g=16;const d=17;const p=18;const m=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);const _=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);const j=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);const X=512;const b=new Array((l+2)*2);e(b);const w=new Array(h*2);e(w);const k=new Array(X);e(k);const E=new Array(U-G+1);e(E);const N=new Array(s);e(N);const S=new Array(h);e(S);function I(t,e,n,r,i){this.static_tree=t;this.extra_bits=e;this.extra_base=n;this.elems=r;this.max_length=i;this.has_stree=t&&t.length}let M;let C;let L;function n(t,e){this.dyn_tree=t;this.max_code=0;this.stat_desc=e}const W=t=>{return t<256?k[t]:k[256+(t>>>7)]};const T=(t,e)=>{t.pending_buf[t.pending++]=e&255;t.pending_buf[t.pending++]=e>>>8&255};const P=(t,e,n)=>{if(t.bi_valid>o-n){t.bi_buf|=e<<t.bi_valid&65535;T(t,t.bi_buf);t.bi_buf=e>>o-t.bi_valid;t.bi_valid+=n-o}else{t.bi_buf|=e<<t.bi_valid&65535;t.bi_valid+=n}};const R=(t,e,n)=>{P(t,n[e*2],n[e*2+1])};const Z=(t,e)=>{let n=0;do{n|=t&1;t>>>=1;n<<=1}while(--e>0);return n>>>1};const H=t=>{if(t.bi_valid===16){T(t,t.bi_buf);t.bi_buf=0;t.bi_valid=0}else if(t.bi_valid>=8){t.pending_buf[t.pending++]=t.bi_buf&255;t.bi_buf>>=8;t.bi_valid-=8}};const $=(t,e)=>{const n=e.dyn_tree;const r=e.max_code;const i=e.stat_desc.static_tree;const o=e.stat_desc.has_stree;const s=e.stat_desc.extra_bits;const a=e.stat_desc.extra_base;const u=e.stat_desc.max_length;let l;let h,c;let f;let g;let d;let p=0;for(f=0;f<=y;f++){t.bl_count[f]=0}n[t.heap[t.heap_max]*2+1]=0;for(l=t.heap_max+1;l<v;l++){h=t.heap[l];f=n[n[h*2+1]*2+1]+1;if(f>u){f=u;p++}n[h*2+1]=f;if(h>r){continue}t.bl_count[f]++;g=0;if(h>=a){g=s[h-a]}d=n[h*2];t.opt_len+=d*(f+g);if(o){t.static_len+=d*(i[h*2+1]+g)}}if(p===0){return}do{f=u-1;while(t.bl_count[f]===0){f--}t.bl_count[f]--;t.bl_count[f+1]+=2;t.bl_count[u]--;p-=2}while(p>0);for(f=u;f!==0;f--){h=t.bl_count[f];while(h!==0){c=t.heap[--l];if(c>r){continue}if(n[c*2+1]!==f){t.opt_len+=(f-n[c*2+1])*n[c*2];n[c*2+1]=f}h--}}};const J=(e,t,n)=>{const r=new Array(y+1);let i=0;let o;let s;for(o=1;o<=y;o++){i=i+n[o-1]<<1;r[o]=i}for(s=0;s<=t;s++){let t=e[s*2+1];if(t===0){continue}e[s*2]=Z(r[t]++,t)}};const K=()=>{let t;let e;let n;let r;let i;const o=new Array(y+1);n=0;for(r=0;r<s-1;r++){N[r]=n;for(t=0;t<1<<m[r];t++){E[n++]=r}}E[n-1]=r;i=0;for(r=0;r<16;r++){S[r]=i;for(t=0;t<1<<_[r];t++){k[i++]=r}}i>>=7;for(;r<h;r++){S[r]=i<<7;for(t=0;t<1<<_[r]-7;t++){k[256+i++]=r}}for(e=0;e<=y;e++){o[e]=0}t=0;while(t<=143){b[t*2+1]=8;t++;o[8]++}while(t<=255){b[t*2+1]=9;t++;o[9]++}while(t<=279){b[t*2+1]=7;t++;o[7]++}while(t<=287){b[t*2+1]=8;t++;o[8]++}J(b,l+1,o);for(t=0;t<h;t++){w[t*2+1]=5;w[t*2]=Z(t,5)}M=new I(b,m,u+1,l,y);C=new I(w,_,0,h,y);L=new I(new Array(0),j,0,c,Y)};const Q=t=>{let e;for(e=0;e<l;e++){t.dyn_ltree[e*2]=0}for(e=0;e<h;e++){t.dyn_dtree[e*2]=0}for(e=0;e<c;e++){t.bl_tree[e*2]=0}t.dyn_ltree[f*2]=1;t.opt_len=t.static_len=0;t.sym_next=t.matches=0};const tt=t=>{if(t.bi_valid>8){T(t,t.bi_buf)}else if(t.bi_valid>0){t.pending_buf[t.pending++]=t.bi_buf}t.bi_buf=0;t.bi_valid=0};const et=(t,e,n,r)=>{const i=e*2;const o=n*2;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]};const O=(t,e,n)=>{const r=t.heap[n];let i=n<<1;while(i<=t.heap_len){if(i<t.heap_len&&et(e,t.heap[i+1],t.heap[i],t.depth)){i++}if(et(e,r,t.heap[i],t.depth)){break}t.heap[n]=t.heap[i];n=i;i<<=1}t.heap[n]=r};const nt=(t,e,n)=>{let r;let i;let o=0;let s;let a;if(t.sym_next!==0){do{r=t.pending_buf[t.sym_buf+o++]&255;r+=(t.pending_buf[t.sym_buf+o++]&255)<<8;i=t.pending_buf[t.sym_buf+o++];if(r===0){R(t,i,e)}else{s=E[i];R(t,s+u+1,e);a=m[s];if(a!==0){i-=N[s];P(t,i,a)}r--;s=W(r);R(t,s,n);a=_[s];if(a!==0){r-=S[s];P(t,r,a)}}}while(o<t.sym_next)}R(t,f,e)};const A=(t,e)=>{const n=e.dyn_tree;const r=e.stat_desc.static_tree;const i=e.stat_desc.has_stree;const o=e.stat_desc.elems;let s,a;let u=-1;let l;t.heap_len=0;t.heap_max=v;for(s=0;s<o;s++){if(n[s*2]!==0){t.heap[++t.heap_len]=u=s;t.depth[s]=0}else{n[s*2+1]=0}}while(t.heap_len<2){l=t.heap[++t.heap_len]=u<2?++u:0;n[l*2]=1;t.depth[l]=0;t.opt_len--;if(i){t.static_len-=r[l*2+1]}}e.max_code=u;for(s=t.heap_len>>1;s>=1;s--){O(t,n,s)}l=o;do{s=t.heap[1];t.heap[1]=t.heap[t.heap_len--];O(t,n,1);a=t.heap[1];t.heap[--t.heap_max]=s;t.heap[--t.heap_max]=a;n[l*2]=n[s*2]+n[a*2];t.depth[l]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1;n[s*2+1]=n[a*2+1]=l;t.heap[1]=l++;O(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1];$(t,e);J(n,u,t.bl_count)};const rt=(t,e,n)=>{let r;let i=-1;let o;let s=e[0*2+1];let a=0;let u=7;let l=4;if(s===0){u=138;l=3}e[(n+1)*2+1]=65535;for(r=0;r<=n;r++){o=s;s=e[(r+1)*2+1];if(++a<u&&o===s){continue}else if(a<l){t.bl_tree[o*2]+=a}else if(o!==0){if(o!==i){t.bl_tree[o*2]++}t.bl_tree[g*2]++}else if(a<=10){t.bl_tree[d*2]++}else{t.bl_tree[p*2]++}a=0;i=o;if(s===0){u=138;l=3}else if(o===s){u=6;l=3}else{u=7;l=4}}};const it=(t,e,n)=>{let r;let i=-1;let o;let s=e[0*2+1];let a=0;let u=7;let l=4;if(s===0){u=138;l=3}for(r=0;r<=n;r++){o=s;s=e[(r+1)*2+1];if(++a<u&&o===s){continue}else if(a<l){do{R(t,o,t.bl_tree)}while(--a!==0)}else if(o!==0){if(o!==i){R(t,o,t.bl_tree);a--}R(t,g,t.bl_tree);P(t,a-3,2)}else if(a<=10){R(t,d,t.bl_tree);P(t,a-3,3)}else{R(t,p,t.bl_tree);P(t,a-11,7)}a=0;i=o;if(s===0){u=138;l=3}else if(o===s){u=6;l=3}else{u=7;l=4}}};const ot=t=>{let e;rt(t,t.dyn_ltree,t.l_desc.max_code);rt(t,t.dyn_dtree,t.d_desc.max_code);A(t,t.bl_desc);for(e=c-1;e>=3;e--){if(t.bl_tree[x[e]*2+1]!==0){break}}t.opt_len+=3*(e+1)+5+5+4;return e};const st=(t,e,n,r)=>{let i;P(t,e-257,5);P(t,n-1,5);P(t,r-4,4);for(i=0;i<r;i++){P(t,t.bl_tree[x[i]*2+1],3)}it(t,t.dyn_ltree,e-1);it(t,t.dyn_dtree,n-1)};const at=t=>{let e=4093624447;let n;for(n=0;n<=31;n++,e>>>=1){if(e&1&&t.dyn_ltree[n*2]!==0){return r}}if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0){return i}for(n=32;n<u;n++){if(t.dyn_ltree[n*2]!==0){return i}}return r};let ut=false;const lt=t=>{if(!ut){K();ut=true}t.l_desc=new n(t.dyn_ltree,M);t.d_desc=new n(t.dyn_dtree,C);t.bl_desc=new n(t.bl_tree,L);t.bi_buf=0;t.bi_valid=0;Q(t)};const ht=(t,e,n,r)=>{P(t,(V<<1)+(r?1:0),3);tt(t);T(t,n);T(t,~n);if(n){t.pending_buf.set(t.window.subarray(e,e+n),t.pending)}t.pending+=n};const ct=t=>{P(t,a<<1,3);R(t,f,b);H(t)};const ft=(t,e,n,r)=>{let i,o;let s=0;if(t.level>0){if(t.strm.data_type===z){t.strm.data_type=at(t)}A(t,t.l_desc);A(t,t.d_desc);s=ot(t);i=t.opt_len+3+7>>>3;o=t.static_len+3+7>>>3;if(o<=i){i=o}}else{i=o=n+5}if(n+4<=i&&e!==-1){ht(t,e,n,r)}else if(t.strategy===B||o===i){P(t,(a<<1)+(r?1:0),3);nt(t,b,w)}else{P(t,(q<<1)+(r?1:0),3);st(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1);nt(t,t.dyn_ltree,t.dyn_dtree)}Q(t);if(r){tt(t)}};const gt=(t,e,n)=>{t.pending_buf[t.sym_buf+t.sym_next++]=e;t.pending_buf[t.sym_buf+t.sym_next++]=e>>8;t.pending_buf[t.sym_buf+t.sym_next++]=n;if(e===0){t.dyn_ltree[n*2]++}else{t.matches++;e--;t.dyn_ltree[(E[n]+u+1)*2]++;t.dyn_dtree[W(e)*2]++}return t.sym_next===t.sym_end};t.exports._tr_init=lt;t.exports._tr_stored_block=ht;t.exports._tr_flush_block=ft;t.exports._tr_tally=gt;t.exports._tr_align=ct},{}],26:[function(t,e,n){"use strict";function r(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}e.exports=r},{}],27:[function(t,e,n){"use strict";n.byteLength=s;n.toByteArray=a;n.fromByteArray=p;var u=[];var l=[];var h=typeof Uint8Array!=="undefined"?Uint8Array:Array;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,o=r.length;i<o;++i){u[i]=r[i];l[r.charCodeAt(i)]=i}l["-".charCodeAt(0)]=62;l["_".charCodeAt(0)]=63;function c(t){var e=t.length;if(e%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var n=t.indexOf("=");if(n===-1)n=e;var r=n===e?0:4-n%4;return[n,r]}function s(t){var e=c(t);var n=e[0];var r=e[1];return(n+r)*3/4-r}function f(t,e,n){return(e+n)*3/4-n}function a(t){var e;var n=c(t);var r=n[0];var i=n[1];var o=new h(f(t,r,i));var s=0;var a=i>0?r-4:r;var u;for(u=0;u<a;u+=4){e=l[t.charCodeAt(u)]<<18|l[t.charCodeAt(u+1)]<<12|l[t.charCodeAt(u+2)]<<6|l[t.charCodeAt(u+3)];o[s++]=e>>16&255;o[s++]=e>>8&255;o[s++]=e&255}if(i===2){e=l[t.charCodeAt(u)]<<2|l[t.charCodeAt(u+1)]>>4;o[s++]=e&255}if(i===1){e=l[t.charCodeAt(u)]<<10|l[t.charCodeAt(u+1)]<<4|l[t.charCodeAt(u+2)]>>2;o[s++]=e>>8&255;o[s++]=e&255}return o}function g(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[t&63]}function d(t,e,n){var r;var i=[];for(var o=e;o<n;o+=3){r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255);i.push(g(r))}return i.join("")}function p(t){var e;var n=t.length;var r=n%3;var i=[];var o=16383;for(var s=0,a=n-r;s<a;s+=o){i.push(d(t,s,s+o>a?a:s+o))}if(r===1){e=t[n-1];i.push(u[e>>2]+u[e<<4&63]+"==")}else if(r===2){e=(t[n-2]<<8)+t[n-1];i.push(u[e>>10]+u[e>>4&63]+u[e<<2&63]+"=")}return i.join("")}},{}],28:[function($,t,J){(function(t){(function(){"use strict";var r=$("base64-js");var o=$("ieee754");J.Buffer=f;J.SlowBuffer=e;J.INSPECT_MAX_BYTES=50;var n=2147483647;J.kMaxLength=n;f.TYPED_ARRAY_SUPPORT=t();if(!f.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function t(){try{var t=new Uint8Array(1);t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return t.foo()===42}catch(t){return false}}Object.defineProperty(f.prototype,"parent",{enumerable:true,get:function(){if(!f.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(f.prototype,"offset",{enumerable:true,get:function(){if(!f.isBuffer(this))return undefined;return this.byteOffset}});function s(t){if(t>n){throw new RangeError('The value "'+t+'" is invalid for option "size"')}var e=new Uint8Array(t);e.__proto__=f.prototype;return e}function f(t,e,n){if(typeof t==="number"){if(typeof e==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return l(t)}return i(t,e,n)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&f[Symbol.species]===f){Object.defineProperty(f,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}f.poolSize=8192;function i(t,e,n){if(typeof t==="string"){return h(t,e)}if(ArrayBuffer.isView(t)){return c(t)}if(t==null){throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof t)}if(O(t,ArrayBuffer)||t&&O(t.buffer,ArrayBuffer)){return g(t,e,n)}if(typeof t==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var r=t.valueOf&&t.valueOf();if(r!=null&&r!==t){return f.from(r,e,n)}var i=d(t);if(i)return i;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]==="function"){return f.from(t[Symbol.toPrimitive]("string"),e,n)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof t)}f.from=function(t,e,n){return i(t,e,n)};f.prototype.__proto__=Uint8Array.prototype;f.__proto__=Uint8Array;function a(t){if(typeof t!=="number"){throw new TypeError('"size" argument must be of type number')}else if(t<0){throw new RangeError('The value "'+t+'" is invalid for option "size"')}}function u(t,e,n){a(t);if(t<=0){return s(t)}if(e!==undefined){return typeof n==="string"?s(t).fill(e,n):s(t).fill(e)}return s(t)}f.alloc=function(t,e,n){return u(t,e,n)};function l(t){a(t);return s(t<0?0:p(t)|0)}f.allocUnsafe=function(t){return l(t)};f.allocUnsafeSlow=function(t){return l(t)};function h(t,e){if(typeof e!=="string"||e===""){e="utf8"}if(!f.isEncoding(e)){throw new TypeError("Unknown encoding: "+e)}var n=v(t,e)|0;var r=s(n);var i=r.write(t,e);if(i!==n){r=r.slice(0,i)}return r}function c(t){var e=t.length<0?0:p(t.length)|0;var n=s(e);for(var r=0;r<e;r+=1){n[r]=t[r]&255}return n}function g(t,e,n){if(e<0||t.byteLength<e){throw new RangeError('"offset" is outside of buffer bounds')}if(t.byteLength<e+(n||0)){throw new RangeError('"length" is outside of buffer bounds')}var r;if(e===undefined&&n===undefined){r=new Uint8Array(t)}else if(n===undefined){r=new Uint8Array(t,e)}else{r=new Uint8Array(t,e,n)}r.__proto__=f.prototype;return r}function d(t){if(f.isBuffer(t)){var e=p(t.length)|0;var n=s(e);if(n.length===0){return n}t.copy(n,0,0,e);return n}if(t.length!==undefined){if(typeof t.length!=="number"||A(t.length)){return s(0)}return c(t)}if(t.type==="Buffer"&&Array.isArray(t.data)){return c(t.data)}}function p(t){if(t>=n){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+n.toString(16)+" bytes")}return t|0}function e(t){if(+t!=t){t=0}return f.alloc(+t)}f.isBuffer=function t(e){return e!=null&&e._isBuffer===true&&e!==f.prototype};f.compare=function t(e,n){if(O(e,Uint8Array))e=f.from(e,e.offset,e.byteLength);if(O(n,Uint8Array))n=f.from(n,n.offset,n.byteLength);if(!f.isBuffer(e)||!f.isBuffer(n)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(e===n)return 0;var r=e.length;var i=n.length;for(var o=0,s=Math.min(r,i);o<s;++o){if(e[o]!==n[o]){r=e[o];i=n[o];break}}if(r<i)return-1;if(i<r)return 1;return 0};f.isEncoding=function t(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};f.concat=function t(e,n){if(!Array.isArray(e)){throw new TypeError('"list" argument must be an Array of Buffers')}if(e.length===0){return f.alloc(0)}var r;if(n===undefined){n=0;for(r=0;r<e.length;++r){n+=e[r].length}}var i=f.allocUnsafe(n);var o=0;for(r=0;r<e.length;++r){var s=e[r];if(O(s,Uint8Array)){s=f.from(s)}if(!f.isBuffer(s)){throw new TypeError('"list" argument must be an Array of Buffers')}s.copy(i,o);o+=s.length}return i};function v(t,e){if(f.isBuffer(t)){return t.length}if(ArrayBuffer.isView(t)||O(t,ArrayBuffer)){return t.byteLength}if(typeof t!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof t)}var n=t.length;var r=arguments.length>2&&arguments[2]===true;if(!r&&n===0)return 0;var i=false;for(;;){switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return T(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return P(t).length;default:if(i){return r?-1:T(t).length}e=(""+e).toLowerCase();i=true}}}f.byteLength=v;function y(t,e,n){var r=false;if(e===undefined||e<0){e=0}if(e>this.length){return""}if(n===undefined||n>this.length){n=this.length}if(n<=0){return""}n>>>=0;e>>>=0;if(n<=e){return""}if(!t)t="utf8";while(true){switch(t){case"hex":return U(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return q(this,e,n);case"latin1":case"binary":return G(this,e,n);case"base64":return z(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase();r=true}}}f.prototype._isBuffer=true;function m(t,e,n){var r=t[e];t[e]=t[n];t[n]=r}f.prototype.swap16=function t(){var e=this.length;if(e%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var n=0;n<e;n+=2){m(this,n,n+1)}return this};f.prototype.swap32=function t(){var e=this.length;if(e%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var n=0;n<e;n+=4){m(this,n,n+3);m(this,n+1,n+2)}return this};f.prototype.swap64=function t(){var e=this.length;if(e%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var n=0;n<e;n+=8){m(this,n,n+7);m(this,n+1,n+6);m(this,n+2,n+5);m(this,n+3,n+4)}return this};f.prototype.toString=function t(){var e=this.length;if(e===0)return"";if(arguments.length===0)return E(this,0,e);return y.apply(this,arguments)};f.prototype.toLocaleString=f.prototype.toString;f.prototype.equals=function t(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(this===e)return true;return f.compare(this,e)===0};f.prototype.inspect=function t(){var e="";var n=J.INSPECT_MAX_BYTES;e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim();if(this.length>n)e+=" ... ";return"<Buffer "+e+">"};f.prototype.compare=function t(e,n,r,i,o){if(O(e,Uint8Array)){e=f.from(e,e.offset,e.byteLength)}if(!f.isBuffer(e)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof e)}if(n===undefined){n=0}if(r===undefined){r=e?e.length:0}if(i===undefined){i=0}if(o===undefined){o=this.length}if(n<0||r>e.length||i<0||o>this.length){throw new RangeError("out of range index")}if(i>=o&&n>=r){return 0}if(i>=o){return-1}if(n>=r){return 1}n>>>=0;r>>>=0;i>>>=0;o>>>=0;if(this===e)return 0;var s=o-i;var a=r-n;var u=Math.min(s,a);var l=this.slice(i,o);var h=e.slice(n,r);for(var c=0;c<u;++c){if(l[c]!==h[c]){s=l[c];a=h[c];break}}if(s<a)return-1;if(a<s)return 1;return 0};function _(t,e,n,r,i){if(t.length===0)return-1;if(typeof n==="string"){r=n;n=0}else if(n>2147483647){n=2147483647}else if(n<-2147483648){n=-2147483648}n=+n;if(A(n)){n=i?0:t.length-1}if(n<0)n=t.length+n;if(n>=t.length){if(i)return-1;else n=t.length-1}else if(n<0){if(i)n=0;else return-1}if(typeof e==="string"){e=f.from(e,r)}if(f.isBuffer(e)){if(e.length===0){return-1}return x(t,e,n,r,i)}else if(typeof e==="number"){e=e&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(t,e,n)}else{return Uint8Array.prototype.lastIndexOf.call(t,e,n)}}return x(t,[e],n,r,i)}throw new TypeError("val must be string, number or Buffer")}function x(t,e,n,r,i){var o=1;var s=t.length;var a=e.length;if(r!==undefined){r=String(r).toLowerCase();if(r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le"){if(t.length<2||e.length<2){return-1}o=2;s/=2;a/=2;n/=2}}function u(t,e){if(o===1){return t[e]}else{return t.readUInt16BE(e*o)}}var l;if(i){var h=-1;for(l=n;l<s;l++){if(u(t,l)===u(e,h===-1?0:l-h)){if(h===-1)h=l;if(l-h+1===a)return h*o}else{if(h!==-1)l-=l-h;h=-1}}}else{if(n+a>s)n=s-a;for(l=n;l>=0;l--){var c=true;for(var f=0;f<a;f++){if(u(t,l+f)!==u(e,f)){c=false;break}}if(c)return l}}return-1}f.prototype.includes=function t(e,n,r){return this.indexOf(e,n,r)!==-1};f.prototype.indexOf=function t(e,n,r){return _(this,e,n,r,true)};f.prototype.lastIndexOf=function t(e,n,r){return _(this,e,n,r,false)};function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;if(!r){r=i}else{r=Number(r);if(r>i){r=i}}var o=e.length;if(r>o/2){r=o/2}for(var s=0;s<r;++s){var a=parseInt(e.substr(s*2,2),16);if(A(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return R(T(e,t.length-n),t,n,r)}function k(t,e,n,r){return R(Z(e),t,n,r)}function D(t,e,n,r){return k(t,e,n,r)}function F(t,e,n,r){return R(P(e),t,n,r)}function B(t,e,n,r){return R(H(e,t.length-n),t,n,r)}f.prototype.write=function t(e,n,r,i){if(n===undefined){i="utf8";r=this.length;n=0}else if(r===undefined&&typeof n==="string"){i=n;r=this.length;n=0}else if(isFinite(n)){n=n>>>0;if(isFinite(r)){r=r>>>0;if(i===undefined)i="utf8"}else{i=r;r=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var o=this.length-n;if(r===undefined||r>o)r=o;if(e.length>0&&(r<0||n<0)||n>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";var s=false;for(;;){switch(i){case"hex":return b(this,e,n,r);case"utf8":case"utf-8":return w(this,e,n,r);case"ascii":return k(this,e,n,r);case"latin1":case"binary":return D(this,e,n,r);case"base64":return F(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();s=true}}};f.prototype.toJSON=function t(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(t,e,n){if(e===0&&n===t.length){return r.fromByteArray(t)}else{return r.fromByteArray(t.slice(e,n))}}function E(t,e,n){n=Math.min(t.length,n);var r=[];var i=e;while(i<n){var o=t[i];var s=null;var a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,l,h,c;switch(a){case 1:if(o<128){s=o}break;case 2:u=t[i+1];if((u&192)===128){c=(o&31)<<6|u&63;if(c>127){s=c}}break;case 3:u=t[i+1];l=t[i+2];if((u&192)===128&&(l&192)===128){c=(o&15)<<12|(u&63)<<6|l&63;if(c>2047&&(c<55296||c>57343)){s=c}}break;case 4:u=t[i+1];l=t[i+2];h=t[i+3];if((u&192)===128&&(l&192)===128&&(h&192)===128){c=(o&15)<<18|(u&63)<<12|(l&63)<<6|h&63;if(c>65535&&c<1114112){s=c}}}}if(s===null){s=65533;a=1}else if(s>65535){s-=65536;r.push(s>>>10&1023|55296);s=56320|s&1023}r.push(s);i+=a}return V(r)}var N=4096;function V(t){var e=t.length;if(e<=N){return String.fromCharCode.apply(String,t)}var n="";var r=0;while(r<e){n+=String.fromCharCode.apply(String,t.slice(r,r+=N))}return n}function q(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i){r+=String.fromCharCode(t[i]&127)}return r}function G(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i){r+=String.fromCharCode(t[i])}return r}function U(t,e,n){var r=t.length;if(!e||e<0)e=0;if(!n||n<0||n>r)n=r;var i="";for(var o=e;o<n;++o){i+=W(t[o])}return i}function Y(t,e,n){var r=t.slice(e,n);var i="";for(var o=0;o<r.length;o+=2){i+=String.fromCharCode(r[o]+r[o+1]*256)}return i}f.prototype.slice=function t(e,n){var r=this.length;e=~~e;n=n===undefined?r:~~n;if(e<0){e+=r;if(e<0)e=0}else if(e>r){e=r}if(n<0){n+=r;if(n<0)n=0}else if(n>r){n=r}if(n<e)n=e;var i=this.subarray(e,n);i.__proto__=f.prototype;return i};function S(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUIntLE=function t(e,n,r){e=e>>>0;n=n>>>0;if(!r)S(e,n,this.length);var i=this[e];var o=1;var s=0;while(++s<n&&(o*=256)){i+=this[e+s]*o}return i};f.prototype.readUIntBE=function t(e,n,r){e=e>>>0;n=n>>>0;if(!r){S(e,n,this.length)}var i=this[e+--n];var o=1;while(n>0&&(o*=256)){i+=this[e+--n]*o}return i};f.prototype.readUInt8=function t(e,n){e=e>>>0;if(!n)S(e,1,this.length);return this[e]};f.prototype.readUInt16LE=function t(e,n){e=e>>>0;if(!n)S(e,2,this.length);return this[e]|this[e+1]<<8};f.prototype.readUInt16BE=function t(e,n){e=e>>>0;if(!n)S(e,2,this.length);return this[e]<<8|this[e+1]};f.prototype.readUInt32LE=function t(e,n){e=e>>>0;if(!n)S(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};f.prototype.readUInt32BE=function t(e,n){e=e>>>0;if(!n)S(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};f.prototype.readIntLE=function t(e,n,r){e=e>>>0;n=n>>>0;if(!r)S(e,n,this.length);var i=this[e];var o=1;var s=0;while(++s<n&&(o*=256)){i+=this[e+s]*o}o*=128;if(i>=o)i-=Math.pow(2,8*n);return i};f.prototype.readIntBE=function t(e,n,r){e=e>>>0;n=n>>>0;if(!r)S(e,n,this.length);var i=n;var o=1;var s=this[e+--i];while(i>0&&(o*=256)){s+=this[e+--i]*o}o*=128;if(s>=o)s-=Math.pow(2,8*n);return s};f.prototype.readInt8=function t(e,n){e=e>>>0;if(!n)S(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};f.prototype.readInt16LE=function t(e,n){e=e>>>0;if(!n)S(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};f.prototype.readInt16BE=function t(e,n){e=e>>>0;if(!n)S(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};f.prototype.readInt32LE=function t(e,n){e=e>>>0;if(!n)S(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};f.prototype.readInt32BE=function t(e,n){e=e>>>0;if(!n)S(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};f.prototype.readFloatLE=function t(e,n){e=e>>>0;if(!n)S(e,4,this.length);return o.read(this,e,true,23,4)};f.prototype.readFloatBE=function t(e,n){e=e>>>0;if(!n)S(e,4,this.length);return o.read(this,e,false,23,4)};f.prototype.readDoubleLE=function t(e,n){e=e>>>0;if(!n)S(e,8,this.length);return o.read(this,e,true,52,8)};f.prototype.readDoubleBE=function t(e,n){e=e>>>0;if(!n)S(e,8,this.length);return o.read(this,e,false,52,8)};function I(t,e,n,r,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}f.prototype.writeUIntLE=function t(e,n,r,i){e=+e;n=n>>>0;r=r>>>0;if(!i){var o=Math.pow(2,8*r)-1;I(this,e,n,r,o,0)}var s=1;var a=0;this[n]=e&255;while(++a<r&&(s*=256)){this[n+a]=e/s&255}return n+r};f.prototype.writeUIntBE=function t(e,n,r,i){e=+e;n=n>>>0;r=r>>>0;if(!i){var o=Math.pow(2,8*r)-1;I(this,e,n,r,o,0)}var s=r-1;var a=1;this[n+s]=e&255;while(--s>=0&&(a*=256)){this[n+s]=e/a&255}return n+r};f.prototype.writeUInt8=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,1,255,0);this[n]=e&255;return n+1};f.prototype.writeUInt16LE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,2,65535,0);this[n]=e&255;this[n+1]=e>>>8;return n+2};f.prototype.writeUInt16BE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,2,65535,0);this[n]=e>>>8;this[n+1]=e&255;return n+2};f.prototype.writeUInt32LE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,4,4294967295,0);this[n+3]=e>>>24;this[n+2]=e>>>16;this[n+1]=e>>>8;this[n]=e&255;return n+4};f.prototype.writeUInt32BE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,4,4294967295,0);this[n]=e>>>24;this[n+1]=e>>>16;this[n+2]=e>>>8;this[n+3]=e&255;return n+4};f.prototype.writeIntLE=function t(e,n,r,i){e=+e;n=n>>>0;if(!i){var o=Math.pow(2,8*r-1);I(this,e,n,r,o-1,-o)}var s=0;var a=1;var u=0;this[n]=e&255;while(++s<r&&(a*=256)){if(e<0&&u===0&&this[n+s-1]!==0){u=1}this[n+s]=(e/a>>0)-u&255}return n+r};f.prototype.writeIntBE=function t(e,n,r,i){e=+e;n=n>>>0;if(!i){var o=Math.pow(2,8*r-1);I(this,e,n,r,o-1,-o)}var s=r-1;var a=1;var u=0;this[n+s]=e&255;while(--s>=0&&(a*=256)){if(e<0&&u===0&&this[n+s+1]!==0){u=1}this[n+s]=(e/a>>0)-u&255}return n+r};f.prototype.writeInt8=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,1,127,-128);if(e<0)e=255+e+1;this[n]=e&255;return n+1};f.prototype.writeInt16LE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,2,32767,-32768);this[n]=e&255;this[n+1]=e>>>8;return n+2};f.prototype.writeInt16BE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,2,32767,-32768);this[n]=e>>>8;this[n+1]=e&255;return n+2};f.prototype.writeInt32LE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,4,2147483647,-2147483648);this[n]=e&255;this[n+1]=e>>>8;this[n+2]=e>>>16;this[n+3]=e>>>24;return n+4};f.prototype.writeInt32BE=function t(e,n,r){e=+e;n=n>>>0;if(!r)I(this,e,n,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;this[n]=e>>>24;this[n+1]=e>>>16;this[n+2]=e>>>8;this[n+3]=e&255;return n+4};function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function C(t,e,n,r,i){e=+e;n=n>>>0;if(!i){M(t,e,n,4,34028234663852886e22,-34028234663852886e22)}o.write(t,e,n,r,23,4);return n+4}f.prototype.writeFloatLE=function t(e,n,r){return C(this,e,n,true,r)};f.prototype.writeFloatBE=function t(e,n,r){return C(this,e,n,false,r)};function L(t,e,n,r,i){e=+e;n=n>>>0;if(!i){M(t,e,n,8,17976931348623157e292,-17976931348623157e292)}o.write(t,e,n,r,52,8);return n+8}f.prototype.writeDoubleLE=function t(e,n,r){return L(this,e,n,true,r)};f.prototype.writeDoubleBE=function t(e,n,r){return L(this,e,n,false,r)};f.prototype.copy=function t(e,n,r,i){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(!r)r=0;if(!i&&i!==0)i=this.length;if(n>=e.length)n=e.length;if(!n)n=0;if(i>0&&i<r)i=r;if(i===r)return 0;if(e.length===0||this.length===0)return 0;if(n<0){throw new RangeError("targetStart out of bounds")}if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(e.length-n<i-r){i=e.length-n+r}var o=i-r;if(this===e&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(n,r,i)}else if(this===e&&r<n&&n<i){for(var s=o-1;s>=0;--s){e[s+n]=this[s+r]}}else{Uint8Array.prototype.set.call(e,this.subarray(r,i),n)}return o};f.prototype.fill=function t(e,n,r,i){if(typeof e==="string"){if(typeof n==="string"){i=n;n=0;r=this.length}else if(typeof r==="string"){i=r;r=this.length}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!f.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}if(e.length===1){var o=e.charCodeAt(0);if(i==="utf8"&&o<128||i==="latin1"){e=o}}}else if(typeof e==="number"){e=e&255}if(n<0||this.length<n||this.length<r){throw new RangeError("Out of range index")}if(r<=n){return this}n=n>>>0;r=r===undefined?this.length:r>>>0;if(!e)e=0;var s;if(typeof e==="number"){for(s=n;s<r;++s){this[s]=e}}else{var a=f.isBuffer(e)?e:f.from(e,i);var u=a.length;if(u===0){throw new TypeError('The value "'+e+'" is invalid for argument "value"')}for(s=0;s<r-n;++s){this[s+n]=a[s%u]}}return this};var j=/[^+/0-9A-Za-z-_]/g;function X(t){t=t.split("=")[0];t=t.trim().replace(j,"");if(t.length<2)return"";while(t.length%4!==0){t=t+"="}return t}function W(t){if(t<16)return"0"+t.toString(16);return t.toString(16)}function T(t,e){e=e||Infinity;var n;var r=t.length;var i=null;var o=[];for(var s=0;s<r;++s){n=t.charCodeAt(s);if(n>55295&&n<57344){if(!i){if(n>56319){if((e-=3)>-1)o.push(239,191,189);continue}else if(s+1===r){if((e-=3)>-1)o.push(239,191,189);continue}i=n;continue}if(n<56320){if((e-=3)>-1)o.push(239,191,189);i=n;continue}n=(i-55296<<10|n-56320)+65536}else if(i){if((e-=3)>-1)o.push(239,191,189)}i=null;if(n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else{throw new Error("Invalid code point")}}return o}function Z(t){var e=[];for(var n=0;n<t.length;++n){e.push(t.charCodeAt(n)&255)}return e}function H(t,e){var n,r,i;var o=[];for(var s=0;s<t.length;++s){if((e-=2)<0)break;n=t.charCodeAt(s);r=n>>8;i=n%256;o.push(i);o.push(r)}return o}function P(t){return r.toByteArray(X(t))}function R(t,e,n,r){for(var i=0;i<r;++i){if(i+n>=e.length||i>=t.length)break;e[i+n]=t[i]}return i}function O(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function A(t){return t!==t}}).call(this)}).call(this,$("buffer").Buffer)},{"base64-js":27,buffer:28,ieee754:29}],29:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s;var a=i*8-r-1;var u=(1<<a)-1;var l=u>>1;var h=-7;var c=n?i-1:0;var f=n?-1:1;var g=t[e+c];c+=f;o=g&(1<<-h)-1;g>>=-h;h+=a;for(;h>0;o=o*256+t[e+c],c+=f,h-=8){}s=o&(1<<-h)-1;o>>=-h;h+=r;for(;h>0;s=s*256+t[e+c],c+=f,h-=8){}if(o===0){o=1-l}else if(o===u){return s?NaN:(g?-1:1)*Infinity}else{s=s+Math.pow(2,r);o=o-l}return(g?-1:1)*s*Math.pow(2,o-r)};n.write=function(t,e,n,r,i,o){var s,a,u;var l=o*8-i-1;var h=(1<<l)-1;var c=h>>1;var f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var g=r?0:o-1;var d=r?1:-1;var p=e<0||e===0&&1/e<0?1:0;e=Math.abs(e);if(isNaN(e)||e===Infinity){a=isNaN(e)?1:0;s=h}else{s=Math.floor(Math.log(e)/Math.LN2);if(e*(u=Math.pow(2,-s))<1){s--;u*=2}if(s+c>=1){e+=f/u}else{e+=f*Math.pow(2,1-c)}if(e*u>=2){s++;u/=2}if(s+c>=h){a=0;s=h}else if(s+c>=1){a=(e*u-1)*Math.pow(2,i);s=s+c}else{a=e*Math.pow(2,c-1)*Math.pow(2,i);s=0}}for(;i>=8;t[n+g]=a&255,g+=d,a/=256,i-=8){}s=s<<i|a;l+=i;for(;l>0;t[n+g]=s&255,g+=d,s/=256,l-=8){}t[n+g-d]|=p*128}},{}]},{},[6]);
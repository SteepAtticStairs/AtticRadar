(function(){function c(o,a,s){function u(n,e){if(!a[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return u(t||e)},i,i.exports,c,o,a,s)}return a[n].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}return c})()({1:[function(e,t,n){var A=e("../core/map/map");const j=e("../core/popup/AtticPopup");const D=e("./hash_string");const F=e("./colors/polygon_colors");const z=e("../core/menu/attic_dialog");const V=e("../core/utils");const q=e("chroma-js").default;const{DateTime:B}=e("luxon");function r(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function G(e,t){if(Array.isArray(e)){e=e[0]}if(e===e.toUpperCase()&&/^[a-zA-Z\s]*$/.test(e)){e=r(e)}e=e.replaceAll("MPH","mph");if(t=="Hail:"){e+='"'}return e}function Y(e){var t=typeof e=="undefined";if(t){return"None"}else{return e}}function i(e){e.originalEvent.cancelBubble=true;const t=A.queryRenderedFeatures(e.point);const n={};const r=[];const i=[];for(var o=0;o<e.features.length;o++){var a=e.features[o].properties;var s=JSON.parse(a.parameters);const L=D(JSON.stringify(a?.["@id"]));if(!r.includes(L)){r.push(L);var u=`${L}alert`;var l=F(a.event).color;var c=l;var f=q(l).darken(1.5);var h=q(l).luminance()>.4?"black":"white";var d="";function g(e,t){if(s.hasOwnProperty(e)){value=G(s[e],t);if(a.event=="Severe Thunderstorm Warning"){if(e=="maxHailSize"&&s.hasOwnProperty("hailThreat")){value+=`, ${G(s["hailThreat"])}`}if(e=="maxWindGust"&&s.hasOwnProperty("windThreat")){value+=`, ${G(s["windThreat"])}`}}d+=`<div><span class="alert_popup_lessertext">${t}</span> ${value}</div>`}}g("tornadoDetection","Tornado:");g("waterspoutDetection","Waterspout:");g("flashFloodDamageThreat","Damage Threat:");g("flashFloodDetection","Source:");g("maxHailSize","Hail:");g("maxWindGust","Wind:");var p;var v="Expires:";if(a.hasOwnProperty("ends")){p=a.ends}else{p=a.expires}var y=B.fromISO(p).toUTC().toJSDate();var m=B.now().toUTC().toJSDate();const R=V.getDateDiff(m,y);var _;var b="";var h="";var x=R.negative;if(R.s){_=`${R.s}s`}if(R.m){_=`${R.m}m ${R.s}s`}if(R.h){_=`${R.h}h ${R.m}m`}if(R.d){_=`${R.d}d ${R.h}h`}if(x){v="Expired:";b=" ago";h="rgba(229, 78, 78, 1)"}var w=Y(s.NWSheadline);var k=Y(a.headline);if(w=="None"){var E=k;k=w;w=E}var N=`<div style="font-weight: bold; font-size: 13px;">${a.event}</div>
<div><span class="alert_popup_lessertext">${v}</span> ${_} ${b}</div>
${d}\
<i id="${u}" class="alert_popup_info icon-blue fa fa-circle-info" style="color: rgb(255, 255, 255);"></i>`;i.push(N);var S=`<div style="white-space: pre-wrap;"><b><span style="display: block; margin-bottom: 1em;"></span>${Y(a.event)}
<hr>${Y(a.senderName)}</b>
<hr>${k}
<hr>${w}
<hr><b class="alertTextDescriber">Sent:</b><br>${V.printFancyTime(new Date(a.sent))}
<br><b class="alertTextDescriber">Description:</b><br>${Y(a.description)}
<br><b class="alertTextDescriber">Instructions:</b><br>${Y(a.instruction)}
<br><b class="alertTextDescriber">Areas affected:</b><br><i>${Y(a.areaDesc)}</i>
<br><b class="alertTextDescriber">WMO Identifier:</b><br>${Y(s.WMOidentifier)}
<b class="alertTextDescriber">VTEC:</b><br>${Y(s.VTEC)}</div>`;n[u]={title:`${a.event}`,body:S,color:l,textColor:q(l).luminance()>.4?"black":"white"}}}const M=$("<div></div>").css({position:"absolute",visibility:"hidden",height:"auto",width:"auto",whiteSpace:"nowrap",overflow:"visible",pointerEvents:"none",top:"-9999px",left:"-9999px"}).appendTo("body");var I=0;i.forEach(e=>{const t=$("<div></div>").html(e).appendTo(M);const n=t.outerWidth(true);if(n>I){I=n}t.remove()});M.remove();var O=`<div class="swiper mySwiper"><div class="swiper-wrapper">`;var C=`</div><div class="swiper-pagination"></div></div>`;for(var o=0;o<i.length;o++){var P=`<div class="swiper-slide">${i[o]}</div>`;O+=P}O+=C;const T=new j(e.lngLat,O);T.add_to_map();if(i.length>1){T.attic_popup_div.width(I);$(".attic_popup").css("padding-bottom",0)}T.attic_popup_div.width(`+=${$(".alert_popup_info").outerWidth()+parseInt($(".alert_popup_info").css("paddingRight"))*2}`);new Swiper(".mySwiper",{pagination:{el:".swiper-pagination",clickable:true},mousewheel:{forceToAxis:false,sensitivity:1}});T.update_popup_pos();$(".alert_popup_info").on("click",function(e){var t=$(this).attr("id");z({title:n[t].title,body:n[t].body,color:n[t].color,textColor:n[t].textColor})})}t.exports=i},{"../core/map/map":9,"../core/menu/attic_dialog":11,"../core/popup/AtticPopup":12,"../core/utils":13,"./colors/polygon_colors":3,"./hash_string":6,"chroma-js":15,luxon:117}],2:[function(e,t,n){const r={"Tsunami Warning":{priority:"1",colorName:"Tomato",rgb:"rgb(253, 99, 71)",hex:"#FD6347"},"Tornado Warning":{priority:"2",colorName:"Red",rgb:"rgb(233, 51, 35)",hex:"#FF0000",originalColor:"rgb(255, 0, 0)"},"Extreme Wind Warning":{priority:"3",colorName:"Darkorange",rgb:"rgb(255, 140, 0)",hex:"#FF8C00"},"Severe Thunderstorm Warning":{priority:"4",colorName:"Orange",rgb:"rgb(244, 185, 65)",hex:"#FFA500",originalColor:"rgb(255, 165, 0)"},"Flash Flood Warning":{priority:"5",colorName:"Darkred",rgb:"rgb(147, 241, 75)",hex:"#8B0000",originalColor:"rgb(139, 0, 0)"},"Flash Flood Statement":{priority:"6",colorName:"Darkred",rgb:"rgb(139, 0, 0)",hex:"#8B0000"},"Severe Weather Statement":{priority:"7",colorName:"Aqua",rgb:"rgb(0, 255, 255)",hex:"#00FFFF"},"Shelter In Place Warning":{priority:"8",colorName:"Salmon",rgb:"rgb(250, 128, 114)",hex:"#FA8072"},"Evacuation Immediate":{priority:"9",colorName:"Chartreuse",rgb:"rgb(127, 255, 0)",hex:"#7FFF00"},"Civil Danger Warning":{priority:"10",colorName:"Lightpink",rgb:"rgb(255, 182, 193)",hex:"#FFB6C1"},"Nuclear Power Plant Warning":{priority:"11",colorName:"Indigo",rgb:"rgb(75, 0, 130)",hex:"#4B0082"},"Radiological Hazard Warning":{priority:"12",colorName:"Indigo",rgb:"rgb(75, 0, 130)",hex:"#4B0082"},"Hazardous Materials Warning":{priority:"13",colorName:"Indigo",rgb:"rgb(75, 0, 130)",hex:"#4B0082"},"Fire Warning":{priority:"14",colorName:"Sienna",rgb:"rgb(160, 82, 45)",hex:"#A0522D"},"Civil Emergency Message":{priority:"15",colorName:"Lightpink",rgb:"rgb(255, 182, 193)",hex:"#FFB6C1"},"Law Enforcement Warning":{priority:"16",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},"Storm Surge Warning":{priority:"17",colorName:"Darkpurple",rgb:"rgb(76, 87, 246)",hex:"#B524F7",originalColor:"rgb(181, 36, 247)"},"Hurricane Force Wind Warning":{priority:"18",colorName:"Westernred",rgb:"rgb(205, 92, 92)",hex:"#CD5C5C"},"Hurricane Warning":{priority:"19",colorName:"Crimson",rgb:"rgb(199, 63, 155)",hex:"#DC143C",originalColor:"rgb(220, 20, 60)"},"Typhoon Warning":{priority:"20",colorName:"Crimson",rgb:"rgb(220, 20, 60)",hex:"#DC143C"},"Special Marine Warning":{priority:"21",colorName:"Orange",rgb:"rgb(197, 155, 249)",hex:"#FFA500",originalColor:"rgb(255, 165, 0)"},"Blizzard Warning":{priority:"22",colorName:"Orangered",rgb:"rgb(235, 78, 65)",hex:"#FF4500",originalColor:"rgb(255, 69, 0)"},"Snow Squall Warning":{priority:"23",colorName:"Mediumvioletred",rgb:"rgb(3, 0, 163)",hex:"#C71585",originalColor:"rgb(199, 21, 133)"},"Ice Storm Warning":{priority:"24",colorName:"Darkmagenta",rgb:"rgb(173, 74, 248)",hex:"#8B008B",originalColor:"rgb(139, 0, 139)"},"Winter Storm Warning":{priority:"25",colorName:"Hotpink",rgb:"rgb(240, 141, 233)",hex:"#FF69B4",originalColor:"rgb(255, 105, 180)"},"High Wind Warning":{priority:"26",colorName:"Goldenrod",rgb:"rgb(218, 165, 32)",hex:"#DAA520"},"Tropical Storm Warning":{priority:"27",colorName:"Firebrick",rgb:"rgb(251, 231, 88)",hex:"#B22222",originalColor:"rgb(178, 34, 34)"},"Storm Warning":{priority:"28",colorName:"Darkviolet",rgb:"rgb(148, 0, 211)",hex:"#9400D3"},"Tsunami Advisory":{priority:"29",colorName:"Chocolate",rgb:"rgb(210, 105, 30)",hex:"#D2691E"},"Tsunami Watch":{priority:"30",colorName:"Fushsia",rgb:"rgb(255, 0, 255)",hex:"#FF00FF"},"Avalanche Warning":{priority:"31",colorName:"Dodgerblue",rgb:"rgb(30, 144, 255)",hex:"#1E90FF"},"Earthquake Warning":{priority:"32",colorName:"Saddlebrown",rgb:"rgb(139, 69, 19)",hex:"#8B4513"},"Volcano Warning":{priority:"33",colorName:"darkslategray",rgb:"rgb(47, 79, 79)",hex:"#2F4F4F"},"Ashfall Warning":{priority:"34",colorName:"Darkgray",rgb:"rgb(169, 169, 169)",hex:"#A9A9A9"},"Coastal Flood Warning":{priority:"35",colorName:"Forestgreen",rgb:"rgb(34, 139, 34)",hex:"#228B22"},"Lakeshore Flood Warning":{priority:"36",colorName:"Forestgreen",rgb:"rgb(34, 139, 34)",hex:"#228B22"},"Flood Warning":{priority:"37",colorName:"Lime",rgb:"rgb(147, 241, 75)",hex:"#00FF00",originalColor:"rgb(0, 255, 0)"},"High Surf Warning":{priority:"38",colorName:"Forestgreen",rgb:"rgb(34, 139, 34)",hex:"#228B22"},"Dust Storm Warning":{priority:"39",colorName:"Bisque",rgb:"rgb(255, 228, 196)",hex:"#FFE4C4"},"Blowing Dust Warning":{priority:"40",colorName:"Bisque",rgb:"rgb(255, 228, 196)",hex:"#FFE4C4"},"Lake Effect Snow Warning":{priority:"41",colorName:"Darkcyan",rgb:"rgb(0, 139, 139)",hex:"#008B8B"},"Excessive Heat Warning":{priority:"42",colorName:"Mediumvioletred",rgb:"rgb(199, 21, 133)",hex:"#C71585"},"Tornado Watch":{priority:"43",colorName:"Yellow",rgb:"rgb(245, 254, 83)",hex:"#FFFF00",originalColor:"rgb(255, 255, 0)"},"Severe Thunderstorm Watch":{priority:"44",colorName:"Palevioletred",rgb:"rgb(238, 135, 134)",hex:"#DB7093",originalColor:"rgb(219, 112, 147)"},"Flash Flood Watch":{priority:"45",colorName:"Seagreen",rgb:"rgb(58, 111, 29)",hex:"#2E8B57",originalColor:"rgb(46, 139, 87)"},"Gale Warning":{priority:"46",colorName:"Plum",rgb:"rgb(50, 111, 255)",hex:"#DDA0DD",originalColor:"rgb(221, 160, 221)"},"Flood Statement":{priority:"47",colorName:"Lime",rgb:"rgb(0, 255, 0)",hex:"#00FF00"},"Wind Chill Warning":{priority:"48",colorName:"Lightsteelblue",rgb:"rgb(176, 196, 222)",hex:"#B0C4DE"},"Extreme Cold Warning":{priority:"49",colorName:"Blue",rgb:"rgb(0, 0, 255)",hex:"#0000FF"},"Hard Freeze Warning":{priority:"50",colorName:"Darkviolet",rgb:"rgb(148, 0, 211)",hex:"#9400D3"},"Freeze Warning":{priority:"51",colorName:"Darkslateblue",rgb:"rgb(72, 61, 139)",hex:"#483D8B"},"Red Flag Warning":{priority:"52",colorName:"Deeppink",rgb:"rgb(255, 20, 147)",hex:"#FF1493"},"Storm Surge Watch":{priority:"53",colorName:"Lightpurple",rgb:"rgb(165, 202, 182)",hex:"#DB7FF7",originalColor:"rgb(219, 127, 247)"},"Hurricane Watch":{priority:"54",colorName:"Magenta",rgb:"rgb(234, 51, 247)",hex:"#FF00FF",originalColor:"rgb(255, 0, 255)"},"Hurricane Force Wind Watch":{priority:"55",colorName:"Darkorchid",rgb:"rgb(153, 50, 204)",hex:"#9932CC"},"Typhoon Watch":{priority:"56",colorName:"Magenta",rgb:"rgb(255, 0, 255)",hex:"#FF00FF"},"Tropical Storm Watch":{priority:"57",colorName:"Lightcoral",rgb:"rgb(239, 127, 131)",hex:"#F08080",originalColor:"rgb(240, 128, 128)"},"Storm Watch":{priority:"58",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Hurricane Local Statement":{priority:"59",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Typhoon Local Statement":{priority:"60",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Tropical Storm Local Statement":{priority:"61",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Tropical Depression Local Statement":{priority:"62",colorName:"Moccasin",rgb:"rgb(255, 228, 181)",hex:"#FFE4B5"},"Avalanche Advisory":{priority:"63",colorName:"Peru",rgb:"rgb(205, 133, 63)",hex:"#CD853F"},"Winter Weather Advisory":{priority:"64",colorName:"Mediumslateblue",rgb:"rgb(167, 129, 249)",hex:"#7B68EE",originalColor:"rgb(123, 104, 238)"},"Wind Chill Advisory":{priority:"65",colorName:"Paleturquoise",rgb:"rgb(175, 238, 238)",hex:"#AFEEEE"},"Heat Advisory":{priority:"66",colorName:"Coral",rgb:"rgb(255, 127, 80)",hex:"#FF7F50"},"Urban and Small Stream Flood Advisory":{priority:"67",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Small Stream Flood Advisory":{priority:"68",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Arroyo and Small Stream Flood Advisory":{priority:"69",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Flood Advisory":{priority:"70",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Hydrologic Advisory":{priority:"71",colorName:"Springgreen",rgb:"rgb(0, 255, 127)",hex:"#00FF7F"},"Lakeshore Flood Advisory":{priority:"72",colorName:"Lawngreen",rgb:"rgb(124, 252, 0)",hex:"#7CFC00"},"Coastal Flood Advisory":{priority:"73",colorName:"Lawngreen",rgb:"rgb(124, 252, 0)",hex:"#7CFC00"},"High Surf Advisory":{priority:"74",colorName:"Mediumorchid",rgb:"rgb(186, 85, 211)",hex:"#BA55D3"},"Heavy Freezing Spray Warning":{priority:"75",colorName:"Deepskyblue",rgb:"rgb(0, 191, 255)",hex:"#00BFFF"},"Dense Fog Advisory":{priority:"76",colorName:"Slategray",rgb:"rgb(112, 128, 144)",hex:"#708090"},"Dense Smoke Advisory":{priority:"77",colorName:"Khaki",rgb:"rgb(240, 230, 140)",hex:"#F0E68C"},"Small Craft Advisory For Hazardous Seas":{priority:"78",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Small Craft Advisory for Rough Bar":{priority:"79",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Small Craft Advisory for Winds":{priority:"80",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Small Craft Advisory":{priority:"81",colorName:"Thistle",rgb:"rgb(109, 186, 150)",hex:"#D8BFD8",originalColor:"rgb(216, 191, 216)"},"Brisk Wind Advisory":{priority:"82",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Hazardous Seas Warning":{priority:"83",colorName:"Thistle",rgb:"rgb(216, 191, 216)",hex:"#D8BFD8"},"Dust Advisory":{priority:"84",colorName:"Darkkhaki",rgb:"rgb(189, 183, 107)",hex:"#BDB76B"},"Blowing Dust Advisory":{priority:"85",colorName:"Darkkhaki",rgb:"rgb(189, 183, 107)",hex:"#BDB76B"},"Lake Wind Advisory":{priority:"86",colorName:"Tan",rgb:"rgb(210, 180, 140)",hex:"#D2B48C"},"Wind Advisory":{priority:"87",colorName:"Tan",rgb:"rgb(210, 180, 140)",hex:"#D2B48C"},"Frost Advisory":{priority:"88",colorName:"Cornflowerblue",rgb:"rgb(100, 149, 237)",hex:"#6495ED"},"Ashfall Advisory":{priority:"89",colorName:"Dimgray",rgb:"rgb(105, 105, 105)",hex:"#696969"},"Freezing Fog Advisory":{priority:"90",colorName:"Teal",rgb:"rgb(0, 128, 128)",hex:"#008080"},"Freezing Spray Advisory":{priority:"91",colorName:"Deepskyblue",rgb:"rgb(0, 191, 255)",hex:"#00BFFF"},"Low Water Advisory":{priority:"92",colorName:"Brown",rgb:"rgb(165, 42, 42)",hex:"#A52A2A"},"Local Area Emergency":{priority:"93",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},"Avalanche Watch":{priority:"94",colorName:"Sandybrown",rgb:"rgb(244, 164, 96)",hex:"#F4A460"},"Blizzard Watch":{priority:"95",colorName:"Greenyellow",rgb:"rgb(234, 254, 89)",hex:"#ADFF2F",originalColor:"rgb(173, 255, 47)"},"Rip Current Statement":{priority:"96",colorName:"Turquoise",rgb:"rgb(64, 224, 208)",hex:"#40E0D0"},"Beach Hazards Statement":{priority:"97",colorName:"Turquoise",rgb:"rgb(64, 224, 208)",hex:"#40E0D0"},"Gale Watch":{priority:"98",colorName:"Pink",rgb:"rgb(102, 147, 255)",hex:"#FFC0CB",originalColor:"rgb(255, 192, 203)"},"Winter Storm Watch":{priority:"99",colorName:"Steelblue",rgb:"rgb(57, 129, 247)",hex:"#4682B4",originalColor:"rgb(70, 130, 180)"},"Hazardous Seas Watch":{priority:"100",colorName:"Darkslateblue",rgb:"rgb(72, 61, 139)",hex:"#483D8B"},"Heavy Freezing Spray Watch":{priority:"101",colorName:"Rosybrown",rgb:"rgb(188, 143, 143)",hex:"#BC8F8F"},"Coastal Flood Watch":{priority:"102",colorName:"Mediumaquamarine",rgb:"rgb(102, 205, 170)",hex:"#66CDAA"},"Lakeshore Flood Watch":{priority:"103",colorName:"Mediumaquamarine",rgb:"rgb(102, 205, 170)",hex:"#66CDAA"},"Flood Watch":{priority:"104",colorName:"Seagreen",rgb:"rgb(58, 111, 29)",hex:"#2E8B57",originalColor:"rgb(46, 139, 87)"},"High Wind Watch":{priority:"105",colorName:"Darkgoldenrod",rgb:"rgb(184, 134, 11)",hex:"#B8860B"},"Excessive Heat Watch":{priority:"106",colorName:"Maroon",rgb:"rgb(128, 0, 0)",hex:"#800000"},"Extreme Cold Watch":{priority:"107",colorName:"Blue",rgb:"rgb(0, 0, 255)",hex:"#0000FF"},"Wind Chill Watch":{priority:"108",colorName:"Cadetblue",rgb:"rgb(95, 158, 160)",hex:"#5F9EA0"},"Lake Effect Snow Watch":{priority:"109",colorName:"Lightskyblue",rgb:"rgb(135, 206, 250)",hex:"#87CEFA"},"Hard Freeze Watch":{priority:"110",colorName:"Royalblue",rgb:"rgb(65, 105, 225)",hex:"#4169E1"},"Freeze Watch":{priority:"111",colorName:"Cyan",rgb:"rgb(0, 255, 255)",hex:"#00FFFF"},"Fire Weather Watch":{priority:"112",colorName:"Navajowhite",rgb:"rgb(255, 222, 173)",hex:"#FFDEAD"},"Extreme Fire Danger":{priority:"113",colorName:"Darksalmon",rgb:"rgb(233, 150, 122)",hex:"#E9967A"},"911 Telephone Outage":{priority:"114",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},"Coastal Flood Statement":{priority:"115",colorName:"Olivedrab",rgb:"rgb(107, 142, 35)",hex:"#6B8E23"},"Lakeshore Flood Statement":{priority:"116",colorName:"Olivedrab",rgb:"rgb(107, 142, 35)",hex:"#6B8E23"},"Special Weather Statement":{priority:"117",colorName:"Moccasin",rgb:"rgb(151, 204, 230)",hex:"#FFE4B5",originalColor:"rgb(255, 228, 181)"},"Marine Weather Statement":{priority:"118",colorName:"Peachpuff",rgb:"rgb(255, 239, 213)",hex:"#FFDAB9"},"Air Quality Alert":{priority:"119",colorName:"Gray",rgb:"rgb(128, 128, 128)",hex:"#808080"},"Air Stagnation Advisory":{priority:"120",colorName:"Gray",rgb:"rgb(128, 128, 128)",hex:"#808080"},"Hazardous Weather Outlook":{priority:"121",colorName:"Palegoldenrod",rgb:"rgb(238, 232, 170)",hex:"#EEE8AA"},"Hydrologic Outlook":{priority:"122",colorName:"Lightgreen",rgb:"rgb(144, 238, 144)",hex:"#90EE90"},"Short Term Forecast":{priority:"123",colorName:"Palegreen",rgb:"rgb(152, 251, 152)",hex:"#98FB98"},"Administrative Message":{priority:"124",colorName:"Silver",rgb:"rgb(192, 192, 192)",hex:"#C0C0C0"},Test:{priority:"125",colorName:"Azure",rgb:"rgb(240, 255, 255)",hex:"#F0FFFF"},"Child Abduction Emergency":{priority:"126",colorName:"Transperant",rgb:"rgb(255, 255, 255)",hex:"#FFFFFF"},"Blue Alert":{priority:"127",colorName:"Transperant",rgb:"rgb(255, 255, 255)",hex:"#FFFFFF"}};t.exports=r},{}],3:[function(e,t,n){var r=e("./noaa_colors");const i={"Tornado Watch":"rgb(117, 20, 12)","Severe Thunderstorm Watch":"rgb(128, 128, 38)"};function o(e){if(Object.keys(r).includes(e)){var t=r[e].rgb;if(i.hasOwnProperty(e)){t=i[e]}return{color:t,priority:r[e].priority}}else{return{color:"rgb(128, 128, 128)",priority:"999"}}}t.exports=o},{"./noaa_colors":2}],4:[function(e,t,n){const r=e("./fetch_data");r()},{"./fetch_data":5}],5:[function(e,t,n){const r=e("./plot_alerts");const a=e("../core/utils");const s=e("pako");const i=`https://api.weather.gov/alerts/active`;const o="https://atticradar.steepatticstairs.net/";const u=[`${o}app/alerts/zones/forecast_zones.js.gz`,`${o}app/alerts/zones/county_zones.js.gz`,`${o}app/alerts/zones/fire_zones.js.gz`];var l=new Headers;l.append("pragma","no-cache");l.append("cache-control","no-cache");var c=0;function f(r,i=0){if(window.attic_data.loaded_zones==undefined||window.attic_data.loaded_zones==false){const o=Date.now();if(window.attic_data.loaded_zones){r();return}fetch(u[i]).then(e=>e.arrayBuffer()).then(e=>{c+=e.byteLength;const t=s.inflate(e,{to:"string"});var n=document.createElement("script");n.type="text/javascript";n.innerHTML=t;document.head.appendChild(n);if(i<u.length-1){f(r,i+1)}else{console.log(`Loaded alert zone dictionaries with a size length of ${a.formatBytes(c)} in ${Date.now()-o} ms`);r()}})}else{r()}}function h(t){const n=Date.now();fetch(i,{cache:"no-store"}).then(e=>e.json()).then(e=>{console.log(`Fetched alert data from the NWS in ${Date.now()-n} ms`);t(e)})}function d(){h(e=>{r(e);window.attic_data.current_alerts_data=JSON.parse(JSON.stringify(e));f(()=>{if(window.attic_data.loaded_zones==undefined||window.attic_data.loaded_zones==false){window.attic_data.loaded_zones=true}r(e)})})}t.exports=d},{"../core/utils":13,"./plot_alerts":7,pako:118}],6:[function(e,t,n){function r(e){return window.btoa(encodeURIComponent(e))}function i(e){var t=0,n,r;if(e.length===0)return t;for(n=0;n<e.length;n++){r=e.charCodeAt(n);t=(t<<5)-t+r;t|=0}return t}t.exports=i},{}],7:[function(e,t,n){const r=e("../core/map/map");const d=e("./colors/polygon_colors");const g=e("@turf/turf");const i=e("./click_listener");function p(e){if(r.getSource("alerts_source")){r.getSource("alerts_source").setData(e)}else{r.addSource("alerts_source",{type:"geojson",data:e});r.addLayer({id:"alerts_layer_fill",type:"fill",source:"alerts_source",paint:{"fill-color":["get","color"],"fill-opacity":["case",["==",["get","is_zone"],true],.5,0]}});r.addLayer({id:"alerts_layer",type:"line",source:"alerts_source",paint:{"line-color":["case",["==",["get","type"],"outline"],["get","color"],["==",["get","type"],"border"],"black","rgba(0, 0, 0, 0)"],"line-width":["case",["==",["get","is_zone"],true],.5,["==",["get","type"],"outline"],2,["==",["get","type"],"border"],5,0]}});r.on("mouseover","alerts_layer_fill",function(e){r.getCanvas().style.cursor="pointer"});r.on("mouseout","alerts_layer_fill",function(e){r.getCanvas().style.cursor=""});r.on("click","alerts_layer_fill",i)}}function v(e){e.features=e.features.sort((e,t)=>t.properties.priority-e.properties.priority);return e}function o(e){const t=Date.now();e=JSON.parse(JSON.stringify(e));for(var n in e.features){var r=d(e.features[n].properties.event);e.features[n].properties.color=r.color;e.features[n].properties.priority=parseInt(r.priority)}if(window.attic_data.loaded_zones){const u=[];for(var i=0;i<e.features.length;i++){const l=e.features[i];if(l.geometry==null){const c=l.properties.affectedZones;for(var o=0;o<c.length;o++){var a;if(c[o].includes("forecast")){const f=c[o].replace("https://api.weather.gov/zones/forecast/","");a=forecast_zones[f]}else if(c[o].includes("county")){const f=c[o].replace("https://api.weather.gov/zones/county/","");a=county_zones[f]}else if(c[o].includes("fire")){const f=c[o].replace("https://api.weather.gov/zones/fire/","");a=fire_zones[f]}if(a!=undefined){const h=g.feature(a.geometry,e.features[i].properties);h.id=e.features[i].id;h.properties.is_zone=true;u.push(h)}}}}e.features=e.features.concat(u)}var s=[];e.features.forEach(e=>{if(e.properties.is_zone==true){var t=JSON.parse(JSON.stringify(e));t.properties.type="outline";t.properties.priority+=1e3;s.push(t)}else{var n=JSON.parse(JSON.stringify(e));n.properties.type="border";var t=JSON.parse(JSON.stringify(e));t.properties.type="outline";s.push(n,t)}});e.features=s;e=v(e);p(e);console.log(`Plotted alerts onto the map in ${Date.now()-t} ms`)}t.exports=o},{"../core/map/map":9,"./click_listener":1,"./colors/polygon_colors":3,"@turf/turf":14}],8:[function(t,e,n){window.attic_data={};function r(){t("../map/update_style");t("../../alerts/entry")}function i(){const e=t("../map/map");if(e.loaded()){r()}else{e.on("load",function(){r()})}}if(document.readyState=="complete"||document.readyState=="interactive"){i()}else if(document.readyState=="loading"){window.onload=function(){i()}}},{"../../alerts/entry":4,"../map/map":9,"../map/update_style":10}],9:[function(e,t,n){const r="https://tiles.openfreemap.org/styles/dark";window.attic_data.style_url=r;const i=new maplibregl.Map({container:"map",style:r,zoom:3,center:[-97.3302,38.5667],maxZoom:20,preserveDrawingBuffer:true,maxPitch:0,fadeDuration:0,attributionControl:true,projection:"mercator"});$(".maplibregl-ctrl-attrib-button").click();i.touchZoomRotate.disableRotation();i.dragRotate.disable();i.keyboard.disableRotation();$("#map").on("contextmenu",function(e){if($(e.target).hasClass("maplibregl-canvas")){e.preventDefault()}});setTimeout(()=>i.resize(),0);window.onresize=()=>{i.resize()};window.onclick=()=>{i.resize()};t.exports=i},{}],10:[function(e,t,n){const s=e("./map");function r(){const a=Date.now();fetch(window.attic_data.style_url,{cache:"no-store"}).then(e=>e.json()).then(e=>{try{const r=[];for(var t=0;t<e.layers.length;t++){if(e.layers[t]?.layout?.["text-transform"]=="uppercase"){r.push(e.layers[t])}}const i=["place_country_major","place_country_minor","place_country_other"];for(var n=0;n<r.length;n++){const o=r[n].id;if(!i.includes(o)){s.setLayoutProperty(o,"text-transform","none")}else{s.setPaintProperty(o,"text-color","rgb(200, 200, 200)")}}console.log(`Updated map style in ${Date.now()-a} ms`)}catch(e){console.error(e)}})}r();t.exports=r},{"./map":9}],11:[function(e,t,n){function r(e){var t=e.title;var n=e.body;var r=e.color;var i=e.textColor;$("#attic_dialog").show();$("#attic_dialog_header_text").html(t);$("#attic_dialog_header").css("background-color",r);$("#attic_dialog_header").css("color",i);$("#attic_dialog_close").css("color",i);$("#attic_dialog_body").scrollTop(0);$("#attic_dialog_body").html(n)}$("#attic_dialog").on("click",function(e){var t=$(e.target).attr("id");if(t=="attic_dialog"||t=="attic_dialog_close"){$(this).hide()}});t.exports=r},{}],12:[function(e,t,n){const i=e("../map/map");class r{constructor(e,t){if(Array.isArray(e)){e=new maplibregl.LngLat(...e)}this.lngLat=e;this.html_content=t;this._init()}_init(){$(".attic_popup").remove();this.attic_popup_div=$("<div>",{class:"attic_popup"}).html(this.html_content)}add_to_map(){$("body").append(this.attic_popup_div);this.update_popup_pos();i.on("move",this._move);i.on("click",this._click)}remove(){this.attic_popup_div.remove();i.off("move",this._move);i.off("click",this._click)}update_popup_pos(){const e=i.project(this.lngLat);const t=10;const n=e.x-this.attic_popup_div.outerWidth()/2;const r=e.y-this.attic_popup_div.outerHeight()-t;this.attic_popup_div.css({left:n,top:r})}_move=()=>{this.update_popup_pos.apply(this,[])};_click=()=>{this.remove.apply(this,[])}}t.exports=r},{"../map/map":9}],13:[function(e,t,n){const r="https://corsproxy.io/?url=";function i(e,t){var n=(new Date).toLocaleTimeString(undefined,{timeZoneName:"short"}).split(" ")[2];if(t=="UTC"){n="UTC"}return e.toLocaleDateString(undefined,{timeZone:t})+" "+e.toLocaleTimeString(undefined,{timeZone:t})+` ${n}`}function u(e){if(typeof e=="string"){parser=new DOMParser;e=parser.parseFromString(e,"text/xml")}var t={};if(e.nodeType==1){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(e.nodeType==3||e.nodeType==4){t=e.nodeValue}if(e.hasChildNodes()){for(var i=0;i<e.childNodes.length;i++){var o=e.childNodes.item(i);var a=o.nodeName;if(typeof t[a]=="undefined"){t[a]=u(o)}else{if(typeof t[a].length=="undefined"){var s=t[a];t[a]=[];t[a].push(s)}if(typeof t[a]==="object"){t[a].push(u(o))}}}}return t}function o(e,t=2){if(e===0)return"0 Bytes";var n=1024;var r=t<0?0:t;var i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];var o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(r))+" "+i[o]}function a(e,t,n){console.log(`%c${e}`,`color: ${t}; ${n}`)}function s(e,t,n,r,i){return(e-t)*(i-r)/(n-t)+r}function l(e){var t=new Date;return e+=`&?nocache=${t.getTime()}`}function c(e,t){var n=Date.parse(t)-Date.parse(e);var r=n<0;if(r){n=Math.abs(n)}return isNaN(n)?NaN:{ms:Math.floor(n%1e3),s:Math.floor(n/1e3%60),m:Math.floor(n/6e4%60),h:Math.floor(n/36e5%24),d:Math.floor(n/864e5),negative:r}}function f(e){function t(e){return e.trim().length===0}var n={};var r=e.split("\n");for(var i in r){var o=r[i].split(",");for(var a in o){o[a]=o[a].replace(/ /g,"")}n[i]=o}return n}t.exports={phpProxy:r,printFancyTime:i,xmlToJson:u,formatBytes:o,colorLog:a,scale:s,preventFileCaching:l,getDateDiff:c,csvToJson:f}},{}],14:[function(e,n,r){!function(e,t){"object"==typeof r&&"undefined"!=typeof n?t(r):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).turf={})}(this,function(e){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e){if(Array.isArray(e))return e}function o(e,t,n){return t=s(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function F(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function _(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function K(e,t){return m(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||I(e,t)||k()}function M(e){return function(e){if(Array.isArray(e))return r(e)}(e)||_(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function I(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}var g=6371008.8,y={centimeters:100*g,centimetres:100*g,degrees:360/(2*Math.PI),feet:3.28084*g,inches:39.37*g,kilometers:g/1e3,kilometres:g/1e3,meters:g,metres:g,miles:g/1609.344,millimeters:1e3*g,millimetres:1e3*g,nauticalmiles:g/1852,radians:1,yards:1.0936*g},O={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function t(e,t){switch(e){case"Point":return G(t).geometry;case"LineString":return Y(t).geometry;case"Polygon":return z(t).geometry;case"MultiPoint":return ne(t).geometry;case"MultiLineString":return te(t).geometry;case"MultiPolygon":return re(t).geometry;default:throw new Error(e+" is invalid")}}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!W(e[0])||!W(e[1]))throw new Error("coordinates must contain numbers");return B({type:"Point",coordinates:e},t,n)}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return U(e.map(function(e){return G(e,t)}),n)}function z(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=F(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}catch(e){i.e(e)}finally{i.f()}return B({type:"Polygon",coordinates:e},t,r)}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return U(e.map(function(e){return z(e,t)}),n)}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return B({type:"LineString",coordinates:e},t,n)}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return U(e.map(function(e){return Y(e,t)}),n)}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function te(e,t){return B({type:"MultiLineString",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ne(e,t){return B({type:"MultiPoint",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function re(e,t){return B({type:"MultiPolygon",coordinates:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ie(e,t){return B({type:"GeometryCollection",geometries:e},t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t&&!(t>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,t||0);return Math.round(e*n)/n}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=y[t];if(!n)throw new Error(t+" units is invalid");return e*n}function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=y[t];if(!n)throw new Error(t+" units is invalid");return e/n}function ue(e,t){return fe(se(e,t))}function le(e){var t=e%360;return t<0&&(t+=360),t}function ce(e){return(e%=360)>180?e-360:e<-180?e+360:e}function fe(e){return 180*(e%(2*Math.PI))/Math.PI}function b(e){return e%360*Math.PI/180}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kilometers",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(e>=0))throw new Error("length must be a positive number");return ae(se(e,t),n)}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"kilometers";if(!(e>=0))throw new Error("area must be a positive number");var r=O[t];if(!r)throw new Error("invalid original units");var i=O[n];if(!i)throw new Error("invalid final units");return e/r*i}function W(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}function Z(e){return null!==e&&"object"===_r(e)&&!Array.isArray(e)}function ge(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!W(e))throw new Error("bbox must only contain numbers")})}function pe(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(_r(e)))throw new Error("id must be a number or a string")}var ve=Object.freeze({__proto__:null,areaFactors:O,azimuthToBearing:ce,bearingToAzimuth:le,convertArea:de,convertLength:he,degreesToRadians:b,earthRadius:g,factors:y,feature:B,featureCollection:U,geometry:t,geometryCollection:ie,isNumber:W,isObject:Z,lengthToDegrees:ue,lengthToRadians:se,lineString:Y,lineStrings:ee,multiLineString:te,multiPoint:ne,multiPolygon:re,point:G,points:q,polygon:z,polygons:Q,radiansToDegrees:fe,radiansToLength:ae,round:oe,validateBBox:ge,validateId:pe});function X(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return M(e.geometry.coordinates);if("Point"===e.type)return M(e.coordinates)}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return M(e);throw new Error("coord must be GeoJSON Point or an Array of numbers")}function E(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ye(e){if(e.length>1&&W(e[0])&&W(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return ye(e[0]);throw new Error("coordinates must only contain numbers")}function me(e,t,n){if(!t||!n)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.type)}function _e(e,t,n){if(!e)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+e.geometry.type)}function be(e,t,n){if(!e)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+n+", FeatureCollection required");var r,i=F(e.features);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+n+": must be a "+t+", given "+o.geometry.type)}}catch(e){i.e(e)}finally{i.f()}}function H(e){return"Feature"===e.type?e.geometry:e}function xe(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}var we=Object.freeze({__proto__:null,collectionOf:be,containsNumber:ye,featureOf:_e,geojsonType:me,getCoord:X,getCoords:E,getGeom:H,getType:xe});function ke(e,t){if(!0===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final)return function(e,t){var n=ke(t,e);return n=(n+180)%360}(e,t);var n=X(e),r=X(t),i=b(n[0]),o=b(r[0]),a=b(n[1]),s=b(r[1]),u=Math.sin(o-i)*Math.cos(s),l=Math.cos(a)*Math.sin(s)-Math.sin(a)*Math.cos(s)*Math.cos(o-i);return fe(Math.atan2(u,l))}function Ee(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=X(e),o=b(i[0]),a=b(i[1]),s=b(n),u=se(t,r.units),l=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s));return G([fe(o+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(l))),fe(l)],r.properties)}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=X(e),i=X(t),o=b(i[1]-r[1]),a=b(i[0]-r[0]),s=b(r[1]),u=b(i[1]),l=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return ae(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}function Ne(e,t){var n;return(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).final?Se(X(t),X(e)):Se(X(e),X(t)))>180?-(360-n):n}function Se(e,t){var n=b(e[1]),r=b(t[1]),i=b(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(fe(Math.atan2(i,o))+360)%360}function w(e,t,n){if(null!==e)for(var r,i,o,a,s,u,l,c,f=0,h=0,d=e.type,g="FeatureCollection"===d,p="Feature"===d,v=g?e.features.length:1,y=0;y<v;y++){s=(c=!!(l=g?e.features[y].geometry:p?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var m=0;m<s;m++){var _=0,b=0;if(null!==(a=c?l.geometries[m]:l)){u=a.coordinates;var x=a.type;switch(f=!n||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===t(u,h,y,_,b))return!1;h++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===t(u[r],h,y,_,b))return!1;h++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-f;i++){if(!1===t(u[r][i],h,y,_,b))return!1;h++}"MultiLineString"===x&&_++,"Polygon"===x&&b++}"Polygon"===x&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-f;o++){if(!1===t(u[r][i][o],h,y,_,b))return!1;h++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===w(a.geometries[r],t,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Me(e,o,a,t){var s=a;return w(e,function(e,t,n,r,i){s=0===t&&void 0===a?e:o(s,e,t,n,r,i)},t),s}function Ie(e,t){var n;switch(e.type){case"FeatureCollection":for(n=0;n<e.features.length&&!1!==t(e.features[n].properties,n);n++);break;case"Feature":t(e.properties,0)}}function Oe(e,n,r){var i=r;return Ie(e,function(e,t){i=0===t&&void 0===r?e:n(i,e,t)}),i}function N(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length&&!1!==t(e.features[n],n);n++);}function Ce(e,n,r){var i=r;return N(e,function(e,t){i=0===t&&void 0===r?e:n(i,e,t)}),i}function Pe(e){var t=[];return w(e,function(e){t.push(e)}),t}function Te(e,t){var n,r,i,o,a,s,u,l,c,f,h=0,d="FeatureCollection"===e.type,g="Feature"===e.type,p=d?e.features.length:1;for(n=0;n<p;n++){for(s=d?e.features[n].geometry:g?e.geometry:e,l=d?e.features[n].properties:g?e.properties:{},c=d?e.features[n].bbox:g?e.bbox:void 0,f=d?e.features[n].id:g?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(o,h,l,c,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===t(o.geometries[r],h,l,c,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,h,l,c,f))return!1;h++}}function Le(e,o,a){var s=a;return Te(e,function(e,t,n,r,i){s=0===t&&void 0===a?e:o(s,e,t,n,r,i)}),s}function x(e,l){Te(e,function(e,t,n,r,i){var o,a=null===e?null:e.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==l(B(e,n,{bbox:r,id:i}),t,0)&&void 0}switch(a){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var s=0;s<e.coordinates.length;s++){var u=e.coordinates[s];if(!1===l(B({type:o,coordinates:u},n),t,s))return!1}})}function Re(e,r,i){var o=i;return x(e,function(e,t,n){o=0===t&&0===n&&void 0===i?e:r(o,e,t,n)}),o}function Ae(e,g){x(e,function(a,s,u){var l=0;if(a.geometry){var e=a.geometry.type;if("Point"!==e&&"MultiPoint"!==e){var c,f=0,h=0,d=0;return!1!==w(a,function(e,t,n,r,i){if(void 0===c||s>f||r>h||i>d)return c=e,f=s,h=r,d=i,void(l=0);var o=Y([c,e],a.properties);if(!1===g(o,s,u,i,l))return!1;l++,c=e})&&void 0}}})}function je(e,o,a){var s=a,u=!1;return Ae(e,function(e,t,n,r,i){s=!1===u&&void 0===a?e:o(s,e,t,n,r,i),u=!0}),s}function De(e,a){if(!e)throw new Error("geojson is required");x(e,function(e,t,n){if(null!==e.geometry){var r=e.geometry.type,i=e.geometry.coordinates;switch(r){case"LineString":if(!1===a(e,t,n,0,0))return!1;break;case"Polygon":for(var o=0;o<i.length;o++)if(!1===a(Y(i[o],e.properties),t,n,o))return!1}}})}function Fe(e,i,o){var a=o;return De(e,function(e,t,n,r){a=0===t&&void 0===o?e:i(a,e,t,n,r)}),a}function ze(e,t){if(!Z(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.segmentIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":s=s||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),Y([u[a],u[a+1]],s,t);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),Y([u[o][a],u[o][a+1]],s,t);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),Y([u[i][a],u[i][a+1]],s,t);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),Y([u[i][o][a],u[i][o][a+1]],s,t)}throw new Error("geojson is invalid")}function Ve(e,t){if(!Z(t=t||{}))throw new Error("options is invalid");var n,r=t.featureIndex||0,i=t.multiFeatureIndex||0,o=t.geometryIndex||0,a=t.coordIndex||0,s=t.properties;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),s=s||e.features[r].properties,n=e.features[r].geometry;break;case"Feature":s=s||e.properties,n=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=e;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return G(u,s,t);case"MultiPoint":return i<0&&(i=u.length+i),G(u[i],s,t);case"LineString":return a<0&&(a=u.length+a),G(u[a],s,t);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),G(u[o][a],s,t);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),G(u[i][a],s,t);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),G(u[i][o][a],s,t)}throw new Error("geojson is invalid")}var qe=Object.freeze({__proto__:null,coordAll:Pe,coordEach:w,coordReduce:Me,featureEach:N,featureReduce:Ce,findPoint:Ve,findSegment:ze,flattenEach:x,flattenReduce:Re,geomEach:Te,geomReduce:Le,lineEach:De,lineReduce:Fe,propEach:Ie,propReduce:Oe,segmentEach:Ae,segmentReduce:je});function Be(e){return Le(e,function(e,t){return e+function(e){var t,n=0;switch(e.type){case"Polygon":return Ge(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=Ge(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}function Ge(e){var t=0;if(e&&e.length>0){t+=Math.abs(We(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(We(e[n]))}return t}var Ye=g*g/2,Ue=Math.PI/180;function We(e){var t=e.length-1;if(t<=2)return 0;for(var n=0,r=0;r<t;){var i=e[r],o=e[r+1===t?0:r+1],a=e[r+2>=t?(r+2)%t:r+2],s=i[0]*Ue,u=o[1]*Ue;n+=(a[0]*Ue-s)*Math.sin(u),r++}return n*Ye}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e.bbox&&!0!==t.recompute)return e.bbox;var n=[1/0,1/0,-1/0,-1/0];return w(e,function(e){n[0]>e[0]&&(n[0]=e[0]),n[1]>e[1]&&(n[1]=e[1]),n[2]<e[0]&&(n[2]=e[0]),n[3]<e[1]&&(n[3]=e[1])}),n}function Ze(e,t){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(He(i=e[e.length-1],t)&r),a=0;a<e.length;a++)(u=!(He(s=e[a],t)&r))!==o&&n.push(Xe(i,s,r,t)),u&&n.push(s),i=s,o=u;if(!(e=n).length)break}return n}function Xe(e,t,n,r){return 8&n?[e[0]+(t[0]-e[0])*(r[3]-e[1])/(t[1]-e[1]),r[3]]:4&n?[e[0]+(t[0]-e[0])*(r[1]-e[1])/(t[1]-e[1]),r[1]]:2&n?[r[2],e[1]+(t[1]-e[1])*(r[2]-e[0])/(t[0]-e[0])]:1&n?[r[0],e[1]+(t[1]-e[1])*(r[0]-e[0])/(t[0]-e[0])]:null}function He(e,t){var n=0;return e[0]<t[0]?n|=1:e[0]>t[2]&&(n|=2),e[1]<t[1]?n|=4:e[1]>t[3]&&(n|=8),n}function $e(e,t){var n,r=[],i=F(e);try{for(i.s();!(n=i.n()).done;){var o=Ze(n.value,t);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&r.push(o))}}catch(e){i.e(e)}finally{i.f()}return r}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Number(e[0]),r=Number(e[1]),i=Number(e[2]),o=Number(e[3]);if(6===e.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return z([[a,[i,r],[i,o],[n,o],a]],t.properties,{bbox:e,id:t.id})}var Ke=function(){return i(function e(t){d(this,e),this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var n=0;n<this.length;n++)this.points[n].z=this.points[n].z||0;for(var r=0;r<this.length-1;r++){var i=this.points[r],o=this.points[r+1];this.centers.push({x:(i.x+o.x)/2,y:(i.y+o.y)/2,z:(i.z+o.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var a=0;a<this.centers.length-1;a++){var s=this.points[a+1].x-(this.centers[a].x+this.centers[a+1].x)/2,u=this.points[a+1].y-(this.centers[a].y+this.centers[a+1].y)/2,l=this.points[a+1].z-(this.centers[a].y+this.centers[a+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a].x+s),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a].y+u),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a].z+l)},{x:(1-this.sharpness)*this.points[a+1].x+this.sharpness*(this.centers[a+1].x+s),y:(1-this.sharpness)*this.points[a+1].y+this.sharpness*(this.centers[a+1].y+u),z:(1-this.sharpness)*this.points[a+1].z+this.sharpness*(this.centers[a+1].z+l)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this},[{key:"cacheSteps",value:function(e){var t=[],n=this.pos(0);t.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>e&&(t.push(r),n=i)}return t}},{key:"vector",value:function(e){var t=this.pos(e+10),n=this.pos(e-10);return{angle:180*Math.atan2(t.y-n.y,t.x-n.x)/3.14,speed:Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)+(n.z-t.z)*(n.z-t.z))}}},{key:"pos",value:function(e){var t=e-this.delay;t<0&&(t=0),t>this.duration&&(t=this.duration-1);var n=t/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(e,t,n,r,i){var o=function(e){var t=e*e,n=t*e;return[n,3*t*(1-e),3*e*(1-e)*(1-e),(1-e)*(1-e)*(1-e)]}(e),a={x:i.x*o[0]+r.x*o[1]+n.x*o[2]+t.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+t.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+t.z*o[3]};return a}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])}}])}();function Qe(e){for(var t,n,r=E(e),i=0,o=1;o<r.length;)t=n||r[0],i+=((n=r[o])[0]-t[0])*(n[1]+t[1]),o++;return i>0}function et(e,t){for(var n=0,r=0,i=0,o=0,a=0,s=0,u=0,l=0,c=null,f=null,h=e[0],d=e[1],g=t.length;n<g;n++){r=0;var p=t[n].length-1,v=t[n];if((c=v[0])[0]!==v[p][0]&&c[1]!==v[p][1])throw new Error("First and last coordinates in a ring must be the same");for(a=c[0]-h,s=c[1]-d;r<p;r++)if(l=(f=v[r+1])[1]-d,s<0&&l<0||s>0&&l>0)s=l,a=(c=f)[0]-h;else{if(u=f[0]-e[0],l>0&&s<=0){if((o=a*l-u*s)>0)i+=1;else if(0===o)return 0}else if(s>0&&l<=0){if((o=a*l-u*s)<0)i+=1;else if(0===o)return 0}else if(0===l&&s<0){if(0===(o=a*l-u*s))return 0}else if(0===s&&l<0){if(0===(o=a*l-u*s))return 0}else if(0===s&&0===l){if(u<=0&&a>=0)return 0;if(a<=0&&u>=0)return 0}c=f,s=l,a=u}}return i%2!=0}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=X(e),i=H(t),o=i.type,a=t.bbox,s=i.coordinates;if(a&&!1===function(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}(r,a))return!1;"Polygon"===o&&(s=[s]);for(var u=!1,l=0;l<s.length;++l){var c=et(r,s[l]);if(0===c)return!n.ignoreBoundary;c&&(u=!0)}return u}function f(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=X(e),i=E(t),o=0;o<i.length-1;o++){var a=!1;if(n.ignoreEndVertices&&(0===o&&(a="start"),o===i.length-2&&(a="end"),0===o&&o+1===i.length-1&&(a="both")),tt(i[o],i[o+1],r,a,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function tt(e,t,n,r,i){var o=n[0],a=n[1],s=e[0],u=e[1],l=t[0],c=t[1],f=l-s,h=c-u,d=(n[0]-s)*h-(n[1]-u)*f;if(null!==i){if(Math.abs(d)>i)return!1}else if(0!==d)return!1;return Math.abs(f)===Math.abs(h)&&0===Math.abs(f)?!r&&(n[0]===e[0]&&n[1]===e[1]):r?"start"===r?Math.abs(f)>=Math.abs(h)?f>0?s<o&&o<=l:l<=o&&o<s:h>0?u<a&&a<=c:c<=a&&a<u:"end"===r?Math.abs(f)>=Math.abs(h)?f>0?s<=o&&o<l:l<o&&o<=s:h>0?u<=a&&a<c:c<a&&a<=u:"both"===r&&(Math.abs(f)>=Math.abs(h)?f>0?s<o&&o<l:l<o&&o<s:h>0?u<a&&a<c:c<a&&a<u):Math.abs(f)>=Math.abs(h)?f>0?s<=o&&o<=l:l<=o&&o<=s:h>0?u<=a&&a<=c:c<=a&&a<=u}function nt(e,t){if("Feature"===e.type&&null===e.geometry)return!1;if("Feature"===t.type&&null===t.geometry)return!1;if(!rt(J(e),J(t)))return!1;var n,r=F(H(t).coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=F(n.value);try{for(o.s();!(i=o.n()).done;){if(!V(i.value,e))return!1}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}return!0}function rt(e,t){return!(e[0]>t[0])&&(!(e[2]<t[2])&&(!(e[1]>t[1])&&!(e[3]<t[3])))}function it(e,t){return e[0]===t[0]&&e[1]===t[1]}function ot(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var at=function(){return i(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;if(d(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)},[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&n(t[s],a)<0&&(o=s,a=t[s]),n(a,i)>=0)break;t[e]=a,e=o}t[e]=i}}])}();function st(e,t){return e<t?-1:e>t?1:0}function ut(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y!==t.p.y?e.p.y>t.p.y?1:-1:1}function lt(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y!==t.rightSweepEvent.p.y?e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1:1}var ct=function(){return i(function e(t,n,r,i){d(this,e),this.p={x:t[0],y:t[1]},this.featureId=n,this.ringId=r,this.eventId=i,this.otherEvent=null,this.isLeftEndpoint=null},[{key:"isSamePoint",value:function(e){return this.p.x===e.p.x&&this.p.y===e.p.y}}])}();var ft=0,ht=0,dt=0;function gt(e,t){var n="Feature"===e.type?e.geometry:e,r=n.coordinates;"Polygon"!==n.type&&"MultiLineString"!==n.type||(r=[r]),"LineString"===n.type&&(r=[[r]]);for(var i=0;i<r.length;i++)for(var o=0;o<r[i].length;o++){var a=r[i][o][0],s=null;ht+=1;for(var u=0;u<r[i][o].length-1;u++){s=r[i][o][u+1];var l=new ct(a,ft,ht,dt),c=new ct(s,ft,ht,dt+1);l.otherEvent=c,c.otherEvent=l,ut(l,c)>0?(c.isLeftEndpoint=!0,l.isLeftEndpoint=!1):(l.isLeftEndpoint=!0,c.isLeftEndpoint=!1),t.push(l),t.push(c),a=s,dt+=1}}ft+=1}var pt=i(function e(t){d(this,e),this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent});function vt(e,t){if(null===e||null===t)return!1;if(e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;var n=e.leftSweepEvent.p.x,r=e.leftSweepEvent.p.y,i=e.rightSweepEvent.p.x,o=e.rightSweepEvent.p.y,a=t.leftSweepEvent.p.x,s=t.leftSweepEvent.p.y,u=t.rightSweepEvent.p.x,l=t.rightSweepEvent.p.y,c=(l-s)*(i-n)-(u-a)*(o-r),f=(u-a)*(r-s)-(l-s)*(n-a),h=(i-n)*(r-s)-(o-r)*(n-a);if(0===c)return!1;var d=f/c,g=h/c;return d>=0&&d<=1&&g>=0&&g<=1&&[n+d*(i-n),r+d*(o-r)]}var yt=function(e,t){var n=new at([],ut);return function(e,t){if("FeatureCollection"===e.type)for(var n=e.features,r=0;r<n.length;r++)gt(n[r],t);else gt(e,t)}(e,n),function(e,t){t=t||!1;for(var n=[],r=new at([],lt);e.length;){var i=e.pop();if(i.isLeftEndpoint){for(var o=new pt(i),a=0;a<r.data.length;a++){var s=r.data[a];if(!t||s.leftSweepEvent.featureId!==i.featureId){var u=vt(o,s);!1!==u&&n.push(u)}}r.push(o)}else!1===i.isLeftEndpoint&&r.pop()}return n}(n,t)};function mt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.removeDuplicates,i=void 0===r||r,o=n.ignoreSelfIntersections,a=void 0===o||o,s=[];"FeatureCollection"===e.type?s=s.concat(e.features):"Feature"===e.type?s.push(e):"LineString"!==e.type&&"Polygon"!==e.type&&"MultiLineString"!==e.type&&"MultiPolygon"!==e.type||s.push(B(e)),"FeatureCollection"===t.type?s=s.concat(t.features):"Feature"===t.type?s.push(t):"LineString"!==t.type&&"Polygon"!==t.type&&"MultiLineString"!==t.type&&"MultiPolygon"!==t.type||s.push(B(t));var u=yt(U(s),a),l=[];if(i){var c={};u.forEach(function(e){var t=e.join(",");c[t]||(c[t]=!0,l.push(e))})}else l=u;return U(l.map(function(e){return G(e)}))}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H(e);switch(t.properties||"Feature"!==e.type||(t.properties=e.properties),n.type){case"Polygon":return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H(e),r=n.coordinates,i=t.properties?t.properties:"Feature"===e.type?e.properties:{};return bt(r,i)}(n,t);case"MultiPolygon":return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=H(e),r=n.coordinates,i=t.properties?t.properties:"Feature"===e.type?e.properties:{},o=[];return r.forEach(function(e){o.push(bt(e,i))}),U(o)}(n,t);default:throw new Error("invalid poly")}}function bt(e,t){return e.length>1?te(e,t):Y(e[0],t)}function xt(e,t){var n=H(e),r=H(t),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return wt(n,r);case"Polygon":return Et(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return wt(r,n);case"LineString":return function(e,t){if(mt(e,t).features.length>0)for(var n=0;n<e.coordinates.length-1;n++)for(var r=0;r<t.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==t.coordinates.length-2||(i=!1),Nt(e.coordinates[n],e.coordinates[n+1],t.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return kt(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Et(r,n);case"LineString":return kt(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function wt(e,t){for(var n=!1,r=!1,i=e.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<t.coordinates.length-1;a++){var s=!0;0!==a&&a!==t.coordinates.length-2||(s=!1),Nt(t.coordinates[a],t.coordinates[a+1],e.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function kt(e,t){return mt(e,_t(t)).features.length>0}function Et(e,t){for(var n=!1,r=!1,i=e.coordinates.length,o=0;o<i&&(!n||!r);o++)V(G(e.coordinates[o]),t)?n=!0:r=!0;return r&&n}function Nt(e,t,n,r){var i=n[0]-e[0],o=n[1]-e[1],a=t[0]-e[0],s=t[1]-e[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:s>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1]:Math.abs(a)>=Math.abs(s)?a>0?e[0]<n[0]&&n[0]<t[0]:t[0]<n[0]&&n[0]<e[0]:s>0?e[1]<n[1]&&n[1]<t[1]:t[1]<n[1]&&n[1]<e[1])}function St(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{ignoreSelfIntersections:!0}).ignoreSelfIntersections,r=void 0===t||t,i=!0;return x(e,function(t){x(n,function(e){if(!1===i)return!1;i=function(e,t,n){switch(e.type){case"Point":switch(t.type){case"Point":return r=e.coordinates,i=t.coordinates,!(r[0]===i[0]&&r[1]===i[1]);case"LineString":return!Mt(t,e);case"Polygon":return!V(e,t)}break;case"LineString":switch(t.type){case"Point":return!Mt(e,t);case"LineString":return!function(e,t,n){var r=mt(e,t,{ignoreSelfIntersections:n});if(r.features.length>0)return!0;return!1}(e,t,n);case"Polygon":return!It(t,e,n)}break;case"Polygon":switch(t.type){case"Point":return!V(t,e);case"LineString":return!It(e,t,n);case"Polygon":return!function(e,t,n){var r,i=F(e.coordinates[0]);try{for(i.s();!(r=i.n()).done;){if(V(r.value,t))return!0}}catch(e){i.e(e)}finally{i.f()}var o,a=F(t.coordinates[0]);try{for(a.s();!(o=a.n()).done;){if(V(o.value,e))return!0}}catch(e){a.e(e)}finally{a.f()}var s=mt(_t(e),_t(t),{ignoreSelfIntersections:n});if(s.features.length>0)return!0;return!1}(t,e,n)}}var r,i;return!1}(t.geometry,e.geometry,r)})}),i}function Mt(e,t){for(var n=0;n<e.coordinates.length-1;n++)if(Ot(e.coordinates[n],e.coordinates[n+1],t.coordinates))return!0;return!1}function It(e,t,n){var r,i=F(t.coordinates);try{for(i.s();!(r=i.n()).done;){if(V(r.value,e))return!0}}catch(e){i.e(e)}finally{i.f()}return mt(t,_t(e),{ignoreSelfIntersections:n}).features.length>0}function Ot(e,t,n){var r=n[0]-e[0],i=n[1]-e[1],o=t[0]-e[0],a=t[1]-e[1];return 0==r*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?e[0]<=n[0]&&n[0]<=t[0]:t[0]<=n[0]&&n[0]<=e[0]:a>0?e[1]<=n[1]&&n[1]<=t[1]:t[1]<=n[1]&&n[1]<=e[1])}var Ct=Object.defineProperty,Pt=function(e,t){return Ct(e,"name",{value:t,configurable:!0})},Tt=function(){return i(function e(t){var n,r,i;d(this,e),this.direction=!1,this.compareProperties=!0,this.precision=Math.pow(10,-(null!=(n=null==t?void 0:t.precision)?n:17)),this.direction=null!=(r=null==t?void 0:t.direction)&&r,this.compareProperties=null==(i=null==t?void 0:t.compareProperties)||i},[{key:"compare",value:function(e,t){var n=this;if(e.type!==t.type)return!1;if(!Rt(e,t))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,t.coordinates);case"LineString":return this.compareLine(e.coordinates,t.coordinates);case"Polygon":return this.comparePolygon(e,t);case"GeometryCollection":return this.compareGeometryCollection(e,t);case"Feature":return this.compareFeature(e,t);case"FeatureCollection":return this.compareFeatureCollection(e,t);default:if(e.type.startsWith("Multi")){var r=At(e),i=At(t);return r.every(function(t){return i.some(function(e){return n.compare(t,e)})})}}return!1}},{key:"compareCoord",value:function(e,n){var r=this;return e.length===n.length&&e.every(function(e,t){return Math.abs(e-n[t])<r.precision})}},{key:"compareLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Rt(e,t))return!1;var i=e,o=t;if(r&&!this.compareCoord(i[0],o[0])){var a=this.fixStartIndex(o,i);if(!a)return!1;o=a}var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},{key:"fixStartIndex",value:function(e,t){for(var n,r=-1,i=0;i<e.length;i++)if(this.compareCoord(e[i],t[0])){r=i;break}return r>=0&&(n=[].concat(e.slice(r,e.length),e.slice(1,r+1))),n}},{key:"comparePath",value:function(e,n){var r=this;return e.every(function(e,t){return r.compareCoord(e,n[t])})}},{key:"comparePolygon",value:function(e,t){var n=this;if(this.compareLine(e.coordinates[0],t.coordinates[0],1,!0)){var r=e.coordinates.slice(1,e.coordinates.length),i=t.coordinates.slice(1,t.coordinates.length);return r.every(function(t){return i.some(function(e){return n.compareLine(t,e,1,!0)})})}return!1}},{key:"compareGeometryCollection",value:function(e,n){var r=this;return Rt(e.geometries,n.geometries)&&this.compareBBox(e,n)&&e.geometries.every(function(e,t){return r.compare(e,n.geometries[t])})}},{key:"compareFeature",value:function(e,t){return e.id===t.id&&(!this.compareProperties||Dt(e.properties,t.properties))&&this.compareBBox(e,t)&&this.compare(e.geometry,t.geometry)}},{key:"compareFeatureCollection",value:function(e,n){var r=this;return Rt(e.features,n.features)&&this.compareBBox(e,n)&&e.features.every(function(e,t){return r.compare(e,n.features[t])})}},{key:"compareBBox",value:function(e,t){return Boolean(!e.bbox&&!t.bbox)||!(!e.bbox||!t.bbox)&&this.compareCoord(e.bbox,t.bbox)}}])}();Pt(Tt,"GeojsonEquality");var Lt=Tt;function Rt(e,t){return e.coordinates?e.coordinates.length===t.coordinates.length:e.length===t.length}function At(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function jt(e,t,n){return new Lt(n).compare(e,t)}function Dt(e,t){if(null===e&&null===t)return!0;if(null===e||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0,o=n;i<o.length;i++){var a=o[i],s=e[a],u=t[a],l=Ft(s)&&Ft(u);if(l&&!Dt(s,u)||!l&&s!==u)return!1}return!0}Pt(Rt,"sameLength"),Pt(At,"explode"),Pt(jt,"geojsonEquality"),Pt(Dt,"equal");var Ft=Pt(function(e){return null!=e&&"object"===_r(e)},"isObject");function zt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="object"===_r(t)?t.mutate:t;if(!e)throw new Error("geojson is required");var r=xe(e),i=[];switch(r){case"LineString":i=Vt(e,r);break;case"MultiLineString":case"Polygon":E(e).forEach(function(e){i.push(Vt(e,r))});break;case"MultiPolygon":E(e).forEach(function(e){var t=[];e.forEach(function(e){t.push(Vt(e,r))}),i.push(t)});break;case"Point":return e;case"MultiPoint":var o={};E(e).forEach(function(e){var t=e.join("-");Object.prototype.hasOwnProperty.call(o,t)||(i.push(e),o[t]=!0)});break;default:throw new Error(r+" geometry not supported")}return e.coordinates?!0===n?(e.coordinates=i,e):{type:r,coordinates:i}:!0===n?(e.geometry.coordinates=i,e):B({type:r,coordinates:i},e.properties,{bbox:e.bbox,id:e.id})}function Vt(e,t){var n=E(e);if(2===n.length&&!qt(n[0],n[1]))return n;var r=[],i=n.length-1,o=r.length;r.push(n[0]);for(var a=1;a<i;a++){var s=r[r.length-1];n[a][0]===s[0]&&n[a][1]===s[1]||(r.push(n[a]),(o=r.length)>2&&Bt(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1))}if(r.push(n[n.length-1]),o=r.length,("Polygon"===t||"MultiPolygon"===t)&&qt(n[0],n[n.length-1])&&o<4)throw new Error("invalid polygon");return"LineString"===t&&o<3||Bt(r[o-3],r[o-1],r[o-2])&&r.splice(r.length-2,1),r}function qt(e,t){return e[0]===t[0]&&e[1]===t[1]}function Bt(e,t,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=t[0],u=t[1],l=s-o,c=u-a;return 0===(r-o)*c-(i-a)*l&&(Math.abs(l)>=Math.abs(c)?l>0?o<=r&&r<=s:s<=r&&r<=o:c>0?a<=i&&i<=u:u<=i&&i<=a)}function Gt(e,n){var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoreSelfIntersections,r=void 0===t||t,i=!1;return x(e,function(t){x(n,function(e){if(!0===i)return!0;i=!St(t.geometry,e.geometry,{ignoreSelfIntersections:r})})}),i}function Yt(e,t,n,r,i){Ut(e,t,n||0,r||e.length-1,i||Zt)}function Ut(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Ut(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}var c=e[t],f=n,h=r;for(Wt(e,n,t),i(e[r],c)>0&&Wt(e,n,r);f<h;){for(Wt(e,f,h),f++,h--;i(e[f],c)<0;)f++;for(;i(e[h],c)>0;)h--}0===i(e[n],c)?Wt(e,n,h):Wt(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function Wt(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Zt(e,t){return e<t?-1:e>t?1:0}var Xt=function(){return i(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;d(this,e),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()},[{key:"all",value:function(){return this._all(this.data,[])}},{key:"search",value:function(e){var t=this.data,n=[];if(!on(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var o=0;o<t.children.length;o++){var a=t.children[o],s=t.leaf?r(a):a;on(e,s)&&(t.leaf?n.push(a):rn(e,s)?this._all(a,n):i.push(a))}t=i.pop()}return n}},{key:"collides",value:function(e){var t=this.data;if(!on(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],o=t.leaf?this.toBBox(i):i;if(on(e,o)){if(t.leaf||rn(e,o))return!0;n.push(i)}}t=n.pop()}return!1}},{key:"load",value:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this.data.height-1),this}},{key:"clear",value:function(){return this.data=an([]),this}},{key:"remove",value:function(e,t){if(!e)return this;for(var n,r,i,o=this.data,a=this.toBBox(e),s=[],u=[];o||s.length;){if(o||(o=s.pop(),r=s[s.length-1],n=u.pop(),i=!0),o.leaf){var l=Ht(e,o.children,t);if(-1!==l)return o.children.splice(l,1),s.push(o),this._condense(s),this}i||o.leaf||!rn(o,a)?r?(n++,o=r.children[n],i=!1):o=null:(s.push(o),u.push(n),n=0,r=o,o=o.children[0])}return this}},{key:"toBBox",value:function(e){return e}},{key:"compareMinX",value:function(e,t){return e.minX-t.minX}},{key:"compareMinY",value:function(e,t){return e.minY-t.minY}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(e){return this.data=e,this}},{key:"_all",value:function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,M(e.children)):n.push.apply(n,M(e.children)),e=n.pop();return t}},{key:"_build",value:function(e,t,n,r){var i,o=n-t+1,a=this._maxEntries;if(o<=a)return $t(i=an(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=an([])).leaf=!1,i.height=r;var s=Math.ceil(o/a),u=s*Math.ceil(Math.sqrt(a));sn(e,t,n,u,this.compareMinX);for(var l=t;l<=n;l+=u){var c=Math.min(l+u-1,n);sn(e,l,c,s,this.compareMinY);for(var f=l;f<=c;f+=s){var h=Math.min(f+s-1,c);i.children.push(this._build(e,f,h,r-1))}}return $t(i,this.toBBox),i}},{key:"_chooseSubtree",value:function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<t.children.length;s++){var u=t.children[s],l=tn(u),c=(f=e,h=u,(Math.max(h.maxX,f.maxX)-Math.min(h.minX,f.minX))*(Math.max(h.maxY,f.maxY)-Math.min(h.minY,f.minY))-l);c<o?(o=c,i=l<i?l:i,a=u):c===o&&l<i&&(i=l,a=u)}t=a||t.children[0]}var f,h;return t}},{key:"_insert",value:function(e,t,n){var r=n?e:this.toBBox(e),i=[],o=this._chooseSubtree(r,this.data,t,i);for(o.children.push(e),Kt(o,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)}},{key:"_split",value:function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=an(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,$t(n,this.toBBox),$t(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}},{key:"_splitRoot",value:function(e,t){this.data=an([e,t]),this.data.height=e.height+1,this.data.leaf=!1,$t(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){for(var r,i,o,a,s,u,l,c=1/0,f=1/0,h=t;h<=n-t;h++){var d=Jt(e,0,h,this.toBBox),g=Jt(e,h,n,this.toBBox),p=(i=d,o=g,a=void 0,s=void 0,u=void 0,l=void 0,a=Math.max(i.minX,o.minX),s=Math.max(i.minY,o.minY),u=Math.min(i.maxX,o.maxX),l=Math.min(i.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,l-s)),v=tn(d)+tn(g);p<c?(c=p,r=h,f=v<f?v:f):p===c&&v<f&&(f=v,r=h)}return r||n-t}},{key:"_chooseSplitAxis",value:function(e,t,n){var r=e.leaf?this.compareMinX:Qt,i=e.leaf?this.compareMinY:en;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)}},{key:"_allDistMargin",value:function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,o=Jt(e,0,t,i),a=Jt(e,n-t,n,i),s=nn(o)+nn(a),u=t;u<n-t;u++){var l=e.children[u];Kt(o,e.leaf?i(l):l),s+=nn(o)}for(var c=n-t-1;c>=t;c--){var f=e.children[c];Kt(a,e.leaf?i(f):f),s+=nn(a)}return s}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var r=n;r>=0;r--)Kt(t[r],e)}},{key:"_condense",value:function(e){for(var t,n=e.length-1;n>=0;n--)0===e[n].children.length?n>0?(t=e[n-1].children).splice(t.indexOf(e[n]),1):this.clear():$t(e[n],this.toBBox)}}])}();function Ht(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function $t(e,t){Jt(e,0,e.children.length,t,e)}function Jt(e,t,n,r,i){i||(i=an(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=t;o<n;o++){var a=e.children[o];Kt(i,e.leaf?r(a):a)}return i}function Kt(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Qt(e,t){return e.minX-t.minX}function en(e,t){return e.minY-t.minY}function tn(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function nn(e){return e.maxX-e.minX+(e.maxY-e.minY)}function rn(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function on(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function an(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sn(e,t,n,r,i){for(var o=[t,n];o.length;)if(!((n=o.pop())-(t=o.pop())<=r)){var a=t+Math.ceil((n-t)/r/2)*r;Yt(e,a,t,n,i),o.push(t,a,a,n)}}var un=Object.freeze({__proto__:null,default:Xt});function ln(e){var t=new Xt(e);return t.insert=function(e){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:J(e),Xt.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:J(e),t.push(e)}):N(e,function(e){if("Feature"!==e.type)throw new Error("invalid features");e.bbox=e.bbox?e.bbox:J(e),t.push(e)}),Xt.prototype.load.call(this,t)},t.remove=function(e,t){if("Feature"!==e.type)throw new Error("invalid feature");return e.bbox=e.bbox?e.bbox:J(e),Xt.prototype.remove.call(this,e,t)},t.clear=function(){return Xt.prototype.clear.call(this)},t.search=function(e){return U(Xt.prototype.search.call(this,this.toBBox(e)))},t.collides=function(e){return Xt.prototype.collides.call(this,this.toBBox(e))},t.all=function(){return U(Xt.prototype.all.call(this))},t.toJSON=function(){return Xt.prototype.toJSON.call(this)},t.fromJSON=function(e){return Xt.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&4===e.length)t=e;else if(Array.isArray(e)&&6===e.length)t=[e[0],e[1],e[3],e[4]];else if("Feature"===e.type)t=J(e);else{if("FeatureCollection"!==e.type)throw new Error("invalid geojson");t=J(e)}return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}function cn(e){if(!e)throw new Error("geojson is required");var t=[];return x(e,function(e){!function(n,r){var e=[],t=n.geometry;if(null!==t){switch(t.type){case"Polygon":e=E(t);break;case"LineString":e=[E(t)]}e.forEach(function(e){var t=function(e,r){var i=[];return e.reduce(function(e,t){var n=Y([e,t],r);return n.bbox=function(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=n<i?n:i,s=r<o?r:o,u=n>i?n:i,l=r>o?r:o;return[a,s,u,l]}(e,t),i.push(n),t}),i}(e,n.properties);t.forEach(function(e){e.id=r.length,r.push(e)})})}}(e,t)}),U(t)}var fn,hn,dn=Object.defineProperty,gn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,vn=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,mn=Object.prototype.propertyIsEnumerable,_n=function(e,t,n){return t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},bn=function(e,t){for(var n in t||(t={}))yn.call(t,n)&&_n(e,n,t[n]);if(vn){var r,i=F(vn(t));try{for(i.s();!(r=i.n()).done;){n=r.value;mn.call(t,n)&&_n(e,n,t[n])}}catch(e){i.e(e)}finally{i.f()}}return e},xn=function(e,t){return gn(e,pn(t))};function wn(e,v){var y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!v)throw new Error("lines and pt are required arguments");var m=X(v),_=G([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),b=0;return x(e,function(e,t,n){for(var r=E(e),i=0;i<r.length-1;i++){var o=G(r[i]);o.properties.dist=$(v,o,y);var a=X(o),s=G(r[i+1]);s.properties.dist=$(v,s,y);var u=X(s),l=$(o,s,y),c=void 0,f=void 0;if(a[0]===m[0]&&a[1]===m[1]){var h=[a,void 0,!1];c=h[0],f=h[2]}else if(u[0]===m[0]&&u[1]===m[1]){var d=[u,void 0,!0];c=d[0],f=d[2]}else{var g=K(Mn(o.geometry.coordinates,s.geometry.coordinates,X(v)),3);c=g[0],f=g[2]}var p=void 0;c&&(p=G(c,{dist:$(v,c,y),multiFeatureIndex:n,location:b+$(o,c,y)})),p&&p.properties.dist<_.properties.dist&&(_=xn(bn({},p),{properties:xn(bn({},p.properties),{index:f?i+1:i})})),b+=l}}),_}function kn(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2))}function En(e,t){var n=function(e,t){var n=K(e,3),r=n[0],i=n[1],o=n[2],a=K(t,3);return r*a[0]+i*a[1]+o*a[2]}(e,t)/(kn(e)*kn(t));return Math.acos(Math.min(Math.max(n,-1),1))}function Nn(e){var t=b(e[1]),n=b(e[0]);return[Math.cos(t)*Math.cos(n),Math.cos(t)*Math.sin(n),Math.sin(t)]}function Sn(e){var t=K(e,3),n=t[0],r=t[1],i=t[2],o=fe(Math.asin(i));return[fe(Math.atan2(r,n)),o]}function Mn(e,t,j){var n,r,i,o,a,s,u,l,c,f,h=Nn(e),d=Nn(t),g=K(Nn(j),3),p=g[0],v=g[1],y=g[2],D=(n=d,r=K(h,3),i=r[0],o=r[1],a=r[2],s=K(n,3),u=s[0],l=s[1],c=s[2],[o*c-a*l,a*u-i*c,i*l-o*u]),m=K(D,3),_=m[0],b=m[1],x=m[2],w=b*y-x*v,k=x*p-_*y,E=_*v-b*p,N=E*b-k*x,S=w*x-E*_,M=k*_-w*b,I=1/Math.sqrt(Math.pow(N,2)+Math.pow(S,2)+Math.pow(M,2)),O=[N*I,S*I,M*I],C=[-1*N*I,-1*S*I,-1*M*I],P=En(h,d),T=En(h,O),L=En(d,O),R=En(h,C),A=En(d,C);return En(h,f=T<R&&T<A||L<R&&L<A?O:C)>P||En(d,f)>P?$(Sn(f),Sn(h))<=$(Sn(f),Sn(d))?[Sn(h),!0,!1]:[Sn(d),!1,!0]:[Sn(f),!1,!1]}function In(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function On(n){if(n.__esModule)return n;var t=n.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}})}),r}var Cn=(hn||(hn=1,fn=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==_r(t)&&"object"==_r(n)){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}),fn),Pn=In(Cn);function Tn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Z(n=n||{}))throw new Error("options is invalid");var a,s=n.tolerance||0,r=[],u=ln(),i=cn(e);u.load(i);var l=[];return Ae(t,function(i){var o=!1;i&&(N(u.search(i),function(e){if(!1===o){var t=E(i).sort(),n=E(e).sort();if(Pn(t,n))o=!0,a=a?Ln(a,i)||a:i;else if(0===s?f(t[0],e)&&f(t[1],e):wn(e,t[0]).properties.dist<=s&&wn(e,t[1]).properties.dist<=s)o=!0,a=a?Ln(a,i)||a:i;else if(0===s?f(n[0],i)&&f(n[1],i):wn(i,n[0]).properties.dist<=s&&wn(i,n[1]).properties.dist<=s)if(a){var r=Ln(a,e);r?a=r:l.push(e)}else a=e}}),!1===o&&a&&(r.push(a),l.length&&(r=r.concat(l),l=[]),a=void 0))}),a&&r.push(a),U(r)}function Ln(e,t){var n=E(t),r=E(e),i=r[0],o=r[r.length-1],a=e.geometry.coordinates;if(Pn(n[0],i))a.unshift(n[1]);else if(Pn(n[0],o))a.push(n[1]);else if(Pn(n[1],i))a.unshift(n[0]);else{if(!Pn(n[1],o))return;a.push(n[0])}return e}function Rn(e,t){var n=le(Ne(e[0],e[1])),r=le(Ne(t[0],t[1]));return n===r||(r-n)%180==0}function An(e,t){if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error("Invalid GeoJSON object for "+t)}function jn(e,t){return!!Dn(t.coordinates[0],e.coordinates)||!!Dn(t.coordinates[t.coordinates.length-1],e.coordinates)}function Dn(e,t){return e[0]===t[0]&&e[1]===t[1]}function Fn(e){return e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]}function zn(e){for(var t=0;t<e.length-1;t++)for(var n=e[t],r=t+1;r<e.length-2;r++){if(f(n,Y([e[r],e[r+1]])))return!0}return!1}function Vn(e,t,n){for(var r=z(e),i=n+1;i<t.length;i++)if(!St(r,z(t[i]))&&xt(r,Y(t[i][0])))return!1;return!0}function qn(e,t){var n=H(e),r=H(t),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(e,t){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Gn(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"LineString":return f(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return V(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(e,t){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)Gn(e.coordinates[n],t.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(e,t){for(var n=!1,r=0;r<e.coordinates.length;r++){if(!f(e.coordinates[r],t))return!1;n||(n=f(e.coordinates[r],t,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(e,t){for(var n=!0,r=!1,i=0;i<e.coordinates.length;i++){if(!(r=V(e.coordinates[i],t))){n=!1;break}r=V(e.coordinates[i],t,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(e,t){for(var n=0;n<e.coordinates.length;n++)if(!f(e.coordinates[n],t))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(e,t){var n=J(t),r=J(e);if(!Bn(n,r))return!1;for(var i=!1,o=0;o<e.coordinates.length;o++){if(!V(e.coordinates[o],t))return!1;if(i||(i=V(e.coordinates[o],t,{ignoreBoundary:!0})),!i&&o<e.coordinates.length-1)i=V(Yn(e.coordinates[o],e.coordinates[o+1]),t,{ignoreBoundary:!0})}return i}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(e,t){var n=J(e);if(!Bn(J(t),n))return!1;for(var r=0;r<e.coordinates[0].length;r++)if(!V(e.coordinates[0][r],t))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Bn(e,t){return!(e[0]>t[0])&&(!(e[2]<t[2])&&(!(e[1]>t[1])&&!(e[3]<t[3])))}function Gn(e,t){return e[0]===t[0]&&e[1]===t[1]}function Yn(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=J(e);return G([(n[0]+n[2])/2,(n[1]+n[3])/2],t.properties,t)}var Wn,Zn={exports:{}};var Xn=(Wn||(Wn=1,function(e,t){e.exports=function(){function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function q(e,t,n){return q=V()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&z(i,n.prototype),i},q.apply(null,arguments)}function t(e){var r="function"==typeof Map?new Map:void 0;return t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return q(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),z(n,e)},t(e)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){if(t&&("object"==_r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)}function u(r){var i=V();return function(){var e,t=b(r);if(i){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return B(this,e)}}function x(e,t,n){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},x(e,t,n||e)}function G(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Y(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}var f=function(){function s(){g(this,s),s.constructor_.apply(this,arguments)}return p(s,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=s.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=s.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==s.JOIN_ROUND&&(this._quadrantSegments=s.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(e){this._joinStyle=e}},{key:"setSimplifyFactor",value:function(e){this._simplifyFactor=e<0?0:e}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(e){this._endCapStyle=e}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(e){this._mitreLimit=e}},{key:"setSingleSided",value:function(e){this._isSingleSided=e}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=s.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=s.CAP_ROUND,this._joinStyle=s.JOIN_ROUND,this._mitreLimit=s.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=s.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.setQuadrantSegments(t),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(i),this.setJoinStyle(o),this.setMitreLimit(a)}}},{key:"bufferDistanceError",value:function(e){var t=Math.PI/2/e;return 1-Math.cos(t/2)}}]),s}();f.CAP_ROUND=1,f.CAP_FLAT=2,f.CAP_SQUARE=3,f.JOIN_ROUND=1,f.JOIN_MITRE=2,f.JOIN_BEVEL=3,f.DEFAULT_QUADRANT_SEGMENTS=8,f.DEFAULT_MITRE_LIMIT=5,f.DEFAULT_SIMPLIFY_FACTOR=.01;var Z=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).name=Object.keys({Exception:r})[0],t}return p(r,[{key:"toString",value:function(){return this.message}}]),r}(t(Error)),k=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).name=Object.keys({IllegalArgumentException:r})[0],t}return r}(Z),X=function(){function e(){g(this,e)}return p(e,[{key:"filter",value:function(e){}}]),e}();function i(){}function H(){}function n(){}var $,J,K,Q,ee,te,ne,re,ie=function(){function e(){g(this,e)}return p(e,null,[{key:"equalsWithTolerance",value:function(e,t,n){return Math.abs(e-t)<=n}}]),e}(),oe=function(){function n(e,t){g(this,n),this.low=t||0,this.high=e||0}return p(n,null,[{key:"toBinaryString",value:function(e){var t,n="";for(t=2147483648;t>0;t>>>=1)n+=(e.high&t)===t?"1":"0";for(t=2147483648;t>0;t>>>=1)n+=(e.low&t)===t?"1":"0";return n}}]),n}();function P(){}function ae(){}P.NaN=NaN,P.isNaN=function(e){return Number.isNaN(e)},P.isInfinite=function(e){return!Number.isFinite(e)},P.MAX_VALUE=Number.MAX_VALUE,P.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,P.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,"function"==typeof Float64Array&&"function"==typeof Int32Array?(te=2146435072,ne=new Float64Array(1),re=new Int32Array(ne.buffer),P.doubleToLongBits=function(e){ne[0]=e;var t=0|re[0],n=0|re[1];return(n&te)===te&&0!=(1048575&n)&&0!==t&&(t=0,n=2146959360),new oe(n,t)},P.longBitsToDouble=function(e){return re[0]=e.low,re[1]=e.high,ne[0]}):($=1023,J=Math.log2,K=Math.floor,Q=Math.pow,ee=function(){for(var e=53;e>0;e--){var t=Q(2,e)-1;if(K(J(t))+1===e)return t}return 0}(),P.doubleToLongBits=function(e){var t,n,r,i,o,a,s,u,l;if(e<0||1/e===Number.NEGATIVE_INFINITY?(a=1<<31,e=-e):a=0,0===e)return new oe(u=a,l=0);if(e===1/0)return new oe(u=2146435072|a,l=0);if(e!=e)return new oe(u=2146959360,l=0);if(i=0,l=0,(t=K(e))>1)if(t<=ee)(i=K(J(t)))<=20?(l=0,u=t<<20-i&1048575):(l=t%(n=Q(2,r=i-20))<<32-r,u=t/n&1048575);else for(r=t,l=0;0!==(r=K(n=r/2));)i++,l>>>=1,l|=(1&u)<<31,u>>>=1,n!==r&&(u|=524288);if(s=i+$,o=0===t,t=e-t,i<52&&0!==t)for(r=0;;){if((n=2*t)>=1?(t=n-1,o?(s--,o=!1):(r<<=1,r|=1,i++)):(t=n,o?0==--s&&(i++,o=!1):(r<<=1,i++)),20===i)u|=r,r=0;else if(52===i){l|=r;break}if(1===n){i<20?u|=r<<20-i:i<52&&(l|=r<<52-i);break}}return u|=s<<20,new oe(u|=a,l)},P.longBitsToDouble=function(e){var t,n,r,i,o=e.high,a=e.low,s=o&1<<31?-1:1;for(r=((2146435072&o)>>20)-$,i=0,n=1<<19,t=1;t<=20;t++)o&n&&(i+=Q(2,-t)),n>>>=1;for(n=1<<31,t=21;t<=52;t++)a&n&&(i+=Q(2,-t)),n>>>=1;if(-1023===r){if(0===i)return 0*s;r=-1022}else{if(1024===r)return 0===i?s/0:NaN;i+=1}return s*i*Q(2,r)});var se=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).name=Object.keys({RuntimeException:r})[0],t}return r}(Z),ue=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,null,[{key:"constructor_",value:function(){if(0===arguments.length)se.constructor_.call(this);else if(1===arguments.length){var e=arguments[0];se.constructor_.call(this,e)}}}]),n}(se),c=function(){function o(){g(this,o)}return p(o,null,[{key:"shouldNeverReachHere",value:function(){if(0===arguments.length)o.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new ue("Should never reach here"+(null!==e?": "+e:""))}}},{key:"isTrue",value:function(){if(1===arguments.length){var e=arguments[0];o.isTrue(e,null)}else if(2===arguments.length){var t=arguments[1];if(!arguments[0])throw null===t?new ue:new ue(t)}}},{key:"equals",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];o.equals(e,t,null)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(!r.equals(n))throw new ue("Expected "+n+" but encountered "+r+(null!==i?": "+i:""))}}}]),o}(),e=new ArrayBuffer(8),le=new Float64Array(e),ce=new Int32Array(e),T=function(){function a(){g(this,a),a.constructor_.apply(this,arguments)}return p(a,[{key:"getM",value:function(){return P.NaN}},{key:"setOrdinate",value:function(e,t){switch(e){case a.X:this.x=t;break;case a.Y:this.y=t;break;case a.Z:this.setZ(t);break;default:throw new k("Invalid ordinate index: "+e)}}},{key:"equals2D",value:function(){if(1===arguments.length){var e=arguments[0];return this.x===e.x&&this.y===e.y}if(2===arguments.length){var t=arguments[0],n=arguments[1];return!!ie.equalsWithTolerance(this.x,t.x,n)&&!!ie.equalsWithTolerance(this.y,t.y,n)}}},{key:"setM",value:function(e){throw new k("Invalid ordinate index: "+a.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(e){switch(e){case a.X:return this.x;case a.Y:return this.y;case a.Z:return this.getZ()}throw new k("Invalid ordinate index: "+e)}},{key:"equals3D",value:function(e){return this.x===e.x&&this.y===e.y&&(this.getZ()===e.getZ()||P.isNaN(this.getZ())&&P.isNaN(e.getZ()))}},{key:"equals",value:function(e){return e instanceof a&&this.equals2D(e)}},{key:"equalInZ",value:function(e,t){return ie.equalsWithTolerance(this.getZ(),e.getZ(),t)}},{key:"setX",value:function(e){this.x=e}},{key:"compareTo",value:function(e){var t=e;return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(e){this.z=e}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return c.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}}},{key:"copy",value:function(){return new a(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.getZ()-e.getZ();return Math.sqrt(t*t+n*n+r*r)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(e){this.y=e}},{key:"distance",value:function(e){var t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return 37*(e=37*e+a.hashCode(this.x))+a.hashCode(this.y)}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}},{key:"interfaces_",get:function(){return[i,H,n]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)a.constructor_.call(this,0,0);else if(1===arguments.length){var e=arguments[0];a.constructor_.call(this,e.x,e.y,e.getZ())}else if(2===arguments.length){var t=arguments[0],n=arguments[1];a.constructor_.call(this,t,n,a.NULL_ORDINATE)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this.x=r,this.y=i,this.z=o}}},{key:"hashCode",value:function(e){return le[0]=e,ce[0]^ce[1]}}]),a}(),fe=function(){function i(){g(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"compare",value:function(e,t){var n=i.compare(e.x,t.x);if(0!==n)return n;var r=i.compare(e.y,t.y);return 0!==r?r:this._dimensionsToTest<=2?0:i.compare(e.getZ(),t.getZ())}},{key:"interfaces_",get:function(){return[ae]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,0===arguments.length)i.constructor_.call(this,2);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new k("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}},{key:"compare",value:function(e,t){return e<t?-1:e>t?1:P.isNaN(e)?P.isNaN(t)?0:-1:P.isNaN(t)?1:0}}]),i}();T.DimensionalComparator=fe,T.NULL_ORDINATE=P.NaN,T.X=0,T.Y=1,T.Z=2,T.M=3;var h=function(){function u(){g(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(e){if(!(e instanceof u))return!1;var t=e;return this.isNull()?t.isNull():this._maxx===t.getMaxX()&&this._maxy===t.getMaxY()&&this._minx===t.getMinX()&&this._miny===t.getMinY()}},{key:"intersection",value:function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new u;var t=this._minx>e._minx?this._minx:e._minx,n=this._miny>e._miny?this._miny:e._miny;return new u(t,this._maxx<e._maxx?this._maxx:e._maxx,n,this._maxy<e._maxy?this._maxy:e._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(1===arguments.length){if(arguments[0]instanceof T){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof u){var t=arguments[0];return!this.isNull()&&!t.isNull()&&t.getMinX()>=this._minx&&t.getMaxX()<=this._maxx&&t.getMinY()>=this._miny&&t.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}}},{key:"intersects",value:function(){if(1===arguments.length){if(arguments[0]instanceof u){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof T){var t=arguments[0];return this.intersects(t.x,t.y)}}else if(2===arguments.length){if(arguments[0]instanceof T&&arguments[1]instanceof T){var n=arguments[0],r=arguments[1];return!(this.isNull()||(n.x<r.x?n.x:r.x)>this._maxx||(n.x>r.x?n.x:r.x)<this._minx||(n.y<r.y?n.y:r.y)>this._maxy||(n.y>r.y?n.y:r.y)<this._miny)}if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return!this.isNull()&&!(i>this._maxx||i<this._minx||o>this._maxy||o<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return Math.sqrt(e*e+t*t)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(1===arguments.length){if(arguments[0]instanceof T){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof u){var t=arguments[0];if(t.isNull())return null;this.isNull()?(this._minx=t.getMinX(),this._maxx=t.getMaxX(),this._miny=t.getMinY(),this._maxy=t.getMaxY()):(t._minx<this._minx&&(this._minx=t._minx),t._maxx>this._maxx&&(this._maxx=t._maxx),t._miny<this._miny&&(this._miny=t._miny),t._maxy>this._maxy&&(this._maxy=t._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e<t?e:t}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(e){var t=e;return this.isNull()?t.isNull()?0:-1:t.isNull()?1:this._minx<t._minx?-1:this._minx>t._minx?1:this._miny<t._miny?-1:this._miny>t._miny?1:this._maxx<t._maxx?-1:this._maxx>t._maxx?1:this._maxy<t._maxy?-1:this._maxy>t._maxy?1:0}},{key:"translate",value:function(e,t){if(this.isNull())return null;this.init(this.getMinX()+e,this.getMaxX()+e,this.getMinY()+t,this.getMaxY()+t)}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(e){return!(!this.isNull()&&!e.isNull())||e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var e=this.getWidth(),t=this.getHeight();return e>t?e:t}},{key:"expandBy",value:function(){if(1===arguments.length){var e=arguments[0];this.expandBy(e,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=t,this._maxx+=t,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(1===arguments.length){if(arguments[0]instanceof u){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof T){var t=arguments[0];return this.covers(t)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}}},{key:"centre",value:function(){return this.isNull()?null:new T((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof T){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof u){var t=arguments[0];this._minx=t._minx,this._maxx=t._maxx,this._miny=t._miny,this._maxy=t._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(e){if(this.intersects(e))return 0;var t=0;this._maxx<e._minx?t=e._minx-this._maxx:this._minx>e._maxx&&(t=this._minx-e._maxx);var n=0;return this._maxy<e._miny?n=e._miny-this._maxy:this._miny>e._maxy&&(n=this._miny-e._maxy),0===t?n:0===n?t:Math.sqrt(t*t+n*n)}},{key:"hashCode",value:function(){var e=17;return 37*(e=37*(e=37*(e=37*e+T.hashCode(this._minx))+T.hashCode(this._maxx))+T.hashCode(this._miny))+T.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[i,n]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof T){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof u){var t=arguments[0];this.init(t)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.init(i,o,a,s)}}},{key:"intersects",value:function(){if(3===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2];return n.x>=(e.x<t.x?e.x:t.x)&&n.x<=(e.x>t.x?e.x:t.x)&&n.y>=(e.y<t.y?e.y:t.y)&&n.y<=(e.y>t.y?e.y:t.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),l=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l>u||c<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),l=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l>u||c<s))}}}]),u}(),d=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(e){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(e){return this===e||this.equalsExact(e,0)}},{key:"geometryChanged",value:function(){this.apply(t.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(e){return null!==e&&this.norm().equalsExact(e.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var e;if(1===arguments.length){var t=arguments[0];return e=t,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return e=n,this.getTypeCode()!==e.getTypeCode()?this.getTypeCode()-e.getTypeCode():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,r)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(e){if(e.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION)throw new k("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(e,t,n){return 0===n?e.equals(t):e.distance(t)<=n}},{key:"norm",value:function(){var e=this.copy();return e.normalize(),e}},{key:"reverse",value:function(){var e=this.reverseInternal();return null!=this.envelope&&(e.envelope=this.envelope.copy()),e.setSRID(this.getSRID()),e}},{key:"copy",value:function(){var e=this.copyInternal();return e.envelope=null==this._envelope?null:this._envelope.copy(),e._SRID=this._SRID,e._userData=this._userData,e}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new h(this._envelope)}},{key:"setSRID",value:function(e){this._SRID=e}},{key:"setUserData",value:function(e){this._userData=e}},{key:"compare",value:function(e,t){for(var n=e.iterator(),r=t.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(e){return this.getClass()===e.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===t.TYPECODE_MULTIPOINT||this.getTypeCode()===t.TYPECODE_MULTILINESTRING||this.getTypeCode()===t.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[H,i,n]}},{key:"getClass",value:function(){return t}}],[{key:"hasNonEmptyElements",value:function(e){for(var t=0;t<e.length;t++)if(!e[t].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(e){for(var t=0;t<e.length;t++)if(null===e[t])return!0;return!1}}]),t}();d.constructor_=function(e){e&&(this._envelope=null,this._userData=null,this._factory=e,this._SRID=e.getSRID())},d.TYPECODE_POINT=0,d.TYPECODE_MULTIPOINT=1,d.TYPECODE_LINESTRING=2,d.TYPECODE_LINEARRING=3,d.TYPECODE_MULTILINESTRING=4,d.TYPECODE_POLYGON=5,d.TYPECODE_MULTIPOLYGON=6,d.TYPECODE_GEOMETRYCOLLECTION=7,d.TYPENAME_POINT="Point",d.TYPENAME_MULTIPOINT="MultiPoint",d.TYPENAME_LINESTRING="LineString",d.TYPENAME_LINEARRING="LinearRing",d.TYPENAME_MULTILINESTRING="MultiLineString",d.TYPENAME_POLYGON="Polygon",d.TYPENAME_MULTIPOLYGON="MultiPolygon",d.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",d.geometryChangedFilter={get interfaces_(){return[X]},filter:function(e){e.geometryChangedAction()}};var v=function(){function t(){g(this,t)}return p(t,null,[{key:"toLocationSymbol",value:function(e){switch(e){case t.EXTERIOR:return"e";case t.BOUNDARY:return"b";case t.INTERIOR:return"i";case t.NONE:return"-"}throw new k("Unknown location value: "+e)}}]),t}();v.INTERIOR=0,v.BOUNDARY=1,v.EXTERIOR=2,v.NONE=-1;var he=function(){function e(){g(this,e)}return p(e,[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}]),e}(),de=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).name=Object.keys({NoSuchElementException:r})[0],t}return r}(Z),ge=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).name=Object.keys({UnsupportedOperationException:r})[0],t}return r}(Z),pe=function(e){s(n,e);var t=u(n);function n(){return g(this,n),t.apply(this,arguments)}return p(n,[{key:"contains",value:function(){}}]),n}(he),ve=function(e,t){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this)).map=new Map,e instanceof he&&t.addAll(e),t}return p(r,[{key:"contains",value:function(e){var t=e.hashCode?e.hashCode():e;return!!this.map.has(t)}},{key:"add",value:function(e){var t=e.hashCode?e.hashCode():e;return!this.map.has(t)&&!!this.map.set(t,e)}},{key:"addAll",value:function(e){var t,n=W(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.add(r)}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new ge}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return 0===this.map.size}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new ye(this.map)}},{key:t,value:function(){return this.map}}]),r}(pe,Symbol.iterator),ye=function(){function i(e){g(this,i),this.iterator=e.values();var t=this.iterator.next(),n=t.done,r=t.value;this.done=n,this.value=r}return p(i,[{key:"next",value:function(){if(this.done)throw new de;var e=this.value,t=this.iterator.next(),n=t.done,r=t.value;return this.done=n,this.value=r,e}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new ge}}]),i}(),y=function(){function t(){g(this,t)}return p(t,null,[{key:"opposite",value:function(e){return e===t.LEFT?t.RIGHT:e===t.RIGHT?t.LEFT:e}}]),t}();y.ON=0,y.LEFT=1,y.RIGHT=2;var me=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).name=Object.keys({EmptyStackException:r})[0],t}return r}(Z),_e=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this,e)).name=Object.keys({IndexOutOfBoundsException:r})[0],t}return r}(Z),be=function(e){s(n,e);var t=u(n);function n(){return g(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}]),n}(he),xe=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),(e=t.call(this)).array=[],e}return p(n,[{key:"add",value:function(e){return this.array.push(e),!0}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new _e;return this.array[e]}},{key:"push",value:function(e){return this.array.push(e),e}},{key:"pop",value:function(){if(0===this.array.length)throw new me;return this.array.pop()}},{key:"peek",value:function(){if(0===this.array.length)throw new me;return this.array[this.array.length-1]}},{key:"empty",value:function(){return 0===this.array.length}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(e){return this.array.indexOf(e)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}]),n}(be);function E(e,t){return e.interfaces_&&e.interfaces_.indexOf(t)>-1}var we=function(){function t(e){g(this,t),this.str=e}return p(t,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),t}(),ke=function(){function t(e){g(this,t),this.value=e}return p(t,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(e){return this.value<e?-1:this.value>e?1:0}}],[{key:"compare",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"isNan",value:function(e){return Number.isNaN(e)}},{key:"valueOf",value:function(e){return new t(e)}}]),t}(),Ee=function(){function e(){g(this,e)}return p(e,null,[{key:"isWhitespace",value:function(e){return e<=32&&e>=0||127===e}},{key:"toUpperCase",value:function(e){return e.toUpperCase()}}]),e}(),m=function(){function _(){g(this,_),_.constructor_.apply(this,arguments)}return p(_,[{key:"le",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<=e._lo}},{key:"extractSignificantDigits",value:function(e,t){var n=this.abs(),r=_.magnitude(n._hi),i=_.TEN.pow(r);(n=n.divide(i)).gt(_.TEN)?(n=n.divide(_.TEN),r+=1):n.lt(_.ONE)&&(n=n.multiply(_.TEN),r-=1);for(var o=r+1,a=new we,s=_.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){e&&u===o&&a.append(".");var l=Math.trunc(n._hi);if(l<0)break;var c=!1,f=0;l>9?(c=!0,f="9"):f="0"+l,a.append(f),n=n.subtract(_.valueOf(l)).multiply(_.TEN),c&&n.selfAdd(_.TEN);var h=!0,d=_.magnitude(n._hi);if(d<0&&Math.abs(d)>=s-u&&(h=!1),!h)break}return t[0]=r,a.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof _){var e=arguments[0];return this.add(e.negate())}if("number"==typeof arguments[0]){var t=arguments[0];return this.add(-t)}}},{key:"equals",value:function(){if(1===arguments.length&&arguments[0]instanceof _){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}},{key:"isZero",value:function(){return 0===this._hi&&0===this._lo}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof _){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(e){return this.le(e)?this:e}},{key:"selfDivide",value:function(){if(1===arguments.length){if(arguments[0]instanceof _){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfDivide(t,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null,c=null,f=null;return u=this._hi/n,f=(i=(l=_.SPLIT*u)-(i=l-u))*(a=(f=_.SPLIT*n)-(a=f-n))-(c=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,f=u+(l=(this._hi-c-f+this._lo-u*r)/n),this._hi=f,this._lo=u-f+l,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof _){var e=arguments[0],t=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/e._hi)-(t=(a=_.SPLIT*o)-(t=a-o)),u=t*(r=(u=_.SPLIT*e._hi)-(r=u-e._hi))-(s=o*e._hi)+t*(i=e._hi-r)+n*r+n*i,new _(u=o+(a=(this._hi-s-u+this._lo-o*e._lo)/e._hi),o-u+a)}if("number"==typeof arguments[0]){var l=arguments[0];return P.isNaN(l)?_.createNaN():_.copy(this).selfDivide(l,0)}}},{key:"ge",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>=e._lo}},{key:"pow",value:function(e){if(0===e)return _.valueOf(1);var t=new _(this),n=_.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(t),(r/=2)>0&&(t=t.sqr());else n=t;return e<0?n.reciprocal():n}},{key:"ceil",value:function(){if(this.isNaN())return _.NaN;var e=Math.ceil(this._hi),t=0;return e===this._hi&&(t=Math.ceil(this._lo)),new _(e,t)}},{key:"compareTo",value:function(e){var t=e;return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof _){var e=arguments[0];return this.init(e),this}if("number"==typeof arguments[0]){var t=arguments[0];return this.init(t),this}}},{key:"max",value:function(e){return this.ge(e)?this:e}},{key:"sqrt",value:function(){if(this.isZero())return _.valueOf(0);if(this.isNegative())return _.NaN;var e=1/Math.sqrt(this._hi),t=this._hi*e,n=_.valueOf(t),r=this.subtract(n.sqr())._hi*(.5*e);return n.add(r)}},{key:"selfAdd",value:function(){if(1===arguments.length){if(arguments[0]instanceof _){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+t)-(a=i-this._hi),r=(s=(o=t-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],l=arguments[1],c=null,f=null,h=null,d=null,g=null,p=null,v=null;d=this._hi+u,f=this._lo+l,g=d-(p=d-this._hi),h=f-(v=f-this._lo);var y=(c=d+(p=(g=u-p+(this._hi-g))+f))+(p=(h=l-v+(this._lo-h))+(p+(d-c))),m=p+(c-y);return this._hi=y,this._lo=m,this}}},{key:"selfMultiply",value:function(){if(1===arguments.length){if(arguments[0]instanceof _){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if("number"==typeof arguments[0]){var t=arguments[0];return this.selfMultiply(t,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,l=null;i=(u=_.SPLIT*this._hi)-this._hi,l=_.SPLIT*n,i=u-i,o=this._hi-i,a=l-n;var c=(u=this._hi*n)+(l=i*(a=l-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),f=l+(i=u-c);return this._hi=c,this._lo=f,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return _.NaN;var e=Math.floor(this._hi),t=0;return e===this._hi&&(t=Math.floor(this._lo)),new _(e,t)}},{key:"negate",value:function(){return this.isNaN()?this:new _(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(e){if(e instanceof CloneNotSupportedException)return null;throw e}}},{key:"multiply",value:function(){if(arguments[0]instanceof _){var e=arguments[0];return e.isNaN()?_.createNaN():_.copy(this).selfMultiply(e)}if("number"==typeof arguments[0]){var t=arguments[0];return P.isNaN(t)?_.createNaN():_.copy(this).selfMultiply(t,0)}}},{key:"isNaN",value:function(){return P.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var e=_.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!0,t),r=t[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+_.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+_.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i}},{key:"reciprocal",value:function(){var e,t,n,r,i=null,o=null,a=null,s=null;e=(n=1/this._hi)-(i=(a=_.SPLIT*n)-(i=a-n)),o=(s=_.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(t=this._hi-o)+e*o+e*t)-n*this._lo)/this._hi);return new _(u,n-u+a)}},{key:"toSciNotation",value:function(){if(this.isZero())return _.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var t=new Array(1).fill(null),n=this.extractSignificantDigits(!1,t),r=_.SCI_NOT_EXPONENT_CHAR+t[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r}},{key:"abs",value:function(){return this.isNaN()?_.NaN:this.isNegative()?this.negate():new _(this)}},{key:"isPositive",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:"lt",value:function(e){return this._hi<e._hi||this._hi===e._hi&&this._lo<e._lo}},{key:"add",value:function(){if(arguments[0]instanceof _){var e=arguments[0];return _.copy(this).selfAdd(e)}if("number"==typeof arguments[0]){var t=arguments[0];return _.copy(this).selfAdd(t)}}},{key:"init",value:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof _){var t=arguments[0];this._hi=t._hi,this._lo=t._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}}},{key:"gt",value:function(e){return this._hi>e._hi||this._hi===e._hi&&this._lo>e._lo}},{key:"isNegative",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?_.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[n,i,H]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof _){var t=arguments[0];this.init(t)}else if("string"==typeof arguments[0]){var n=arguments[0];_.constructor_.call(this,_.parse(n))}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}}},{key:"determinant",value:function(){if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];return _.determinant(_.valueOf(e),_.valueOf(t),_.valueOf(n),_.valueOf(r))}if(arguments[3]instanceof _&&arguments[2]instanceof _&&arguments[0]instanceof _&&arguments[1]instanceof _){var i=arguments[1],o=arguments[2],a=arguments[3];return arguments[0].multiply(a).selfSubtract(i.multiply(o))}}},{key:"sqr",value:function(e){return _.valueOf(e).selfMultiply(e)}},{key:"valueOf",value:function(){if("string"==typeof arguments[0]){var e=arguments[0];return _.parse(e)}if("number"==typeof arguments[0])return new _(arguments[0])}},{key:"sqrt",value:function(e){return _.valueOf(e).sqrt()}},{key:"parse",value:function(t){for(var e=0,n=t.length;Ee.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new _,a=0,s=0,u=0,l=!1;!(e>=n);){var c=t.charAt(e);if(e++,Ee.isDigit(c)){var f=c-"0";o.selfMultiply(_.TEN),o.selfAdd(f),a++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=ke.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a,l=!0}}var d=o;l||(s=a);var g=a-s-u;if(0===g)d=o;else if(g>0){var p=_.TEN.pow(g);d=o.divide(p)}else if(g<0){var v=_.TEN.pow(-g);d=o.multiply(v)}return r?d.negate():d}},{key:"createNaN",value:function(){return new _(P.NaN,P.NaN)}},{key:"copy",value:function(e){return new _(e)}},{key:"magnitude",value:function(e){var t=Math.abs(e),n=Math.log(t)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=t&&(r+=1),r}},{key:"stringOfChar",value:function(e,t){for(var n=new we,r=0;r<t;r++)n.append(e);return n.toString()}}]),_}();m.PI=new m(3.141592653589793,12246467991473532e-32),m.TWO_PI=new m(6.283185307179586,24492935982947064e-32),m.PI_2=new m(1.5707963267948966,6123233995736766e-32),m.E=new m(2.718281828459045,14456468917292502e-32),m.NaN=new m(P.NaN,P.NaN),m.EPS=123259516440783e-46,m.SPLIT=134217729,m.MAX_PRINT_DIGITS=32,m.TEN=m.valueOf(10),m.ONE=m.valueOf(1),m.SCI_NOT_EXPONENT_CHAR="E",m.SCI_NOT_ZERO="0.0E0";var Ne=function(){function u(){g(this,u)}return p(u,null,[{key:"orientationIndex",value:function(e,t,n){var r=u.orientationIndexFilter(e,t,n);if(r<=1)return r;var i=m.valueOf(t.x).selfAdd(-e.x),o=m.valueOf(t.y).selfAdd(-e.y),a=m.valueOf(n.x).selfAdd(-t.x),s=m.valueOf(n.y).selfAdd(-t.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof m&&arguments[2]instanceof m&&arguments[0]instanceof m&&arguments[1]instanceof m){var e=arguments[1],t=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(e.multiply(t)).signum()}if("number"==typeof arguments[3]&&"number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=m.valueOf(r),u=m.valueOf(i),l=m.valueOf(o),c=m.valueOf(a);return s.multiply(c).selfSubtract(u.multiply(l)).signum()}}},{key:"intersection",value:function(e,t,n,r){var i=new m(e.y).selfSubtract(t.y),o=new m(t.x).selfSubtract(e.x),a=new m(e.x).selfMultiply(t.y).selfSubtract(new m(t.x).selfMultiply(e.y)),s=new m(n.y).selfSubtract(r.y),u=new m(r.x).selfSubtract(n.x),l=new m(n.x).selfMultiply(r.y).selfSubtract(new m(r.x).selfMultiply(n.y)),c=o.multiply(l).selfSubtract(u.multiply(a)),f=s.multiply(a).selfSubtract(i.multiply(l)),h=i.multiply(u).selfSubtract(s.multiply(o)),d=c.selfDivide(h).doubleValue(),g=f.selfDivide(h).doubleValue();return P.isNaN(d)||P.isInfinite(d)||P.isNaN(g)||P.isInfinite(g)?null:new T(d,g)}},{key:"orientationIndexFilter",value:function(e,t,n){var r=null,i=(e.x-n.x)*(t.y-n.y),o=(e.y-n.y)*(t.x-n.x),a=i-o;if(i>0){if(o<=0)return u.signum(a);r=i+o}else{if(!(i<0))return u.signum(a);if(o>=0)return u.signum(a);r=-i-o}var s=u.DP_SAFE_EPSILON*r;return a>=s||-a>=s?u.signum(a):2}},{key:"signum",value:function(e){return e>0?1:e<0?-1:0}}]),u}();Ne.DP_SAFE_EPSILON=1e-15;var N=function(){function e(){g(this,e)}return p(e,[{key:"getM",value:function(e){if(this.hasM()){var t=this.getDimension()-this.getMeasures();return this.getOrdinate(e,t)}return P.NaN}},{key:"setOrdinate",value:function(e,t,n){}},{key:"getZ",value:function(e){return this.hasZ()?this.getOrdinate(e,2):P.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(e,t){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(e){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(e){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(e){}},{key:"copy",value:function(){}},{key:"getY",value:function(e){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[H]}}]),e}();N.X=0,N.Y=1,N.Z=2,N.M=3;var _=function(){function w(){g(this,w)}return p(w,null,[{key:"index",value:function(e,t,n){return Ne.orientationIndex(e,t,n)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var e=arguments[0],t=e.length-1;if(t<3)throw new k("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=e[0],r=0,i=1;i<=t;i++){var o=e[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=t)}while(e[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%t}while(e[s].equals2D(n)&&s!==r);var u=e[a],l=e[s];if(u.equals2D(n)||l.equals2D(n)||u.equals2D(l))return!1;var c=w.index(u,n,l);return 0===c?u.x>l.x:c>0}if(E(arguments[0],N)){var f=arguments[0],h=f.size()-1;if(h<3)throw new k("Ring has fewer than 4 points, so orientation cannot be determined");for(var d=f.getCoordinate(0),g=0,p=1;p<=h;p++){var v=f.getCoordinate(p);v.y>d.y&&(d=v,g=p)}var y=null,m=g;do{(m-=1)<0&&(m=h),y=f.getCoordinate(m)}while(y.equals2D(d)&&m!==g);var _=null,b=g;do{b=(b+1)%h,_=f.getCoordinate(b)}while(_.equals2D(d)&&b!==g);if(y.equals2D(d)||_.equals2D(d)||y.equals2D(_))return!1;var x=w.index(y,d,_);return 0===x?y.x>_.x:x>0}}}]),w}();_.CLOCKWISE=-1,_.RIGHT=_.CLOCKWISE,_.COUNTERCLOCKWISE=1,_.LEFT=_.COUNTERCLOCKWISE,_.COLLINEAR=0,_.STRAIGHT=_.COLLINEAR;var Se=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(e,t){var n=this.getRightmostSideOfSegment(e,t);return n<0&&(n=this.getRightmostSideOfSegment(e,t-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(e)),n}},{key:"findRightmostEdgeAtVertex",value:function(){var e=this._minDe.getEdge().getCoordinates();c.isTrue(this._minIndex>0&&this._minIndex<e.length,"rightmost point expected to be interior vertex of edge");var t=e[this._minIndex-1],n=e[this._minIndex+1],r=_.index(this._minCoord,n,t),i=!1;(t.y<this._minCoord.y&&n.y<this._minCoord.y&&r===_.COUNTERCLOCKWISE||t.y>this._minCoord.y&&n.y>this._minCoord.y&&r===_.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(e,t){var n=e.getEdge().getCoordinates();if(t<0||t+1>=n.length)return-1;if(n[t].y===n[t+1].y)return-1;var r=y.LEFT;return n[t].y<n[t+1].y&&(r=y.RIGHT),r}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(e){for(var t=e.getEdge().getCoordinates(),n=0;n<t.length-1;n++)(null===this._minCoord||t[n].x>this._minCoord.x)&&(this._minDe=e,this._minIndex=n,this._minCoord=t[n])}},{key:"findRightmostEdgeAtNode",value:function(){var e=this._minDe.getNode().getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();n.isForward()&&this.checkForRightmostCoordinate(n)}c.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===y.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}]),e}(),Me=function(e){s(i,e);var r=u(i);function i(e,t){var n;return g(this,i),(n=r.call(this,t?e+" [ "+t+" ]":e)).pt=t?new T(t):void 0,n.name=Object.keys({TopologyException:i})[0],n}return p(i,[{key:"getCoordinate",value:function(){return this.pt}}]),i}(se),Ie=function(){function e(){g(this,e),this.array=[]}return p(e,[{key:"addLast",value:function(e){this.array.push(e)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return 0===this.array.length}}]),e}(),w=function(e,t){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this)).array=[],e instanceof he&&t.addAll(e),t}return p(r,[{key:"interfaces_",get:function(){return[be,he]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(e){return 1===arguments.length?this.array.push(e):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(e){var t,n=W(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.array.push(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"set",value:function(e,t){var n=this.array[e];return this.array[e]=t,n}},{key:"iterator",value:function(){return new Oe(this)}},{key:"get",value:function(e){if(e<0||e>=this.size())throw new _e;return this.array[e]}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"sort",value:function(n){n?this.array.sort(function(e,t){return n.compare(e,t)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(e){for(var t=0,n=this.array.length;t<n;t++)if(this.array[t]===e)return!!this.array.splice(t,1);return!1}},{key:t,value:function(){return this.array.values()}}]),r}(be,Symbol.iterator),Oe=function(){function t(e){g(this,t),this.arrayList=e,this.position=0}return p(t,[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new de;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(e){return this.arrayList.set(this.position-1,e)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}]),t}(),Ce=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"clearVisitedEdges",value:function(){for(var e=this._dirEdgeList.iterator();e.hasNext();)e.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(e){for(var t=null,n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){t=r;break}}if(null===t)throw new Me("unable to find edge to compute depths at "+e.getCoordinate());e.getEdges().computeDepths(t);for(var i=e.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}}},{key:"computeDepth",value:function(e){this.clearVisitedEdges();var t=this._finder.getEdge();t.getNode(),t.getLabel(),t.setEdgeDepths(y.RIGHT,e),this.copySymDepths(t),this.computeDepths(t)}},{key:"create",value:function(e){this.addReachable(e),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var e=this._dirEdgeList.iterator();e.hasNext();){var t=e.next();t.getDepth(y.RIGHT)>=1&&t.getDepth(y.LEFT)<=0&&!t.isInteriorAreaEdge()&&t.setInResult(!0)}}},{key:"computeDepths",value:function(e){var t=new ve,n=new Ie,r=e.getNode();for(n.addLast(r),t.add(r),e.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();t.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();t.contains(s)||(n.addLast(s),t.add(s))}}}}},{key:"compareTo",value:function(e){var t=e;return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(null===this._env){for(var e=new h,t=this._dirEdgeList.iterator();t.hasNext();)for(var n=t.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)e.expandToInclude(n[r]);this._env=e}return this._env}},{key:"addReachable",value:function(e){var t=new xe;for(t.add(e);!t.empty();){var n=t.pop();this.add(n,t)}}},{key:"copySymDepths",value:function(e){var t=e.getSym();t.setDepth(y.LEFT,e.getDepth(y.RIGHT)),t.setDepth(y.RIGHT,e.getDepth(y.LEFT))}},{key:"add",value:function(e,t){e.setVisited(!0),this._nodes.add(e);for(var n=e.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||t.push(i)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new w,this._nodes=new w,this._rightMostCoord=null,this._env=null,this._finder=new Se}}]),e}(),Pe=function(){function e(){g(this,e)}return p(e,null,[{key:"intersection",value:function(e,t,n,r){var i=e.x<t.x?e.x:t.x,o=e.y<t.y?e.y:t.y,a=e.x>t.x?e.x:t.x,s=e.y>t.y?e.y:t.y,u=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,c=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,h=((i>u?i:u)+(a<c?a:c))/2,d=((o>l?o:l)+(s<f?s:f))/2,g=e.x-h,p=e.y-d,v=t.x-h,y=t.y-d,m=n.x-h,_=n.y-d,b=r.x-h,x=r.y-d,w=p-y,k=v-g,E=g*y-v*p,N=_-x,S=b-m,M=m*x-b*_,I=w*S-N*k,O=(k*M-S*E)/I,C=(N*E-w*M)/I;return P.isNaN(O)||P.isInfinite(O)||P.isNaN(C)||P.isInfinite(C)?null:new T(O+h,C+d)}}]),e}(),l=function(){function e(){g(this,e)}return p(e,null,[{key:"arraycopy",value:function(e,t,n,r,i){for(var o=0,a=t;a<t+i;a++)n[r+o]=e[a],o++}},{key:"getProperty",value:function(e){return{"line.separator":"\n"}[e]}}]),e}(),Te=function(){function n(){g(this,n)}return p(n,null,[{key:"log10",value:function(e){var t=Math.log(e);return P.isInfinite(t)||P.isNaN(t)?t:t/n.LOG_10}},{key:"min",value:function(e,t,n,r){var i=e;return t<i&&(i=t),n<i&&(i=n),r<i&&(i=r),i}},{key:"clamp",value:function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1],n=arguments[2];return e<t?t:e>n?n:e}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}}},{key:"wrap",value:function(e,t){return e<0?t- -e%t:e%t}},{key:"max",value:function(){if(3===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[0];return e>n&&(n=e),t>n&&(n=t),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}}},{key:"average",value:function(e,t){return(e+t)/2}}]),n}();Te.LOG_10=Math.log(10);var Le=function(){function l(){g(this,l)}return p(l,null,[{key:"segmentToSegment",value:function(e,t,n,r){if(e.equals(t))return l.pointToSegment(e,n,r);if(n.equals(r))return l.pointToSegment(r,e,t);var i=!1;if(h.intersects(e,t,n,r)){var o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y),s=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Te.min(l.pointToSegment(e,n,r),l.pointToSegment(t,n,r),l.pointToSegment(n,e,t),l.pointToSegment(r,e,t)):0}},{key:"pointToSegment",value:function(e,t,n){if(t.x===n.x&&t.y===n.y)return e.distance(t);var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;if(i<=0)return e.distance(t);if(i>=1)return e.distance(n);var o=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(o)*Math.sqrt(r)}},{key:"pointToLinePerpendicular",value:function(e,t,n){var r=(n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y),i=((t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y))/r;return Math.abs(i)*Math.sqrt(r)}},{key:"pointToSegmentString",value:function(e,t){if(0===t.length)throw new k("Line array must contain at least one vertex");for(var n=e.distance(t[0]),r=0;r<t.length-1;r++){var i=l.pointToSegment(e,t[r],t[r+1]);i<n&&(n=i)}return n}}]),l}(),Re=function(){function e(){g(this,e)}return p(e,[{key:"create",value:function(){if(1===arguments.length)arguments[0]instanceof Array||E(arguments[0],N);else if(2===arguments.length);else if(3===arguments.length){var e=arguments[0],t=arguments[1];return this.create(e,t)}}}]),e}(),Ae=function(){function e(){g(this,e)}return p(e,[{key:"filter",value:function(e){}}]),e}(),je=function(){function e(){g(this,e)}return p(e,null,[{key:"ofLine",value:function(e){var t=e.size();if(t<=1)return 0;var n=0,r=new T;e.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<t;a++){e.getCoordinate(a,r);var s=r.x,u=r.y,l=s-i,c=u-o;n+=Math.sqrt(l*l+c*c),i=s,o=u}return n}}]),e}(),De=function e(){g(this,e)},Fe=function(){function d(){g(this,d)}return p(d,null,[{key:"copyCoord",value:function(e,t,n,r){for(var i=Math.min(e.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,e.getOrdinate(t,o))}},{key:"isRing",value:function(e){var t=e.size();return 0===t||!(t<=3)&&e.getOrdinate(0,N.X)===e.getOrdinate(t-1,N.X)&&e.getOrdinate(0,N.Y)===e.getOrdinate(t-1,N.Y)}},{key:"scroll",value:function(){if(2===arguments.length){if(E(arguments[0],N)&&Number.isInteger(arguments[1])){var e=arguments[0],t=arguments[1];d.scroll(e,t,d.isRing(e))}else if(E(arguments[0],N)&&arguments[1]instanceof T){var n=arguments[0],r=arguments[1],i=d.indexOf(r,n);if(i<=0)return null;d.scroll(n,i)}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a<=0)return null;for(var u=o.copy(),l=s?o.size()-1:o.size(),c=0;c<l;c++)for(var f=0;f<o.getDimension();f++)o.setOrdinate(c,f,u.getOrdinate((a+c)%l,f));if(s)for(var h=0;h<o.getDimension();h++)o.setOrdinate(l,h,o.getOrdinate(0,h))}}},{key:"isEqual",value:function(e,t){var n=e.size();if(n!==t.size())return!1;for(var r=Math.min(e.getDimension(),t.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=e.getOrdinate(i,o),s=t.getOrdinate(i,o);if(!(e.getOrdinate(i,o)===t.getOrdinate(i,o)||P.isNaN(a)&&P.isNaN(s)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(1===arguments.length){var e=arguments[0];return d.minCoordinateIndex(e,0,e.size()-1)}if(3===arguments.length){for(var t=arguments[0],n=arguments[2],r=-1,i=null,o=arguments[1];o<=n;o++){var a=t.getCoordinate(o);(null===i||i.compareTo(a)>0)&&(i=a,r=o)}return r}}},{key:"extend",value:function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();if(d.copy(t,0,r,0,i),i>0)for(var o=i;o<n;o++)d.copy(t,i-1,r,o,1);return r}},{key:"reverse",value:function(e){for(var t=e.size()-1,n=Math.trunc(t/2),r=0;r<=n;r++)d.swap(e,r,t-r)}},{key:"swap",value:function(e,t,n){if(t===n)return null;for(var r=0;r<e.getDimension();r++){var i=e.getOrdinate(t,r);e.setOrdinate(t,r,e.getOrdinate(n,r)),e.setOrdinate(n,r,i)}}},{key:"copy",value:function(e,t,n,r,i){for(var o=0;o<i;o++)d.copyCoord(e,t+o,n,r+o)}},{key:"ensureValidRing",value:function(e,t){var n=t.size();return 0===n?t:n<=3?d.createClosedRing(e,t,4):t.getOrdinate(0,N.X)===t.getOrdinate(n-1,N.X)&&t.getOrdinate(0,N.Y)===t.getOrdinate(n-1,N.Y)?t:d.createClosedRing(e,t,n+1)}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.size();n++)if(e.x===t.getOrdinate(n,N.X)&&e.y===t.getOrdinate(n,N.Y))return n;return-1}},{key:"createClosedRing",value:function(e,t,n){var r=e.create(n,t.getDimension()),i=t.size();d.copy(t,0,r,0,i);for(var o=i;o<n;o++)d.copy(t,0,r,o,1);return r}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.size();n++){var r=e.getCoordinate(n);(null===t||t.compareTo(r)>0)&&(t=r)}return t}}]),d}(),S=function(){function t(){g(this,t)}return p(t,null,[{key:"toDimensionSymbol",value:function(e){switch(e){case t.FALSE:return t.SYM_FALSE;case t.TRUE:return t.SYM_TRUE;case t.DONTCARE:return t.SYM_DONTCARE;case t.P:return t.SYM_P;case t.L:return t.SYM_L;case t.A:return t.SYM_A}throw new k("Unknown dimension value: "+e)}},{key:"toDimensionValue",value:function(e){switch(Ee.toUpperCase(e)){case t.SYM_FALSE:return t.FALSE;case t.SYM_TRUE:return t.TRUE;case t.SYM_DONTCARE:return t.DONTCARE;case t.SYM_P:return t.P;case t.SYM_L:return t.L;case t.SYM_A:return t.A}throw new k("Unknown dimension symbol: "+e)}}]),t}();S.P=0,S.L=1,S.A=2,S.FALSE=-1,S.TRUE=-2,S.DONTCARE=-3,S.SYM_FALSE="F",S.SYM_TRUE="T",S.SYM_DONTCARE="*",S.SYM_P="0",S.SYM_L="1",S.SYM_A="2";var ze=function(){function e(){g(this,e)}return p(e,[{key:"filter",value:function(e){}}]),e}(),Ve=function(){function e(){g(this,e)}return p(e,[{key:"filter",value:function(e,t){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}]),e}(),qe=function(e){s(i,e);var t=u(i);function i(){var e;return g(this,i),e=t.call(this),i.constructor_.apply(r(e),arguments),e}return p(i,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new h:this._points.expandEnvelope(new h)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new i(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof d){var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),t))return!1;return!0}return x(b(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<Math.trunc(this._points.size()/2);e++){var t=this._points.size()-1-e;if(!this._points.getCoordinate(e).equals(this._points.getCoordinate(t))){if(this._points.getCoordinate(e).compareTo(this._points.getCoordinate(t))>0){var n=this._points.copy();Fe.reverse(n),this._points=n}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?S.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Fe.reverse(e),this.getFactory().createLineString(e)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return d.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return je.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(1===arguments.length){for(var e=arguments[0],t=0,n=0;t<this._points.size()&&n<e._points.size();){var r=this._points.getCoordinate(t).compareTo(e._points.getCoordinate(n));if(0!==r)return r;t++,n++}return t<this._points.size()?1:n<e._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}}},{key:"apply",value:function(){if(E(arguments[0],Ae))for(var e=arguments[0],t=0;t<this._points.size();t++)e.filter(this._points.getCoordinate(t));else if(E(arguments[0],Ve)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(E(arguments[0],ze)||E(arguments[0],X))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new ge}},{key:"isEquivalentClass",value:function(e){return e instanceof i}},{key:"getCoordinateN",value:function(e){return this._points.getCoordinate(e)}},{key:"getGeometryType",value:function(){return d.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return 0===this._points.size()}},{key:"init",value:function(e){if(null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),1===e.size())throw new k("Invalid number of points in LineString (found "+e.size()+" - must be 0 or >= 2)");this._points=e}},{key:"isCoordinate",value:function(e){for(var t=0;t<this._points.size();t++)if(this._points.getCoordinate(t).equals(e))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(e){return this.getFactory().createPoint(this._points.getCoordinate(e))}},{key:"interfaces_",get:function(){return[De]}}],[{key:"constructor_",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];d.constructor_.call(this,t),this.init(e)}}}]),i}(d),Be=function e(){g(this,e)},Ge=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new h;var e=new h;return e.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),e}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new n(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof d){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),t))}return x(b(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return S.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return d.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0];return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var t=arguments[0];return arguments[1].compare(this._coordinates,t._coordinates)}}},{key:"apply",value:function(){if(E(arguments[0],Ae)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.getCoordinate())}else if(E(arguments[0],Ve)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this._coordinates,0),t.isGeometryChanged()&&this.geometryChanged()}else(E(arguments[0],ze)||E(arguments[0],X))&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return d.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return 0===this._coordinates.size()}},{key:"init",value:function(e){null===e&&(e=this.getFactory().getCoordinateSequenceFactory().create([])),c.isTrue(e.size()<=1),this._coordinates=e}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Be]}}],[{key:"constructor_",value:function(){this._coordinates=null;var e=arguments[0],t=arguments[1];d.constructor_.call(this,t),this.init(e)}}]),n}(d),Ye=function(){function n(){g(this,n)}return p(n,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];return Math.abs(n.ofRingSigned(e))}if(E(arguments[0],N)){var t=arguments[0];return Math.abs(n.ofRingSigned(t))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];if(e.length<3)return 0;for(var t=0,n=e[0].x,r=1;r<e.length-1;r++){var i=e[r].x-n,o=e[r+1].y;t+=i*(e[r-1].y-o)}return t/2}if(E(arguments[0],N)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new T,l=new T,c=new T;a.getCoordinate(0,l),a.getCoordinate(1,c);var f=l.x;c.x-=f;for(var h=0,d=1;d<s-1;d++)u.y=l.y,l.x=c.x,l.y=c.y,a.getCoordinate(d+1,c),c.x-=f,h+=l.x*(u.y-c.y);return h/2}}}]),n}(),Ue=function(){function e(){g(this,e)}return p(e,null,[{key:"sort",value:function(){var n=arguments,e=arguments[0];if(1===arguments.length)e.sort(function(e,t){return e.compareTo(t)});else if(2===arguments.length)e.sort(function(e,t){return n[1].compare(e,t)});else if(3===arguments.length){var t=e.slice(arguments[1],arguments[2]);t.sort();var r=e.slice(0,arguments[1]).concat(t,e.slice(arguments[2],e.length));e.splice(0,e.length);var i,o=W(r);try{for(o.s();!(i=o.n()).done;){var a=i.value;e.push(a)}}catch(n){o.e(n)}finally{o.f()}}else if(4===arguments.length){var s=e.slice(arguments[1],arguments[2]);s.sort(function(e,t){return n[3].compare(e,t)});var u=e.slice(0,arguments[1]).concat(s,e.slice(arguments[2],e.length));e.splice(0,e.length);var l,c=W(u);try{for(c.s();!(l=c.n()).done;){var f=l.value;e.push(f)}}catch(n){c.e(n)}finally{c.f()}}}},{key:"asList",value:function(e){var t,n=new w,r=W(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.add(i)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"copyOf",value:function(e,t){return e.slice(0,t)}}]),e}(),We=function e(){g(this,e)},Ze=function(e){s(a,e);var t=u(a);function a(){var e;return g(this,a),e=t.call(this),a.constructor_.apply(r(e),arguments),e}return p(a,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)e[++t]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)e[++t]=o[a];return e}},{key:"getArea",value:function(){var e=0;e+=Ye.ofRing(this._shell.getCoordinateSequence());for(var t=0;t<this._holes.length;t++)e-=Ye.ofRing(this._holes[t].getCoordinateSequence());return e}},{key:"copyInternal",value:function(){for(var e=this._shell.copy(),t=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)t[n]=this._holes[n].copy();return new a(e,t,this._factory)}},{key:"isRectangle",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var e=this._shell.getCoordinateSequence(),t=this.getEnvelopeInternal(),n=0;n<5;n++){var r=e.getX(n);if(r!==t.getMinX()&&r!==t.getMaxX())return!1;var i=e.getY(n);if(i!==t.getMinY()&&i!==t.getMaxY())return!1}for(var o=e.getX(0),a=e.getY(0),s=1;s<=4;s++){var u=e.getX(s),l=e.getY(s);if(u!==o==(l!==a))return!1;o=u,a=l}return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof d){var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,r=this._shell,i=n._shell;if(!r.equalsExact(i,t))return!1;if(this._holes.length!==n._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],t))return!1;return!0}return x(b(a.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var e=0;e<this._holes.length;e++)this._holes[e]=this.normalized(this._holes[e],!1);Ue.sort(this._holes)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];if(t.isEmpty())return null;var r=t.getCoordinateSequence(),i=Fe.minCoordinateIndex(r,0,r.size()-2);Fe.scroll(r,i,!0),_.isCCW(r)===n&&Fe.reverse(r)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var e=this.getExteriorRing().reverse(),t=new Array(this.getNumInteriorRing()).fill(null),n=0;n<t.length;n++)t[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(e,t)}},{key:"getTypeCode",value:function(){return d.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var e=0;e+=this._shell.getLength();for(var t=0;t<this._holes.length;t++)e+=this._holes[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=this._shell.getNumPoints(),t=0;t<this._holes.length;t++)e+=this._holes[t].getNumPoints();return e}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(e,t){var n=e.copy();return this.normalize(n,t),n}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0],t=this._shell,n=e._shell;return t.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),l=i.getNumInteriorRing(),c=0;c<u&&c<l;){var f=this.getInteriorRingN(c),h=i.getInteriorRingN(c),d=f.compareToSameClass(h,r);if(0!==d)return d;c++}return c<u?1:c<l?-1:0}}},{key:"apply",value:function(){if(E(arguments[0],Ae)){var e=arguments[0];this._shell.apply(e);for(var t=0;t<this._holes.length;t++)this._holes[t].apply(e)}else if(E(arguments[0],Ve)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var r=0;r<this._holes.length&&(this._holes[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(E(arguments[0],ze))arguments[0].filter(this);else if(E(arguments[0],X)){var i=arguments[0];i.filter(this),this._shell.apply(i);for(var o=0;o<this._holes.length;o++)this._holes[o].apply(i)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var t=0;t<this._holes.length;t++)e[t+1]=this._holes[t];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)}},{key:"getGeometryType",value:function(){return d.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(e){return this._holes[e]}},{key:"interfaces_",get:function(){return[We]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(d.constructor_.call(this,n),null===e&&(e=this.getFactory().createLinearRing()),null===t&&(t=[]),d.hasNullElements(t))throw new k("holes must not contain null elements");if(e.isEmpty()&&d.hasNonEmptyElements(t))throw new k("shell is empty but holes are not");this._shell=e,this._holes=t}}]),a}(d),Xe=function(e){s(n,e);var t=u(n);function n(){return g(this,n),t.apply(this,arguments)}return n}(pe),He=function(e){s(r,e);var n=u(r);function r(e){var t;return g(this,r),(t=n.call(this)).array=[],e instanceof he&&t.addAll(e),t}return p(r,[{key:"contains",value:function(e){var t,n=W(this.array);try{for(n.s();!(t=n.n()).done;)if(0===t.value.compareTo(e))return!0}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"add",value:function(e){if(this.contains(e))return!1;for(var t=0,n=this.array.length;t<n;t++)if(1===this.array[t].compareTo(e))return!!this.array.splice(t,0,e);return this.array.push(e),!0}},{key:"addAll",value:function(e){var t,n=W(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.add(r)}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"remove",value:function(){throw new ge}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return 0===this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new $e(this.array)}}]),r}(Xe),$e=function(){function t(e){g(this,t),this.array=e,this.position=0}return p(t,[{key:"next",value:function(){if(this.position===this.array.length)throw new de;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new ge}}]),t}(),M=function(e){s(i,e);var t=u(i);function i(){var e;return g(this,i),e=t.call(this),i.constructor_.apply(r(e),arguments),e}return p(i,[{key:"computeEnvelopeInternal",value:function(){for(var e=new h,t=0;t<this._geometries.length;t++)e.expandToInclude(this._geometries[t].getEnvelopeInternal());return e}},{key:"getGeometryN",value:function(e){return this._geometries[e]}},{key:"getCoordinates",value:function(){for(var e=new Array(this.getNumPoints()).fill(null),t=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)e[++t]=r[i];return e}},{key:"getArea",value:function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getArea();return e}},{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new i(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof d){var e=arguments[0],t=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],t))return!1;return!0}return x(b(i.prototype),"equalsExact",this).apply(this,arguments)}},{key:"normalize",value:function(){for(var e=0;e<this._geometries.length;e++)this._geometries[e].normalize();Ue.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var e=S.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getBoundaryDimension());return e}},{key:"reverseInternal",value:function(){for(var e=this._geometries.length,t=new w(e),n=0;n<e;n++)t.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(t)}},{key:"getTypeCode",value:function(){return d.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var e=S.FALSE,t=0;t<this._geometries.length;t++)e=Math.max(e,this._geometries[t].getDimension());return e}},{key:"getLength",value:function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getLength();return e}},{key:"getNumPoints",value:function(){for(var e=0,t=0;t<this._geometries.length;t++)e+=this._geometries[t].getNumPoints();return e}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(1===arguments.length){var e=arguments[0],t=new He(Ue.asList(this._geometries)),n=new He(Ue.asList(e._geometries));return this.compare(t,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),l=i.getGeometryN(s),c=u.compareToSameClass(l,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}}},{key:"apply",value:function(){if(E(arguments[0],Ae))for(var e=arguments[0],t=0;t<this._geometries.length;t++)this._geometries[t].apply(e);else if(E(arguments[0],Ve)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(E(arguments[0],ze)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(E(arguments[0],X)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}}},{key:"getBoundary",value:function(){return d.checkNotGeometryCollection(this),c.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return d.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];if(d.constructor_.call(this,t),null===e&&(e=[]),d.hasNullElements(e))throw new k("geometries must not contain null elements");this._geometries=e}}}]),i}(d),Je=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof d){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&x(b(n.prototype),"equalsExact",this).call(this,e,t)}return x(b(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var e=arguments[0];return this._geometries[e].getCoordinate()}return x(b(n.prototype),"getCoordinate",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return S.FALSE}},{key:"getTypeCode",value:function(){return d.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return d.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Be]}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];M.constructor_.call(this,e,t)}}]),n}(M),Ke=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"copyInternal",value:function(){return new n(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return S.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||x(b(n.prototype),"isClosed",this).call(this)}},{key:"reverseInternal",value:function(){var e=this._points.copy();return Fe.reverse(e),this.getFactory().createLinearRing(e)}},{key:"getTypeCode",value:function(){return d.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!x(b(n.prototype),"isClosed",this).call(this))throw new k("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<n.MINIMUM_VALID_SIZE)throw new k("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return d.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];qe.constructor_.call(this,e,t),this.validateConstruction()}}]),n}(qe);Ke.MINIMUM_VALID_SIZE=4;var Qe=function(e){s(i,e);var t=u(i);function i(){var e;return g(this,i),e=t.call(this),i.constructor_.apply(r(e),arguments),e}return p(i,[{key:"setOrdinate",value:function(e,t){switch(e){case i.X:this.x=t;break;case i.Y:this.y=t;break;default:throw new k("Invalid ordinate index: "+e)}}},{key:"getZ",value:function(){return T.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case i.X:return this.x;case i.Y:return this.y}throw new k("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new k("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new i(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ()}}],[{key:"constructor_",value:function(){if(0===arguments.length)T.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof i){var e=arguments[0];T.constructor_.call(this,e.x,e.y)}else if(arguments[0]instanceof T){var t=arguments[0];T.constructor_.call(this,t.x,t.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];T.constructor_.call(this,n,r,T.NULL_ORDINATE)}}}]),i}(T);Qe.X=0,Qe.Y=1,Qe.Z=-1,Qe.M=-1;var et=function(e){s(o,e);var t=u(o);function o(){var e;return g(this,o),e=t.call(this),o.constructor_.apply(r(e),arguments),e}return p(o,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,t){switch(e){case o.X:this.x=t;break;case o.Y:this.y=t;break;case o.M:this._m=t;break;default:throw new k("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getZ",value:function(){return T.NULL_ORDINATE}},{key:"getOrdinate",value:function(e){switch(e){case o.X:return this.x;case o.Y:return this.y;case o.M:return this._m}throw new k("Invalid ordinate index: "+e)}},{key:"setZ",value:function(e){throw new k("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new o(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)T.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof o){var e=arguments[0];T.constructor_.call(this,e.x,e.y),this._m=e._m}else if(arguments[0]instanceof T){var t=arguments[0];T.constructor_.call(this,t.x,t.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];T.constructor_.call(this,n,r,T.NULL_ORDINATE),this._m=i}}}]),o}(T);et.X=0,et.Y=1,et.Z=-1,et.M=2;var tt=function(e){s(a,e);var t=u(a);function a(){var e;return g(this,a),e=t.call(this),a.constructor_.apply(r(e),arguments),e}return p(a,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(e,t){switch(e){case T.X:this.x=t;break;case T.Y:this.y=t;break;case T.Z:this.z=t;break;case T.M:this._m=t;break;default:throw new k("Invalid ordinate index: "+e)}}},{key:"setM",value:function(e){this._m=e}},{key:"getOrdinate",value:function(e){switch(e){case T.X:return this.x;case T.Y:return this.y;case T.Z:return this.getZ();case T.M:return this.getM()}throw new k("Invalid ordinate index: "+e)}},{key:"copy",value:function(){return new a(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(e){this.x=e.x,this.y=e.y,this.z=e.getZ(),this._m=e.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,0===arguments.length)T.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof a){var e=arguments[0];T.constructor_.call(this,e),this._m=e._m}else if(arguments[0]instanceof T){var t=arguments[0];T.constructor_.call(this,t),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];T.constructor_.call(this,n,r,i),this._m=o}}}]),a}(T),nt=function(){function r(){g(this,r)}return p(r,null,[{key:"measures",value:function(e){return e instanceof Qe?0:e instanceof et||e instanceof tt?1:0}},{key:"dimension",value:function(e){return e instanceof Qe?2:e instanceof et?3:e instanceof tt?4:3}},{key:"create",value:function(){if(1===arguments.length){var e=arguments[0];return r.create(e,0)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return 2===t?new Qe:3===t&&0===n?new T:3===t&&1===n?new et:4===t&&1===n?new tt:new T}}}]),r}(),rt=function(e){s(_,e);var t=u(_);function _(){var e;return g(this,_),e=t.call(this),_.constructor_.apply(r(e),arguments),e}return p(_,[{key:"getCoordinate",value:function(e){return this.get(e)}},{key:"addAll",value:function(){if(2===arguments.length&&"boolean"==typeof arguments[1]&&E(arguments[0],he)){for(var e=arguments[1],t=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),e),t=!0;return t}return x(b(_.prototype),"addAll",this).apply(this,arguments)}},{key:"clone",value:function(){for(var e=x(b(_.prototype),"clone",this).call(this),t=0;t<this.size();t++)e.add(t,this.get(t).clone());return e}},{key:"toCoordinateArray",value:function(){if(0===arguments.length)return this.toArray(_.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(_.coordArrayType);for(var e=this.size(),t=new Array(e).fill(null),n=0;n<e;n++)t[n]=this.get(e-n-1);return t}}},{key:"add",value:function(){if(1===arguments.length){var e=arguments[0];return x(b(_.prototype),"add",this).call(this,e)}if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var t=arguments[0],n=arguments[1];return this.add(t,n,!0),!0}if(arguments[0]instanceof T&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;x(b(_.prototype),"add",this).call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];if(arguments[2])for(var u=0;u<a.length;u++)this.add(a[u],s);else for(var l=a.length-1;l>=0;l--)this.add(a[l],s);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof T){var c=arguments[0],f=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(c>0&&this.get(c-1).equals2D(f))return null;if(c<h&&this.get(c).equals2D(f))return null}}x(b(_.prototype),"add",this).call(this,c,f)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],p=arguments[2],v=arguments[3],y=1;p>v&&(y=-1);for(var m=p;m!==v;m+=y)this.add(d[m],g);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var e=this.get(0).copy();this.add(e,!1)}}}],[{key:"constructor_",value:function(){if(0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.ensureCapacity(t.length),this.add(t,n)}}}]),_}(w);rt.coordArrayType=new Array(0).fill(null);var I=function(){function i(){g(this,i)}return p(i,null,[{key:"isRing",value:function(e){return!(e.length<4||!e[0].equals2D(e[e.length-1]))}},{key:"ptNotInList",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(i.indexOf(r,t)<0)return r}return null}},{key:"scroll",value:function(e,t){var n=i.indexOf(t,e);if(n<0)return null;var r=new Array(e.length).fill(null);l.arraycopy(e,n,r,0,e.length-n),l.arraycopy(e,0,r,e.length-n,n),l.arraycopy(r,0,e,0,e.length)}},{key:"equals",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].equals(t[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}}},{key:"intersection",value:function(e,t){for(var n=new rt,r=0;r<e.length;r++)t.intersects(e[r])&&n.add(e[r],!0);return n.toCoordinateArray()}},{key:"measures",value:function(e){if(null===e||0===e.length)return 0;var t,n=0,r=W(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=Math.max(n,nt.measures(i))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"hasRepeatedPoints",value:function(e){for(var t=1;t<e.length;t++)if(e[t-1].equals(e[t]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(e){return i.hasRepeatedPoints(e)?new rt(e,!1).toCoordinateArray():e}},{key:"reverse",value:function(e){for(var t=e.length-1,n=Math.trunc(t/2),r=0;r<=n;r++){var i=e[r];e[r]=e[t-r],e[t-r]=i}}},{key:"removeNull",value:function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n]&&t++;var r=new Array(t).fill(null);if(0===t)return r;for(var i=0,o=0;o<e.length;o++)null!==e[o]&&(r[i++]=e[o]);return r}},{key:"copyDeep",value:function(){if(1===arguments.length){for(var e=arguments[0],t=new Array(e.length).fill(null),n=0;n<e.length;n++)t[n]=e[n].copy();return t}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=r[i+u].copy()}},{key:"isEqualReversed",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[e.length-n-1];if(0!==r.compareTo(i))return!1}return!0}},{key:"envelope",value:function(e){for(var t=new h,n=0;n<e.length;n++)t.expandToInclude(e[n]);return t}},{key:"toCoordinateArray",value:function(e){return e.toArray(i.coordArrayType)}},{key:"dimension",value:function(e){if(null===e||0===e.length)return 3;var t,n=0,r=W(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n=Math.max(n,nt.dimension(i))}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"atLeastNCoordinatesOrNothing",value:function(e,t){return t.length>=e?t:[]}},{key:"indexOf",value:function(e,t){for(var n=0;n<t.length;n++)if(e.equals(t[n]))return n;return-1}},{key:"increasingDirection",value:function(e){for(var t=0;t<Math.trunc(e.length/2);t++){var n=e.length-1-t,r=e[t].compareTo(e[n]);if(0!==r)return r}return 1}},{key:"compare",value:function(e,t){for(var n=0;n<e.length&&n<t.length;){var r=e[n].compareTo(t[n]);if(0!==r)return r;n++}return n<t.length?-1:n<e.length?1:0}},{key:"minCoordinate",value:function(e){for(var t=null,n=0;n<e.length;n++)(null===t||t.compareTo(e[n])>0)&&(t=e[n]);return t}},{key:"extract",value:function(e,t,n){t=Te.clamp(t,0,e.length);var r=(n=Te.clamp(n,-1,e.length))-t+1;n<0&&(r=0),t>=e.length&&(r=0),n<t&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=t;a<=n;a++)i[o++]=e[a];return i}}]),i}(),it=function(){function e(){g(this,e)}return p(e,[{key:"compare",value:function(e,t){var n=e,r=t;return I.compare(n,r)}},{key:"interfaces_",get:function(){return[ae]}}]),e}(),ot=function(){function e(){g(this,e)}return p(e,[{key:"compare",value:function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=I.compare(n,r);return I.isEqualReversed(n,r)?0:i}},{key:"OLDcompare",value:function(e,t){var n=e,r=t;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=I.increasingDirection(n),o=I.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(r[s]);if(0!==l)return l;a+=i,s+=o}return 0}},{key:"interfaces_",get:function(){return[ae]}}]),e}();I.ForwardComparator=it,I.BidirectionalComparator=ot,I.coordArrayType=new Array(0).fill(null);var at=function(){function t(e){g(this,t),this.str=e}return p(t,[{key:"append",value:function(e){this.str+=e}},{key:"setCharAt",value:function(e,t){this.str=this.str.substr(0,e)+t+this.str.substr(e+1)}},{key:"toString",value:function(){return this.str}}]),t}(),st=function(){function y(){g(this,y),y.constructor_.apply(this,arguments)}return p(y,[{key:"getM",value:function(e){return this.hasM()?this._coordinates[e].getM():P.NaN}},{key:"setOrdinate",value:function(e,t,n){switch(t){case N.X:this._coordinates[e].x=n;break;case N.Y:this._coordinates[e].y=n;break;default:this._coordinates[e].setOrdinate(t,n)}}},{key:"getZ",value:function(e){return this.hasZ()?this._coordinates[e].getZ():P.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(e,t){switch(t){case N.X:return this._coordinates[e].x;case N.Y:return this._coordinates[e].y;default:return this._coordinates[e].getOrdinate(t)}}},{key:"getCoordinate",value:function(){if(1===arguments.length){var e=arguments[0];return this._coordinates[e]}if(2===arguments.length){var t=arguments[0];arguments[1].setCoordinate(this._coordinates[t])}}},{key:"getCoordinateCopy",value:function(e){var t=this.createCoordinate();return t.setCoordinate(this._coordinates[e]),t}},{key:"createCoordinate",value:function(){return nt.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(e){return this._coordinates[e].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(e){for(var t=0;t<this._coordinates.length;t++)e.expandToInclude(this._coordinates[t]);return e}},{key:"copy",value:function(){for(var e=new Array(this.size()).fill(null),t=0;t<this._coordinates.length;t++){var n=this.createCoordinate();n.setCoordinate(this._coordinates[t]),e[t]=n}return new y(e,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var e=new at(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var t=1;t<this._coordinates.length;t++)e.append(", "),e.append(this._coordinates[t]);return e.append(")"),e.toString()}return"()"}},{key:"getY",value:function(e){return this._coordinates[e].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[N,n]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];y.constructor_.call(this,e,I.dimension(e),I.measures(e))}else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var n=0;n<t;n++)this._coordinates[n]=new T}else if(E(arguments[0],N)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)this._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];y.constructor_.call(this,o,a,I.measures(o))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],u=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=u;for(var l=0;l<s;l++)this._coordinates[l]=nt.create(u)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1],h=arguments[2];this._dimension=f,this._measures=h,this._coordinates=null===c?new Array(0).fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var d=arguments[0],g=arguments[1],p=arguments[2];this._coordinates=new Array(d).fill(null),this._dimension=g,this._measures=p;for(var v=0;v<d;v++)this._coordinates[v]=this.createCoordinate()}}}]),y}(),ut=function(){function e(){g(this,e)}return p(e,[{key:"readResolve",value:function(){return e.instance()}},{key:"create",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new st(arguments[0]);if(E(arguments[0],N))return new st(arguments[0])}else{if(2===arguments.length){var e=arguments[1];return e>3&&(e=3),e<2&&(e=2),new st(arguments[0],e)}if(3===arguments.length){var t=arguments[2],n=arguments[1]-t;return t>1&&(t=1),n>3&&(n=3),n<2&&(n=2),new st(arguments[0],n+t,t)}}}},{key:"interfaces_",get:function(){return[Re,n]}}],[{key:"instance",value:function(){return e.instanceObject}}]),e}();ut.instanceObject=new ut;var lt=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof d){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&x(b(n.prototype),"equalsExact",this).call(this,e,t)}return x(b(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return d.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new w,t=0;t<this._geometries.length;t++)for(var n=this._geometries[t].getBoundary(),r=0;r<n.getNumGeometries();r++)e.add(n.getGeometryN(r));var i=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(i))}},{key:"getGeometryType",value:function(){return d.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[We]}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];M.constructor_.call(this,e,t)}}]),n}(M),ct=function(){function e(){g(this,e)}return p(e,[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}]),e}(),ft=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),(e=t.call(this)).map=new Map,e}return p(n,[{key:"get",value:function(e){return this.map.get(e)||null}},{key:"put",value:function(e,t){return this.map.set(e,t),t}},{key:"values",value:function(){for(var e=new w,t=this.map.values(),n=t.next();!n.done;)e.add(n.value),n=t.next();return e}},{key:"entrySet",value:function(){var t=new ve;return this.map.entries().forEach(function(e){return t.add(e)}),t}},{key:"size",value:function(){return this.map.size()}}]),n}(ct),ht=function(){function r(){g(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"equals",value:function(e){if(!(e instanceof r))return!1;var t=e;return this._modelType===t._modelType&&this._scale===t._scale}},{key:"compareTo",value:function(e){var t=e,n=this.getMaximumSignificantDigits(),r=t.getMaximumSignificantDigits();return ke.compare(n,r)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===r.FLOATING||this._modelType===r.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var e="UNKNOWN";return this._modelType===r.FLOATING?e="Floating":this._modelType===r.FLOATING_SINGLE?e="Floating-Single":this._modelType===r.FIXED&&(e="Fixed (Scale="+this.getScale()+")"),e}},{key:"makePrecise",value:function(){if("number"==typeof arguments[0]){var e=arguments[0];return P.isNaN(e)||this._modelType===r.FLOATING_SINGLE?e:this._modelType===r.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof T){var t=arguments[0];if(this._modelType===r.FLOATING)return null;t.x=this.makePrecise(t.x),t.y=this.makePrecise(t.y)}}},{key:"getMaximumSignificantDigits",value:function(){var e=16;return this._modelType===r.FLOATING?e=16:this._modelType===r.FLOATING_SINGLE?e=6:this._modelType===r.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}},{key:"setScale",value:function(e){this._scale=Math.abs(e)}},{key:"interfaces_",get:function(){return[n,i]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=r.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof dt){var e=arguments[0];this._modelType=e,e===r.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var t=arguments[0];this._modelType=r.FIXED,this.setScale(t)}else if(arguments[0]instanceof r){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}},{key:"mostPrecise",value:function(e,t){return e.compareTo(t)>=0?e:t}}]),r}(),dt=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"readResolve",value:function(){return t.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[n]}}],[{key:"constructor_",value:function(){this._name=null;var e=arguments[0];this._name=e,t.nameToTypeMap.put(e,this)}}]),t}();dt.nameToTypeMap=new ft,ht.Type=dt,ht.FIXED=new dt("FIXED"),ht.FLOATING=new dt("FLOATING"),ht.FLOATING_SINGLE=new dt("FLOATING SINGLE"),ht.maximumPreciseValue=9007199254740992;var gt=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"copyInternal",value:function(){for(var e=new Array(this._geometries.length).fill(null),t=0;t<e.length;t++)e[t]=this._geometries[t].copy();return new n(e,this._factory)}},{key:"equalsExact",value:function(){if(2===arguments.length&&"number"==typeof arguments[1]&&arguments[0]instanceof d){var e=arguments[0],t=arguments[1];return!!this.isEquivalentClass(e)&&x(b(n.prototype),"equalsExact",this).call(this,e,t)}return x(b(n.prototype),"equalsExact",this).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?S.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!this._geometries[e].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return d.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new ge}},{key:"getGeometryType",value:function(){return d.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[De]}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];M.constructor_.call(this,e,t)}}]),n}(M),pt=function(){function u(){g(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"createEmpty",value:function(e){switch(e){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new k("Invalid dimension: "+e)}}},{key:"toGeometry",value:function(e){return e.isNull()?this.createPoint():e.getMinX()===e.getMaxX()&&e.getMinY()===e.getMaxY()?this.createPoint(new T(e.getMinX(),e.getMinY())):e.getMinX()===e.getMaxX()||e.getMinY()===e.getMaxY()?this.createLineString([new T(e.getMinX(),e.getMinY()),new T(e.getMaxX(),e.getMaxY())]):this.createPolygon(this.createLinearRing([new T(e.getMinX(),e.getMinY()),new T(e.getMinX(),e.getMaxY()),new T(e.getMaxX(),e.getMaxY()),new T(e.getMaxX(),e.getMinY()),new T(e.getMinX(),e.getMinY())]),null)}},{key:"createLineString",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLineString(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(E(arguments[0],N))return new qe(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return 0===arguments.length?new gt(null,this):1===arguments.length?new gt(arguments[0],this):void 0}},{key:"buildGeometry",value:function(e){for(var t=null,n=!1,r=!1,i=e.iterator();i.hasNext();){var o=i.next(),a=o.getTypeCode();null===t&&(t=a),a!==t&&(n=!0),o instanceof M&&(r=!0)}if(null===t)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(u.toGeometryArray(e));var s=e.iterator().next();if(e.size()>1){if(s instanceof Ze)return this.createMultiPolygon(u.toPolygonArray(e));if(s instanceof qe)return this.createMultiLineString(u.toLineStringArray(e));if(s instanceof Ge)return this.createMultiPoint(u.toPointArray(e));c.shouldNeverReachHere("Unhandled geometry type: "+s.getGeometryType())}return s}},{key:"createMultiPointFromCoords",value:function(e){return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}},{key:"createPoint",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof T){var e=arguments[0];return this.createPoint(null!==e?this.getCoordinateSequenceFactory().create([e]):null)}if(E(arguments[0],N))return new Ge(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(E(arguments[0],N)){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Array){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Ke){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Ze(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return 0===arguments.length?new M(null,this):1===arguments.length?new M(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return this.createLinearRing(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(E(arguments[0],N))return new Ke(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return 0===arguments.length?new lt(null,this):1===arguments.length?new lt(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(0===arguments.length)return new Je(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Je(arguments[0],this);if(E(arguments[0],N)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var t=new Array(e.size()).fill(null),n=0;n<e.size();n++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension(),e.getMeasures());Fe.copy(e,n,r,0,1),t[n]=this.createPoint(r)}return this.createMultiPoint(t)}}}},{key:"interfaces_",get:function(){return[n]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)u.constructor_.call(this,new ht,0);else if(1===arguments.length){if(E(arguments[0],Re)){var e=arguments[0];u.constructor_.call(this,new ht,0,e)}else if(arguments[0]instanceof ht){var t=arguments[0];u.constructor_.call(this,t,0,u.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];u.constructor_.call(this,n,r,u.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._precisionModel=i,this._coordinateSequenceFactory=a,this._SRID=o}}},{key:"toMultiPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toGeometryArray",value:function(e){if(null===e)return null;var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return ut.instance()}},{key:"toMultiLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLineStringArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toMultiPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toLinearRingArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPointArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"toPolygonArray",value:function(e){var t=new Array(e.size()).fill(null);return e.toArray(t)}},{key:"createPointFromInternalCoord",value:function(e,t){return t.getPrecisionModel().makePrecise(e),t.getFactory().createPoint(e)}}]),u}(),vt="XY",yt="XYZ",mt="XYM",_t="XYZM",bt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},xt="EMPTY",wt=1,kt=2,Et=3,Nt=4,St=5,Mt=6;for(var It in bt)bt[It].toUpperCase();var Ot=function(){function t(e){g(this,t),this.wkt=e,this.index_=-1}return p(t,[{key:"isAlpha_",value:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}},{key:"isNumeric_",value:function(e,t){return e>="0"&&e<="9"||"."==e&&!(void 0!==t&&t)}},{key:"isWhiteSpace_",value:function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var e,t=this.nextChar_(),n=this.index_,r=t;if("("==t)e=kt;else if(","==t)e=St;else if(")"==t)e=Et;else if(this.isNumeric_(t)||"-"==t)e=Nt,r=this.readNumber_();else if(this.isAlpha_(t))e=wt,r=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e=Mt}return{position:n,value:r,type:e}}},{key:"readNumber_",value:function(){var e,t=this.index_,n=!1,r=!1;do{"."==e?n=!0:"e"!=e&&"E"!=e||(r=!0),e=this.nextChar_()}while(this.isNumeric_(e,n)||!r&&("e"==e||"E"==e)||r&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))}},{key:"readText_",value:function(){var e,t=this.index_;do{e=this.nextChar_()}while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}]),t}(),Ct=function(){function n(e,t){g(this,n),this.lexer_=e,this.token_,this.layout_=vt,this.factory=t}return p(n,[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(e){return this.token_.type==e}},{key:"match",value:function(e){var t=this.isTokenType(e);return t&&this.consume_(),t}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var e=vt,t=this.token_;if(this.isTokenType(wt)){var n=t.value;"Z"===n?e=yt:"M"===n?e=mt:"ZM"===n&&(e=_t),e!==vt&&this.consume_()}return e}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(kt)){var e=[];do{e.push(this.parseGeometry_())}while(this.match(St));if(this.match(Et))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(kt)){var e=this.parsePoint_();if(this.match(Et))return e}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(kt)){var e=this.parsePointList_();if(this.match(Et))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(kt)){var e=this.parseLineStringTextList_();if(this.match(Et))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var e;if(this.match(kt)){if(e=this.token_.type==kt?this.parsePointTextList_():this.parsePointList_(),this.match(Et))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(kt)){var e=this.parseLineStringTextList_();if(this.match(Et))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(kt)){var e=this.parsePolygonTextList_();if(this.match(Et))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var e=[],t=this.layout_.length,n=0;n<t;++n){var r=this.token_;if(!this.match(Nt))break;e.push(r.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var e=[this.parsePoint_()];this.match(St);)e.push(this.parsePoint_());return e}},{key:"parsePointTextList_",value:function(){for(var e=[this.parsePointText_()];this.match(St);)e.push(this.parsePointText_());return e}},{key:"parseLineStringTextList_",value:function(){for(var e=[this.parseLineStringText_()];this.match(St);)e.push(this.parseLineStringText_());return e}},{key:"parsePolygonTextList_",value:function(){for(var e=[this.parsePolygonText_()];this.match(St);)e.push(this.parsePolygonText_());return e}},{key:"isEmptyGeometry_",value:function(){var e=this.isTokenType(wt)&&this.token_.value==xt;return e&&this.consume_(),e}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var n=this.factory,r=function(e){return q(T,G(e))},e=function(e){var t=e.map(function(e){return n.createLinearRing(e.map(r))});return t.length>1?n.createPolygon(t[0],t.slice(1)):n.createPolygon(t[0])},t=this.token_;if(this.match(wt)){var i=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==i){var o=this.parseGeometryCollectionText_();return n.createGeometryCollection(o)}switch(i){case"POINT":var a=this.parsePointText_();return a?n.createPoint(q(T,G(a))):n.createPoint();case"LINESTRING":var s=this.parseLineStringText_().map(r);return n.createLineString(s);case"LINEARRING":var u=this.parseLineStringText_().map(r);return n.createLinearRing(u);case"POLYGON":var l=this.parsePolygonText_();return l&&0!==l.length?e(l):n.createPolygon();case"MULTIPOINT":var c=this.parseMultiPointText_();if(!c||0===c.length)return n.createMultiPoint();var f=c.map(r).map(function(e){return n.createPoint(e)});return n.createMultiPoint(f);case"MULTILINESTRING":var h=this.parseMultiLineStringText_().map(function(e){return n.createLineString(e.map(r))});return n.createMultiLineString(h);case"MULTIPOLYGON":var d=this.parseMultiPolygonText_();if(!d||0===d.length)return n.createMultiPolygon();var g=d.map(e);return n.createMultiPolygon(g);default:throw new Error("Invalid geometry type: "+i)}}throw new Error(this.formatErrorMessage_())}}]),n}();function Pt(e){if(e.isEmpty())return"";var t=e.getCoordinate(),n=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||n.push(t.z),void 0===t.m||Number.isNaN(t.m)||n.push(t.m),n.join(" ")}function Tt(e){for(var t=e.getCoordinates().map(function(e){var t=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||t.push(e.z),void 0===e.m||Number.isNaN(e.m)||t.push(e.m),t}),n=[],r=0,i=t.length;r<i;++r)n.push(t[r].join(" "));return n.join(", ")}function Lt(e){var t=[];t.push("("+Tt(e.getExteriorRing())+")");for(var n=0,r=e.getNumInteriorRing();n<r;++n)t.push("("+Tt(e.getInteriorRingN(n))+")");return t.join(", ")}var Rt={Point:Pt,LineString:Tt,LinearRing:Tt,Polygon:Lt,MultiPoint:function(e){for(var t=[],n=0,r=e.getNumGeometries();n<r;++n)t.push("("+Pt(e.getGeometryN(n))+")");return t.join(", ")},MultiLineString:function(e){for(var t=[],n=0,r=e.getNumGeometries();n<r;++n)t.push("("+Tt(e.getGeometryN(n))+")");return t.join(", ")},MultiPolygon:function(e){for(var t=[],n=0,r=e.getNumGeometries();n<r;++n)t.push("("+Lt(e.getGeometryN(n))+")");return t.join(", ")},GeometryCollection:function(e){for(var t=[],n=0,r=e.getNumGeometries();n<r;++n)t.push(At(e.getGeometryN(n)));return t.join(", ")}};function At(e){var t=e.getGeometryType(),n=Rt[t];t=t.toUpperCase();var r=function(e){var t="";if(e.isEmpty())return t;var n=e.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(t+="Z"),void 0===n.m||Number.isNaN(n.m)||(t+="M"),t}(e);return r.length>0&&(t+=" "+r),e.isEmpty()?t+" "+xt:t+" ("+n(e)+")"}var jt=function(){function t(e){g(this,t),this.geometryFactory=e||new pt,this.precisionModel=this.geometryFactory.getPrecisionModel()}return p(t,[{key:"read",value:function(e){var t=new Ot(e);return new Ct(t,this.geometryFactory).parse()}},{key:"write",value:function(e){return At(e)}}]),t}(),Dt=function(){function t(e){g(this,t),this.parser=new jt(e)}return p(t,[{key:"write",value:function(e){return this.parser.write(e)}}],[{key:"toLineString",value:function(e,t){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+e.x+" "+e.y+", "+t.x+" "+t.y+" )"}}]),t}(),O=function(){function n(){g(this,n),n.constructor_.apply(this,arguments)}return p(n,[{key:"getIndexAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intLineIndex[e][t]}},{key:"getTopologySummary",value:function(){var e=new at;return this.isEndPoint()&&e.append(" endpoint"),this._isProper&&e.append(" proper"),this.isCollinear()&&e.append(" collinear"),e.toString()}},{key:"computeIntersection",value:function(e,t,n,r){this._inputLines[0][0]=e,this._inputLines[0][1]=t,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(e,t,n,r)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var e=arguments[0];this.getEdgeDistance(e,0)>this.getEdgeDistance(e,1)?(this._intLineIndex[e][0]=0,this._intLineIndex[e][1]=1):(this._intLineIndex[e][0]=1,this._intLineIndex[e][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"isInteriorIntersection",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],t=0;t<this._result;t++)if(!this._intPt[t].equals2D(this._inputLines[e][0])&&!this._intPt[t].equals2D(this._inputLines[e][1]))return!0;return!1}}},{key:"getIntersection",value:function(e){return this._intPt[e]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==n.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(e,t){return n.computeEdgeDistance(this._intPt[t],this._inputLines[e][0],this._inputLines[e][1])}},{key:"isCollinear",value:function(){return this._result===n.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return Dt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+Dt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(e,t){return this._inputLines[e][t]}},{key:"isIntersection",value:function(e){for(var t=0;t<this._result;t++)if(this._intPt[t].equals2D(e))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(e,t){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[e][t]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new T,this._intPt[1]=new T,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(e,t,n){var r=Math.abs(n.x-t.x),i=Math.abs(n.y-t.y),o=-1;if(e.equals(t))o=0;else if(e.equals(n))o=r>i?r:i;else{var a=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);0!==(o=r>i?a:s)||e.equals(t)||(o=Math.max(a,s))}return c.isTrue(!(0===o&&!e.equals(t)),"Bad distance calculation"),o}},{key:"nonRobustComputeEdgeDistance",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sqrt(r*r+i*i);return c.isTrue(!(0===o&&!e.equals(t)),"Invalid distance calculation"),o}}]),n}();O.DONT_INTERSECT=0,O.DO_INTERSECT=1,O.COLLINEAR=2,O.NO_INTERSECTION=0,O.POINT_INTERSECTION=1,O.COLLINEAR_INTERSECTION=2;var Ft=function(e){s(o,e);var t=u(o);function o(){return g(this,o),t.call(this)}return p(o,[{key:"isInSegmentEnvelopes",value:function(e){var t=new h(this._inputLines[0][0],this._inputLines[0][1]),n=new h(this._inputLines[1][0],this._inputLines[1][1]);return t.contains(e)&&n.contains(e)}},{key:"computeIntersection",value:function(){if(3!==arguments.length)return x(b(o.prototype),"computeIntersection",this).apply(this,arguments);var e=arguments[0],t=arguments[1],n=arguments[2];if(this._isProper=!1,h.intersects(t,n,e)&&0===_.index(t,n,e)&&0===_.index(n,t,e))return this._isProper=!0,(e.equals(t)||e.equals(n))&&(this._isProper=!1),this._result=O.POINT_INTERSECTION,null;this._result=O.NO_INTERSECTION}},{key:"intersection",value:function(e,t,n,r){var i=this.intersectionSafe(e,t,n,r);return this.isInSegmentEnvelopes(i)||(i=new T(o.nearestEndpoint(e,t,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i}},{key:"checkDD",value:function(e,t,n,r,i){var o=Ne.intersection(e,t,n,r),a=this.isInSegmentEnvelopes(o);l.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&l.out.println("Distance = "+i.distance(o))}},{key:"intersectionSafe",value:function(e,t,n,r){var i=Pe.intersection(e,t,n,r);return null===i&&(i=o.nearestEndpoint(e,t,n,r)),i}},{key:"computeCollinearIntersection",value:function(e,t,n,r){var i=h.intersects(e,t,n),o=h.intersects(e,t,r),a=h.intersects(n,r,e),s=h.intersects(n,r,t);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,O.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=e,this._intPt[1]=t,O.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||s?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||a?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||s?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||a?O.COLLINEAR_INTERSECTION:O.POINT_INTERSECTION):O.NO_INTERSECTION}},{key:"computeIntersect",value:function(e,t,n,r){if(this._isProper=!1,!h.intersects(e,t,n,r))return O.NO_INTERSECTION;var i=_.index(e,t,n),o=_.index(e,t,r);if(i>0&&o>0||i<0&&o<0)return O.NO_INTERSECTION;var a=_.index(n,r,e),s=_.index(n,r,t);return a>0&&s>0||a<0&&s<0?O.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(e,t,n,r):(0===i||0===o||0===a||0===s?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:0===i?this._intPt[0]=new T(n):0===o?this._intPt[0]=new T(r):0===a?this._intPt[0]=new T(e):0===s&&(this._intPt[0]=new T(t))):(this._isProper=!0,this._intPt[0]=this.intersection(e,t,n,r)),O.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(e,t,n,r){var i=e,o=Le.pointToSegment(e,n,r),a=Le.pointToSegment(t,n,r);return a<o&&(o=a,i=t),(a=Le.pointToSegment(n,e,t))<o&&(o=a,i=n),(a=Le.pointToSegment(r,e,t))<o&&(o=a,i=r),i}}]),o}(O),zt=function(){function c(){g(this,c),c.constructor_.apply(this,arguments)}return p(c,[{key:"countSegment",value:function(e,t){if(e.x<this._p.x&&t.x<this._p.x)return null;if(this._p.x===t.x&&this._p.y===t.y)return this._isPointOnSegment=!0,null;if(e.y===this._p.y&&t.y===this._p.y){var n=e.x,r=t.x;return n>r&&(n=t.x,r=e.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(e.y>this._p.y&&t.y<=this._p.y||t.y>this._p.y&&e.y<=this._p.y){var i=_.index(e,t,this._p);if(i===_.COLLINEAR)return this._isPointOnSegment=!0,null;t.y<e.y&&(i=-i),i===_.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==v.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?v.BOUNDARY:this._crossingCount%2==1?v.INTERIOR:v.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var e=arguments[0];this._p=e}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof T&&E(arguments[1],N)){for(var e=arguments[1],t=new c(arguments[0]),n=new T,r=new T,i=1;i<e.size();i++)if(e.getCoordinate(i,n),e.getCoordinate(i-1,r),t.countSegment(n,r),t.isOnSegment())return t.getLocation();return t.getLocation()}if(arguments[0]instanceof T&&arguments[1]instanceof Array){for(var o=arguments[1],a=new c(arguments[0]),s=1;s<o.length;s++){var u=o[s],l=o[s-1];if(a.countSegment(u,l),a.isOnSegment())return a.getLocation()}return a.getLocation()}}}]),c}(),Vt=function(){function n(){g(this,n)}return p(n,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof T&&E(arguments[1],N)){for(var e=arguments[0],t=arguments[1],n=new Ft,r=new T,i=new T,o=t.size(),a=1;a<o;a++)if(t.getCoordinate(a-1,r),t.getCoordinate(a,i),n.computeIntersection(e,r,i),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof T&&arguments[1]instanceof Array){for(var s=arguments[0],u=arguments[1],l=new Ft,c=1;c<u.length;c++){var f=u[c-1],h=u[c];if(l.computeIntersection(s,f,h),l.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(e,t){return zt.locatePointInRing(e,t)}},{key:"isInRing",value:function(e,t){return n.locateInRing(e,t)!==v.EXTERIOR}}]),n}(),C=function(){function s(){g(this,s),s.constructor_.apply(this,arguments)}return p(s,[{key:"setAllLocations",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]=e}},{key:"isNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]!==v.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(e){for(var t=0;t<this.location.length;t++)this.location[t]===v.NONE&&(this.location[t]=e)}},{key:"isLine",value:function(){return 1===this.location.length}},{key:"merge",value:function(e){if(e.location.length>this.location.length){var t=new Array(3).fill(null);t[y.ON]=this.location[y.ON],t[y.LEFT]=v.NONE,t[y.RIGHT]=v.NONE,this.location=t}for(var n=0;n<this.location.length;n++)this.location[n]===v.NONE&&n<e.location.length&&(this.location[n]=e.location[n])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var e=this.location[y.LEFT];this.location[y.LEFT]=this.location[y.RIGHT],this.location[y.RIGHT]=e}},{key:"toString",value:function(){var e=new we;return this.location.length>1&&e.append(v.toLocationSymbol(this.location[y.LEFT])),e.append(v.toLocationSymbol(this.location[y.ON])),this.location.length>1&&e.append(v.toLocationSymbol(this.location[y.RIGHT])),e.toString()}},{key:"setLocations",value:function(e,t,n){this.location[y.ON]=e,this.location[y.LEFT]=t,this.location[y.RIGHT]=n}},{key:"get",value:function(e){return e<this.location.length?this.location[e]:v.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var e=0;e<this.location.length;e++)if(this.location[e]===v.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(1===arguments.length){var e=arguments[0];this.setLocation(y.ON,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.location[t]=n}}},{key:"init",value:function(e){this.location=new Array(e).fill(null),this.setAllLocations(v.NONE)}},{key:"isEqualOnSide",value:function(e,t){return this.location[t]===e.location[t]}},{key:"allPositionsEqual",value:function(e){for(var t=0;t<this.location.length;t++)if(this.location[t]!==e)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var t=arguments[0];this.init(1),this.location[y.ON]=t}else if(arguments[0]instanceof s){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.init(3),this.location[y.ON]=i,this.location[y.LEFT]=o,this.location[y.RIGHT]=a}}}]),s}(),L=function(){function f(){g(this,f),f.constructor_.apply(this,arguments)}return p(f,[{key:"getGeometryCount",value:function(){var e=0;return this.elt[0].isNull()||e++,this.elt[1].isNull()||e++,e}},{key:"setAllLocations",value:function(e,t){this.elt[e].setAllLocations(t)}},{key:"isNull",value:function(e){return this.elt[e].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(1===arguments.length){var e=arguments[0];this.setAllLocationsIfNull(0,e),this.setAllLocationsIfNull(1,e)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.elt[t].setAllLocationsIfNull(n)}}},{key:"isLine",value:function(e){return this.elt[e].isLine()}},{key:"merge",value:function(e){for(var t=0;t<2;t++)null===this.elt[t]&&null!==e.elt[t]?this.elt[t]=new C(e.elt[t]):this.elt[t].merge(e.elt[t])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(1===arguments.length){var e=arguments[0];return this.elt[e].get(y.ON)}if(2===arguments.length){var t=arguments[0],n=arguments[1];return this.elt[t].get(n)}}},{key:"toString",value:function(){var e=new we;return null!==this.elt[0]&&(e.append("A:"),e.append(this.elt[0].toString())),null!==this.elt[1]&&(e.append(" B:"),e.append(this.elt[1].toString())),e.toString()}},{key:"isArea",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var e=arguments[0];return this.elt[e].isArea()}}},{key:"isAnyNull",value:function(e){return this.elt[e].isAnyNull()}},{key:"setLocation",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.elt[e].setLocation(y.ON,t)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}}},{key:"isEqualOnSide",value:function(e,t){return this.elt[0].isEqualOnSide(e.elt[0],t)&&this.elt[1].isEqualOnSide(e.elt[1],t)}},{key:"allPositionsEqual",value:function(e,t){return this.elt[e].allPositionsEqual(t)}},{key:"toLine",value:function(e){this.elt[e].isArea()&&(this.elt[e]=new C(this.elt[e].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new C(e),this.elt[1]=new C(e)}else if(arguments[0]instanceof f){var t=arguments[0];this.elt[0]=new C(t.elt[0]),this.elt[1]=new C(t.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.elt[0]=new C(v.NONE),this.elt[1]=new C(v.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this.elt[0]=new C(i,o,a),this.elt[1]=new C(i,o,a)}else if(4===arguments.length){var s=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new C(v.NONE,v.NONE,v.NONE),this.elt[1]=new C(v.NONE,v.NONE,v.NONE),this.elt[s].setLocations(u,l,c)}}},{key:"toLineLabel",value:function(e){for(var t=new f(v.NONE),n=0;n<2;n++)t.setLocation(n,e.getLocation(n));return t}}]),f}(),qt=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"computeRing",value:function(){if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),t=0;t<this._pts.size();t++)e[t]=this._pts.get(t);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=_.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"computePoints",value:function(e){this._startDe=e;var t=e,n=!0;do{if(null===t)throw new Me("Found null DirectedEdge");if(t.getEdgeRing()===this)throw new Me("Directed Edge visited twice during ring-building at "+t.getCoordinate());this._edges.add(t);var r=t.getLabel();c.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(t.getEdge(),t.isForward(),n),n=!1,this.setEdgeRing(t,this),t=this.getNext(t)}while(t!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(e){return this._pts.get(e)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var e=this._startDe;do{var t=e.getNode().getEdges().getOutgoingDegree(this);t>this._maxNodeDegree&&(this._maxNodeDegree=t),e=this.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(e,t,n){var r=e.getCoordinates();if(t){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var e=this._startDe;do{e.getEdge().setInResult(!0),e=e.getNext()}while(e!==this._startDe)}},{key:"containsPoint",value:function(e){var t=this.getLinearRing();if(!t.getEnvelopeInternal().contains(e))return!1;if(!Vt.isInRing(e,t.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(e))return!1;return!0}},{key:"addHole",value:function(e){this._holes.add(e)}},{key:"isShell",value:function(){return null===this._shell}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(1===arguments.length){var e=arguments[0];this.mergeLabel(e,0),this.mergeLabel(e,1)}else if(2===arguments.length){var t=arguments[1],n=arguments[0].getLocation(t,y.RIGHT);if(n===v.NONE)return null;if(this._label.getLocation(t)===v.NONE)return this._label.setLocation(t,n),null}}},{key:"setShell",value:function(e){this._shell=e,null!==e&&e.addHole(this)}},{key:"toPolygon",value:function(e){for(var t=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)t[n]=this._holes.get(n).getLinearRing();return e.createPolygon(this.getLinearRing(),t)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new w,this._pts=new w,this._label=new L(v.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new w,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var e=arguments[0],t=arguments[1];this._geometryFactory=t,this.computePoints(e),this.computeRing()}}}]),e}(),Bt=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"setEdgeRing",value:function(e,t){e.setMinEdgeRing(t)}},{key:"getNext",value:function(e){return e.getNextMin()}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];qt.constructor_.call(this,e,t)}}]),n}(qt),Gt=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"buildMinimalRings",value:function(){var e=new w,t=this._startDe;do{if(null===t.getMinEdgeRing()){var n=new Bt(t,this._geometryFactory);e.add(n)}t=t.getNext()}while(t!==this._startDe);return e}},{key:"setEdgeRing",value:function(e,t){e.setEdgeRing(t)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var e=this._startDe;do{e.getNode().getEdges().linkMinimalDirectedEdges(this),e=e.getNext()}while(e!==this._startDe)}},{key:"getNext",value:function(e){return e.getNext()}}],[{key:"constructor_",value:function(){var e=arguments[0],t=arguments[1];qt.constructor_.call(this,e,t)}}]),n}(qt),Yt=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"setVisited",value:function(e){this._isVisited=e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(e){this._label=e}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(e){this._isCovered=e,this._isCoveredSet=!0}},{key:"updateIM",value:function(e){c.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(e)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._label=e}}}]),e}(),Ut=function(e){s(i,e);var t=u(i);function i(){var e;return g(this,i),e=t.call(this),i.constructor_.apply(r(e),arguments),e}return p(i,[{key:"isIncidentEdgeInResult",value:function(){for(var e=this.getEdges().getEdges().iterator();e.hasNext();)if(e.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return 1===this._label.getGeometryCount()}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(e){e.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(e){}},{key:"computeMergedLocation",value:function(e,t){var n=v.NONE;if(n=this._label.getLocation(t),!e.isNull(t)){var r=e.getLocation(t);n!==v.BOUNDARY&&(n=r)}return n}},{key:"setLabel",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return x(b(i.prototype),"setLabel",this).apply(this,arguments);var e=arguments[0],t=arguments[1];null===this._label?this._label=new L(e,t):this._label.setLocation(e,t)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof i){var e=arguments[0];this.mergeLabel(e._label)}else if(arguments[0]instanceof L)for(var t=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(t,n);this._label.getLocation(n)===v.NONE&&this._label.setLocation(n,r)}}},{key:"add",value:function(e){this._edges.insert(e),e.setNode(this)}},{key:"setLabelBoundary",value:function(e){if(null===this._label)return null;var t=v.NONE;null!==this._label&&(t=this._label.getLocation(e));var n=null;switch(t){case v.BOUNDARY:n=v.INTERIOR;break;case v.INTERIOR:default:n=v.BOUNDARY}this._label.setLocation(e,n)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var e=arguments[0],t=arguments[1];this._coord=e,this._edges=t,this._label=new L(0,v.NONE)}}]),i}(Yt),Wt=function(e){s(n,e);var t=u(n);function n(){return g(this,n),t.apply(this,arguments)}return n}(ct);function Zt(e){return null==e?0:e.color}function o(e){return null==e?null:e.parent}function Xt(e,t){null!==e&&(e.color=t)}function Ht(e){return null==e?null:e.left}function $t(e){return null==e?null:e.right}var Jt=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),(e=t.call(this)).root_=null,e.size_=0,e}return p(n,[{key:"get",value:function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return t.value;t=t.right}}return null}},{key:"put",value:function(e,t){if(null===this.root_)return this.root_={key:e,value:t,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=e.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=t,o}i=i.right}}while(null!==i);var a={key:e,left:null,right:null,value:t,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null}},{key:"fixAfterInsertion",value:function(e){var t;for(e.color=1;null!=e&&e!==this.root_&&1===e.parent.color;)o(e)===Ht(o(o(e)))?1===Zt(t=$t(o(o(e))))?(Xt(o(e),0),Xt(t,0),Xt(o(o(e)),1),e=o(o(e))):(e===$t(o(e))&&(e=o(e),this.rotateLeft(e)),Xt(o(e),0),Xt(o(o(e)),1),this.rotateRight(o(o(e)))):1===Zt(t=Ht(o(o(e))))?(Xt(o(e),0),Xt(t,0),Xt(o(o(e)),1),e=o(o(e))):(e===Ht(o(e))&&(e=o(e),this.rotateRight(e)),Xt(o(e),0),Xt(o(o(e)),1),this.rotateLeft(o(o(e))));this.root_.color=0}},{key:"values",value:function(){var e=new w,t=this.getFirstEntry();if(null!==t)for(e.add(t.value);null!==(t=n.successor(t));)e.add(t.value);return e}},{key:"entrySet",value:function(){var e=new ve,t=this.getFirstEntry();if(null!==t)for(e.add(t);null!==(t=n.successor(t));)e.add(t);return e}},{key:"rotateLeft",value:function(e){if(null!=e){var t=e.right;e.right=t.left,null!=t.left&&(t.left.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}}},{key:"rotateRight",value:function(e){if(null!=e){var t=e.left;e.left=t.right,null!=t.right&&(t.right.parent=e),t.parent=e.parent,null==e.parent?this.root_=t:e.parent.right===e?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}}},{key:"getFirstEntry",value:function(){var e=this.root_;if(null!=e)for(;null!=e.left;)e=e.left;return e}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(e){for(var t=this.root_;null!==t;){var n=e.compareTo(t.key);if(n<0)t=t.left;else{if(!(n>0))return!0;t=t.right}}return!1}}],[{key:"successor",value:function(e){var t;if(null===e)return null;if(null!==e.right){for(t=e.right;null!==t.left;)t=t.left;return t}t=e.parent;for(var n=e;null!==t&&n===t.right;)n=t,t=t.parent;return t}}]),n}(Wt),Kt=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"find",value:function(e){return this.nodeMap.get(e)}},{key:"addNode",value:function(){if(arguments[0]instanceof T){var e=arguments[0],t=this.nodeMap.get(e);return null===t&&(t=this.nodeFact.createNode(e),this.nodeMap.put(e,t)),t}if(arguments[0]instanceof Ut){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}}},{key:"print",value:function(e){for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(e){for(var t=new w,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(e)===v.BOUNDARY&&t.add(r)}return t}},{key:"add",value:function(e){var t=e.getCoordinate();this.addNode(t).add(e)}}],[{key:"constructor_",value:function(){this.nodeMap=new Jt,this.nodeFact=null;var e=arguments[0];this.nodeFact=e}}]),e}(),a=function(){function i(){g(this,i)}return p(i,null,[{key:"isNorthern",value:function(e){return e===i.NE||e===i.NW}},{key:"isOpposite",value:function(e,t){return e!==t&&2==(e-t+4)%4}},{key:"commonHalfPlane",value:function(e,t){if(e===t)return e;if(2==(e-t+4)%4)return-1;var n=e<t?e:t;return 0===n&&3===(e>t?e:t)?3:n}},{key:"isInHalfPlane",value:function(e,t){return t===i.SE?e===i.SE||e===i.SW:e===t||e===t+1}},{key:"quadrant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new k("Cannot compute the quadrant for point ( "+e+", "+t+" )");return e>=0?t>=0?i.NE:i.SE:t>=0?i.NW:i.SW}if(arguments[0]instanceof T&&arguments[1]instanceof T){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new k("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?i.NE:i.SE:r.y>=n.y?i.NW:i.SW}}}]),i}();a.NE=0,a.NW=1,a.SW=2,a.SE=3;var Qt=function(){function u(){g(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"compareDirection",value:function(e){return this._dx===e._dx&&this._dy===e._dy?0:this._quadrant>e._quadrant?1:this._quadrant<e._quadrant?-1:_.index(e._p0,e._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(e){this._node=e}},{key:"print",value:function(e){var t=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);e.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label)}},{key:"compareTo",value:function(e){var t=e;return this.compareDirection(t)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var e=Math.atan2(this._dy,this._dx),t=this.getClass().getName(),n=t.lastIndexOf(".");return"  "+t.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label}},{key:"computeLabel",value:function(e){}},{key:"init",value:function(e,t){this._p0=e,this._p1=t,this._dx=t.x-e.x,this._dy=t.y-e.y,this._quadrant=a.quadrant(this._dx,this._dy),c.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var e=arguments[0];this._edge=e}else if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2];u.constructor_.call(this,t,n,r,null)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];u.constructor_.call(this,i),this.init(o,a),this._label=s}}}]),u}(),en=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(e){return this._depth[e]}},{key:"setVisited",value:function(e){this._isVisited=e}},{key:"computeDirectedLabel",value:function(){this._label=new L(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(e,t){if(-999!==this._depth[e]&&this._depth[e]!==t)throw new Me("assigned depths do not match",this.getCoordinate());this._depth[e]=t}},{key:"isInteriorAreaEdge",value:function(){for(var e=!0,t=0;t<2;t++)this._label.isArea(t)&&this._label.getLocation(t,y.LEFT)===v.INTERIOR&&this._label.getLocation(t,y.RIGHT)===v.INTERIOR||(e=!1);return e}},{key:"setNextMin",value:function(e){this._nextMin=e}},{key:"print",value:function(e){x(b(n.prototype),"print",this).call(this,e),e.print(" "+this._depth[y.LEFT]+"/"+this._depth[y.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")}},{key:"setMinEdgeRing",value:function(e){this._minEdgeRing=e}},{key:"isLineEdge",value:function(){var e=this._label.isLine(0)||this._label.isLine(1),t=!this._label.isArea(0)||this._label.allPositionsEqual(0,v.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,v.EXTERIOR);return e&&t&&n}},{key:"setEdgeRing",value:function(e){this._edgeRing=e}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var e=this._edge.getDepthDelta();return this._isForward||(e=-e),e}},{key:"setInResult",value:function(e){this._isInResult=e}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(e){this.print(e),e.print(" "),this._isForward?this._edge.print(e):this._edge.printReverse(e)}},{key:"setSym",value:function(e){this._sym=e}},{key:"setVisitedEdge",value:function(e){this.setVisited(e),this._sym.setVisited(e)}},{key:"setEdgeDepths",value:function(e,t){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;e===y.LEFT&&(r=-1);var i=y.opposite(e),o=t+n*r;this.setDepth(e,t),this.setDepth(i,o)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(e){this._next=e}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var e=arguments[0],t=arguments[1];if(Qt.constructor_.call(this,e),this._isForward=t,t)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(e,t){return e===v.EXTERIOR&&t===v.INTERIOR?1:e===v.INTERIOR&&t===v.EXTERIOR?-1:0}}]),n}(Qt),tn=function(){function e(){g(this,e)}return p(e,[{key:"createNode",value:function(e){return new Ut(e,null)}}]),e}(),nn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"printEdges",value:function(e){e.println("Edges:");for(var t=0;t<this._edges.size();t++){e.println("edge "+t+":");var n=this._edges.get(t);n.print(e),n.eiList.print(e)}}},{key:"find",value:function(e){return this._nodes.find(e)}},{key:"addNode",value:function(){if(arguments[0]instanceof Ut){var e=arguments[0];return this._nodes.addNode(e)}if(arguments[0]instanceof T){var t=arguments[0];return this._nodes.addNode(t)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(e){l.out.println(e)}},{key:"isBoundaryNode",value:function(e,t){var n=this._nodes.find(t);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(e)===v.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var e=this._nodes.iterator();e.hasNext();)e.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(e,t,n,r){return!!e.equals(n)&&_.index(e,t,r)===_.COLLINEAR&&a.quadrant(e,t)===a.quadrant(n,r)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(e){l.out.print(e)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(e,t,i[0],i[1]))return r;if(this.matchInSameDirection(e,t,i[i.length-1],i[i.length-2]))return r}return null}},{key:"insertEdge",value:function(e){this._edges.add(e)}},{key:"findEdgeEnd",value:function(e){for(var t=this.getEdgeEnds().iterator();t.hasNext();){var n=t.next();if(n.getEdge()===e)return n}return null}},{key:"addEdges",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next();this._edges.add(n);var r=new en(n,!0),i=new en(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}}},{key:"add",value:function(e){this._nodes.add(e),this._edgeEndList.add(e)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(e,t){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(e.equals(i[0])&&t.equals(i[1]))return r}return null}}],[{key:"constructor_",value:function(){if(this._edges=new w,this._nodes=null,this._edgeEndList=new w,0===arguments.length)this._nodes=new Kt(new tn);else if(1===arguments.length){var e=arguments[0];this._nodes=new Kt(e)}}},{key:"linkResultDirectedEdges",value:function(e){for(var t=e.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()}}]),e}(),rn=function(){function o(){g(this,o),o.constructor_.apply(this,arguments)}return p(o,[{key:"sortShellsAndHoles",value:function(e,t,n){for(var r=e.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):t.add(i)}}},{key:"computePolygons",value:function(e){for(var t=new w,n=e.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);t.add(r)}return t}},{key:"placeFreeHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=o.findEdgeRingContaining(r,e);if(null===i)throw new Me("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}}},{key:"buildMinimalEdgeRings",value:function(e,t,n){for(var r=new w,i=e.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),t.add(s)):n.addAll(a)}else r.add(o)}return r}},{key:"buildMaximalEdgeRings",value:function(e){for(var t=new w,n=e.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Gt(r,this._geometryFactory);t.add(i),i.setInResult()}}return t}},{key:"placePolygonHoles",value:function(e,t){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(e)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(e){for(var t=0,n=null,r=e.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,t++)}return c.isTrue(t<=1,"found two shells in MinimalEdgeRing list"),n}},{key:"add",value:function(){if(1===arguments.length){var e=arguments[0];this.add(e.getEdgeEnds(),e.getNodes())}else if(2===arguments.length){var t=arguments[0],n=arguments[1];nn.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(t),i=new w,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new w;var e=arguments[0];this._geometryFactory=e}},{key:"findEdgeRingContaining",value:function(e,t){for(var n=e.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=t.iterator();s.hasNext();){var u=s.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();if(!c.equals(r)&&c.contains(r)){i=I.ptNotInList(n.getCoordinates(),l.getCoordinates());var f=!1;Vt.isInRing(i,l.getCoordinates())&&(f=!0),f&&(null===o||a.contains(c))&&(a=(o=u).getLinearRing().getEnvelopeInternal())}}return o}}]),o}(),on=function(){function e(){g(this,e)}return p(e,[{key:"getBounds",value:function(){}}]),e}(),an=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[on,n]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var e=arguments[0],t=arguments[1];this._bounds=e,this._item=t}}]),e}(),sn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"poll",value:function(){if(this.isEmpty())return null;var e=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),e}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(e){for(var t=null,n=this._items.get(e);2*e<=this._size&&((t=2*e)!==this._size&&this._items.get(t+1).compareTo(this._items.get(t))<0&&t++,this._items.get(t).compareTo(n)<0);e=t)this._items.set(e,this._items.get(t));this._items.set(e,n)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return 0===this._size}},{key:"add",value:function(e){this._items.add(null),this._size+=1;var t=this._size;for(this._items.set(0,e);e.compareTo(this._items.get(Math.trunc(t/2)))<0;t/=2)this._items.set(t,this._items.get(Math.trunc(t/2)));this._items.set(t,e)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new w,this._items.add(null)}}]),e}(),un=function(){function e(){g(this,e)}return p(e,[{key:"insert",value:function(e,t){}},{key:"remove",value:function(e,t){}},{key:"query",value:function(){}}]),e}(),R=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(e){c.isTrue(null===this._bounds),this._childBoundables.add(e)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[on,n]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new w,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this._level=e}}}]),e}(),ln={reverseOrder:function(){return{compare:function(e,t){return t.compareTo(e)}}},min:function(e){return ln.sort(e),e.get(0)},sort:function(e,t){var n=e.toArray();t?Ue.sort(n,t):Ue.sort(n);for(var r=e.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},singletonList:function(e){var t=new w;return t.add(e),t}},cn=function(){function f(){g(this,f)}return p(f,null,[{key:"maxDistance",value:function(e,t,n,r,i,o,a,s){var u=f.distance(e,t,i,o);return u=Math.max(u,f.distance(e,t,a,s)),u=Math.max(u,f.distance(n,r,i,o)),Math.max(u,f.distance(n,r,a,s))}},{key:"distance",value:function(e,t,n,r){var i=n-e,o=r-t;return Math.sqrt(i*i+o*o)}},{key:"maximumDistance",value:function(e,t){var n=Math.min(e.getMinX(),t.getMinX()),r=Math.min(e.getMinY(),t.getMinY()),i=Math.max(e.getMaxX(),t.getMaxX()),o=Math.max(e.getMaxY(),t.getMaxY());return f.distance(n,r,i,o)}},{key:"minMaxDistance",value:function(e,t){var n=e.getMinX(),r=e.getMinY(),i=e.getMaxX(),o=e.getMaxY(),a=t.getMinX(),s=t.getMinY(),u=t.getMaxX(),l=t.getMaxY(),c=f.maxDistance(n,r,n,o,a,s,a,l);return c=Math.min(c,f.maxDistance(n,r,n,o,a,s,u,s)),c=Math.min(c,f.maxDistance(n,r,n,o,u,l,a,l)),c=Math.min(c,f.maxDistance(n,r,n,o,u,l,u,s)),c=Math.min(c,f.maxDistance(n,r,i,r,a,s,a,l)),c=Math.min(c,f.maxDistance(n,r,i,r,a,s,u,s)),c=Math.min(c,f.maxDistance(n,r,i,r,u,l,a,l)),c=Math.min(c,f.maxDistance(n,r,i,r,u,l,u,s)),c=Math.min(c,f.maxDistance(i,o,n,o,a,s,a,l)),c=Math.min(c,f.maxDistance(i,o,n,o,a,s,u,s)),c=Math.min(c,f.maxDistance(i,o,n,o,u,l,a,l)),c=Math.min(c,f.maxDistance(i,o,n,o,u,l,u,s)),c=Math.min(c,f.maxDistance(i,o,i,r,a,s,a,l)),c=Math.min(c,f.maxDistance(i,o,i,r,a,s,u,s)),c=Math.min(c,f.maxDistance(i,o,i,r,u,l,a,l)),Math.min(c,f.maxDistance(i,o,i,r,u,l,u,s))}}]),f}(),fn=function(){function u(){g(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"maximumDistance",value:function(){return cn.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(e,t){var n=u.isComposite(this._boundable1),r=u.isComposite(this._boundable2);if(n&&r)return u.area(this._boundable1)>u.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,e,t),null):(this.expand(this._boundable2,this._boundable1,!0,e,t),null);if(n)return this.expand(this._boundable1,this._boundable2,!1,e,t),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,e,t),null;throw new k("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(u.isComposite(this._boundable1)||u.isComposite(this._boundable2))}},{key:"compareTo",value:function(e){var t=e;return this._distance<t._distance?-1:this._distance>t._distance?1:0}},{key:"expand",value:function(e,t,n,r,i){for(var o=e.getChildBoundables().iterator();o.hasNext();){var a=o.next(),s=null;(s=n?new u(t,a,this._itemDistance):new u(a,t,this._itemDistance)).getDistance()<i&&r.add(s)}}},{key:"getBoundable",value:function(e){return 0===e?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var e=arguments[0],t=arguments[1],n=arguments[2];this._boundable1=e,this._boundable2=t,this._itemDistance=n,this._distance=this.distance()}},{key:"area",value:function(e){return e.getBounds().getArea()}},{key:"isComposite",value:function(e){return e instanceof R}}]),u}(),hn=function(){function e(){g(this,e)}return p(e,[{key:"visitItem",value:function(e){}}]),e}(),dn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"queryInternal",value:function(){if(E(arguments[2],hn)&&arguments[0]instanceof Object&&arguments[1]instanceof R)for(var e=arguments[0],t=arguments[2],n=arguments[1].getChildBoundables(),r=0;r<n.size();r++){var i=n.get(r);this.getIntersectsOp().intersects(i.getBounds(),e)&&(i instanceof R?this.queryInternal(e,i,t):i instanceof an?t.visitItem(i.getItem()):c.shouldNeverReachHere())}else if(E(arguments[2],be)&&arguments[0]instanceof Object&&arguments[1]instanceof R)for(var o=arguments[0],a=arguments[2],s=arguments[1].getChildBoundables(),u=0;u<s.size();u++){var l=s.get(u);this.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof R?this.queryInternal(o,l,a):l instanceof an?a.add(l.getItem()):c.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(e){return e.get(e.size()-1)}},{key:"size",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();n instanceof R?e+=this.size(n):n instanceof an&&(e+=1)}return e}}},{key:"removeItem",value:function(e,t){for(var n=null,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof an&&i.getItem()===t&&(n=i)}return null!==n&&(e.getChildBoundables().remove(n),!0)}},{key:"itemsTree",value:function(){if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new w:e}if(1===arguments.length){for(var t=arguments[0],n=new w,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof R){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof an?n.add(i.getItem()):c.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:"insert",value:function(e,t){c.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new an(e,t))}},{key:"boundablesAtLevel",value:function(){if(1===arguments.length){var e=arguments[0],t=new w;return this.boundablesAtLevel(e,this._root,t),t}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(c.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof R?this.boundablesAtLevel(n,a,i):(c.isTrue(a instanceof an),-1===n&&i.add(a))}return null}}},{key:"query",value:function(){if(1===arguments.length){var e=arguments[0];this.build();var t=new w;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.queryInternal(e,this._root,t),t}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,r)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,t)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof R&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}}},{key:"createHigherLevels",value:function(e,t){c.isTrue(!e.isEmpty());var n=this.createParentBoundables(e,t+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,t+1)}},{key:"depth",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=0,t=arguments[0].getChildBoundables().iterator();t.hasNext();){var n=t.next();if(n instanceof R){var r=this.depth(n);r>e&&(e=r)}}return e+1}}},{key:"createParentBoundables",value:function(e,t){c.isTrue(!e.isEmpty());var n=new w;n.add(this.createNode(t));var r=new w(e);ln.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(t)),this.lastNode(n).addChildBoundable(o)}return n}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[n]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new w,this._nodeCapacity=null,0===arguments.length)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var e=arguments[0];c.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}}},{key:"compareDoubles",value:function(e,t){return e>t?1:e<t?-1:0}}]),t}();dn.IntersectsOp=function(){},dn.DEFAULT_NODE_CAPACITY=10;var gn=function(){function e(){g(this,e)}return p(e,[{key:"distance",value:function(e,t){}}]),e}(),pn=function(e){s(l,e);var t=u(l);function l(){var e;return g(this,l),e=t.call(this),l.constructor_.apply(r(e),arguments),e}return p(l,[{key:"createParentBoundablesFromVerticalSlices",value:function(e,t){c.isTrue(e.length>0);for(var n=new w,r=0;r<e.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(e[r],t));return n}},{key:"nearestNeighbourK",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];return this.nearestNeighbourK(e,P.POSITIVE_INFINITY,t)}if(3===arguments.length){var n=arguments[0],r=arguments[2],i=arguments[1],o=new sn;o.add(n);for(var a=new sn;!o.isEmpty()&&i>=0;){var s=o.poll(),u=s.getDistance();if(u>=i)break;s.isLeaves()?a.size()<r?a.add(s):(a.peek().getDistance()>u&&(a.poll(),a.add(s)),i=a.peek().getDistance()):s.expandToQueue(o,i)}return l.getItems(a)}}},{key:"createNode",value:function(e){return new vn(e)}},{key:"size",value:function(){return 0===arguments.length?x(b(l.prototype),"size",this).call(this):x(b(l.prototype),"size",this).apply(this,arguments)}},{key:"insert",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof h))return x(b(l.prototype),"insert",this).apply(this,arguments);var e=arguments[0],t=arguments[1];if(e.isNull())return null;x(b(l.prototype),"insert",this).call(this,e,t)}},{key:"getIntersectsOp",value:function(){return l.intersectsOp}},{key:"verticalSlices",value:function(e,t){for(var n=Math.trunc(Math.ceil(e.size()/t)),r=new Array(t).fill(null),i=e.iterator(),o=0;o<t;o++){r[o]=new w;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r}},{key:"query",value:function(){if(1===arguments.length){var e=arguments[0];return x(b(l.prototype),"query",this).call(this,e)}if(2===arguments.length){var t=arguments[0],n=arguments[1];x(b(l.prototype),"query",this).call(this,t,n)}}},{key:"getComparator",value:function(){return l.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(e,t){return x(b(l.prototype),"createParentBoundables",this).call(this,e,t)}},{key:"remove",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof h){var e=arguments[0],t=arguments[1];return x(b(l.prototype),"remove",this).call(this,e,t)}return x(b(l.prototype),"remove",this).apply(this,arguments)}},{key:"depth",value:function(){return 0===arguments.length?x(b(l.prototype),"depth",this).call(this):x(b(l.prototype),"depth",this).apply(this,arguments)}},{key:"createParentBoundables",value:function(e,t){c.isTrue(!e.isEmpty());var n=Math.trunc(Math.ceil(e.size()/this.getNodeCapacity())),r=new w(e);ln.sort(r,l.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,t)}},{key:"nearestNeighbour",value:function(){if(1===arguments.length){if(E(arguments[0],gn)){var e=arguments[0];if(this.isEmpty())return null;var t=new fn(this.getRoot(),this.getRoot(),e);return this.nearestNeighbour(t)}if(arguments[0]instanceof fn){var n=arguments[0],r=P.POSITIVE_INFINITY,i=null,o=new sn;for(o.add(n);!o.isEmpty()&&r>0;){var a=o.poll(),s=a.getDistance();if(s>=r)break;a.isLeaves()?(r=s,i=a):a.expandToQueue(o,r)}return null===i?null:[i.getBoundable(0).getItem(),i.getBoundable(1).getItem()]}}else{if(2===arguments.length){var u=arguments[0],l=arguments[1];if(this.isEmpty()||u.isEmpty())return null;var c=new fn(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(c)}if(3===arguments.length){var f=arguments[2],h=new an(arguments[0],arguments[1]),d=new fn(this.getRoot(),h,f);return this.nearestNeighbour(d)[0]}if(4===arguments.length){var g=arguments[2],p=arguments[3],v=new an(arguments[0],arguments[1]),y=new fn(this.getRoot(),v,g);return this.nearestNeighbourK(y,p)}}}},{key:"isWithinDistance",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1],n=P.POSITIVE_INFINITY,r=new sn;for(r.add(e);!r.isEmpty();){var i=r.poll(),o=i.getDistance();if(o>t)return!1;if(i.maximumDistance()<=t)return!0;if(i.isLeaves()){if((n=o)<=t)return!0}else i.expandToQueue(r,n)}return!1}if(3===arguments.length){var a=arguments[0],s=arguments[1],u=arguments[2],l=new fn(this.getRoot(),a.getRoot(),s);return this.isWithinDistance(l,u)}}},{key:"interfaces_",get:function(){return[un,n]}}],[{key:"constructor_",value:function(){if(0===arguments.length)l.constructor_.call(this,l.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var e=arguments[0];dn.constructor_.call(this,e)}}},{key:"centreX",value:function(e){return l.avg(e.getMinX(),e.getMaxX())}},{key:"avg",value:function(e,t){return(e+t)/2}},{key:"getItems",value:function(e){for(var t=new Array(e.size()).fill(null),n=0;!e.isEmpty();){var r=e.poll();t[n]=r.getBoundable(0).getItem(),n++}return t}},{key:"centreY",value:function(e){return l.avg(e.getMinY(),e.getMaxY())}}]),l}(dn),vn=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"computeBounds",value:function(){for(var e=null,t=this.getChildBoundables().iterator();t.hasNext();){var n=t.next();null===e?e=new h(n.getBounds()):e.expandToInclude(n.getBounds())}return e}}],[{key:"constructor_",value:function(){var e=arguments[0];R.constructor_.call(this,e)}}]),n}(R);pn.STRtreeNode=vn,pn.xComparator=new(function(){function e(){g(this,e)}return p(e,[{key:"interfaces_",get:function(){return[ae]}},{key:"compare",value:function(e,t){return dn.compareDoubles(pn.centreX(e.getBounds()),pn.centreX(t.getBounds()))}}]),e}()),pn.yComparator=new(function(){function e(){g(this,e)}return p(e,[{key:"interfaces_",get:function(){return[ae]}},{key:"compare",value:function(e,t){return dn.compareDoubles(pn.centreY(e.getBounds()),pn.centreY(t.getBounds()))}}]),e}()),pn.intersectsOp=new(function(){function e(){g(this,e)}return p(e,[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(e,t){return e.intersects(t)}}]),e}()),pn.DEFAULT_NODE_CAPACITY=10;var yn=function(){function o(){g(this,o)}return p(o,null,[{key:"relativeSign",value:function(e,t){return e<t?-1:e>t?1:0}},{key:"compare",value:function(e,t,n){if(t.equals2D(n))return 0;var r=o.relativeSign(t.x,n.x),i=o.relativeSign(t.y,n.y);switch(e){case 0:return o.compareValue(r,i);case 1:return o.compareValue(i,r);case 2:return o.compareValue(i,-r);case 3:return o.compareValue(-r,i);case 4:return o.compareValue(-r,-i);case 5:return o.compareValue(-i,-r);case 6:return o.compareValue(-i,r);case 7:return o.compareValue(r,-i)}return c.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(e,t){return e<0?-1:e>0?1:t<0?-1:t>0?1:0}}]),o}(),mn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(e){var t=e;return this.segmentIndex<t.segmentIndex?-1:this.segmentIndex>t.segmentIndex?1:this.coord.equals2D(t.coord)?0:this._isInterior?t._isInterior?yn.compare(this._segmentOctant,this.coord,t.coord):1:-1}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===e}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._segString=e,this.coord=new T(t),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!t.equals2D(e.getCoordinate(n))}}]),e}(),_n=function(){function e(){g(this,e)}return p(e,[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}]),e}(),bn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getSplitCoordinates",value:function(){var e=new rt;this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next();this.addEdgeCoordinates(n,r,e),n=r}return e.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var e=new w;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var t=e.iterator();t.hasNext();){var n=t.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:"createSplitEdgePts",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2;if(2===n)return[new T(e.coord),new T(t.coord)];var r=this._edge.getCoordinate(t.segmentIndex),i=t.isInterior()||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new T(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new T(t.coord)),o}},{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"findCollapsesFromExistingVertices",value:function(e){for(var t=0;t<this._edge.size()-2;t++){var n=this._edge.getCoordinate(t);this._edge.getCoordinate(t+1);var r=this._edge.getCoordinate(t+2);n.equals2D(r)&&e.add(ke.valueOf(t+1))}}},{key:"addEdgeCoordinates",value:function(e,t,n){var r=this.createSplitEdgePts(e,t);n.add(r,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints(),this.addCollapsedNodes();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"findCollapseIndex",value:function(e,t,n){if(!e.coord.equals2D(t.coord))return!1;var r=t.segmentIndex-e.segmentIndex;return t.isInterior()||r--,1===r&&(n[0]=e.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(e){for(var t=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,t)&&e.add(ke.valueOf(t[0])),r=i}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var e=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(e),e)}},{key:"createSplitEdge",value:function(e,t){var n=this.createSplitEdgePts(e,t);return new En(n,this._edge.getData())}},{key:"add",value:function(e,t){var n=new mn(this._edge,e,t,this._edge.getSegmentOctant(t)),r=this._nodeMap.get(n);return null!==r?(c.isTrue(r.coord.equals2D(e),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)}},{key:"checkSplitEdgesCorrectness",value:function(e){var t=this._edge.getCoordinates(),n=e.get(0).getCoordinate(0);if(!n.equals2D(t[0]))throw new se("bad split edge start point at "+n);var r=e.get(e.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(t[t.length-1]))throw new se("bad split edge end point at "+i)}}],[{key:"constructor_",value:function(){this._nodeMap=new Jt,this._edge=null;var e=arguments[0];this._edge=e}}]),e}(),xn=function(){function u(){g(this,u)}return p(u,null,[{key:"octant",value:function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],t=arguments[1];if(0===e&&0===t)throw new k("Cannot compute the octant for point ( "+e+", "+t+" )");var n=Math.abs(e),r=Math.abs(t);return e>=0?t>=0?n>=r?0:1:n>=r?7:6:t>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof T&&arguments[1]instanceof T){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new k("Cannot compute the octant for two identical points "+i);return u.octant(a,s)}}}]),u}(),wn=function(){function e(){g(this,e)}return p(e,[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(e){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(e){}},{key:"getData",value:function(){}}]),e}(),kn=function(){function e(){g(this,e)}return p(e,[{key:"addIntersection",value:function(e,t){}},{key:"interfaces_",get:function(){return[wn]}}]),e}(),En=function(){function i(){g(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(e){return this._pts[e]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(e){return e===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(e),this.getCoordinate(e+1))}},{key:"setData",value:function(e){this._data=e}},{key:"safeOctant",value:function(e,t){return e.equals2D(t)?0:xn.octant(e,t)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.addIntersectionNode(e,t)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new T(arguments[0].getIntersection(r));this.addIntersection(i,n)}}},{key:"toString",value:function(){return Dt.toLineString(new st(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(e,t){var n=t,r=n+1;if(r<this._pts.length){var i=this._pts[r];e.equals2D(i)&&(n=r)}return this._nodeList.add(e,n)}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}},{key:"interfaces_",get:function(){return[kn]}}],[{key:"constructor_",value:function(){this._nodeList=new bn(this),this._pts=null,this._data=null;var e=arguments[0],t=arguments[1];this._pts=e,this._data=t}},{key:"getNodedSubstrings",value:function(){if(1===arguments.length){var e=arguments[0],t=new w;return i.getNodedSubstrings(e,t),t}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)}}]),i}(),A=function(){function u(){g(this,u),u.constructor_.apply(this,arguments)}return p(u,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof u){var e=arguments[0],t=_.index(this.p0,this.p1,e.p0),n=_.index(this.p0,this.p1,e.p1);return t>=0&&n>=0||t<=0&&n<=0?Math.max(t,n):0}if(arguments[0]instanceof T){var r=arguments[0];return _.index(this.p0,this.p1,r)}}},{key:"toGeometry",value:function(e){return e.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(e){if(!(e instanceof u))return!1;var t=e;return this.p0.equals(t.p0)&&this.p1.equals(t.p1)}},{key:"intersection",value:function(e){var t=new Ft;return t.computeIntersection(this.p0,this.p1,e.p0,e.p1),t.hasIntersection()?t.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof T){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new T(e);var t=this.projectionFactor(e),n=new T;return n.x=this.p0.x+t*(this.p1.x-this.p0.x),n.y=this.p0.y+t*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof u){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new u(a,s)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(e){return 0===e?this.p0:this.p1}},{key:"distancePerpendicular",value:function(e){return Le.pointToLinePerpendicular(e,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return u.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(e){if(e.equals(this.p0))return 0;if(e.equals(this.p1))return 1;var t=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=t*t+n*n;return r<=0?P.NaN:((e.x-this.p0.x)*t+(e.y-this.p0.y)*n)/r}},{key:"closestPoints",value:function(e){var t=this.intersection(e);if(null!==t)return[t,t];var n=new Array(2).fill(null),r=P.MAX_VALUE,i=null,o=this.closestPoint(e.p0);r=o.distance(e.p0),n[0]=o,n[1]=e.p0;var a=this.closestPoint(e.p1);(i=a.distance(e.p1))<r&&(r=i,n[0]=a,n[1]=e.p1);var s=e.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=e.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n}},{key:"closestPoint",value:function(e){var t=this.projectionFactor(e);return t>0&&t<1?this.project(e):this.p0.distance(e)<this.p1.distance(e)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(e){var t=e,n=this.p0.compareTo(t.p0);return 0!==n?n:this.p1.compareTo(t.p1)}},{key:"reverse",value:function(){var e=this.p0;this.p0=this.p1,this.p1=e}},{key:"equalsTopo",value:function(e){return this.p0.equals(e.p0)&&this.p1.equals(e.p1)||this.p0.equals(e.p1)&&this.p1.equals(e.p0)}},{key:"lineIntersection",value:function(e){return Pe.intersection(this.p0,this.p1,e.p0,e.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(e,t){var n=this.p0.x+e*(this.p1.x-this.p0.x),r=this.p0.y+e*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==t){if(a<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");s=t*i/a,u=t*o/a}return new T(n-u,r+s)}},{key:"setCoordinates",value:function(){if(1===arguments.length){var e=arguments[0];this.setCoordinates(e.p0,e.p1)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.p0.x=t.x,this.p0.y=t.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:"segmentFraction",value:function(e){var t=this.projectionFactor(e);return t<0?t=0:(t>1||P.isNaN(t))&&(t=1),t}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(e){var t=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),r=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),i=t*t+n*n,o=t*t-n*n,a=e.getX(),s=e.getY();return new T((-o*a-2*t*n*s-2*t*r)/i,(o*s-2*t*n*a-2*n*r)/i)}},{key:"distance",value:function(){if(arguments[0]instanceof u){var e=arguments[0];return Le.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof T){var t=arguments[0];return Le.pointToSegment(t,this.p0,this.p1)}}},{key:"pointAlong",value:function(e){var t=new T;return t.x=this.p0.x+e*(this.p1.x-this.p0.x),t.y=this.p0.y+e*(this.p1.y-this.p0.y),t}},{key:"hashCode",value:function(){var e=P.doubleToLongBits(this.p0.x);e^=31*P.doubleToLongBits(this.p0.y);var t=Math.trunc(e)^Math.trunc(e>>32),n=P.doubleToLongBits(this.p1.x);return n^=31*P.doubleToLongBits(this.p1.y),t^Math.trunc(n)^Math.trunc(n>>32)}},{key:"interfaces_",get:function(){return[i,n]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)u.constructor_.call(this,new T,new T);else if(1===arguments.length){var e=arguments[0];u.constructor_.call(this,e.p0,e.p1)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.p0=t,this.p1=n}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3];u.constructor_.call(this,new T(r,i),new T(o,a))}}},{key:"midPoint",value:function(e,t){return new T((e.x+t.x)/2,(e.y+t.y)/2)}}]),u}(),Nn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"overlap",value:function(){if(2===arguments.length);else if(4===arguments.length){var e=arguments[1],t=arguments[2],n=arguments[3];arguments[0].getLineSegment(e,this._overlapSeg1),t.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new A,this._overlapSeg2=new A}}]),e}(),Sn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getLineSegment",value:function(e,t){t.p0=this._pts[e],t.p1=this._pts[e+1]}},{key:"computeSelect",value:function(e,t,n,r){var i=this._pts[t],o=this._pts[n];if(n-t==1)return r.select(this,t),null;if(!e.intersects(i,o))return null;var a=Math.trunc((t+n)/2);t<a&&this.computeSelect(e,t,a,r),a<n&&this.computeSelect(e,a,n,r)}},{key:"getCoordinates",value:function(){for(var e=new Array(this._end-this._start+1).fill(null),t=0,n=this._start;n<=this._end;n++)e[t++]=this._pts[n];return e}},{key:"computeOverlaps",value:function(){if(2===arguments.length){var e=arguments[0],t=arguments[1];this.computeOverlaps(this._start,this._end,e,e._start,e._end,t)}else if(6===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[4],s=arguments[5];if(r-n==1&&a-o==1)return s.overlap(this,n,i,o),null;if(!this.overlaps(n,r,i,o,a))return null;var u=Math.trunc((n+r)/2),l=Math.trunc((o+a)/2);n<u&&(o<l&&this.computeOverlaps(n,u,i,o,l,s),l<a&&this.computeOverlaps(n,u,i,l,a,s)),u<r&&(o<l&&this.computeOverlaps(u,r,i,o,l,s),l<a&&this.computeOverlaps(u,r,i,l,a,s))}}},{key:"setId",value:function(e){this._id=e}},{key:"select",value:function(e,t){this.computeSelect(e,this._start,this._end,t)}},{key:"getEnvelope",value:function(){if(null===this._env){var e=this._pts[this._start],t=this._pts[this._end];this._env=new h(e,t)}return this._env}},{key:"overlaps",value:function(e,t,n,r,i){return h.intersects(this._pts[e],this._pts[t],n._pts[r],n._pts[i])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this._pts=e,this._start=t,this._end=n,this._context=r}}]),e}(),Mn=function(){function s(){g(this,s)}return p(s,null,[{key:"findChainEnd",value:function(e,t){for(var n=t;n<e.length-1&&e[n].equals2D(e[n+1]);)n++;if(n>=e.length-1)return e.length-1;for(var r=a.quadrant(e[n],e[n+1]),i=t+1;i<e.length&&(e[i-1].equals2D(e[i])||a.quadrant(e[i-1],e[i])===r);)i++;return i-1}},{key:"getChains",value:function(){if(1===arguments.length){var e=arguments[0];return s.getChains(e,null)}if(2===arguments.length){var t=arguments[0],n=arguments[1],r=new w,i=0;do{var o=s.findChainEnd(t,i),a=new Sn(t,i,o,n);r.add(a),i=o}while(i<t.length-1);return r}}}]),s}(),In=function(){function e(){g(this,e)}return p(e,[{key:"computeNodes",value:function(e){}},{key:"getNodedSubstrings",value:function(){}}]),e}(),On=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"setSegmentIntersector",value:function(e){this._segInt=e}},{key:"interfaces_",get:function(){return[In]}}],[{key:"constructor_",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setSegmentIntersector(e)}}}]),e}(),Cn=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(e){for(var t=Mn.getChains(e.getCoordinates(),e).iterator();t.hasNext();){var n=t.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e;for(var t=e.iterator();t.hasNext();)this.add(t.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var e=new Pn(this._segInt),t=this._monoChains.iterator();t.hasNext();)for(var n=t.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,e),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new w,this._index=new pn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var e=arguments[0];On.constructor_.call(this,e)}}}]),n}(On),Pn=function(e){s(o,e);var t=u(o);function o(){var e;return g(this,o),e=t.call(this),o.constructor_.apply(r(e),arguments),e}return p(o,[{key:"overlap",value:function(){if(4!==arguments.length)return x(b(o.prototype),"overlap",this).apply(this,arguments);var e=arguments[1],t=arguments[2],n=arguments[3],r=arguments[0].getContext(),i=t.getContext();this._si.processIntersections(r,e,i,n)}}],[{key:"constructor_",value:function(){this._si=null;var e=arguments[0];this._si=e}}]),o}(Nn);Cn.SegmentOverlapAction=Pn;var Tn=function(){function s(){g(this,s),s.constructor_.apply(this,arguments)}return p(s,[{key:"isDeletable",value:function(e,t,n,r){var i=this._inputLine[e],o=this._inputLine[t],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,e,n,r)}},{key:"deleteShallowConcavities",value:function(){for(var e=1,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(e,t,n,this._distanceTol)&&(this._isDeleted[t]=s.DELETE,i=!0,r=!0),e=i?n:t,t=this.findNextNonDeletedIndex(e),n=this.findNextNonDeletedIndex(t)}return r}},{key:"isShallowConcavity",value:function(e,t,n,r){return _.index(e,t,n)===this._angleOrientation&&Le.pointToSegment(t,e,n)<r}},{key:"isShallowSampled",value:function(e,t,n,r,i){var o=Math.trunc((r-n)/s.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(e,t,this._inputLine[a],i))return!1;return!0}},{key:"isConcave",value:function(e,t,n){return _.index(e,t,n)===this._angleOrientation}},{key:"simplify",value:function(e){this._distanceTol=Math.abs(e),e<0&&(this._angleOrientation=_.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var t=!1;do{t=this.deleteShallowConcavities()}while(t);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(e){for(var t=e+1;t<this._inputLine.length&&this._isDeleted[t]===s.DELETE;)t++;return t}},{key:"isShallow",value:function(e,t,n,r){return Le.pointToSegment(t,e,n)<r}},{key:"collapseLine",value:function(){for(var e=new rt,t=0;t<this._inputLine.length;t++)this._isDeleted[t]!==s.DELETE&&e.add(this._inputLine[t]);return e.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=_.COUNTERCLOCKWISE;var e=arguments[0];this._inputLine=e}},{key:"simplify",value:function(e,t){return new s(e).simplify(t)}}]),s}();Tn.INIT=0,Tn.DELETE=1,Tn.KEEP=1,Tn.NUM_PTS_TO_CHECK=10;var Ln=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getCoordinates",value:function(){return this._ptList.toArray(e.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(e){this._precisionModel=e}},{key:"addPt",value:function(e){var t=new T(e);if(this._precisionModel.makePrecise(t),this.isRedundant(t))return null;this._ptList.add(t)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(e,t){if(t)for(var n=0;n<e.length;n++)this.addPt(e[n]);else for(var r=e.length-1;r>=0;r--)this.addPt(e[r])}},{key:"isRedundant",value:function(e){if(this._ptList.size()<1)return!1;var t=this._ptList.get(this._ptList.size()-1);return e.distance(t)<this._minimimVertexDistance}},{key:"toString",value:function(){return(new pt).createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var e=new T(this._ptList.get(0)),t=this._ptList.get(this._ptList.size()-1);if(e.equals(t))return null;this._ptList.add(e)}},{key:"setMinimumVertexDistance",value:function(e){this._minimimVertexDistance=e}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new w}}]),e}();Ln.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var j=function(){function o(){g(this,o)}return p(o,null,[{key:"toDegrees",value:function(e){return 180*e/Math.PI}},{key:"normalize",value:function(e){for(;e>Math.PI;)e-=o.PI_TIMES_2;for(;e<=-Math.PI;)e+=o.PI_TIMES_2;return e}},{key:"angle",value:function(){if(1===arguments.length){var e=arguments[0];return Math.atan2(e.y,e.x)}if(2===arguments.length){var t=arguments[0],n=arguments[1],r=n.x-t.x,i=n.y-t.y;return Math.atan2(i,r)}}},{key:"isAcute",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*(n.x-t.x)+i*(n.y-t.y)>0}},{key:"isObtuse",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y;return r*(n.x-t.x)+i*(n.y-t.y)<0}},{key:"interiorAngle",value:function(e,t,n){var r=o.angle(t,e),i=o.angle(t,n);return Math.abs(i-r)}},{key:"normalizePositive",value:function(e){if(e<0){for(;e<0;)e+=o.PI_TIMES_2;e>=o.PI_TIMES_2&&(e=0)}else{for(;e>=o.PI_TIMES_2;)e-=o.PI_TIMES_2;e<0&&(e=0)}return e}},{key:"angleBetween",value:function(e,t,n){var r=o.angle(t,e),i=o.angle(t,n);return o.diff(r,i)}},{key:"diff",value:function(e,t){var n=null;return(n=e<t?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n}},{key:"toRadians",value:function(e){return e*Math.PI/180}},{key:"getTurn",value:function(e,t){var n=Math.sin(t-e);return n>0?o.COUNTERCLOCKWISE:n<0?o.CLOCKWISE:o.NONE}},{key:"angleBetweenOriented",value:function(e,t,n){var r=o.angle(t,e),i=o.angle(t,n)-r;return i<=-Math.PI?i+o.PI_TIMES_2:i>Math.PI?i-o.PI_TIMES_2:i}}]),o}();j.PI_TIMES_2=2*Math.PI,j.PI_OVER_2=Math.PI/2,j.PI_OVER_4=Math.PI/4,j.COUNTERCLOCKWISE=_.COUNTERCLOCKWISE,j.CLOCKWISE=_.CLOCKWISE,j.NONE=_.COLLINEAR;var Rn=function(){function i(){g(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"addNextSegment",value:function(e,t){if(this._s0=this._s1,this._s1=this._s2,this._s2=e,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=_.index(this._s0,this._s1,this._s2),r=n===_.CLOCKWISE&&this._side===y.LEFT||n===_.COUNTERCLOCKWISE&&this._side===y.RIGHT;0===n?this.addCollinear(t):r?this.addOutsideTurn(n,t):this.addInsideTurn(n,t)}},{key:"addLineEndCap",value:function(e,t){var n=new A(e,t),r=new A;this.computeOffsetSegment(n,y.LEFT,this._distance,r);var i=new A;this.computeOffsetSegment(n,y.RIGHT,this._distance,i);var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case f.CAP_ROUND:this._segList.addPt(r.p1),this.addDirectedFillet(t,s+Math.PI/2,s-Math.PI/2,_.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case f.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case f.CAP_SQUARE:var u=new T;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var l=new T(r.p1.x+u.x,r.p1.y+u.y),c=new T(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(c)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(e,t,n,r){var i=Pe.intersection(t.p0,t.p1,n.p0,n.p1);if(null!==i&&(r<=0?1:i.distance(e)/Math.abs(r))<=this._bufParams.getMitreLimit())return this._segList.addPt(i),null;this.addLimitedMitreJoin(t,n,r,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(e,t){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*i.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===f.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===f.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(t&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(e){this._segList.addPt(new T(e.x+this._distance,e.y+this._distance)),this._segList.addPt(new T(e.x+this._distance,e.y-this._distance)),this._segList.addPt(new T(e.x-this._distance,e.y-this._distance)),this._segList.addPt(new T(e.x-this._distance,e.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(e,t){this._segList.addPts(e,t)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(e,t,n,r,i){var o=t.x-e.x,a=t.y-e.y,s=Math.atan2(a,o),u=n.x-e.x,l=n.y-e.y,c=Math.atan2(l,u);r===_.CLOCKWISE?s<=c&&(s+=2*Math.PI):s>=c&&(s-=2*Math.PI),this._segList.addPt(t),this.addDirectedFillet(e,s,c,r,i),this._segList.addPt(n)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(e,t,n){this._s1=e,this._s2=t,this._side=n,this._seg1.setCoordinates(e,t),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(e,t,n,r){var i=this._seg0.p1,o=j.angle(i,this._seg0.p0),a=j.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=j.normalize(o+a),u=j.normalize(s+Math.PI),l=r*n,c=n-l*Math.abs(Math.sin(a)),f=i.x+l*Math.cos(u),h=i.y+l*Math.sin(u),d=new T(f,h),g=new A(i,d),p=g.pointAlongOffset(1,c),v=g.pointAlongOffset(1,-c);this._side===y.LEFT?(this._segList.addPt(p),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(p))}},{key:"addDirectedFillet",value:function(e,t,n,r,i){var o=r===_.CLOCKWISE?-1:1,a=Math.abs(t-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,l=new T,c=0;c<s;c++){var f=t+o*c*u;l.x=e.x+i*Math.cos(f),l.y=e.y+i*Math.sin(f),this._segList.addPt(l)}}},{key:"computeOffsetSegment",value:function(e,t,n,r){var i=t===y.LEFT?1:-1,o=e.p1.x-e.p0.x,a=e.p1.y-e.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,l=i*n*a/s;r.p0.x=e.p0.x-l,r.p0.y=e.p0.y+u,r.p1.x=e.p1.x-l,r.p1.y=e.p1.y+u}},{key:"addInsideTurn",value:function(e,t){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*i.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new T((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new T((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(e){var t=new T(e.x+this._distance,e.y);this._segList.addPt(t),this.addDirectedFillet(e,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(e,t){this._segList.addPt(e.p1),this._segList.addPt(t.p0)}},{key:"init",value:function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ln,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*i.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(e){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===f.JOIN_BEVEL||this._bufParams.getJoinStyle()===f.JOIN_MITRE?(e&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,_.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new A,this._seg1=new A,this._offset0=new A,this._offset1=new A,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=t,this._li=new Ft,this._filletAngleQuantum=Math.PI/2/t.getQuadrantSegments(),t.getQuadrantSegments()>=8&&t.getJoinStyle()===f.JOIN_ROUND&&(this._closingSegLengthFactor=i.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}}]),i}();Rn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Rn.MAX_CLOSING_SEG_LEN_FACTOR=80;var An=function(){function i(){g(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"getOffsetCurve",value:function(e,t){if(this._distance=t,0===t)return null;var n=t<0,r=Math.abs(t),i=this.getSegGen(r);e.length<=1?this.computePointCurve(e[0],i):this.computeOffsetCurve(e,n,i);var o=i.getCoordinates();return n&&I.reverse(o),o}},{key:"computeSingleSidedBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){n.addSegments(e,!0);var i=Tn.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],y.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(e,!1);var s=Tn.simplify(e,r),u=s.length-1;n.initSideSegments(s[0],s[1],y.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment(),n.closeRing()}},{key:"computeRingBufferCurve",value:function(e,t,n){var r=this.simplifyTolerance(this._distance);t===y.RIGHT&&(r=-r);var i=Tn.simplify(e,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],t);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()}},{key:"computeLineBufferCurve",value:function(e,t){var n=this.simplifyTolerance(this._distance),r=Tn.simplify(e,n),i=r.length-1;t.initSideSegments(r[0],r[1],y.LEFT);for(var o=2;o<=i;o++)t.addNextSegment(r[o],!0);t.addLastSegment(),t.addLineEndCap(r[i-1],r[i]);var a=Tn.simplify(e,-n),s=a.length-1;t.initSideSegments(a[s],a[s-1],y.LEFT);for(var u=s-2;u>=0;u--)t.addNextSegment(a[u],!0);t.addLastSegment(),t.addLineEndCap(a[1],a[0]),t.closeRing()}},{key:"computePointCurve",value:function(e,t){switch(this._bufParams.getEndCapStyle()){case f.CAP_ROUND:t.createCircle(e);break;case f.CAP_SQUARE:t.createSquare(e)}}},{key:"getLineCurve",value:function(e,t){if(this._distance=t,this.isLineOffsetEmpty(t))return null;var n=Math.abs(t),r=this.getSegGen(n);if(e.length<=1)this.computePointCurve(e[0],r);else if(this._bufParams.isSingleSided()){var i=t<0;this.computeSingleSidedBufferCurve(e,i,r)}else this.computeLineBufferCurve(e,r);return r.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(e){return e*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(e,t,n){if(this._distance=n,e.length<=2)return this.getLineCurve(e,n);if(0===n)return i.copyCoordinates(e);var r=this.getSegGen(n);return this.computeRingBufferCurve(e,t,r),r.getCoordinates()}},{key:"computeOffsetCurve",value:function(e,t,n){var r=this.simplifyTolerance(this._distance);if(t){var i=Tn.simplify(e,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],y.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Tn.simplify(e,r),u=s.length-1;n.initSideSegments(s[0],s[1],y.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(s[l],!0)}n.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(e){return 0===e||e<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(e){return new Rn(this._precisionModel,this._bufParams,e)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var e=arguments[0],t=arguments[1];this._precisionModel=e,this._bufParams=t}},{key:"copyCoordinates",value:function(e){for(var t=new Array(e.length).fill(null),n=0;n<t.length;n++)t[n]=new T(e[n]);return t}}]),i}(),jn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"findStabbedSegments",value:function(){if(1===arguments.length){for(var e=arguments[0],t=new w,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();e.y<i.getMinY()||e.y>i.getMaxY()||this.findStabbedSegments(e,r.getDirectedEdges(),t)}return t}if(3===arguments.length)if(E(arguments[2],be)&&arguments[0]instanceof T&&arguments[1]instanceof en){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++)if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||_.index(this._seg.p0,this._seg.p1,o)===_.RIGHT)){var c=a.getDepth(y.LEFT);this._seg.p0.equals(u[l])||(c=a.getDepth(y.RIGHT));var f=new Dn(this._seg,c);s.add(f)}}else if(E(arguments[2],be)&&arguments[0]instanceof T&&E(arguments[1],be))for(var h=arguments[0],d=arguments[2],g=arguments[1].iterator();g.hasNext();){var p=g.next();p.isForward()&&this.findStabbedSegments(h,p,d)}}},{key:"getDepth",value:function(e){var t=this.findStabbedSegments(e);return 0===t.size()?0:ln.min(t)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new A;var e=arguments[0];this._subgraphs=e}}]),e}(),Dn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"compareTo",value:function(e){var t=e;if(this._upwardSeg.minX()>=t._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=t._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(t._upwardSeg);return 0!==n||0!=(n=-1*t._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(t._upwardSeg)}},{key:"compareX",value:function(e,t){var n=e.p0.compareTo(t.p0);return 0!==n?n:e.p1.compareTo(t.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var e=arguments[0],t=arguments[1];this._upwardSeg=new A(e),this._leftDepth=t}}]),e}();jn.DepthSegment=Dn;var Fn=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,null,[{key:"constructor_",value:function(){Z.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}]),n}(Z),zn=function(){function b(){g(this,b),b.constructor_.apply(this,arguments)}return p(b,[{key:"getY",value:function(){var e=this.y/this.w;if(P.isNaN(e)||P.isInfinite(e))throw new Fn;return e}},{key:"getX",value:function(){var e=this.x/this.w;if(P.isNaN(e)||P.isInfinite(e))throw new Fn;return e}},{key:"getCoordinate",value:function(){var e=new T;return e.x=this.getX(),e.y=this.getY(),e}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],n=arguments[1];this.x=t,this.y=n,this.w=1}else if(arguments[0]instanceof b&&arguments[1]instanceof b){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof T&&arguments[1]instanceof T){var o=arguments[0],a=arguments[1];this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y}}else if(3===arguments.length){var s=arguments[0],u=arguments[1],l=arguments[2];this.x=s,this.y=u,this.w=l}else if(4===arguments.length){var c=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3],g=c.y-f.y,p=f.x-c.x,v=c.x*f.y-f.x*c.y,y=h.y-d.y,m=d.x-h.x,_=h.x*d.y-d.x*h.y;this.x=p*_-m*v,this.y=y*v-g*_,this.w=g*m-y*p}}}]),b}(),Vn=function(){function h(){g(this,h),h.constructor_.apply(this,arguments)}return p(h,[{key:"area",value:function(){return h.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return h.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(e){if(null===e)throw new k("Supplied point is null.");return h.interpolateZ(e,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return h.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return h.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return h.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return h.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return h.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return h.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.p0=e,this.p1=t,this.p2=n}},{key:"area",value:function(e,t,n){return Math.abs(((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2)}},{key:"signedArea",value:function(e,t,n){return((n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y))/2}},{key:"det",value:function(e,t,n,r){return e*r-t*n}},{key:"interpolateZ",value:function(e,t,n,r){var i=t.x,o=t.y,a=n.x-i,s=r.x-i,u=n.y-o,l=r.y-o,c=a*l-s*u,f=e.x-i,h=e.y-o,d=(l*f-s*h)/c,g=(-u*f+a*h)/c;return t.getZ()+d*(n.getZ()-t.getZ())+g*(r.getZ()-t.getZ())}},{key:"longestSideLength",value:function(e,t,n){var r=e.distance(t),i=t.distance(n),o=n.distance(e),a=r;return i>a&&(a=i),o>a&&(a=o),a}},{key:"circumcentreDD",value:function(e,t,n){var r=m.valueOf(e.x).subtract(n.x),i=m.valueOf(e.y).subtract(n.y),o=m.valueOf(t.x).subtract(n.x),a=m.valueOf(t.y).subtract(n.y),s=m.determinant(r,i,o,a).multiply(2),u=r.sqr().add(i.sqr()),l=o.sqr().add(a.sqr()),c=m.determinant(i,u,a,l),f=m.determinant(r,u,o,l),h=m.valueOf(n.x).subtract(c.divide(s)).doubleValue(),d=m.valueOf(n.y).add(f.divide(s)).doubleValue();return new T(h,d)}},{key:"isAcute",value:function(e,t,n){return!!j.isAcute(e,t,n)&&!!j.isAcute(t,n,e)&&!!j.isAcute(n,e,t)}},{key:"circumcentre",value:function(e,t,n){var r=n.x,i=n.y,o=e.x-r,a=e.y-i,s=t.x-r,u=t.y-i,l=2*h.det(o,a,s,u),c=h.det(a,o*o+a*a,u,s*s+u*u),f=h.det(o,o*o+a*a,s,s*s+u*u);return new T(r-c/l,i+f/l)}},{key:"perpendicularBisector",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=new zn(e.x+n/2,e.y+r/2,1),o=new zn(e.x-r+n/2,e.y+n+r/2,1);return new zn(i,o)}},{key:"angleBisector",value:function(e,t,n){var r=t.distance(e),i=r/(r+t.distance(n)),o=n.x-e.x,a=n.y-e.y;return new T(e.x+i*o,e.y+i*a)}},{key:"area3D",value:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=t.getZ()-e.getZ(),a=n.x-e.x,s=n.y-e.y,u=n.getZ()-e.getZ(),l=i*u-o*s,c=o*a-r*u,f=r*s-i*a,h=l*l+c*c+f*f;return Math.sqrt(h)/2}},{key:"centroid",value:function(e,t,n){var r=(e.x+t.x+n.x)/3,i=(e.y+t.y+n.y)/3;return new T(r,i)}},{key:"inCentre",value:function(e,t,n){var r=t.distance(n),i=e.distance(n),o=e.distance(t),a=r+i+o,s=(r*e.x+i*t.x+o*n.x)/a,u=(r*e.y+i*t.y+o*n.y)/a;return new T(s,u)}}]),h}(),qn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"addRingSide",value:function(e,t,n,r,i){if(0===t&&e.length<Ke.MINIMUM_VALID_SIZE)return null;var o=r,a=i;e.length>=Ke.MINIMUM_VALID_SIZE&&_.isCCW(e)&&(o=i,a=r,n=y.opposite(n));var s=this._curveBuilder.getRingCurve(e,n,t);this.addCurve(s,o,a)}},{key:"addRingBothSides",value:function(e,t){this.addRingSide(e,t,y.LEFT,v.EXTERIOR,v.INTERIOR),this.addRingSide(e,t,y.RIGHT,v.INTERIOR,v.EXTERIOR)}},{key:"addPoint",value:function(e){if(this._distance<=0)return null;var t=e.getCoordinates(),n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,v.EXTERIOR,v.INTERIOR)}},{key:"addPolygon",value:function(e){var t=this._distance,n=y.LEFT;this._distance<0&&(t=-this._distance,n=y.RIGHT);var r=e.getExteriorRing(),i=I.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addRingSide(i,t,n,v.EXTERIOR,v.INTERIOR);for(var o=0;o<e.getNumInteriorRing();o++){var a=e.getInteriorRingN(o),s=I.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addRingSide(s,t,y.opposite(n),v.INTERIOR,v.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(e,t){var n=new Vn(e[0],e[1],e[2]),r=n.inCentre();return Le.pointToSegment(r,n.p0,n.p1)<Math.abs(t)}},{key:"addLineString",value:function(e){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var t=I.removeRepeatedPoints(e.getCoordinates());if(I.isRing(t)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(t,this._distance);else{var n=this._curveBuilder.getLineCurve(t,this._distance);this.addCurve(n,v.EXTERIOR,v.INTERIOR)}}},{key:"addCurve",value:function(e,t,n){if(null===e||e.length<2)return null;var r=new En(e,new L(0,v.BOUNDARY,t,n));this._curveList.add(r)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(e){if(e.isEmpty())return null;if(e instanceof Ze)this.addPolygon(e);else if(e instanceof qe)this.addLineString(e);else if(e instanceof Ge)this.addPoint(e);else if(e instanceof Je)this.addCollection(e);else if(e instanceof gt)this.addCollection(e);else if(e instanceof lt)this.addCollection(e);else{if(!(e instanceof M))throw new ge(e.getGeometryType());this.addCollection(e)}}},{key:"isErodedCompletely",value:function(e,t){var n=e.getCoordinates();if(n.length<4)return t<0;if(4===n.length)return this.isTriangleErodedCompletely(n,t);var r=e.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return t<0&&2*Math.abs(t)>i}},{key:"addCollection",value:function(e){for(var t=0;t<e.getNumGeometries();t++){var n=e.getGeometryN(t);this.add(n)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new w;var e=arguments[0],t=arguments[1],n=arguments[2];this._inputGeom=e,this._distance=t,this._curveBuilder=n}}]),e}(),Bn=function(){function e(){g(this,e)}return p(e,[{key:"locate",value:function(e){}}]),e}(),Gn=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,t.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new de;var e=this._parent.getGeometryN(this._index++);return e instanceof M?(this._subcollectionIterator=new t(e),this._subcollectionIterator.next()):e}},{key:"remove",value:function(){throw new ge(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[_n]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=arguments[0];this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}},{key:"isAtomic",value:function(e){return!(e instanceof M)}}]),t}(),Yn=function(){function s(){g(this,s),s.constructor_.apply(this,arguments)}return p(s,[{key:"locate",value:function(e){return s.locate(e,this._geom)}},{key:"interfaces_",get:function(){return[Bn]}}],[{key:"constructor_",value:function(){this._geom=null;var e=arguments[0];this._geom=e}},{key:"locatePointInPolygon",value:function(e,t){if(t.isEmpty())return v.EXTERIOR;var n=t.getExteriorRing(),r=s.locatePointInRing(e,n);if(r!==v.INTERIOR)return r;for(var i=0;i<t.getNumInteriorRing();i++){var o=t.getInteriorRingN(i),a=s.locatePointInRing(e,o);if(a===v.BOUNDARY)return v.BOUNDARY;if(a===v.INTERIOR)return v.EXTERIOR}return v.INTERIOR}},{key:"locatePointInRing",value:function(e,t){return t.getEnvelopeInternal().intersects(e)?Vt.locateInRing(e,t.getCoordinates()):v.EXTERIOR}},{key:"containsPointInPolygon",value:function(e,t){return v.EXTERIOR!==s.locatePointInPolygon(e,t)}},{key:"locateInGeometry",value:function(e,t){if(t instanceof Ze)return s.locatePointInPolygon(e,t);if(t instanceof M)for(var n=new Gn(t);n.hasNext();){var r=n.next();if(r!==t){var i=s.locateInGeometry(e,r);if(i!==v.EXTERIOR)return i}}return v.EXTERIOR}},{key:"isContained",value:function(e,t){return v.EXTERIOR!==s.locate(e,t)}},{key:"locate",value:function(e,t){return t.isEmpty()?v.EXTERIOR:t.getEnvelopeInternal().intersects(e)?s.locateInGeometry(e,t):v.EXTERIOR}}]),s}(),Un=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getNextCW",value:function(e){this.getEdges();var t=this._edgeList.indexOf(e),n=t-1;return 0===t&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:"propagateSideLabels",value:function(e){for(var t=v.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(e)&&r.getLocation(e,y.LEFT)!==v.NONE&&(t=r.getLocation(e,y.LEFT))}if(t===v.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(e,y.ON)===v.NONE&&s.setLocation(e,y.ON,i),s.isArea(e)){var u=s.getLocation(e,y.LEFT),l=s.getLocation(e,y.RIGHT);if(l!==v.NONE){if(l!==i)throw new Me("side location conflict",a.getCoordinate());u===v.NONE&&c.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else c.isTrue(s.getLocation(e,y.LEFT)===v.NONE,"found single null side"),s.setLocation(e,y.RIGHT,i),s.setLocation(e,y.LEFT,i)}}}},{key:"getCoordinate",value:function(){var e=this.iterator();return e.hasNext()?e.next().getCoordinate():null}},{key:"print",value:function(e){l.out.println("EdgeEndStar:   "+this.getCoordinate());for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"isAreaLabelsConsistent",value:function(e){return this.computeEdgeEndLabels(e.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(e){var t=this.getEdges();if(t.size()<=0)return!0;var n=t.size()-1,r=t.get(n).getLabel().getLocation(e,y.LEFT);c.isTrue(r!==v.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();c.isTrue(a.isArea(e),"Found non-area edge");var s=a.getLocation(e,y.LEFT),u=a.getLocation(e,y.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0}},{key:"findIndex",value:function(e){this.iterator();for(var t=0;t<this._edgeList.size();t++)if(this._edgeList.get(t)===e)return t;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return null===this._edgeList&&(this._edgeList=new w(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(e,t,n){return this._ptInAreaLocation[e]===v.NONE&&(this._ptInAreaLocation[e]=Yn.locate(t,n[e].getGeometry())),this._ptInAreaLocation[e]}},{key:"toString",value:function(){var e=new we;e.append("EdgeEndStar:   "+this.getCoordinate()),e.append("\n");for(var t=this.iterator();t.hasNext();){var n=t.next();e.append(n),e.append("\n")}return e.toString()}},{key:"computeEdgeEndLabels",value:function(e){for(var t=this.iterator();t.hasNext();)t.next().computeLabel(e)}},{key:"computeLabelling",value:function(e){this.computeEdgeEndLabels(e[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var t=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===v.BOUNDARY&&(t[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var l=v.NONE;if(t[u])l=v.EXTERIOR;else{var c=a.getCoordinate();l=this.getLocation(u,c,e)}s.setAllLocationsIfNull(u,l)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(e,t){this._edgeMap.put(e,t),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Jt,this._edgeList=null,this._ptInAreaLocation=[v.NONE,v.NONE]}}]),e}(),Wn=function(e){s(o,e);var t=u(o);function o(){var e;return g(this,o),e=t.call(this),o.constructor_.apply(r(e),arguments),e}return p(o,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var e=null,t=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===e&&i.isInResult()&&(e=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;t=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;t.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===e)throw new Me("no outgoing dirEdge found",this.getCoordinate());c.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),t.setNext(e)}}},{key:"insert",value:function(e){var t=e;this.insertEdgeEnd(t,t)}},{key:"getRightmostEdge",value:function(){var e=this.getEdges(),t=e.size();if(t<1)return null;var n=e.get(0);if(1===t)return n;var r=e.get(t-1),i=n.getQuadrant(),o=r.getQuadrant();return a.isNorthern(i)&&a.isNorthern(o)?n:a.isNorthern(i)||a.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(c.shouldNeverReachHere("found two horizontal edges incident on node"),null):r}},{key:"print",value:function(e){l.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var t=this.iterator();t.hasNext();){var n=t.next();e.print("out "),n.print(e),e.println(),e.print("in "),n.getSym().print(e),e.println()}}},{key:"getResultAreaEdges",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new w;for(var e=this.iterator();e.hasNext();){var t=e.next();(t.isInResult()||t.getSym().isInResult())&&this._resultAreaEdgeList.add(t)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(e){for(var t=this.iterator();t.hasNext();){var n=t.next().getLabel();n.setAllLocationsIfNull(0,e.getLocation(0)),n.setAllLocationsIfNull(1,e.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var e=null,t=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===t&&(t=i),null!==e&&i.setNext(e),e=r}t.setNext(e)}},{key:"computeDepths",value:function(){if(1===arguments.length){var e=arguments[0],t=this.findIndex(e),n=e.getDepth(y.LEFT),r=e.getDepth(y.RIGHT),i=this.computeDepths(t+1,this._edgeList.size(),n);if(this.computeDepths(0,t,i)!==r)throw new Me("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(y.RIGHT,a),a=u.getDepth(y.LEFT)}return a}}},{key:"mergeSymLabels",value:function(){for(var e=this.iterator();e.hasNext();){var t=e.next();t.getLabel().merge(t.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(e){for(var t=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===t&&o.getEdgeRing()===e&&(t=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==e)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==e)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(c.isTrue(null!==t,"found null for first outgoing dirEdge"),c.isTrue(t.getEdgeRing()===e,"unable to link last incoming dirEdge"),n.setNextMin(t))}},{key:"getOutgoingDegree",value:function(){if(0===arguments.length){for(var e=0,t=this.iterator();t.hasNext();)t.next().isInResult()&&e++;return e}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var e=v.NONE,t=this.iterator();t.hasNext();){var n=t.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){e=v.INTERIOR;break}if(r.isInResult()){e=v.EXTERIOR;break}}}if(e===v.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===v.INTERIOR):(a.isInResult()&&(i=v.EXTERIOR),s.isInResult()&&(i=v.INTERIOR))}}},{key:"computeLabelling",value:function(e){x(b(o.prototype),"computeLabelling",this).call(this,e),this._label=new L(v.NONE);for(var t=this.iterator();t.hasNext();)for(var n=t.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==v.INTERIOR&&i!==v.BOUNDARY||this._label.setLocation(r,v.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}]),o}(Un),Zn=function(e){s(n,e);var t=u(n);function n(){return g(this,n),t.call(this)}return p(n,[{key:"createNode",value:function(e){return new Ut(e,new Wn)}}]),n}(tn),Xn=function(){function n(){g(this,n),n.constructor_.apply(this,arguments)}return p(n,[{key:"compareTo",value:function(e){var t=e;return n.compareOriented(this._pts,this._orientation,t._pts,t._orientation)}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=n.orientation(e)}},{key:"orientation",value:function(e){return 1===I.increasingDirection(e)}},{key:"compareOriented",value:function(e,t,n,r){for(var i=t?1:-1,o=r?1:-1,a=t?e.length:-1,s=r?n.length:-1,u=t?0:e.length-1,l=r?0:n.length-1;;){var c=e[u].compareTo(n[l]);if(0!==c)return c;var f=(u+=i)===a,h=(l+=o)===s;if(f&&!h)return-1;if(!f&&h)return 1;if(f&&h)return 0}}}]),n}(),Hn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"print",value:function(e){e.print("MULTILINESTRING ( ");for(var t=0;t<this._edges.size();t++){var n=this._edges.get(t);t>0&&e.print(","),e.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&e.print(","),e.print(r[i].x+" "+r[i].y);e.println(")")}e.print(")  ")}},{key:"addAll",value:function(e){for(var t=e.iterator();t.hasNext();)this.add(t.next())}},{key:"findEdgeIndex",value:function(e){for(var t=0;t<this._edges.size();t++)if(this._edges.get(t).equals(e))return t;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(e){return this._edges.get(e)}},{key:"findEqualEdge",value:function(e){var t=new Xn(e.getCoordinates());return this._ocaMap.get(t)}},{key:"add",value:function(e){this._edges.add(e);var t=new Xn(e.getCoordinates());this._ocaMap.put(t,e)}}],[{key:"constructor_",value:function(){this._edges=new w,this._ocaMap=new Jt}}]),e}(),$n=function(){function e(){g(this,e)}return p(e,[{key:"processIntersections",value:function(e,t,n,r){}},{key:"isDone",value:function(){}}]),e}(),Jn=function(){function o(){g(this,o),o.constructor_.apply(this,arguments)}return p(o,[{key:"isTrivialIntersection",value:function(e,t,n,r){if(e===n&&1===this._li.getIntersectionNum()){if(o.isAdjacentSegments(t,r))return!0;if(e.isClosed()){var i=e.size()-1;if(0===t&&r===i||0===r&&t===i)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;this.numTests++;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(e,t,n,r)||(this._hasIntersection=!0,e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[$n]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var e=arguments[0];this._li=e}},{key:"isAdjacentSegments",value:function(e,t){return 1===Math.abs(e-t)}}]),o}(),Kn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(e){e.print(this.coord),e.print(" seg # = "+this.segmentIndex),e.println(" dist = "+this.dist)}},{key:"compareTo",value:function(e){var t=e;return this.compare(t.segmentIndex,t.dist)}},{key:"isEndPoint",value:function(e){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===e}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(e,t){return this.segmentIndex<e?-1:this.segmentIndex>e?1:this.dist<t?-1:this.dist>t?1:0}},{key:"interfaces_",get:function(){return[i]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var e=arguments[0],t=arguments[1],n=arguments[2];this.coord=new T(e),this.segmentIndex=t,this.dist=n}}]),e}(),Qn=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"print",value:function(e){e.println("Intersections:");for(var t=this.iterator();t.hasNext();)t.next().print(e)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(e){this.addEndpoints();for(var t=this.iterator(),n=t.next();t.hasNext();){var r=t.next(),i=this.createSplitEdge(n,r);e.add(i),n=r}}},{key:"addEndpoints",value:function(){var e=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[e],e,0)}},{key:"createSplitEdge",value:function(e,t){var n=t.segmentIndex-e.segmentIndex+2,r=this.edge.pts[t.segmentIndex],i=t.dist>0||!t.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new T(e.coord);for(var s=e.segmentIndex+1;s<=t.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=t.coord),new or(o,new L(this.edge._label))}},{key:"add",value:function(e,t,n){var r=new Kn(e,t,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)}},{key:"isIntersection",value:function(e){for(var t=this.iterator();t.hasNext();)if(t.next().coord.equals(e))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Jt,this.edge=null;var e=arguments[0];this.edge=e}}]),e}(),er=function(){function r(){g(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])||r.isTrue(this._matrix[v.INTERIOR][v.BOUNDARY])||r.isTrue(this._matrix[v.BOUNDARY][v.INTERIOR])||r.isTrue(this._matrix[v.BOUNDARY][v.BOUNDARY]))&&this._matrix[v.EXTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.BOUNDARY]===S.FALSE}},{key:"isCoveredBy",value:function(){return(r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])||r.isTrue(this._matrix[v.INTERIOR][v.BOUNDARY])||r.isTrue(this._matrix[v.BOUNDARY][v.INTERIOR])||r.isTrue(this._matrix[v.BOUNDARY][v.BOUNDARY]))&&this._matrix[v.INTERIOR][v.EXTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.EXTERIOR]===S.FALSE}},{key:"set",value:function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),r=t%3;this._matrix[n][r]=S.toDimensionValue(e.charAt(t))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._matrix[i][o]=a}}},{key:"isContains",value:function(){return r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&this._matrix[v.EXTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.BOUNDARY]===S.FALSE}},{key:"setAtLeast",value:function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<e.length;t++){var n=Math.trunc(t/3),r=t%3;this.setAtLeast(n,r,S.toDimensionValue(e.charAt(t)))}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._matrix[i][o]<a&&(this._matrix[i][o]=a)}}},{key:"setAtLeastIfValid",value:function(e,t,n){e>=0&&t>=0&&this.setAtLeast(e,t,n)}},{key:"isWithin",value:function(){return r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&this._matrix[v.INTERIOR][v.EXTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.EXTERIOR]===S.FALSE}},{key:"isTouches",value:function(e,t){return e>t?this.isTouches(t,e):(e===S.A&&t===S.A||e===S.L&&t===S.L||e===S.L&&t===S.A||e===S.P&&t===S.A||e===S.P&&t===S.L)&&this._matrix[v.INTERIOR][v.INTERIOR]===S.FALSE&&(r.isTrue(this._matrix[v.INTERIOR][v.BOUNDARY])||r.isTrue(this._matrix[v.BOUNDARY][v.INTERIOR])||r.isTrue(this._matrix[v.BOUNDARY][v.BOUNDARY]))}},{key:"isOverlaps",value:function(e,t){return e===S.P&&t===S.P||e===S.A&&t===S.A?r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&r.isTrue(this._matrix[v.INTERIOR][v.EXTERIOR])&&r.isTrue(this._matrix[v.EXTERIOR][v.INTERIOR]):e===S.L&&t===S.L&&1===this._matrix[v.INTERIOR][v.INTERIOR]&&r.isTrue(this._matrix[v.INTERIOR][v.EXTERIOR])&&r.isTrue(this._matrix[v.EXTERIOR][v.INTERIOR])}},{key:"isEquals",value:function(e,t){return e===t&&r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&this._matrix[v.INTERIOR][v.EXTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.EXTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.EXTERIOR][v.BOUNDARY]===S.FALSE}},{key:"toString",value:function(){for(var e=new at("123456789"),t=0;t<3;t++)for(var n=0;n<3;n++)e.setCharAt(3*t+n,S.toDimensionSymbol(this._matrix[t][n]));return e.toString()}},{key:"setAll",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this._matrix[t][n]=e}},{key:"get",value:function(e,t){return this._matrix[e][t]}},{key:"transpose",value:function(){var e=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=e,e=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=e,e=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=e,this}},{key:"matches",value:function(e){if(9!==e.length)throw new k("Should be length 9: "+e);for(var t=0;t<3;t++)for(var n=0;n<3;n++)if(!r.matches(this._matrix[t][n],e.charAt(3*t+n)))return!1;return!0}},{key:"add",value:function(e){for(var t=0;t<3;t++)for(var n=0;n<3;n++)this.setAtLeast(t,n,e.get(t,n))}},{key:"isDisjoint",value:function(){return this._matrix[v.INTERIOR][v.INTERIOR]===S.FALSE&&this._matrix[v.INTERIOR][v.BOUNDARY]===S.FALSE&&this._matrix[v.BOUNDARY][v.INTERIOR]===S.FALSE&&this._matrix[v.BOUNDARY][v.BOUNDARY]===S.FALSE}},{key:"isCrosses",value:function(e,t){return e===S.P&&t===S.L||e===S.P&&t===S.A||e===S.L&&t===S.A?r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&r.isTrue(this._matrix[v.INTERIOR][v.EXTERIOR]):e===S.L&&t===S.P||e===S.A&&t===S.P||e===S.A&&t===S.L?r.isTrue(this._matrix[v.INTERIOR][v.INTERIOR])&&r.isTrue(this._matrix[v.EXTERIOR][v.INTERIOR]):e===S.L&&t===S.L&&0===this._matrix[v.INTERIOR][v.INTERIOR]}},{key:"interfaces_",get:function(){return[H]}}],[{key:"constructor_",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(S.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var e=arguments[0];r.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof r){var t=arguments[0];r.constructor_.call(this),this._matrix[v.INTERIOR][v.INTERIOR]=t._matrix[v.INTERIOR][v.INTERIOR],this._matrix[v.INTERIOR][v.BOUNDARY]=t._matrix[v.INTERIOR][v.BOUNDARY],this._matrix[v.INTERIOR][v.EXTERIOR]=t._matrix[v.INTERIOR][v.EXTERIOR],this._matrix[v.BOUNDARY][v.INTERIOR]=t._matrix[v.BOUNDARY][v.INTERIOR],this._matrix[v.BOUNDARY][v.BOUNDARY]=t._matrix[v.BOUNDARY][v.BOUNDARY],this._matrix[v.BOUNDARY][v.EXTERIOR]=t._matrix[v.BOUNDARY][v.EXTERIOR],this._matrix[v.EXTERIOR][v.INTERIOR]=t._matrix[v.EXTERIOR][v.INTERIOR],this._matrix[v.EXTERIOR][v.BOUNDARY]=t._matrix[v.EXTERIOR][v.BOUNDARY],this._matrix[v.EXTERIOR][v.EXTERIOR]=t._matrix[v.EXTERIOR][v.EXTERIOR]}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var e=arguments[0],t=arguments[1];return t===S.SYM_DONTCARE||t===S.SYM_TRUE&&(e>=0||e===S.TRUE)||t===S.SYM_FALSE&&e===S.FALSE||t===S.SYM_P&&e===S.P||t===S.SYM_L&&e===S.L||t===S.SYM_A&&e===S.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[1];return new r(arguments[0]).matches(n)}}},{key:"isTrue",value:function(e){return e>=0||e===S.TRUE}}]),r}(),tr=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(e){return null===e||0===e.length?null:(this.ensureCapacity(this._size+e.length),l.arraycopy(e,0,this._data,this._size,e.length),void(this._size+=e.length))}},{key:"ensureCapacity",value:function(e){if(e<=this._data.length)return null;var t=Math.max(e,2*this._data.length);this._data=Ue.copyOf(this._data,t)}},{key:"toArray",value:function(){var e=new Array(this._size).fill(null);return l.arraycopy(this._data,0,e,0,this._size),e}},{key:"add",value:function(e){this.ensureCapacity(this._size+1),this._data[this._size]=e,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,0===arguments.length)t.constructor_.call(this,10);else if(1===arguments.length){var e=arguments[0];this._data=new Array(e).fill(null)}}}]),t}(),nr=function(){function i(){g(this,i)}return p(i,[{key:"getChainStartIndices",value:function(e){var t=0,n=new tr(Math.trunc(e.length/2));n.add(t);do{var r=this.findChainEnd(e,t);n.add(r),t=r}while(t<e.length-1);return n.toArray()}},{key:"findChainEnd",value:function(e,t){for(var n=a.quadrant(e[t],e[t+1]),r=t+1;r<e.length&&a.quadrant(e[r-1],e[r])===n;)r++;return r-1}},{key:"OLDgetChainStartIndices",value:function(e){var t=0,n=new w;n.add(t);do{var r=this.findChainEnd(e,t);n.add(r),t=r}while(t<e.length-1);return i.toIntArray(n)}}],[{key:"toIntArray",value:function(e){for(var t=new Array(e.size()).fill(null),n=0;n<t.length;n++)t[n]=e.get(n).intValue();return t}}]),i}(),rr=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t>n?t:n}},{key:"getMinX",value:function(e){var t=this.pts[this.startIndex[e]].x,n=this.pts[this.startIndex[e+1]].x;return t<n?t:n}},{key:"computeIntersectsForChain",value:function(){if(4===arguments.length){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[e],this.startIndex[e+1],t,t.startIndex[n],t.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],l=arguments[5];if(o-i==1&&u-s==1)return l.addIntersections(this.e,i,a.e,s),null;if(!this.overlaps(i,o,a,s,u))return null;var c=Math.trunc((i+o)/2),f=Math.trunc((s+u)/2);i<c&&(s<f&&this.computeIntersectsForChain(i,c,a,s,f,l),f<u&&this.computeIntersectsForChain(i,c,a,f,u,l)),c<o&&(s<f&&this.computeIntersectsForChain(c,o,a,s,f,l),f<u&&this.computeIntersectsForChain(c,o,a,f,u,l))}}},{key:"overlaps",value:function(e,t,n,r,i){return h.intersects(this.pts[e],this.pts[t],n.pts[r],n.pts[i])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(e,t){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<e.startIndex.length-1;r++)this.computeIntersectsForChain(n,e,r,t)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var e=arguments[0];this.e=e,this.pts=e.getCoordinates();var t=new nr;this.startIndex=t.getChainStartIndices(this.pts)}}]),e}(),ir=function(){function a(){g(this,a),a.constructor_.apply(this,arguments)}return p(a,[{key:"getDepth",value:function(e,t){return this._depth[e][t]}},{key:"setDepth",value:function(e,t,n){this._depth[e][t]=n}},{key:"isNull",value:function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var t=0;t<3;t++)if(this._depth[e][t]!==a.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===a.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===a.NULL_VALUE}}},{key:"normalize",value:function(){for(var e=0;e<2;e++)if(!this.isNull(e)){var t=this._depth[e][1];this._depth[e][2]<t&&(t=this._depth[e][2]),t<0&&(t=0);for(var n=1;n<3;n++){var r=0;this._depth[e][n]>t&&(r=1),this._depth[e][n]=r}}}},{key:"getDelta",value:function(e){return this._depth[e][y.RIGHT]-this._depth[e][y.LEFT]}},{key:"getLocation",value:function(e,t){return this._depth[e][t]<=0?v.EXTERIOR:v.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(1===arguments.length)for(var e=arguments[0],t=0;t<2;t++)for(var n=1;n<3;n++){var r=e.getLocation(t,n);r!==v.EXTERIOR&&r!==v.INTERIOR||(this.isNull(t,n)?this._depth[t][n]=a.depthAtLocation(r):this._depth[t][n]+=a.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===v.INTERIOR&&this._depth[i][o]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var t=0;t<3;t++)this._depth[e][t]=a.NULL_VALUE}},{key:"depthAtLocation",value:function(e){return e===v.EXTERIOR?0:e===v.INTERIOR?1:a.NULL_VALUE}}]),a}();ir.NULL_VALUE=-1;var or=function(e){s(a,e);var t=u(a);function a(){var e;return g(this,a),e=t.call(this),a.constructor_.apply(r(e),arguments),e}return p(a,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var e=new Array(2).fill(null);return e[0]=this.pts[0],e[1]=this.pts[1],new a(e,L.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(e){this._isIsolated=e}},{key:"setName",value:function(e){this._name=e}},{key:"equals",value:function(e){if(!(e instanceof a))return!1;var t=e;if(this.pts.length!==t.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(t.pts[o])||(n=!1),this.pts[o].equals2D(t.pts[--i])||(r=!1),!n&&!r)return!1;return!0}},{key:"getCoordinate",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var e=arguments[0];return this.pts[e]}}},{key:"print",value:function(e){e.print("edge "+this._name+": "),e.print("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.print(","),e.print(this.pts[t].x+" "+this.pts[t].y);e.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(e){a.updateIM(this._label,e)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(e){e.print("edge "+this._name+": ");for(var t=this.pts.length-1;t>=0;t--)e.print(this.pts[t]+" ");e.println("")}},{key:"getMonotoneChainEdge",value:function(){return null===this._mce&&(this._mce=new rr(this)),this._mce}},{key:"getEnvelope",value:function(){if(null===this._env){this._env=new h;for(var e=0;e<this.pts.length;e++)this._env.expandToInclude(this.pts[e])}return this._env}},{key:"addIntersection",value:function(e,t,n,r){var i=new T(e.getIntersection(r)),o=t,a=e.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)}},{key:"toString",value:function(){var e=new at;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var t=0;t<this.pts.length;t++)t>0&&e.append(","),e.append(this.pts[t].x+" "+this.pts[t].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()}},{key:"isPointwiseEqual",value:function(e){if(this.pts.length!==e.pts.length)return!1;for(var t=0;t<this.pts.length;t++)if(!this.pts[t].equals2D(e.pts[t]))return!1;return!0}},{key:"setDepthDelta",value:function(e){this._depthDelta=e}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++)this.addIntersection(e,t,n,r)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new Qn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ir,this._depthDelta=0,1===arguments.length){var e=arguments[0];a.constructor_.call(this,e,null)}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this.pts=t,this._label=n}}},{key:"updateIM",value:function(){if(!(2===arguments.length&&arguments[1]instanceof er&&arguments[0]instanceof L))return x(b(a),"updateIM",this).apply(this,arguments);var e=arguments[0],t=arguments[1];t.setAtLeastIfValid(e.getLocation(0,y.ON),e.getLocation(1,y.ON),1),e.isArea()&&(t.setAtLeastIfValid(e.getLocation(0,y.LEFT),e.getLocation(1,y.LEFT),2),t.setAtLeastIfValid(e.getLocation(0,y.RIGHT),e.getLocation(1,y.RIGHT),2))}}]),a}(Yt),ar=function(){function a(){g(this,a),a.constructor_.apply(this,arguments)}return p(a,[{key:"setWorkingPrecisionModel",value:function(e){this._workingPrecisionModel=e}},{key:"insertUniqueEdge",value:function(e){var t=this._edgeList.findEqualEdge(e);if(null!==t){var n=t.getLabel(),r=e.getLabel();t.isPointwiseEqual(e)||(r=new L(e.getLabel())).flip(),n.merge(r);var i=a.depthDelta(r),o=t.getDepthDelta()+i;t.setDepthDelta(o)}else this._edgeList.add(e),e.setDepthDelta(a.depthDelta(e.getLabel()))}},{key:"buildSubgraphs",value:function(e,t){for(var n=new w,r=e.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new jn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),t.add(i.getDirectedEdges(),i.getNodes())}}},{key:"createSubgraphs",value:function(e){for(var t=new w,n=e.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Ce;i.create(r),t.add(i)}}return ln.sort(t,ln.reverseOrder()),t}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(e){if(null!==this._workingNoder)return this._workingNoder;var t=new Cn,n=new Ft;return n.setPrecisionModel(e),t.setSegmentIntersector(new Jn(n)),t}},{key:"buffer",value:function(e,t){var n=this._workingPrecisionModel;null===n&&(n=e.getPrecisionModel()),this._geomFact=e.getFactory();var r=new An(n,this._bufParams),i=new qn(e,t,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new nn(new Zn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new rn(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)}},{key:"computeNodedEdges",value:function(e,t){var n=this.getNoder(t);n.computeNodes(e);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new or(i.getCoordinates(),new L(a));this.insertUniqueEdge(s)}}}},{key:"setNoder",value:function(e){this._workingNoder=e}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn;var e=arguments[0];this._bufParams=e}},{key:"depthDelta",value:function(e){var t=e.getLocation(0,y.LEFT),n=e.getLocation(0,y.RIGHT);return t===v.INTERIOR&&n===v.EXTERIOR?1:t===v.EXTERIOR&&n===v.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(e){for(var t=new pt,n=new w;e.hasNext();){var r=e.next(),i=t.createLineString(r.getCoordinates());n.add(i)}return t.buildGeometry(n)}}]),a}(),sr=function(){function i(){g(this,i),i.constructor_.apply(this,arguments)}return p(i,[{key:"rescale",value:function(){if(E(arguments[0],he))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.rescale(t.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&l.out.println(n)}}},{key:"scale",value:function(){if(E(arguments[0],he)){for(var e=arguments[0],t=new w(e.size()),n=e.iterator();n.hasNext();){var r=n.next();t.add(new En(this.scale(r.getCoordinates()),r.getData()))}return t}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new T(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].getZ());return I.removeRepeatedPoints(o)}}},{key:"isIntegerPrecision",value:function(){return 1===this._scaleFactor}},{key:"getNodedSubstrings",value:function(){var e=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(e),e}},{key:"computeNodes",value:function(e){var t=e;this._isScaled&&(t=this.scale(e)),this._noder.computeNodes(t)}},{key:"interfaces_",get:function(){return[In]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[0],t=arguments[1];i.constructor_.call(this,e,t,0,0)}else if(4===arguments.length){var n=arguments[0],r=arguments[1];this._noder=n,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}]),i}(),ur=function(){function r(){g(this,r),r.constructor_.apply(this,arguments)}return p(r,[{key:"checkEndPtVertexIntersections",value:function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next().getCoordinates();this.checkEndPtVertexIntersections(t[0],this._segStrings),this.checkEndPtVertexIntersections(t[t.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new se("found endpt/interior pt intersection at index "+o+" :pt "+n)}},{key:"checkInteriorIntersections",value:function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var t=e.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(t,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<s.length-1;l++)this.checkInteriorIntersections(i,u,o,l);else if(4===arguments.length){var c=arguments[0],f=arguments[1],h=arguments[2],d=arguments[3];if(c===h&&f===d)return null;var g=c.getCoordinates()[f],p=c.getCoordinates()[f+1],v=h.getCoordinates()[d],y=h.getCoordinates()[d+1];if(this._li.computeIntersection(g,p,v,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,p)||this.hasInteriorIntersection(this._li,v,y)))throw new se("found non-noded intersection at "+g+"-"+p+" and "+v+"-"+y)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var t=e.next();this.checkCollapses(t)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])}},{key:"hasInteriorIntersection",value:function(e,t,n){for(var r=0;r<e.getIntersectionNum();r++){var i=e.getIntersection(r);if(!i.equals(t)&&!i.equals(n))return!0}return!1}},{key:"checkCollapse",value:function(e,t,n){if(e.equals(n))throw new se("found non-noded collapse at "+r.fact.createLineString([e,t,n]))}}],[{key:"constructor_",value:function(){this._li=new Ft,this._segStrings=null;var e=arguments[0];this._segStrings=e}}]),r}();ur.fact=new pt;var lr=function(){function t(){g(this,t),t.constructor_.apply(this,arguments)}return p(t,[{key:"intersectsScaled",value:function(e,t){var n=Math.min(e.x,t.x),r=Math.max(e.x,t.x),i=Math.min(e.y,t.y),o=Math.max(e.y,t.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(e,t);return c.isTrue(!(a&&s),"Found bad envelope test"),s}},{key:"initCorners",value:function(e){var t=.5;this._minx=e.x-t,this._maxx=e.x+t,this._miny=e.y-t,this._maxy=e.y+t,this._corner[0]=new T(this._maxx,this._maxy),this._corner[1]=new T(this._minx,this._maxy),this._corner[2]=new T(this._minx,this._miny),this._corner[3]=new T(this._maxx,this._miny)}},{key:"intersects",value:function(e,t){return 1===this._scaleFactor?this.intersectsScaled(e,t):(this.copyScaled(e,this._p0Scaled),this.copyScaled(t,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(e){return Math.round(e*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(e,t){t.x=this.scale(e.x),t.y=this.scale(e.y)}},{key:"getSafeEnvelope",value:function(){if(null===this._safeEnv){var e=t.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new h(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(e,t){return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.hasIntersection()))))}},{key:"intersectsToleranceSquare",value:function(e,t){var n=!1,r=!1;return this._li.computeIntersection(e,t,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(e,t,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(e,t,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(e,t,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||e.equals(this._pt)||t.equals(this._pt)))))}},{key:"addSnappedNode",value:function(e,t){var n=e.getCoordinate(t),r=e.getCoordinate(t+1);return!!this.intersects(n,r)&&(e.addIntersection(this.getCoordinate(),t),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var e=arguments[0],t=arguments[1],n=arguments[2];if(this._originalPt=e,this._pt=e,this._scaleFactor=t,this._li=n,t<=0)throw new k("Scale factor must be non-zero");1!==t&&(this._pt=new T(this.scale(e.x),this.scale(e.y)),this._p0Scaled=new T,this._p1Scaled=new T),this.initCorners(this._pt)}}]),t}();lr.SAFE_ENV_EXPANSION_FACTOR=.75;var cr=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"select",value:function(){if(1===arguments.length);else if(2===arguments.length){var e=arguments[1];arguments[0].getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:"constructor_",value:function(){this.selectedSegment=new A}}]),e}(),fr=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"snap",value:function(){if(1===arguments.length){var e=arguments[0];return this.snap(e,null,-1)}if(3===arguments.length){var t=arguments[0],n=arguments[1],r=arguments[2],i=t.getSafeEnvelope(),o=new hr(t,n,r);return this._index.query(i,new(function(){function e(){g(this,e)}return p(e,[{key:"interfaces_",get:function(){return[hn]}},{key:"visitItem",value:function(e){e.select(i,o)}}]),e}())),o.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var e=arguments[0];this._index=e}}]),e}(),hr=function(e){s(n,e);var t=u(n);function n(){var e;return g(this,n),e=t.call(this),n.constructor_.apply(r(e),arguments),e}return p(n,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Sn))return x(b(n.prototype),"select",this).apply(this,arguments);var e=arguments[1],t=arguments[0].getContext();if(this._parentEdge===t&&(e===this._hotPixelVertexIndex||e+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(t,e)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],t=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=t,this._hotPixelVertexIndex=n}}]),n}(cr);fr.HotPixelSnapAction=hr;var dr=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"processIntersections",value:function(e,t,n,r){if(e===n&&t===r)return null;var i=e.getCoordinates()[t],o=e.getCoordinates()[t+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));e.addIntersections(this._li,t,0),n.addIntersections(this._li,r,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[$n]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var e=arguments[0];this._li=e,this._interiorIntersections=new w}}]),e}(),gr=function(){function e(){g(this,e),e.constructor_.apply(this,arguments)}return p(e,[{key:"checkCorrectness",value:function(e){var t=En.getNodedSubstrings(e),n=new ur(t);try{n.checkValid()}catch(e){if(!(e instanceof Z))throw e;e.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return En.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(e,t){var n=this.findInteriorIntersections(e,t);this.computeIntersectionSnaps(n),this.computeVertexSnaps(e)}},{key:"findInteriorIntersections",value:function(e,t){var n=new dr(t);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(e),n.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(E(arguments[0],he))for(var e=arguments[0].iterator();e.hasNext();){var t=e.next();this.computeVertexSnaps(t)}else if(arguments[0]instanceof En)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new lr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}}},{key:"computeNodes",value:function(e){this._nodedSegStrings=e,this._noder=new Cn,this._pointSnapper=new fr(this._noder.getIndex()),this.snapRound(e,this._li)}},{key:"computeIntersectionSnaps",value:function(e){for(var t=e.iterator();t.hasNext();){var n=t.next(),r=new lr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}}},{key:"interfaces_",get:function(){return[In]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=arguments[0];this._pm=e,this._li=new Ft,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()}}]),e}(),pr=function(){function l(){g(this,l),l.constructor_.apply(this,arguments)}return p(l,[{key:"bufferFixedPrecision",value:function(e){var t=new sr(new gr(new ht(1)),e.getScale()),n=new ar(this._bufParams);n.setWorkingPrecisionModel(e),n.setNoder(t),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(0===arguments.length){for(var e=l.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Me))throw e;this._saveException=e}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var t=arguments[0],n=l.precisionScaleFactor(this._argGeom,this._distance,t),r=new ht(n);this.bufferFixedPrecision(r)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var e=this._argGeom.getFactory().getPrecisionModel();e.getType()===ht.FIXED?this.bufferFixedPrecision(e):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(e){this._bufParams.setQuadrantSegments(e)}},{key:"bufferOriginalPrecision",value:function(){try{var e=new ar(this._bufParams);this._resultGeometry=e.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof se))throw e;this._saveException=e}}},{key:"getResultGeometry",value:function(e){return this._distance=e,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(e){this._bufParams.setEndCapStyle(e)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new f,this._resultGeometry=null,this._saveException=null,1===arguments.length){var e=arguments[0];this._argGeom=e}else if(2===arguments.length){var t=arguments[0],n=arguments[1];this._argGeom=t,this._bufParams=n}}},{key:"bufferOp",value:function(){if(2===arguments.length){var e=arguments[1];return new l(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof d&&"number"==typeof arguments[1]){var t=arguments[1],n=arguments[2],r=new l(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(t)}if(arguments[2]instanceof f&&arguments[0]instanceof d&&"number"==typeof arguments[1]){var i=arguments[1];return new l(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new l(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}}},{key:"precisionScaleFactor",value:function(e,t,n){var r=e.getEnvelopeInternal(),i=Te.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(t>0?t:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)}}]),l}();pr.CAP_ROUND=f.CAP_ROUND,pr.CAP_BUTT=f.CAP_FLAT,pr.CAP_FLAT=f.CAP_FLAT,pr.CAP_SQUARE=f.CAP_SQUARE,pr.MAX_PRECISION_DIGITS=12;var vr=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],yr=function(){function t(e){g(this,t),this.geometryFactory=e||new pt}return p(t,[{key:"read",value:function(e){var t,n=(t="string"==typeof e?JSON.parse(e):e).type;if(!D[n])throw new Error("Unknown GeoJSON type: "+t.type);return-1!==vr.indexOf(n)?D[n].call(this,t.coordinates):"GeometryCollection"===n?D[n].call(this,t.geometries):D[n].call(this,t)}},{key:"write",value:function(e){var t=e.getGeometryType();if(!mr[t])throw new Error("Geometry is not supported");return mr[t].call(this,e)}}]),t}(),D={Feature:function(e){var t={};for(var n in e)t[n]=e[n];if(e.geometry){var r=e.geometry.type;if(!D[r])throw new Error("Unknown GeoJSON type: "+e.type);t.geometry=this.read(e.geometry)}return e.bbox&&(t.bbox=D.bbox.call(this,e.bbox)),t},FeatureCollection:function(e){var t={};if(e.features){t.features=[];for(var n=0;n<e.features.length;++n)t.features.push(this.read(e.features[n]))}return e.bbox&&(t.bbox=this.parse.bbox.call(this,e.bbox)),t},coordinates:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(q(T,G(r)))}return t},bbox:function(e){return this.geometryFactory.createLinearRing([new T(e[0],e[1]),new T(e[2],e[1]),new T(e[2],e[3]),new T(e[0],e[3]),new T(e[0],e[1])])},Point:function(e){var t=q(T,G(e));return this.geometryFactory.createPoint(t)},MultiPoint:function(e){for(var t=[],n=0;n<e.length;++n)t.push(D.Point.call(this,e[n]));return this.geometryFactory.createMultiPoint(t)},LineString:function(e){var t=D.coordinates.call(this,e);return this.geometryFactory.createLineString(t)},MultiLineString:function(e){for(var t=[],n=0;n<e.length;++n)t.push(D.LineString.call(this,e[n]));return this.geometryFactory.createMultiLineString(t)},Polygon:function(e){for(var t=D.coordinates.call(this,e[0]),n=this.geometryFactory.createLinearRing(t),r=[],i=1;i<e.length;++i){var o=e[i],a=D.coordinates.call(this,o),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(D.Polygon.call(this,r))}return this.geometryFactory.createMultiPolygon(t)},GeometryCollection:function(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];t.push(this.read(r))}return this.geometryFactory.createGeometryCollection(t)}},mr={coordinate:function(e){var t=[e.x,e.y];return e.z&&t.push(e.z),e.m&&t.push(e.m),t},Point:function(e){return{type:"Point",coordinates:mr.coordinate.call(this,e.getCoordinate())}},MultiPoint:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=mr.Point.call(this,r);t.push(i.coordinates)}return{type:"MultiPoint",coordinates:t}},LineString:function(e){for(var t=[],n=e.getCoordinates(),r=0;r<n.length;++r){var i=n[r];t.push(mr.coordinate.call(this,i))}return{type:"LineString",coordinates:t}},MultiLineString:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=mr.LineString.call(this,r);t.push(i.coordinates)}return{type:"MultiLineString",coordinates:t}},Polygon:function(e){var t=[],n=mr.LineString.call(this,e._shell);t.push(n.coordinates);for(var r=0;r<e._holes.length;++r){var i=e._holes[r],o=mr.LineString.call(this,i);t.push(o.coordinates)}return{type:"Polygon",coordinates:t}},MultiPolygon:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=mr.Polygon.call(this,r);t.push(i.coordinates)}return{type:"MultiPolygon",coordinates:t}},GeometryCollection:function(e){for(var t=[],n=0;n<e._geometries.length;++n){var r=e._geometries[n],i=r.getGeometryType();t.push(mr[i].call(this,r))}return{type:"GeometryCollection",geometries:t}}};return{BufferOp:pr,GeoJSONReader:function(){function t(e){g(this,t),this.parser=new yr(e||new pt)}return p(t,[{key:"read",value:function(e){return this.parser.read(e)}}]),t}(),GeoJSONWriter:function(){function e(){g(this,e),this.parser=new yr(this.geometryFactory)}return p(e,[{key:"write",value:function(e){return this.parser.write(e)}}]),e}()}}()}(Zn)),Zn.exports),Hn=In(Xn);function $n(){return new Jn}function Jn(){this.reset()}Jn.prototype={constructor:Jn,reset:function(){this.s=this.t=0},add:function(e){Qn(Kn,e,this.t),Qn(this,Kn.s,this.s),this.s?this.t+=Kn.t:this.s=Kn.t},valueOf:function(){return this.s}};var Kn=new Jn;function Qn(e,t,n){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}var T=1e-6,C=Math.PI,er=C/2,tr=C/4,nr=2*C,rr=180/C,ir=C/180,L=Math.abs,or=Math.atan,ar=Math.atan2,P=Math.cos,R=Math.sin,sr=Math.sqrt;function ur(e){return e>1?0:e<-1?C:Math.acos(e)}function lr(e){return e>1?er:e<-1?-er:Math.asin(e)}function cr(){}function fr(e,t){e&&dr.hasOwnProperty(e.type)&&dr[e.type](e,t)}var hr={Feature:function(e,t){fr(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)fr(n[r].geometry,t)}},dr={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){gr(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)gr(n[r],t,0)},Polygon:function(e,t){pr(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pr(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)fr(n[r],t)}};function gr(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function pr(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)gr(e[n],t,1);t.polygonEnd()}function vr(e){return[ar(e[1],e[0]),lr(e[2])]}function yr(e){var t=e[0],n=e[1],r=P(n);return[r*P(t),r*R(t),R(n)]}function mr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function br(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function xr(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function wr(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kr(e){var t=sr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Er(n,r){function e(e,t){return e=n(e,t),r(e[0],e[1])}return n.invert&&r.invert&&(e.invert=function(e,t){return(e=r.invert(e,t))&&n.invert(e[0],e[1])}),e}function Nr(e,t){return[e>C?e-nr:e<-C?e+nr:e,t]}function Sr(n){return function(e,t){return[(e+=n)>C?e-nr:e<-C?e+nr:e,t]}}function Mr(e){var t=Sr(e);return t.invert=Sr(-e),t}function Ir(e,t){var s=P(e),u=R(e),l=P(t),c=R(t);function n(e,t){var n=P(t),r=P(e)*n,i=R(e)*n,o=R(t),a=o*s+r*u;return[ar(i*l-a*c,r*s-o*u),lr(a*l+i*c)]}return n.invert=function(e,t){var n=P(t),r=P(e)*n,i=R(e)*n,o=R(t),a=o*l-i*c;return[ar(i*l+o*c,r*s+a*u),lr(a*s-r*u)]},n}function Or(e,t){(t=yr(t))[0]-=e,kr(t);var n=ur(-t[1]);return((-t[2]<0?-n:n)+nr-T)%nr}function Cr(){var n,t=[];return{point:function(e,t){n.push([e,t])},lineStart:function(){t.push(n=[])},lineEnd:cr,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function Pr(e,t){return L(e[0]-t[0])<T&&L(e[1]-t[1])<T}function Tr(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Lr(e,t,n,r,o){var a,i,s=[],u=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],i=e[t];if(Pr(r,i)){for(o.lineStart(),a=0;a<t;++a)o.point((r=e[a])[0],r[1]);o.lineEnd()}else s.push(n=new Tr(r,e,null,!0)),u.push(n.o=new Tr(r,null,n,!1)),s.push(n=new Tr(i,e,null,!1)),u.push(n.o=new Tr(i,null,n,!0))}}),s.length){for(u.sort(t),Rr(s),Rr(u),a=0,i=u.length;a<i;++a)u[a].e=n=!n;for(var l,c,f=s[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;l=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,i=l.length;a<i;++a)o.point((c=l[a])[0],c[1]);else r(h.x,h.n.x,1,o);h=h.n}else{if(d)for(l=h.p.z,a=l.length-1;a>=0;--a)o.point((c=l[a])[0],c[1]);else r(h.x,h.p.x,-1,o);h=h.p}l=(h=h.o).z,d=!d}while(!h.v);o.lineEnd()}}}function Rr(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Ar(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jr(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n}$n(),$n(),$n(),Nr.invert=Nr,function(e){var n;1===e.length&&(n=e,e=function(e,t){return Ar(n(e),t)})}(Ar);var Dr=1e9,Fr=-Dr;function zr(y,m,_,b){function x(e,t){return y<=e&&e<=_&&m<=t&&t<=b}function w(e,t,n,r){var i=0,o=0;if(null==e||(i=a(e,n))!==(o=a(t,n))||s(e,t)<0^n>0)do{r.point(0===i||3===i?y:_,i>1?b:m)}while((i=(i+n+4)%4)!==o);else r.point(t[0],t[1])}function a(e,t){return L(e[0]-y)<T?t>0?0:3:L(e[0]-_)<T?t>0?2:1:L(e[1]-m)<T?t>0?1:0:t>0?3:2}function k(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(r){var i,f,o,a,s,u,l,c,h,d,g,p=r,e=Cr(),t={point:n,lineStart:function(){t.point=v,f&&f.push(o=[]);d=!0,h=!1,l=c=NaN},lineEnd:function(){i&&(v(a,s),u&&h&&e.rejoin(),i.push(e.result()));t.point=n,h&&p.lineEnd()},polygonStart:function(){p=e,i=[],f=[],g=!0},polygonEnd:function(){var e=function(){for(var e=0,t=0,n=f.length;t<n;++t)for(var r,i,o=f[t],a=1,s=o.length,u=o[0],l=u[0],c=u[1];a<s;++a)r=l,i=c,l=(u=o[a])[0],c=u[1],i<=b?c>b&&(l-r)*(b-i)>(c-i)*(y-r)&&++e:c<=b&&(l-r)*(b-i)<(c-i)*(y-r)&&--e;return e}(),t=g&&e,n=(i=jr(i)).length;(t||n)&&(r.polygonStart(),t&&(r.lineStart(),w(null,null,1,r),r.lineEnd()),n&&Lr(i,k,e,w,r),r.polygonEnd());p=r,i=f=o=null}};function n(e,t){x(e,t)&&p.point(e,t)}function v(e,t){var n=x(e,t);if(f&&o.push([e,t]),d)a=e,s=t,u=n,d=!1,n&&(p.lineStart(),p.point(e,t));else if(n&&h)p.point(e,t);else{var r=[l=Math.max(Fr,Math.min(Dr,l)),c=Math.max(Fr,Math.min(Dr,c))],i=[e=Math.max(Fr,Math.min(Dr,e)),t=Math.max(Fr,Math.min(Dr,t))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,h=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*f,e[1]=u+l*h),c<1&&(t[0]=s+c*f,t[1]=u+c*h),!0}}}}}(r,i,y,m,_,b)?n&&(p.lineStart(),p.point(e,t),g=!1):(h||(p.lineStart(),p.point(r[0],r[1])),p.point(i[0],i[1]),n||p.lineEnd(),g=!1)}l=e,c=t,h=n}return t}}var Vr=$n();function qr(e){return e}$n(),$n(),$n();var Br=1/0,Gr=Br,Yr=-Br,Ur=Yr,Wr={point:function(e,t){e<Br&&(Br=e);e>Yr&&(Yr=e);t<Gr&&(Gr=t);t>Ur&&(Ur=t)},lineStart:cr,lineEnd:cr,polygonStart:cr,polygonEnd:cr,result:function(){var e=[[Br,Gr],[Yr,Ur]];return Yr=Ur=-(Gr=Br=1/0),e}};function Zr(m,_,b,x){return function(r,s){var u,l,c,i=_(s),t=r.invert(x[0],x[1]),f=Cr(),h=_(f),d=!1,n={point:o,lineStart:a,lineEnd:g,polygonStart:function(){n.point=p,n.lineStart=v,n.lineEnd=y,l=[],u=[]},polygonEnd:function(){n.point=o,n.lineStart=a,n.lineEnd=g,l=jr(l);var e=function(e,t){var n=t[0],r=t[1],i=[R(n),-P(n),0],o=0,a=0;Vr.reset();for(var s=0,u=e.length;s<u;++s)if(c=(l=e[s]).length)for(var l,c,f=l[c-1],h=f[0],d=f[1]/2+tr,g=R(d),p=P(d),v=0;v<c;++v,h=m,g=b,p=x,f=y){var y=l[v],m=y[0],_=y[1]/2+tr,b=R(_),x=P(_),w=m-h,k=w>=0?1:-1,E=k*w,N=E>C,S=g*b;if(Vr.add(ar(S*k*R(E),p*x+S*P(E))),o+=N?w+k*nr:w,N^h>=n^m>=n){var M=br(yr(f),yr(y));kr(M);var I=br(i,M);kr(I);var O=(N^w>=0?-1:1)*lr(I[2]);(r>O||r===O&&(M[0]||M[1]))&&(a+=N^w>=0?1:-1)}}return(o<-T||o<T&&Vr<-T)^1&a}(u,t);l.length?(d||(s.polygonStart(),d=!0),Lr(l,Hr,e,b,s)):e&&(d||(s.polygonStart(),d=!0),s.lineStart(),b(null,null,1,s),s.lineEnd()),d&&(s.polygonEnd(),d=!1),l=u=null},sphere:function(){s.polygonStart(),s.lineStart(),b(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function o(e,t){var n=r(e,t);m(e=n[0],t=n[1])&&s.point(e,t)}function e(e,t){var n=r(e,t);i.point(n[0],n[1])}function a(){n.point=e,i.lineStart()}function g(){n.point=o,i.lineEnd()}function p(e,t){c.push([e,t]);var n=r(e,t);h.point(n[0],n[1])}function v(){h.lineStart(),c=[]}function y(){p(c[0][0],c[0][1]),h.lineEnd();var e,t,n,r,i=h.clean(),o=f.result(),a=o.length;if(c.pop(),u.push(c),c=null,a)if(1&i){if((t=(n=o[0]).length-1)>0){for(d||(s.polygonStart(),d=!0),s.lineStart(),e=0;e<t;++e)s.point((r=n[e])[0],r[1]);s.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),l.push(o.filter(Xr))}return n}}function Xr(e){return e.length>1}function Hr(e,t){return((e=e.x)[0]<0?e[1]-er-T:er-e[1])-((t=t.x)[0]<0?t[1]-er-T:er-t[1])}$n();var $r=Zr(function(){return!0},function(i){var o,a=NaN,s=NaN,u=NaN;return{lineStart:function(){i.lineStart(),o=1},point:function(e,t){var n=e>0?C:-C,r=L(e-a);L(r-C)<T?(i.point(a,s=(s+t)/2>0?er:-er),i.point(u,s),i.lineEnd(),i.lineStart(),i.point(n,s),i.point(e,s),o=0):u!==n&&r>=C&&(L(a-u)<T&&(a-=u*T),L(e-n)<T&&(e-=n*T),s=function(e,t,n,r){var i,o,a=R(e-n);return L(a)>T?or((R(t)*(o=P(r))*R(n)-R(r)*(i=P(t))*R(e))/(i*o*a)):(t+r)/2}(a,s,e,t),i.point(u,s),i.lineEnd(),i.lineStart(),i.point(n,s),o=0),i.point(a=e,s=t),u=n},lineEnd:function(){i.lineEnd(),a=s=NaN},clean:function(){return 2-o}}},function(e,t,n,r){var i;if(null==e)i=n*er,r.point(-C,i),r.point(0,i),r.point(C,i),r.point(C,0),r.point(C,-i),r.point(0,-i),r.point(-C,-i),r.point(-C,0),r.point(-C,i);else if(L(e[0]-t[0])>T){var o=e[0]<t[0]?C:-C;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-C,-er]);function Jr(i,o){var S=P(i),d=S>0,g=L(S)>T;function p(e,t){return P(e)*P(t)>S}function v(e,t,n){var r=[1,0,0],i=br(yr(e),yr(t)),o=mr(i,i),a=i[0],s=o-a*a;if(!s)return!n&&e;var u=S*o/s,l=-S*a/s,c=br(r,i),f=wr(r,u);xr(f,wr(i,l));var h=c,d=mr(f,h),g=mr(h,h),p=d*d-g*(mr(f,f)-1);if(!(p<0)){var v=sr(p),y=wr(h,(-d-v)/g);if(xr(y,f),y=vr(y),!n)return y;var m,_=e[0],b=t[0],x=e[1],w=t[1];b<_&&(m=_,_=b,b=m);var k=b-_,E=L(k-C)<T;if(!E&&w<x&&(m=x,x=w,w=m),E||k<T?E?x+w>0^y[1]<(L(y[0]-_)<T?x:w):x<=y[1]&&y[1]<=w:k>C^(_<=y[0]&&y[0]<=b)){var N=wr(h,(-d+v)/g);return xr(N,f),[y,vr(N)]}}}function y(e,t){var n=d?i:C-i,r=0;return e<-n?r|=1:e>n&&(r|=2),t<-n?r|=4:t>n&&(r|=8),r}return Zr(p,function(s){var u,l,c,f,h;return{lineStart:function(){f=c=!1,h=1},point:function(e,t){var n,r=[e,t],i=p(e,t),o=d?i?0:y(e,t):i?y(e+(e<0?C:-C),t):0;if(!u&&(f=c=i)&&s.lineStart(),i!==c&&(!(n=v(u,r))||Pr(u,n)||Pr(r,n))&&(r[0]+=T,r[1]+=T,i=p(r[0],r[1])),i!==c)h=0,i?(s.lineStart(),n=v(r,u),s.point(n[0],n[1])):(n=v(u,r),s.point(n[0],n[1]),s.lineEnd()),u=n;else if(g&&u&&d^i){var a;o&l||!(a=v(r,u,!0))||(h=0,d?(s.lineStart(),s.point(a[0][0],a[0][1]),s.point(a[1][0],a[1][1]),s.lineEnd()):(s.point(a[1][0],a[1][1]),s.lineEnd(),s.lineStart(),s.point(a[0][0],a[0][1])))}!i||u&&Pr(u,r)||s.point(r[0],r[1]),u=r,c=i,l=o},lineEnd:function(){c&&s.lineEnd(),u=null},clean:function(){return h|(f&&c)<<1}}},function(e,t,n,r){!function(e,t,n,r,i,o){if(n){var a=P(t),s=R(t),u=r*n;null==i?(i=t+r*nr,o=t-u/2):(i=Or(a,i),o=Or(a,o),(r>0?i<o:i>o)&&(i+=r*nr));for(var l,c=i;r>0?c>o:c<o;c-=u)l=vr([a,-s*P(c),-s*R(c)]),e.point(l[0],l[1])}}(r,i,o,n,e,t)},d?[0,-i]:[-C,i-C])}function Kr(r){return function(e){var t=new Qr;for(var n in r)t[n]=r[n];return t.stream=e,t}}function Qr(){}function ei(e,t,n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=o&&e.clipExtent(null),function(e,t){e&&hr.hasOwnProperty(e.type)?hr[e.type](e,t):fr(e,t)}(n,e.stream(Wr));var a=Wr.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+t[0][0]+(r-s*(a[1][0]+a[0][0]))/2,l=+t[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&e.clipExtent(o),e.scale(150*s).translate([u,l])}Qr.prototype={constructor:Qr,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ti=16,ni=P(30*ir);function ri(e,t){return+t?function(O,C){function P(e,t,n,r,i,o,a,s,u,l,c,f,h,d){var g=a-e,p=s-t,v=g*g+p*p;if(v>4*C&&h--){var y=r+l,m=i+c,_=o+f,b=sr(y*y+m*m+_*_),x=lr(_/=b),w=L(L(_)-1)<T||L(n-u)<T?(n+u)/2:ar(m,y),k=O(w,x),E=k[0],N=k[1],S=E-e,M=N-t,I=p*S-g*M;(I*I/v>C||L((g*S+p*M)/v-.5)>.3||r*l+i*c+o*f<ni)&&(P(e,t,n,r,i,o,E,N,w,y/=b,m/=b,_,h,d),d.point(E,N),P(E,N,w,y,m,_,a,s,u,l,c,f,h,d))}}return function(i){var n,r,o,a,s,u,l,c,f,h,d,g,p={point:e,lineStart:t,lineEnd:y,polygonStart:function(){i.polygonStart(),p.lineStart=m},polygonEnd:function(){i.polygonEnd(),p.lineStart=t}};function e(e,t){e=O(e,t),i.point(e[0],e[1])}function t(){c=NaN,p.point=v,i.lineStart()}function v(e,t){var n=yr([e,t]),r=O(e,t);P(c,f,l,h,d,g,c=r[0],f=r[1],l=e,h=n[0],d=n[1],g=n[2],ti,i),i.point(c,f)}function y(){p.point=e,i.lineEnd()}function m(){t(),p.point=_,p.lineEnd=b}function _(e,t){v(n=e,t),r=c,o=f,a=h,s=d,u=g,p.point=v}function b(){P(c,f,l,h,d,g,r,o,n,a,s,u,ti,i),p.lineEnd=y,y()}return p}}(e,t):function(n){return Kr({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}(e)}var ii=Kr({point:function(e,t){this.stream.point(e*ir,t*ir)}});function oi(e){return function(e){var n,r,i,t,o,a,s,u,l,c,f=150,h=480,d=250,g=0,p=0,v=0,y=0,m=0,_=null,b=$r,x=null,w=qr,k=.5,E=ri(M,k);function N(e){return[(e=o(e[0]*ir,e[1]*ir))[0]*f+r,i-e[1]*f]}function S(e){return(e=o.invert((e[0]-r)/f,(i-e[1])/f))&&[e[0]*rr,e[1]*rr]}function M(e,t){return[(e=n(e,t))[0]*f+r,i-e[1]*f]}function I(){o=Er(t=function(e,t,n){return(e%=nr)?t||n?Er(Mr(e),Ir(t,n)):Mr(e):t||n?Ir(t,n):Nr}(v,y,m),n);var e=n(g,p);return r=h-e[0]*f,i=d+e[1]*f,O()}function O(){return l=c=null,N}return N.stream=function(e){return l&&c===e?l:l=ii(b(t,E(w(c=e))))},N.clipAngle=function(e){return arguments.length?(b=+e?Jr(_=e*ir,6*ir):(_=null,$r),O()):_*rr},N.clipExtent=function(e){return arguments.length?(w=null==e?(x=a=s=u=null,qr):zr(x=+e[0][0],a=+e[0][1],s=+e[1][0],u=+e[1][1]),O()):null==x?null:[[x,a],[s,u]]},N.scale=function(e){return arguments.length?(f=+e,I()):f},N.translate=function(e){return arguments.length?(h=+e[0],d=+e[1],I()):[h,d]},N.center=function(e){return arguments.length?(g=e[0]%360*ir,p=e[1]%360*ir,I()):[g*rr,p*rr]},N.rotate=function(e){return arguments.length?(v=e[0]%360*ir,y=e[1]%360*ir,m=e.length>2?e[2]%360*ir:0,I()):[v*rr,y*rr,m*rr]},N.precision=function(e){return arguments.length?(E=ri(M,k=e*e),O()):sr(k)},N.fitExtent=function(e,t){return ei(N,e,t)},N.fitSize=function(e,t){return function(e,t,n){return ei(e,[[0,0],t],n)}(N,e,t)},function(){return n=e.apply(this,arguments),N.invert=n.invert&&S,I()}}(function(){return e})()}function ai(o){return function(e,t){var n=P(e),r=P(t),i=o(n*r);return[i*r*R(e),i*R(t)]}}function si(a){return function(e,t){var n=sr(e*e+t*t),r=a(n),i=R(r),o=P(r);return[ar(e*i,n*o),lr(n&&t*i/n)]}}ai(function(e){return sr(2/(1+e))}).invert=si(function(e){return 2*lr(e/2)});var ui=ai(function(e){return(e=ur(e))&&e/R(e)});function li(){return oi(ui).scale(79.4188).clipAngle(179.999)}function ci(e,t){return[e,t]}ui.invert=si(function(e){return e}),ci.invert=ci;var fi=Hn.BufferOp,hi=Hn.GeoJSONReader,di=Hn.GeoJSONWriter;function gi(e,n,r,i){var t=e.properties||{},o="Feature"===e.type?e.geometry:e;if("GeometryCollection"===o.type){var a=[];return Te(e,function(e){var t=gi(e,n,r,i);t&&a.push(t)}),U(a)}var s=function(e){var t=Un(e).geometry.coordinates,n=[-t[0],-t[1]];return li().rotate(n).scale(g)}(o),u={type:o.type,coordinates:vi(o.coordinates,s)},l=(new hi).read(u),c=ae(se(n,r),"meters"),f=fi.bufferOp(l,c,i);if(!pi((f=(new di).write(f)).coordinates))return B({type:f.type,coordinates:yi(f.coordinates,s)},t)}function pi(e){return Array.isArray(e[0])?pi(e[0]):isNaN(e[0])}function vi(e,t){return"object"!==_r(e[0])?t(e):e.map(function(e){return vi(e,t)})}function yi(e,t){return"object"!==_r(e[0])?t.invert(e):e.map(function(e){return yi(e,t)})}function mi(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=0,a=0,s=0;return Te(e,function(e,t,n){var r=i.weight?null==n?void 0:n[i.weight]:void 0;if(!W(r=null==r?1:r))throw new Error("weight value must be a number for feature index "+t);(r=Number(r))>0&&w(e,function(e){o+=e[0]*r,a+=e[1]*r,s+=r})}),G([o/s,a/s],i.properties,i)}function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=0,i=0;return w(e,function(e){n+=e[0],r+=e[1],i++},!0),G([n/i,r/i],t.properties)}function bi(a,e,t,n,r){var i=n.tolerance||.001,s=0,u=0,l=0,c=0;if(N(t,function(e){var t,n=null==(t=e.properties)?void 0:t.weight,r=null==n?1:n;if(!W(r=Number(r)))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*$(e,a);0===i&&(i=1);var o=r/i;s+=e.geometry.coordinates[0]*o,u+=e.geometry.coordinates[1]*o,l+=o}}),c<1)throw new Error("no features to measure");var o=s/l,f=u/l;return 1===c||0===r||Math.abs(o-e[0])<i&&Math.abs(f-e[1])<i?G([o,f],{medianCandidates:n.medianCandidates}):(n.medianCandidates.push([o,f]),bi([o,f],a,t,n,r-1))}var xi={exports:{}},wi=On(un),ki=function(){return i(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei;if(d(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)},[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var o=1+(e<<1),a=t[o],s=o+1;if(s<this.length&&n(t[s],a)<0&&(o=s,a=t[s]),n(a,i)>=0)break;t[e]=a,e=o}t[e]=i}}])}();function Ei(e,t){return e<t?-1:e>t?1:0}var Ni,Si,Mi,Ii,Oi,Ci=On(Object.freeze({__proto__:null,default:ki})),Pi={exports:{}};function Ti(){if(Oi)return Pi.exports;Oi=1;var i=(Si||(Si=1,Ni=function(e,t,n,r){var i=e[0],o=e[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=t.length);for(var s=(r-n)/2,u=0,l=s-1;u<s;l=u++){var c=t[n+2*u+0],f=t[n+2*u+1],h=t[n+2*l+0],d=t[n+2*l+1];f>o!=d>o&&i<(h-c)*(o-f)/(d-f)+c&&(a=!a)}return a}),Ni),o=(Ii||(Ii=1,Mi=function(e,t,n,r){var i=e[0],o=e[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=t.length);for(var s=r-n,u=0,l=s-1;u<s;l=u++){var c=t[u+n][0],f=t[u+n][1],h=t[l+n][0],d=t[l+n][1];f>o!=d>o&&i<(h-c)*(o-f)/(d-f)+c&&(a=!a)}return a}),Mi);return Pi.exports=function(e,t,n,r){return t.length>0&&Array.isArray(t[0])?o(e,t,n,r):i(e,t,n,r)},Pi.exports.nested=o,Pi.exports.flat=i,Pi.exports}var Li,Ri,Ai={exports:{}};Ai.exports;function ji(){return Li||(Li=1,function(e,t){!function(e){var R=134217729,A=33306690738754706e-32;function j(e,t,n,r,i){var o,a,s,u,l=t[0],c=r[0],f=0,h=0;c>l==c>-l?(o=l,l=t[++f]):(o=c,c=r[++h]);var d=0;if(f<e&&h<n)for(c>l==c>-l?(s=o-((a=l+o)-l),l=t[++f]):(s=o-((a=c+o)-c),c=r[++h]),o=a,0!==s&&(i[d++]=s);f<e&&h<n;)c>l==c>-l?(s=o-((a=o+l)-(u=a-o))+(l-u),l=t[++f]):(s=o-((a=o+c)-(u=a-o))+(c-u),c=r[++h]),o=a,0!==s&&(i[d++]=s);for(;f<e;)s=o-((a=o+l)-(u=a-o))+(l-u),l=t[++f],o=a,0!==s&&(i[d++]=s);for(;h<n;)s=o-((a=o+c)-(u=a-o))+(c-u),c=r[++h],o=a,0!==s&&(i[d++]=s);return 0===o&&0!==d||(i[d++]=o),d}function t(e){return new Float64Array(e)}var c=33306690738754716e-32,D=22204460492503146e-32,F=11093356479670487e-47,z=t(4),V=t(8),q=t(12),B=t(16),G=t(4);e.orient2d=function(e,t,n,r,i,o){var a=(t-o)*(n-i),s=(e-i)*(r-o),u=a-s;if(0===a||0===s||a>0!=s>0)return u;var l=Math.abs(a+s);return Math.abs(u)>=c*l?u:-function(e,t,n,r,i,o,a){var s,u,l,c,f,h,d,g,p,v,y,m,_,b,x,w,k,E,N=e-i,S=n-i,M=t-o,I=r-o;f=(x=(g=N-(d=(h=R*N)-(h-N)))*(v=I-(p=(h=R*I)-(h-I)))-((b=N*I)-d*p-g*p-d*v))-(y=x-(k=(g=M-(d=(h=R*M)-(h-M)))*(v=S-(p=(h=R*S)-(h-S)))-((w=M*S)-d*p-g*p-d*v))),z[0]=x-(y+f)+(f-k),f=(_=b-((m=b+y)-(f=m-b))+(y-f))-(y=_-w),z[1]=_-(y+f)+(f-w),f=(E=m+y)-m,z[2]=m-(E-f)+(y-f),z[3]=E;var O=function(e,t){for(var n=t[0],r=1;r<e;r++)n+=t[r];return n}(4,z),C=D*a;if(O>=C||-O>=C)return O;if(s=e-(N+(f=e-N))+(f-i),l=n-(S+(f=n-S))+(f-i),u=t-(M+(f=t-M))+(f-o),c=r-(I+(f=r-I))+(f-o),0===s&&0===u&&0===l&&0===c)return O;if(C=F*a+A*Math.abs(O),(O+=N*c+I*s-(M*l+S*u))>=C||-O>=C)return O;f=(x=(g=s-(d=(h=R*s)-(h-s)))*(v=I-(p=(h=R*I)-(h-I)))-((b=s*I)-d*p-g*p-d*v))-(y=x-(k=(g=u-(d=(h=R*u)-(h-u)))*(v=S-(p=(h=R*S)-(h-S)))-((w=u*S)-d*p-g*p-d*v))),G[0]=x-(y+f)+(f-k),f=(_=b-((m=b+y)-(f=m-b))+(y-f))-(y=_-w),G[1]=_-(y+f)+(f-w),f=(E=m+y)-m,G[2]=m-(E-f)+(y-f),G[3]=E;var P=j(4,z,4,G,V);f=(x=(g=N-(d=(h=R*N)-(h-N)))*(v=c-(p=(h=R*c)-(h-c)))-((b=N*c)-d*p-g*p-d*v))-(y=x-(k=(g=M-(d=(h=R*M)-(h-M)))*(v=l-(p=(h=R*l)-(h-l)))-((w=M*l)-d*p-g*p-d*v))),G[0]=x-(y+f)+(f-k),f=(_=b-((m=b+y)-(f=m-b))+(y-f))-(y=_-w),G[1]=_-(y+f)+(f-w),f=(E=m+y)-m,G[2]=m-(E-f)+(y-f),G[3]=E;var T=j(P,V,4,G,q);f=(x=(g=s-(d=(h=R*s)-(h-s)))*(v=c-(p=(h=R*c)-(h-c)))-((b=s*c)-d*p-g*p-d*v))-(y=x-(k=(g=u-(d=(h=R*u)-(h-u)))*(v=l-(p=(h=R*l)-(h-l)))-((w=u*l)-d*p-g*p-d*v))),G[0]=x-(y+f)+(f-k),f=(_=b-((m=b+y)-(f=m-b))+(y-f))-(y=_-w),G[1]=_-(y+f)+(f-w),f=(E=m+y)-m,G[2]=m-(E-f)+(y-f),G[3]=E;var L=j(T,q,4,G,B);return B[L-1]}(e,t,n,r,i,o,l)},e.orient2dfast=function(e,t,n,r,i,o){return(t-o)*(n-i)-(e-i)*(r-o)},Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,Ai.exports)),Ai.exports}var Di=function(){if(Ri)return xi.exports;Ri=1;var m=wi,v=Ci,_=Ti(),r=ji().orient2d;function e(e,t,n){t=Math.max(0,void 0===t?2:t),n=n||0;var r=function(e){for(var t=e[0],n=e[0],r=e[0],i=e[0],o=0;o<e.length;o++){var a=e[o];a[0]<t[0]&&(t=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[t,n,r,i],u=s.slice();for(o=0;o<e.length;o++)_(e[o],s)||u.push(e[o]);return function(e){e.sort(I);for(var t=[],n=0;n<e.length;n++){for(;t.length>=2&&k(t[t.length-2],t[t.length-1],e[n])<=0;)t.pop();t.push(e[n])}for(var r=[],i=e.length-1;i>=0;i--){for(;r.length>=2&&k(r[r.length-2],r[r.length-1],e[i])<=0;)r.pop();r.push(e[i])}return r.pop(),t.pop(),t.concat(r)}(u)}(e),i=new m(16);i.toBBox=function(e){return{minX:e[0],minY:e[1],maxX:e[0],maxY:e[1]}},i.compareMinX=function(e,t){return e[0]-t[0]},i.compareMinY=function(e,t){return e[1]-t[1]},i.load(e);for(var o,a=[],s=0;s<r.length;s++){var u=r[s];i.remove(u),o=N(u,o),a.push(o)}var l=new m(16);for(s=0;s<a.length;s++)l.insert(E(a[s]));for(var c=t*t,f=n*n;a.length;){var h=a.shift(),d=h.p,g=h.next.p,p=S(d,g);if(!(p<f)){var v=p/c;(u=b(i,h.prev.p,d,g,h.next.next.p,v,l))&&Math.min(S(u,d),S(u,g))<=v&&(a.push(h),a.push(N(u,h)),i.remove(u),l.remove(h),l.insert(E(h)),l.insert(E(h.next)))}}h=o;var y=[];do{y.push(h.p),h=h.next}while(h!==o);return y.push(h.p),y}function b(e,t,n,r,i,o,a){for(var s=new v([],y),u=e.data;u;){for(var l=0;l<u.children.length;l++){var c=u.children[l],f=u.leaf?M(c,n,r):x(n,r,c);f>o||s.push({node:c,dist:f})}for(;s.length&&!s.peek().node.children;){var h=s.pop(),d=h.node,g=M(d,t,n),p=M(d,r,i);if(h.dist<g&&h.dist<p&&w(n,d,a)&&w(r,d,a))return d}(u=s.pop())&&(u=u.node)}return null}function y(e,t){return e.dist-t.dist}function x(e,t,n){if(s(e,n)||s(t,n))return 0;var r=u(e[0],e[1],t[0],t[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=u(e[0],e[1],t[0],t[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=u(e[0],e[1],t[0],t[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=u(e[0],e[1],t[0],t[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function s(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function w(e,t,n){for(var r,i,o,a,s=Math.min(e[0],t[0]),u=Math.min(e[1],t[1]),l=Math.max(e[0],t[0]),c=Math.max(e[1],t[1]),f=n.search({minX:s,minY:u,maxX:l,maxY:c}),h=0;h<f.length;h++)if(r=f[h].p,i=f[h].next.p,o=e,r!==(a=t)&&i!==o&&k(r,i,o)>0!=k(r,i,a)>0&&k(o,a,r)>0!=k(o,a,i)>0)return!1;return!0}function k(e,t,n){return r(e[0],e[1],t[0],t[1],n[0],n[1])}function E(e){var t=e.p,n=e.next.p;return e.minX=Math.min(t[0],n[0]),e.minY=Math.min(t[1],n[1]),e.maxX=Math.max(t[0],n[0]),e.maxY=Math.max(t[1],n[1]),e}function N(e,t){var n={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(n.next=t.next,n.prev=t,t.next.prev=n,t.next=n):(n.prev=n,n.next=n),n}function S(e,t){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function M(e,t,n){var r=t[0],i=t[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((e[0]-r)*o+(e[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=e[0]-r)*o+(a=e[1]-i)*a}function u(e,t,n,r,i,o,a,s){var u,l,c,f,h=n-e,d=r-t,g=a-i,p=s-o,v=e-i,y=t-o,m=h*h+d*d,_=h*g+d*p,b=g*g+p*p,x=h*v+d*y,w=g*v+p*y,k=m*b-_*_,E=k,N=k;0===k?(l=0,E=1,f=w,N=b):(f=m*w-_*x,(l=_*w-b*x)<0?(l=0,f=w,N=b):l>E&&(l=E,f=w+_,N=b)),f<0?(f=0,-x<0?l=0:-x>m?l=E:(l=-x,E=m)):f>N&&(f=N,-x+_<0?l=0:-x+_>m?l=E:(l=-x+_,E=m));var S=(1-(c=0===f?0:f/N))*i+c*a-((1-(u=0===l?0:l/E))*e+u*n),M=(1-c)*o+c*s-((1-u)*t+u*r);return S*S+M*M}function I(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}return v.default&&(v=v.default),xi.exports=e,xi.exports.default=e,xi.exports}(),Fi=In(Di);function zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.concavity=t.concavity||1/0;var n=[];if(w(e,function(e){n.push([e[0],e[1]])}),!n.length)return null;var r=Fi(n,t.concavity);return r.length>3?z([r]):null}function Vi(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.steps||64,i=n.properties?n.properties:!Array.isArray(e)&&"Feature"===e.type&&e.properties?e.properties:{},o=[],a=0;a<r;a++)o.push(Ee(e,t,-360*a/r,n).geometry.coordinates);return o.push(o[0]),z([o],i)}function p(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return qi(e);case"FeatureCollection":return function(t){var n={type:"FeatureCollection"};return Object.keys(t).forEach(function(e){switch(e){case"type":case"features":return;default:n[e]=t[e]}}),n.features=t.features.map(function(e){return qi(e)}),n}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Gi(e);default:throw new Error("unknown GeoJSON type")}}function qi(t){var n={type:"Feature"};return Object.keys(t).forEach(function(e){switch(e){case"type":case"properties":case"geometry":return;default:n[e]=t[e]}}),n.properties=Bi(t.properties),null==t.geometry?n.geometry=null:n.geometry=Gi(t.geometry),n}function Bi(n){var r={};return n?(Object.keys(n).forEach(function(e){var t=n[e];"object"===_r(t)?null===t?r[e]=null:Array.isArray(t)?r[e]=t.map(function(e){return e}):r[e]=Bi(t):r[e]=t}),r):r}function Gi(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?(t.geometries=e.geometries.map(function(e){return Gi(e)}),t):(t.coordinates=Yi(e.coordinates),t)}function Yi(e){var t=e;return"object"!==_r(t[0])?t.slice():t.map(function(e){return Yi(e)})}function Ui(e,t){if(!e)throw new Error("geojson is required");if("FeatureCollection"!==e.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("filter is required");var n=[];return N(e,function(e){Hi(e.properties,t)&&n.push(e)}),U(n)}function Wi(e,t,n){if(!e)throw new Error("geojson is required");if("FeatureCollection"!==e.type)throw new Error("geojson must be a FeatureCollection");if(null==t)throw new Error("property is required");for(var r=Xi(e,t),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],l=0;l<s.length;l++)u.push(e.features[s[l]]);n(U(u),a,o)}}function Zi(e,t,r,i){var o=i;return Wi(e,t,function(e,t,n){o=0===n&&void 0===i?e:r(o,e,t,n)}),o}function Xi(e,i){var o={};return N(e,function(e,t){var n=e.properties||{};if(Object.prototype.hasOwnProperty.call(n,String(i))){var r=n[i];Object.prototype.hasOwnProperty.call(o,r)?o[r].push(t):o[r]=[t]}}),o}function Hi(e,t){if(void 0===e)return!1;var n=_r(t);if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(e,t);if(Array.isArray(t)){for(var r=0;r<t.length;r++)if(!Hi(e,t[r]))return!1;return!0}return $i(e,t)}function $i(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}function Ji(e,t){if(!t)return{};if(!t.length)return{};for(var n={},r=0;r<t.length;r++){var i=t[r];Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n}var Ki,Qi,eo,to,no,ro,io=Object.freeze({__proto__:null,applyFilter:Hi,clusterEach:Wi,clusterReduce:Zi,createBins:Xi,filterProperties:Ji,getCluster:Ui,propertiesContainsFilter:$i}),oo=Xt;function ao(){return Qi||(Qi=1,Ki={eudist:function(e,t,n){for(var r=e.length,i=0,o=0;o<r;o++){var a=(e[o]||0)-(t[o]||0);i+=a*a}return n?Math.sqrt(i):i},mandist:function(e,t,n){for(var r=e.length,i=0,o=0;o<r;o++)i+=Math.abs((e[o]||0)-(t[o]||0));return n?Math.sqrt(i):i},dist:function(e,t,n){var r=Math.abs(e-t);return n?r:r*r}}),Ki}var so=function(){if(ro)return no;ro=1;var e=ao(),t=function(){if(to)return eo;to=1;var e=ao(),b=e.eudist,x=e.dist;return eo={kmrand:function(e,t){for(var n={},r=[],i=t<<2,o=e.length,a=e[0].length>0;r.length<t&&i-- >0;){var s=e[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<t)throw new Error("Error initializating clusters");return r},kmpp:function(e,t){var n=e[0].length?b:x,r=[],i=e.length,o=e[0].length>0,a=e[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<t;){for(var s=[],u=r.length,l=0,c=[],f=0;f<i;f++){for(var h=1/0,d=0;d<u;d++){var g=n(e[f],r[d]);g<=h&&(h=g)}s[f]=h}for(var p=0;p<i;p++)l+=s[p];for(var v=0;v<i;v++)c[v]={i:v,v:e[v],pr:s[v]/l,cs:0};c.sort(function(e,t){return e.pr-t.pr}),c[0].cs=c[0].pr;for(var y=1;y<i;y++)c[y].cs=c[y-1].cs+c[y].pr;for(var m=Math.random(),_=0;_<i-1&&c[_++].cs<m;);r.push(c[_-1].v)}return r}},eo}(),D=e.eudist;e.mandist,e.dist;var F=t.kmrand,z=t.kmpp;function V(e,t,n){n=n||[];for(var r=0;r<e;r++)n[r]=t;return n}return no=function(e,t,n,r){var i=[],o=[],a=[],s=[],u=!1,l=r||1e4,c=e.length,f=e[0].length,h=f>0,d=[];if(n)i="kmrand"==n?F(e,t):"kmpp"==n?z(e,t):n;else for(var g={};i.length<t;){var p=Math.floor(Math.random()*c);g[p]||(g[p]=!0,i.push(e[p]))}do{V(t,0,d);for(var v=0;v<c;v++){for(var y=1/0,m=0,_=0;_<t;_++){(s=h?D(e[v],i[_]):Math.abs(e[v]-i[_]))<=y&&(y=s,m=_)}a[v]=m,d[m]++}for(var b=[],x=(o=[],0);x<t;x++)b[x]=h?V(f,0,b[x]):0,o[x]=i[x];if(h){for(var w=0;w<t;w++)i[w]=[];for(var k=0;k<c;k++)for(var E=b[a[k]],N=e[k],S=0;S<f;S++)E[S]+=N[S];u=!0;for(var M=0;M<t;M++){for(var I=i[M],O=b[M],C=o[M],j=d[M],P=0;P<f;P++)I[P]=O[P]/j||0;if(u)for(var T=0;T<f;T++)if(C[T]!=I[T]){u=!1;break}}}else{for(var L=0;L<c;L++){b[a[L]]+=e[L]}for(var R=0;R<t;R++)i[R]=b[R]/d[R]||0;u=!0;for(var A=0;A<t;A++)if(o[A]!=i[A]){u=!1;break}}u=u||--l<=0}while(!u);return{it:1e4-l,k:t,idxs:a,centroids:i}},no}(),uo=In(so);var lo=Xt;function co(e,n){var o=!1;return U(function(e){if(e.length<3)return[];e.sort(ho);var t,n,r,i,o,a,s=e.length-1,u=e[s].x,l=e[0].x,c=e[s].y,f=c,h=1e-12;for(;s--;)e[s].y<c&&(c=e[s].y),e[s].y>f&&(f=e[s].y);var d,g=l-u,p=f-c,v=g>p?g:p,y=.5*(l+u),m=.5*(f+c),_=[new fo({__sentinel:!0,x:y-20*v,y:m-v},{__sentinel:!0,x:y,y:m+20*v},{__sentinel:!0,x:y+20*v,y:m-v})],b=[],x=[];s=e.length;for(;s--;){for(x.length=0,d=_.length;d--;)(g=e[s].x-_[d].x)>0&&g*g>_[d].r?(b.push(_[d]),_.splice(d,1)):g*g+(p=e[s].y-_[d].y)*p>_[d].r||(x.push(_[d].a,_[d].b,_[d].b,_[d].c,_[d].c,_[d].a),_.splice(d,1));for(go(x),d=x.length;d;)n=x[--d],t=x[--d],r=e[s],i=n.x-t.x,o=n.y-t.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>h&&_.push(new fo(t,n,r))}Array.prototype.push.apply(b,_),s=b.length;for(;s--;)(b[s].a.__sentinel||b[s].b.__sentinel||b[s].c.__sentinel)&&b.splice(s,1);return b}(e.features.map(function(e){var t={x:e.geometry.coordinates[0],y:e.geometry.coordinates[1]};return n?t.z=e.properties[n]:3===e.geometry.coordinates.length&&(o=!0,t.z=e.geometry.coordinates[2]),t})).map(function(e){var t=[e.a.x,e.a.y],n=[e.b.x,e.b.y],r=[e.c.x,e.c.y],i={};return o?(t.push(e.a.z),n.push(e.b.z),r.push(e.c.z)):i={a:e.a.z,b:e.b.z,c:e.c.z},z([[t,n,r,t]],i)}))}var fo=i(function e(t,n,r){d(this,e),this.a=t,this.b=n,this.c=r;var i,o,a=n.x-t.x,s=n.y-t.y,u=r.x-t.x,l=r.y-t.y,c=a*(t.x+n.x)+s*(t.y+n.y),f=u*(t.x+r.x)+l*(t.y+r.y),h=2*(a*(r.y-n.y)-s*(r.x-n.x));this.x=(l*c-s*f)/h,this.y=(a*f-u*c)/h,i=this.x-t.x,o=this.y-t.y,this.r=i*i+o*o});function ho(e,t){return t.x-e.x}function go(e){var t,n,r,i,o,a=e.length;e:for(;a;)for(n=e[--a],t=e[--a],r=a;r;)if(o=e[--r],t===(i=e[--r])&&n===o||t===o&&n===i){e.splice(a,2),e.splice(r,2),a-=2;continue e}}function po(e){return e}function vo(e,t){var o=function(e){if(null==e)return po;var o,a,s=e.scale[0],u=e.scale[1],l=e.translate[0],c=e.translate[1];return function(e,t){t||(o=a=0);var n=2,r=e.length,i=new Array(r);for(i[0]=(o+=e[0])*s+l,i[1]=(a+=e[1])*u+c;n<r;)i[n]=e[n],++n;return i}}(e.transform),a=e.arcs;function i(e,t){t.length&&t.pop();for(var n=a[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(o(n[r],r));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,i)}function s(e){return o(e)}function u(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function n(e){for(var t=u(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(n)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=s(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(s);break;case"LineString":n=u(t.arcs);break;case"MultiLineString":n=t.arcs.map(u);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(t)}function yo(u,i){var o={},l={},c={},a=[],s=-1;function e(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){o[e<0?~e:e]=1}),a.push(r)}}return i.forEach(function(e,t){var n,r=u.arcs[e<0?~e:e];r.length<3&&!r[1][0]&&!r[1][1]&&(n=i[++s],i[s]=e,i[t]=n)}),i.forEach(function(e){var t,n,r=function(e){var t,n=u.arcs[e<0?~e:e],r=n[0];u.transform?(t=[0,0],n.forEach(function(e){t[0]+=e[0],t[1]+=e[1]})):t=n[n.length-1];return e<0?[t,r]:[r,t]}(e),i=r[0],o=r[1];if(t=c[i])if(delete c[t.end],t.push(e),t.end=o,n=l[o]){delete l[n.start];var a=n===t?t:t.concat(n);l[a.start=t.start]=c[a.end=n.end]=a}else l[t.start]=c[t.end]=t;else if(t=l[o])if(delete l[t.start],t.unshift(e),t.start=i,n=c[i]){delete c[n.end];var s=n===t?t:n.concat(t);l[s.start=n.start]=c[s.end=t.end]=s}else l[t.start]=c[t.end]=t;else l[(t=[e]).start=i]=c[t.end=o]=t}),e(c,l),e(l,c),i.forEach(function(e){o[e<0?~e:e]||a.push([e])}),a}function mo(e){return vo(e,_o.apply(this,arguments))}function _o(s,e){var u={},n=[],r=[];function i(t){t.forEach(function(e){e.forEach(function(e){(u[e=e<0?~e:e]||(u[e]=[])).push(t)})}),n.push(t)}function l(e){return function(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)t=i,i=e[n],o+=t[0]*i[1]-t[1]*i[0];return Math.abs(o)}(vo(s,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach(function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}}),n.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,r.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),n.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:r.map(function(e){var t,n=[];if(e.forEach(function(e){e.forEach(function(e){e.forEach(function(e){u[e<0?~e:e].length<2&&n.push(e)})})}),(t=(n=yo(s,n)).length)>1)for(var r,i,o=1,a=l(n[0]);o<t;++o)(r=l(n[o]))>a&&(i=n[0],n[0]=n[o],n[o]=i,a=r);return n}).filter(function(e){return e.length>0})}}var bo=Object.prototype.hasOwnProperty;function xo(o,a,s,e,u,t){3===arguments.length&&(e=t=Array,u=null);for(var l=new e(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),c=new t(o),f=o-1,n=0;n<o;++n)l[n]=u;return{set:function(e,t){for(var n=a(e)&f,r=l[n],i=0;r!=u;){if(s(r,e))return c[n]=t;if(++i>=o)throw new Error("full hashmap");r=l[n=n+1&f]}return l[n]=e,c[n]=t,t},maybeSet:function(e,t){for(var n=a(e)&f,r=l[n],i=0;r!=u;){if(s(r,e))return c[n];if(++i>=o)throw new Error("full hashmap");r=l[n=n+1&f]}return l[n]=e,c[n]=t,t},get:function(e,t){for(var n=a(e)&f,r=l[n],i=0;r!=u;){if(s(r,e))return c[n];if(++i>=o)break;r=l[n=n+1&f]}return t},keys:function(){for(var e=[],t=0,n=l.length;t<n;++t){var r=l[t];r!=u&&e.push(r)}return e}}}function wo(e,t){return e[0]===t[0]&&e[1]===t[1]}var ko=new ArrayBuffer(16),Eo=new Float64Array(ko),No=new Uint32Array(ko);function So(e){Eo[0]=e[0],Eo[1]=e[1];var t=No[0]^No[1];return 2147483647&(t=t<<5^t>>7^No[2]^No[3])}function Mo(e){var t,n,r,i,o=e.coordinates,a=e.lines,s=e.rings,u=function(){for(var e=xo(1.4*o.length,x,w,Int32Array,-1,Int32Array),t=new Int32Array(o.length),n=0,r=o.length;n<r;++n)t[n]=e.maybeSet(n,n);return t}(),l=new Int32Array(o.length),c=new Int32Array(o.length),f=new Int32Array(o.length),h=new Int8Array(o.length),d=0;for(t=0,n=o.length;t<n;++t)l[t]=c[t]=f[t]=-1;for(t=0,n=a.length;t<n;++t){var g=a[t],p=g[0],v=g[1];for(r=u[p],i=u[++p],++d,h[r]=1;++p<=v;)b(t,r,r=i,i=u[p]);++d,h[i]=1}for(t=0,n=o.length;t<n;++t)l[t]=-1;for(t=0,n=s.length;t<n;++t){var y=s[t],m=y[0]+1,_=y[1];for(b(t,u[_-1],r=u[m-1],i=u[m]);++m<=_;)b(t,r,r=i,i=u[m])}function b(e,t,n,r){if(l[n]!==e){l[n]=e;var i=c[n];if(i>=0){var o=f[n];i===t&&o===r||i===r&&o===t||(++d,h[n]=1)}else c[n]=t,f[n]=r}}function x(e){return So(o[e])}function w(e,t){return wo(o[e],o[t])}l=c=f=null;var k,E=function(i,o,a,e,s){3===arguments.length&&(e=Array,s=null);for(var u=new e(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),l=i-1,t=0;t<i;++t)u[t]=s;return{add:function(e){for(var t=o(e)&l,n=u[t],r=0;n!=s;){if(a(n,e))return!0;if(++r>=i)throw new Error("full hashset");n=u[t=t+1&l]}return u[t]=e,!0},has:function(e){for(var t=o(e)&l,n=u[t],r=0;n!=s;){if(a(n,e))return!0;if(++r>=i)break;n=u[t=t+1&l]}return!1},values:function(){for(var e=[],t=0,n=u.length;t<n;++t){var r=u[t];r!=s&&e.push(r)}return e}}}(1.4*d,So,wo);for(t=0,n=o.length;t<n;++t)h[k=u[t]]&&E.add(o[k]);return E}function Io(e,t,n,r){Oo(e,t,n),Oo(e,t,t+r),Oo(e,t+r,n)}function Oo(e,t,n){for(var r,i=t+(n---t>>1);t<i;++t,--n)r=e[t],e[t]=e[n],e[n]=r}function Co(e){var t,n,r={};for(t in e)r[t]=null==(n=e[t])?{type:null}:("FeatureCollection"===n.type?Po:"Feature"===n.type?To:Lo)(n);return r}function Po(e){var t={type:"GeometryCollection",geometries:e.features.map(To)};return null!=e.bbox&&(t.bbox=e.bbox),t}function To(e){var t,n=Lo(e.geometry);for(t in null!=e.id&&(n.id=e.id),null!=e.bbox&&(n.bbox=e.bbox),e.properties){n.properties=e.properties;break}return n}function Lo(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(Lo)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}function Ro(e,t){var n=function(e){var r=1/0,i=1/0,o=-1/0,a=-1/0;function t(e){null!=e&&bo.call(n,e.type)&&n[e.type](e)}var n={GeometryCollection:function(e){e.geometries.forEach(t)},Point:function(e){s(e.coordinates)},MultiPoint:function(e){e.coordinates.forEach(s)},LineString:function(e){u(e.arcs)},MultiLineString:function(e){e.arcs.forEach(u)},Polygon:function(e){e.arcs.forEach(u)},MultiPolygon:function(e){e.arcs.forEach(l)}};function s(e){var t=e[0],n=e[1];t<r&&(r=t),t>o&&(o=t),n<i&&(i=n),n>a&&(a=n)}function u(e){e.forEach(s)}function l(e){e.forEach(u)}for(var c in e)t(e[c]);return o>=r&&a>=i?[r,i,o,a]:void 0}(e=Co(e)),r=function(e){var t,n,r,i,c=e.coordinates,o=e.lines,a=e.rings,s=o.length+a.length;for(delete e.lines,delete e.rings,r=0,i=o.length;r<i;++r)for(t=o[r];t=t.next;)++s;for(r=0,i=a.length;r<i;++r)for(n=a[r];n=n.next;)++s;var l=xo(2*s*1.4,So,wo),f=e.arcs=[];for(r=0,i=o.length;r<i;++r){t=o[r];do{u(t)}while(t=t.next)}for(r=0,i=a.length;r<i;++r)if((n=a[r]).next)do{u(n)}while(n=n.next);else h(n);function u(e){var t,n,r,i,o,a,s,u;if(r=l.get(t=c[e[0]]))for(s=0,u=r.length;s<u;++s)if(d(i=r[s],e))return e[0]=i[0],void(e[1]=i[1]);if(o=l.get(n=c[e[1]]))for(s=0,u=o.length;s<u;++s)if(g(a=o[s],e))return e[1]=a[0],void(e[0]=a[1]);r?r.push(e):l.set(t,[e]),o?o.push(e):l.set(n,[e]),f.push(e)}function h(e){var t,n,r,i,o;if(n=l.get(c[e[0]]))for(i=0,o=n.length;i<o;++i){if(p(r=n[i],e))return e[0]=r[0],void(e[1]=r[1]);if(v(r,e))return e[0]=r[1],void(e[1]=r[0])}if(n=l.get(t=c[e[0]+y(e)]))for(i=0,o=n.length;i<o;++i){if(p(r=n[i],e))return e[0]=r[0],void(e[1]=r[1]);if(v(r,e))return e[0]=r[1],void(e[1]=r[0])}n?n.push(e):l.set(t,[e]),f.push(e)}function d(e,t){var n=e[0],r=t[0],i=e[1];if(n-i!=r-t[1])return!1;for(;n<=i;++n,++r)if(!wo(c[n],c[r]))return!1;return!0}function g(e,t){var n=e[0],r=t[0],i=e[1],o=t[1];if(n-i!=r-o)return!1;for(;n<=i;++n,--o)if(!wo(c[n],c[o]))return!1;return!0}function p(e,t){var n=e[0],r=t[0],i=e[1]-n;if(i!==t[1]-r)return!1;for(var o=y(e),a=y(t),s=0;s<i;++s)if(!wo(c[n+(s+o)%i],c[r+(s+a)%i]))return!1;return!0}function v(e,t){var n=e[0],r=t[0],i=e[1],o=t[1],a=i-n;if(a!==o-r)return!1;for(var s=y(e),u=a-y(t),l=0;l<a;++l)if(!wo(c[n+(l+s)%a],c[o-(l+u)%a]))return!1;return!0}function y(e){for(var t=e[0],n=e[1],r=t,i=r,o=c[r];++r<n;){var a=c[r];(a[0]<o[0]||a[0]===o[0]&&a[1]<o[1])&&(i=r,o=a)}return i-t}return e}(function(e){var t,n,r,i=Mo(e),o=e.coordinates,a=e.lines,s=e.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],l=u[0],c=u[1];++l<c;)i.has(o[l])&&(t={0:l,1:u[1]},u[1]=l,u=u.next=t);for(n=0,r=s.length;n<r;++n)for(var f=s[n],h=f[0],d=h,g=f[1],p=i.has(o[h]);++d<g;)i.has(o[d])&&(p?(t={0:d,1:f[1]},f[1]=d,f=f.next=t):(Io(o,h,g,g-d),o[g]=o[h],p=!0,d=h));return e}(function(e){var i=-1,o=[],a=[],s=[];function t(e){e&&bo.call(n,e.type)&&n[e.type](e)}var n={GeometryCollection:function(e){e.geometries.forEach(t)},LineString:function(e){e.arcs=r(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(r)},Polygon:function(e){e.arcs=e.arcs.map(u)},MultiPolygon:function(e){e.arcs=e.arcs.map(l)}};function r(e){for(var t=0,n=e.length;t<n;++t)s[++i]=e[t];var r={0:i-n+1,1:i};return o.push(r),r}function u(e){for(var t=0,n=e.length;t<n;++t)s[++i]=e[t];var r={0:i-n+1,1:i};return a.push(r),r}function l(e){return e.map(u)}for(var c in e)t(e[c]);return{type:"Topology",coordinates:s,lines:o,rings:a,objects:e}}(e))),i=r.coordinates,o=xo(1.4*r.arcs.length,Ao,jo);function a(e){e&&bo.call(s,e.type)&&s[e.type](e)}e=r.objects,r.bbox=n,r.arcs=r.arcs.map(function(e,t){return o.set(e,t),i.slice(e[0],e[1]+1)}),delete r.coordinates,i=null;var s={GeometryCollection:function(e){e.geometries.forEach(a)},LineString:function(e){e.arcs=u(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(u)},Polygon:function(e){e.arcs=e.arcs.map(u)},MultiPolygon:function(e){e.arcs=e.arcs.map(l)}};function u(e){var t=[];do{var n=o.get(e);t.push(e[0]<e[1]?n:~n)}while(e=e.next);return t}function l(e){return e.map(u)}for(var c in e)a(e[c]);return r}function Ao(e){var t,n=e[0],r=e[1];return r<n&&(t=n,n=r,r=t),n+31*r}function jo(e,t){var n,r=e[0],i=e[1],o=t[0],a=t[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.mutate;if("FeatureCollection"!==xe(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(e=p(e));var r=[],i=Fe(e,function(e,t){var n=function(e,t){var n,r=e.geometry.coordinates,i=t.geometry.coordinates,o=Fo(r[0]),a=Fo(r[r.length-1]),s=Fo(i[0]),u=Fo(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(s===a)n=r.concat(i.slice(1));else if(o===s)n=r.slice(1).reverse().concat(i);else{if(a!==u)return null;n=r.concat(i.reverse().slice(1))}return Y(n)}(e,t);return n||(r.push(e),t)});return i&&r.push(i),r.length?1===r.length?r[0]:te(r.map(function(e){return e.coordinates})):null}function Fo(e){return e[0].toString()+","+e[1].toString()}function zo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.mutate;if("FeatureCollection"!==xe(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(e=p(e));var r=function(e){var t={};x(e,function(e){t[e.geometry.type]=!0});var n=Object.keys(t);if(1===n.length)return n[0];return null}(e);if(!r)throw new Error("geojson must be homogenous");var i=e;switch(r){case"LineString":return Do(i,t);case"Polygon":return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("FeatureCollection"!==xe(e))throw new Error("geojson must be a FeatureCollection");if(!e.features.length)throw new Error("geojson is empty");!1!==t.mutate&&void 0!==t.mutate||(e=p(e));var n=[];x(e,function(e){n.push(e.geometry)});var r=Ro({geoms:ie(n).geometry});return mo(r,r.objects.geoms.geometries)}(i,t);default:throw new Error(r+" is not supported")}}var Vo=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,qo=Math.ceil,Bo=Math.floor,Go="[BigNumber Error] ",Yo=Go+"Number primitive has more than 15 significant digits: ",Uo=1e14,A=14,Wo=9007199254740991,Zo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xo=1e7,j=1e9;function Ho(e){var t=0|e;return e>0||e===t?t:t-1}function $o(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=A-t.length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function Jo(e,t){var n,r,i=e.c,o=t.c,a=e.s,s=t.s,u=e.e,l=t.e;if(!a||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=u==l,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>l^n?1:-1;for(s=(u=i.length)<(l=o.length)?u:l,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return u==l?0:u>l^n?1:-1}function D(e,t,n,r){if(e<t||e>n||e!==Bo(e))throw Error(Go+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Ko(e){var t=e.c.length-1;return Ho(e.e/A)==t&&e.c[t]%2!=0}function Qo(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function ea(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}var ta=function e(t){var m,f,h,n,l,a,s,u,c,d,r=I.prototype={constructor:I,toString:null,valueOf:null},p=new I(1),_=20,b=4,g=-7,v=21,y=-1e7,x=1e7,w=!1,o=1,k=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},N="0123456789abcdefghijklmnopqrstuvwxyz",S=!0;function I(e,t){var n,r,i,o,a,s,u,l,c=this;if(!(c instanceof I))return new I(e,t);if(null==t){if(e&&!0===e._isBigNumber)return c.s=e.s,void(!e.c||e.e>x?c.c=c.e=null:e.e<y?c.c=[c.e=0]:(c.e=e.e,c.c=e.c.slice()));if((s="number"==typeof e)&&0*e==0){if(c.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,a=e;a>=10;a/=10,o++);return void(o>x?c.c=c.e=null:(c.e=o,c.c=[e]))}l=String(e)}else{if(!Vo.test(l=String(e)))return h(c,l,s);c.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}(o=l.indexOf("."))>-1&&(l=l.replace(".","")),(a=l.search(/e/i))>0?(o<0&&(o=a),o+=+l.slice(a+1),l=l.substring(0,a)):o<0&&(o=l.length)}else{if(D(t,2,N.length,"Base"),10==t&&S)return C(c=new I(e),_+c.e+1,b);if(l=String(e),s="number"==typeof e){if(0*e!=0)return h(c,l,s,t);if(c.s=1/e<0?(l=l.slice(1),-1):1,I.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(Yo+e)}else c.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(n=N.slice(0,t),o=a=0,u=l.length;a<u;a++)if(n.indexOf(r=l.charAt(a))<0){if("."==r){if(a>o){o=u;continue}}else if(!i&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){i=!0,a=-1,o=0;continue}return h(c,String(e),s,t)}s=!1,(o=(l=f(l,t,10,c.s)).indexOf("."))>-1?l=l.replace(".",""):o=l.length}for(a=0;48===l.charCodeAt(a);a++);for(u=l.length;48===l.charCodeAt(--u););if(l=l.slice(a,++u)){if(u-=a,s&&I.DEBUG&&u>15&&(e>Wo||e!==Bo(e)))throw Error(Yo+c.s*e);if((o=o-a-1)>x)c.c=c.e=null;else if(o<y)c.c=[c.e=0];else{if(c.e=o,c.c=[],a=(o+1)%A,o<0&&(a+=A),a<u){for(a&&c.c.push(+l.slice(0,a)),u-=A;a<u;)c.c.push(+l.slice(a,a+=A));a=A-(l=l.slice(a)).length}else a-=u;for(;a--;l+="0");c.c.push(+l)}}else c.c=[c.e=0]}function i(e,t,n,r){var i,o,a,s,u;if(null==n?n=b:D(n,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)u=$o(e.c),u=1==r||2==r&&(a<=g||a>=v)?Qo(u,a):ea(u,a,"0");else if(o=(e=C(new I(e),t,n)).e,s=(u=$o(e.c)).length,1==r||2==r&&(t<=o||o<=g)){for(;s<t;u+="0",s++);u=Qo(u,o)}else if(t-=a,u=ea(u,o,"0"),o+1>s){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-s)>0)for(o+1==s&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function M(e,t){for(var n,r,i=1,o=new I(e[0]);i<e.length;i++)(!(r=new I(e[i])).s||(n=Jo(o,r))===t||0===n&&o.s===t)&&(o=r);return o}function O(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*A-1)>x?e.c=e.e=null:n<y?e.c=[e.e=0]:(e.e=n,e.c=t),e}function C(e,t,n,r){var i,o,a,s,u,l,c,f=e.c,h=Zo;if(f){e:{for(i=1,s=f[0];s>=10;s/=10,i++);if((o=t-i)<0)o+=A,a=t,u=f[l=0],c=Bo(u/h[i-a-1]%10);else if((l=qo((o+1)/A))>=f.length){if(!r)break e;for(;f.length<=l;f.push(0));u=c=0,i=1,a=(o%=A)-A+1}else{for(u=s=f[l],i=1;s>=10;s/=10,i++);c=(a=(o%=A)-A+i)<0?0:Bo(u/h[i-a-1]%10)}if(r=r||t<0||null!=f[l+1]||(a<0?u:u%h[i-a-1]),r=n<4?(c||r)&&(0==n||n==(e.s<0?3:2)):c>5||5==c&&(4==n||r||6==n&&(o>0?a>0?u/h[i-a]:0:f[l-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,r?(t-=e.e+1,f[0]=h[(A-t%A)%A],e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=l,s=1,l--):(f.length=l+1,s=h[A-o],f[l]=a>0?Bo(u/h[i-a]%h[a])*s:0),r)for(;;){if(0==l){for(o=1,a=f[0];a>=10;a/=10,o++);for(a=f[0]+=s,s=1;a>=10;a/=10,s++);o!=s&&(e.e++,f[0]==Uo&&(f[0]=1));break}if(f[l]+=s,f[l]!=Uo)break;f[l--]=0,s=1}for(o=f.length;0===f[--o];f.pop());}e.e>x?e.c=e.e=null:e.e<y&&(e.c=[e.e=0])}return e}function P(e){var t,n=e.e;return null===n?e.toString():(t=$o(e.c),t=n<=g||n>=v?Qo(t,n):ea(t,n,"0"),e.s<0?"-"+t:t)}return I.clone=e,I.ROUND_UP=0,I.ROUND_DOWN=1,I.ROUND_CEIL=2,I.ROUND_FLOOR=3,I.ROUND_HALF_UP=4,I.ROUND_HALF_DOWN=5,I.ROUND_HALF_EVEN=6,I.ROUND_HALF_CEIL=7,I.ROUND_HALF_FLOOR=8,I.EUCLID=9,I.config=I.set=function(e){var t,n;if(null!=e){if("object"!=_r(e))throw Error(Go+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(D(n=e[t],0,j,t),_=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(D(n=e[t],0,8,t),b=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(D(n[0],-j,0,t),D(n[1],0,j,t),g=n[0],v=n[1]):(D(n,-j,j,t),g=-(v=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)D(n[0],-j,-1,t),D(n[1],1,j,t),y=n[0],x=n[1];else{if(D(n,-j,j,t),!n)throw Error(Go+t+" cannot be zero: "+n);y=-(x=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(Go+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!n,Error(Go+"crypto unavailable");w=n}else w=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(D(n=e[t],0,9,t),o=n),e.hasOwnProperty(t="POW_PRECISION")&&(D(n=e[t],0,j,t),k=n),e.hasOwnProperty(t="FORMAT")){if("object"!=_r(n=e[t]))throw Error(Go+t+" not an object: "+n);E=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(Go+t+" invalid: "+n);S="0123456789"==n.slice(0,10),N=n}}return{DECIMAL_PLACES:_,ROUNDING_MODE:b,EXPONENTIAL_AT:[g,v],RANGE:[y,x],CRYPTO:w,MODULO_MODE:o,POW_PRECISION:k,FORMAT:E,ALPHABET:N}},I.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!I.DEBUG)return!0;var t,n,r=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-j&&i<=j&&i===Bo(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%A)<1&&(t+=A),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=Uo||n!==Bo(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(Go+"Invalid BigNumber: "+e)},I.maximum=I.max=function(){return M(arguments,-1)},I.minimum=I.min=function(){return M(arguments,1)},I.random=(n=9007199254740992,l=Math.random()*n&2097151?function(){return Bo(Math.random()*n)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,i,o,a=0,s=[],u=new I(p);if(null==e?e=_:D(e,0,j),i=qo(e/A),w)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));a<i;)(o=131072*t[a]+(t[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[a]=n[0],t[a+1]=n[1]):(s.push(o%1e14),a+=2);a=i/2}else{if(!crypto.randomBytes)throw w=!1,Error(Go+"crypto unavailable");for(t=crypto.randomBytes(i*=7);a<i;)(o=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(s.push(o%1e14),a+=7);a=i/7}if(!w)for(;a<i;)(o=l())<9e15&&(s[a++]=o%1e14);for(i=s[--a],e%=A,i&&e&&(o=Zo[A-e],s[a]=Bo(i/o)*o);0===s[a];s.pop(),a--);if(a<0)s=[r=0];else{for(r=-1;0===s[0];s.splice(0,1),r-=A);for(a=1,o=s[0];o>=10;o/=10,a++);a<A&&(r-=A-a)}return u.e=r,u.c=s,u}),I.sum=function(){for(var e=1,t=arguments,n=new I(t[0]);e<t.length;)n=n.plus(t[e++]);return n},f=function(){var v="0123456789";function y(e,t,n,r){for(var i,o,a=[0],s=0,u=e.length;s<u;){for(o=a.length;o--;a[o]*=t);for(a[0]+=r.indexOf(e.charAt(s++)),i=0;i<a.length;i++)a[i]>n-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(e,t,n,r,i){var o,a,s,u,l,c,f,h,d=e.indexOf("."),g=_,p=b;for(d>=0&&(u=k,k=0,e=e.replace(".",""),c=(h=new I(t)).pow(e.length-d),k=u,h.c=y(ea($o(c.c),c.e,"0"),10,n,v),h.e=h.c.length),s=u=(f=y(e,t,n,i?(o=N,v):(o=v,N))).length;0==f[--u];f.pop());if(!f[0])return o.charAt(0);if(d<0?--s:(c.c=f,c.e=s,c.s=r,f=(c=m(c,h,g,p,n)).c,l=c.r,s=c.e),d=f[a=s+g+1],u=n/2,l=l||a<0||null!=f[a+1],l=p<4?(null!=d||l)&&(0==p||p==(c.s<0?3:2)):d>u||d==u&&(4==p||l||6==p&&1&f[a-1]||p==(c.s<0?8:7)),a<1||!f[0])e=l?ea(o.charAt(1),-g,o.charAt(0)):o.charAt(0);else{if(f.length=a,l)for(--n;++f[--a]>n;)f[a]=0,a||(++s,f=[1].concat(f));for(u=f.length;!f[--u];);for(d=0,e="";d<=u;e+=o.charAt(f[d++]));e=ea(e,s,o.charAt(0))}return e}}(),m=function(){function N(e,t,n){var r,i,o,a,s=0,u=e.length,l=t%Xo,c=t/Xo|0;for(e=e.slice();u--;)s=((i=l*(o=e[u]%Xo)+(r=c*o+(a=e[u]/Xo|0)*l)%Xo*Xo+s)/n|0)+(r/Xo|0)+c*a,e[u]=i%n;return s&&(e=[s].concat(e)),e}function S(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function M(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,n,r,i){var o,a,s,u,l,c,f,h,d,g,p,v,y,m,_,b,x,w=e.s==t.s?1:-1,k=e.c,E=t.c;if(!(k&&k[0]&&E&&E[0]))return new I(e.s&&t.s&&(k?!E||k[0]!=E[0]:E)?k&&0==k[0]||!E?0*w:w/0:NaN);for(d=(h=new I(w)).c=[],w=n+(a=e.e-t.e)+1,i||(i=Uo,a=Ho(e.e/A)-Ho(t.e/A),w=w/A|0),s=0;E[s]==(k[s]||0);s++);if(E[s]>(k[s]||0)&&a--,w<0)d.push(1),u=!0;else{for(m=k.length,b=E.length,s=0,w+=2,(l=Bo(i/(E[0]+1)))>1&&(E=N(E,l,i),k=N(k,l,i),b=E.length,m=k.length),y=b,p=(g=k.slice(0,b)).length;p<b;g[p++]=0);x=E.slice(),x=[0].concat(x),_=E[0],E[1]>=i/2&&_++;do{if(l=0,(o=S(E,g,b,p))<0){if(v=g[0],b!=p&&(v=v*i+(g[1]||0)),(l=Bo(v/_))>1)for(l>=i&&(l=i-1),f=(c=N(E,l,i)).length,p=g.length;1==S(c,g,f,p);)l--,M(c,b<f?x:E,f,i),f=c.length,o=1;else 0==l&&(o=l=1),f=(c=E.slice()).length;if(f<p&&(c=[0].concat(c)),M(g,c,p,i),p=g.length,-1==o)for(;S(E,g,b,p)<1;)l++,M(g,b<p?x:E,p,i),p=g.length}else 0===o&&(l++,g=[0]);d[s++]=l,g[0]?g[p++]=k[y]||0:(g=[k[y]],p=1)}while((y++<m||null!=g[0])&&w--);u=null!=g[0],d[0]||d.splice(0,1)}if(i==Uo){for(s=1,w=d[0];w>=10;w/=10,s++);C(h,n+(h.e=s+a*A-1)+1,r,u)}else h.e=a,h.r=+u;return h}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,u=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,d=/^\s*\+(?=[\w.])|^\s+|\s+$/g,h=function(e,t,n,r){var i,o=n?t:t.replace(d,"");if(c.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(a,function(e,t,n){return i="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=i?e:t}),r&&(i=r,o=o.replace(s,"$1").replace(u,"0.$1")),t!=o))return new I(o,i);if(I.DEBUG)throw Error(Go+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},r.absoluteValue=r.abs=function(){var e=new I(this);return e.s<0&&(e.s=1),e},r.comparedTo=function(e,t){return Jo(this,new I(e,t))},r.decimalPlaces=r.dp=function(e,t){var n,r,i,o=this;if(null!=e)return D(e,0,j),null==t?t=b:D(t,0,8),C(new I(o),e+o.e+1,t);if(!(n=o.c))return null;if(r=((i=n.length-1)-Ho(this.e/A))*A,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},r.dividedBy=r.div=function(e,t){return m(this,new I(e,t),_,b)},r.dividedToIntegerBy=r.idiv=function(e,t){return m(this,new I(e,t),0,1)},r.exponentiatedBy=r.pow=function(e,t){var n,r,i,o,a,s,u,l,c=this;if((e=new I(e)).c&&!e.isInteger())throw Error(Go+"Exponent not an integer: "+P(e));if(null!=t&&(t=new I(t)),a=e.e>14,!c.c||!c.c[0]||1==c.c[0]&&!c.e&&1==c.c.length||!e.c||!e.c[0])return l=new I(Math.pow(+P(c),a?e.s*(2-Ko(e)):+P(e))),t?l.mod(t):l;if(s=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new I(NaN);(r=!s&&c.isInteger()&&t.isInteger())&&(c=c.mod(t))}else{if(e.e>9&&(c.e>0||c.e<-1||(0==c.e?c.c[0]>1||a&&c.c[1]>=24e7:c.c[0]<8e13||a&&c.c[0]<=9999975e7)))return o=c.s<0&&Ko(e)?-0:0,c.e>-1&&(o=1/o),new I(s?1/o:o);k&&(o=qo(k/A+2))}for(a?(n=new I(.5),s&&(e.s=1),u=Ko(e)):u=(i=Math.abs(+P(e)))%2,l=new I(p);;){if(u){if(!(l=l.times(c)).c)break;o?l.c.length>o&&(l.c.length=o):r&&(l=l.mod(t))}if(i){if(0===(i=Bo(i/2)))break;u=i%2}else if(C(e=e.times(n),e.e+1,1),e.e>14)u=Ko(e);else{if(0===(i=+P(e)))break;u=i%2}c=c.times(c),o?c.c&&c.c.length>o&&(c.c.length=o):r&&(c=c.mod(t))}return r?l:(s&&(l=p.div(l)),t?l.mod(t):o?C(l,k,b,undefined):l)},r.integerValue=function(e){var t=new I(this);return null==e?e=b:D(e,0,8),C(t,t.e+1,e)},r.isEqualTo=r.eq=function(e,t){return 0===Jo(this,new I(e,t))},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(e,t){return Jo(this,new I(e,t))>0},r.isGreaterThanOrEqualTo=r.gte=function(e,t){return 1===(t=Jo(this,new I(e,t)))||0===t},r.isInteger=function(){return!!this.c&&Ho(this.e/A)>this.c.length-2},r.isLessThan=r.lt=function(e,t){return Jo(this,new I(e,t))<0},r.isLessThanOrEqualTo=r.lte=function(e,t){return-1===(t=Jo(this,new I(e,t)))||0===t},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&0==this.c[0]},r.minus=function(e,t){var n,r,i,o,a=this,s=a.s;if(t=(e=new I(e,t)).s,!s||!t)return new I(NaN);if(s!=t)return e.s=-t,a.plus(e);var u=a.e/A,l=e.e/A,c=a.c,f=e.c;if(!u||!l){if(!c||!f)return c?(e.s=-t,e):new I(f?a:NaN);if(!c[0]||!f[0])return f[0]?(e.s=-t,e):new I(c[0]?a:3==b?-0:0)}if(u=Ho(u),l=Ho(l),c=c.slice(),s=u-l){for((o=s<0)?(s=-s,i=c):(l=u,i=f),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(r=(o=(s=c.length)<(t=f.length))?s:t,s=t=0;t<r;t++)if(c[t]!=f[t]){o=c[t]<f[t];break}if(o&&(i=c,c=f,f=i,e.s=-e.s),(t=(r=f.length)-(n=c.length))>0)for(;t--;c[n++]=0);for(t=Uo-1;r>s;){if(c[--r]<f[r]){for(n=r;n&&!c[--n];c[n]=t);--c[n],c[r]+=Uo}c[r]-=f[r]}for(;0==c[0];c.splice(0,1),--l);return c[0]?O(e,c,l):(e.s=3==b?-1:1,e.c=[e.e=0],e)},r.modulo=r.mod=function(e,t){var n,r,i=this;return e=new I(e,t),!i.c||!e.s||e.c&&!e.c[0]?new I(NaN):!e.c||i.c&&!i.c[0]?new I(i):(9==o?(r=e.s,e.s=1,n=m(i,e,0,3),e.s=r,n.s*=r):n=m(i,e,0,o),(e=i.minus(n.times(e))).c[0]||1!=o||(e.s=i.s),e)},r.multipliedBy=r.times=function(e,t){var n,r,i,o,a,s,u,l,c,f,h,d,g,p,v,y=this,m=y.c,_=(e=new I(e,t)).c;if(!(m&&_&&m[0]&&_[0]))return!y.s||!e.s||m&&!m[0]&&!_||_&&!_[0]&&!m?e.c=e.e=e.s=null:(e.s*=y.s,m&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=Ho(y.e/A)+Ho(e.e/A),e.s*=y.s,(u=m.length)<(f=_.length)&&(g=m,m=_,_=g,i=u,u=f,f=i),i=u+f,g=[];i--;g.push(0));for(p=Uo,v=Xo,i=f;--i>=0;){for(n=0,h=_[i]%v,d=_[i]/v|0,o=i+(a=u);o>i;)n=((l=h*(l=m[--a]%v)+(s=d*l+(c=m[a]/v|0)*h)%v*v+g[o]+n)/p|0)+(s/v|0)+d*c,g[o--]=l%p;g[o]=n}return n?++r:g.splice(0,1),O(e,g,r)},r.negated=function(){var e=new I(this);return e.s=-e.s||null,e},r.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new I(e,t)).s,!i||!t)return new I(NaN);if(i!=t)return e.s=-t,r.minus(e);var o=r.e/A,a=e.e/A,s=r.c,u=e.c;if(!o||!a){if(!s||!u)return new I(i/0);if(!s[0]||!u[0])return u[0]?e:new I(s[0]?r:0*i)}if(o=Ho(o),a=Ho(a),s=s.slice(),i=o-a){for(i>0?(a=o,n=u):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for((i=s.length)-(t=u.length)<0&&(n=u,u=s,s=n,t=i),i=0;t;)i=(s[--t]=s[t]+u[t]+i)/Uo|0,s[t]=Uo===s[t]?0:s[t]%Uo;return i&&(s=[i].concat(s),++a),O(e,s,a)},r.precision=r.sd=function(e,t){var n,r,i,o=this;if(null!=e&&e!==!!e)return D(e,1,j),null==t?t=b:D(t,0,8),C(new I(o),e,t);if(!(n=o.c))return null;if(r=(i=n.length-1)*A+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},r.shiftedBy=function(e){return D(e,-9007199254740991,Wo),this.times("1e"+e)},r.squareRoot=r.sqrt=function(){var e,t,n,r,i,o=this,a=o.c,s=o.s,u=o.e,l=_+4,c=new I("0.5");if(1!==s||!a||!a[0])return new I(!s||s<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(s=Math.sqrt(+P(o)))||s==1/0?(((t=$o(a)).length+u)%2==0&&(t+="0"),s=Math.sqrt(+t),u=Ho((u+1)/2)-(u<0||u%2),n=new I(t=s==1/0?"5e"+u:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+u)):n=new I(s+""),n.c[0])for((s=(u=n.e)+l)<3&&(s=0);;)if(i=n,n=c.times(i.plus(m(o,i,l,1))),$o(i.c).slice(0,s)===(t=$o(n.c)).slice(0,s)){if(n.e<u&&--s,"9999"!=(t=t.slice(s-3,s+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(C(n,n.e+_+2,1),e=!n.times(n).eq(o));break}if(!r&&(C(i,i.e+_+2,0),i.times(i).eq(o))){n=i;break}l+=4,s+=4,r=1}return C(n,n.e+_+1,b,e)},r.toExponential=function(e,t){return null!=e&&(D(e,0,j),e++),i(this,e,t,1)},r.toFixed=function(e,t){return null!=e&&(D(e,0,j),e=e+this.e+1),i(this,e,t)},r.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==_r(t)?(n=t,t=null):e&&"object"==_r(e)?(n=e,e=t=null):n=E;else if("object"!=_r(n))throw Error(Go+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var o,a=r.split("."),s=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",c=a[0],f=a[1],h=i.s<0,d=h?c.slice(1):c,g=d.length;if(u&&(o=s,s=u,u=o,g-=o),s>0&&g>0){for(o=g%s||s,c=d.substr(0,o);o<g;o+=s)c+=l+d.substr(o,s);u>0&&(c+=l+d.slice(o)),h&&(c="-"+c)}r=f?c+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):c}return(n.prefix||"")+r+(n.suffix||"")},r.toFraction=function(e){var t,n,r,i,o,a,s,u,l,c,f,h,d=this,g=d.c;if(null!=e&&(!(s=new I(e)).isInteger()&&(s.c||1!==s.s)||s.lt(p)))throw Error(Go+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+P(s));if(!g)return new I(d);for(t=new I(p),l=n=new I(p),r=u=new I(p),h=$o(g),o=t.e=h.length-d.e-1,t.c[0]=Zo[(a=o%A)<0?A+a:a],e=!e||s.comparedTo(t)>0?o>0?t:l:s,a=x,x=1/0,s=new I(h),u.c[0]=0;c=m(s,t,0,1),1!=(i=n.plus(c.times(r))).comparedTo(e);)n=r,r=i,l=u.plus(c.times(i=l)),u=i,t=s.minus(c.times(i=t)),s=i;return i=m(e.minus(n),r,0,1),u=u.plus(i.times(l)),n=n.plus(i.times(r)),u.s=l.s=d.s,f=m(l,r,o*=2,b).minus(d).abs().comparedTo(m(u,n,o,b).minus(d).abs())<1?[l,r]:[u,n],x=a,f},r.toNumber=function(){return+P(this)},r.toPrecision=function(e,t){return null!=e&&D(e,1,j),i(this,e,t,2)},r.toString=function(e){var t,n=this,r=n.s,i=n.e;return null===i?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=i<=g||i>=v?Qo($o(n.c),i):ea($o(n.c),i,"0"):10===e&&S?t=ea($o((n=C(new I(n),_+i+1,b)).c),n.e,"0"):(D(e,2,N.length,"Base"),t=f(ea($o(n.c),i,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},r.valueOf=r.toJSON=function(){return P(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,null!=t&&I.set(t),I}(),na=function(e){function t(e){return d(this,t),o(this,t,[e])}return n(t,e),i(t)}(i(function e(t){d(this,e),l(this,"key",void 0),l(this,"left",null),l(this,"right",null),this.key=t})),ra=function(){return i(function e(){d(this,e),l(this,"size",0),l(this,"modificationCount",0),l(this,"splayCount",0)},[{key:"splay",value:function(e){var t=this.root;if(null==t)return this.compare(e,e),-1;for(var n,r=null,i=null,o=null,a=null,s=t,u=this.compare;;)if((n=u(s.key,e))>0){var l=s.left;if(null==l)break;if((n=u(l.key,e))>0&&(s.left=l.right,l.right=s,null==(l=(s=l).left)))break;null==r?i=s:r.left=s,r=s,s=l}else{if(!(n<0))break;var c=s.right;if(null==c)break;if((n=u(c.key,e))<0&&(s.right=c.left,c.left=s,null==(c=(s=c).right)))break;null==o?a=s:o.right=s,o=s,s=c}return null!=o&&(o.right=s.left,s.left=a),null!=r&&(r.left=s.right,s.right=i),this.root!==s&&(this.root=s,this.splayCount++),n}},{key:"splayMin",value:function(e){for(var t=e,n=t.left;null!=n;){var r=n;t.left=r.right,r.right=t,n=(t=r).left}return t}},{key:"splayMax",value:function(e){for(var t=e,n=t.right;null!=n;){var r=n;t.right=r.left,r.left=t,n=(t=r).right}return t}},{key:"_delete",value:function(e){if(null==this.root)return null;if(0!=this.splay(e))return null;var t=this.root,n=t,r=t.left;if(this.size--,null==r)this.root=t.right;else{var i=t.right;(t=this.splayMax(r)).right=i,this.root=t}return this.modificationCount++,n}},{key:"addNewRoot",value:function(e,t){this.size++,this.modificationCount++;var n=this.root;null!=n?(t<0?(e.left=n,e.right=n.right,n.right=null):(e.right=n,e.left=n.left,n.left=null),this.root=e):this.root=e}},{key:"_first",value:function(){var e=this.root;return null==e?null:(this.root=this.splayMin(e),this.root)}},{key:"_last",value:function(){var e=this.root;return null==e?null:(this.root=this.splayMax(e),this.root)}},{key:"clear",value:function(){this.root=null,this.size=0,this.modificationCount++}},{key:"has",value:function(e){return this.validKey(e)&&0==this.splay(e)}},{key:"defaultCompare",value:function(){return function(e,t){return e<t?-1:e>t?1:0}}},{key:"wrap",value:function(){var t=this;return{getRoot:function(){return t.root},setRoot:function(e){t.root=e},getSize:function(){return t.size},getModificationCount:function(){return t.modificationCount},getSplayCount:function(){return t.splayCount},setSplayCount:function(e){t.splayCount=e},splay:function(e){return t.splay(e)},has:function(e){return t.has(e)}}}}])}(),ia=function(e){function a(e,t){var n;return d(this,a),l(n=o(this,a),"root",null),l(n,"compare",void 0),l(n,"validKey",void 0),l(n,Symbol.toStringTag,"[object Set]"),n.compare=null!=e?e:n.defaultCompare(),n.validKey=null!=t?t:function(e){return null!=e&&null!=e},n}return n(a,e),i(a,[{key:"delete",value:function(e){return!!this.validKey(e)&&null!=this._delete(e)}},{key:"deleteAll",value:function(e){var t,n=F(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.delete(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"forEach",value:function(e){for(var t,n=this[Symbol.iterator]();!(t=n.next()).done;)e(t.value,t.value,this)}},{key:"add",value:function(e){var t=this.splay(e);return 0!=t&&this.addNewRoot(new na(e),t),this}},{key:"addAndReturn",value:function(e){var t=this.splay(e);return 0!=t&&this.addNewRoot(new na(e),t),this.root.key}},{key:"addAll",value:function(e){var t,n=F(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.add(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"isEmpty",value:function(){return null==this.root}},{key:"isNotEmpty",value:function(){return null!=this.root}},{key:"single",value:function(){if(0==this.size)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}},{key:"first",value:function(){if(0==this.size)throw"Bad state: No element";return this._first().key}},{key:"last",value:function(){if(0==this.size)throw"Bad state: No element";return this._last().key}},{key:"lastBefore",value:function(e){if(null==e)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(e)<0)return this.root.key;var t=this.root.left;if(null==t)return null;for(var n=t.right;null!=n;)n=(t=n).right;return t.key}},{key:"firstAfter",value:function(e){if(null==e)throw"Invalid arguments(s)";if(null==this.root)return null;if(this.splay(e)>0)return this.root.key;var t=this.root.right;if(null==t)return null;for(var n=t.left;null!=n;)n=(t=n).left;return t.key}},{key:"retainAll",value:function(e){var t,n=new a(this.compare,this.validKey),r=this.modificationCount,i=F(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(r!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(o)&&0==this.splay(o)&&n.add(this.root.key)}}catch(e){i.e(e)}finally{i.f()}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}},{key:"lookup",value:function(e){return this.validKey(e)?0!=this.splay(e)?null:this.root.key:null}},{key:"intersection",value:function(e){var t,n=new a(this.compare,this.validKey),r=F(this);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.has(i)&&n.add(i)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"difference",value:function(e){var t,n=new a(this.compare,this.validKey),r=F(this);try{for(r.s();!(t=r.n()).done;){var i=t.value;e.has(i)||n.add(i)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"union",value:function(e){var t=this.clone();return t.addAll(e),t}},{key:"clone",value:function(){var e=new a(this.compare,this.validKey);return e.size=this.size,e.root=this.copyNode(this.root),e}},{key:"copyNode",value:function(e){if(null==e)return null;var t=new na(e.key);return function e(t,n){var r,i;do{if(r=t.left,i=t.right,null!=r){var o=new na(r.key);n.left=o,e(r,o)}if(null!=i){var a=new na(i.key);n.right=a,t=i,n=a}}while(null!=i)}(e,t),t}},{key:"toSet",value:function(){return this.clone()}},{key:"entries",value:function(){return new sa(this.wrap())}},{key:"keys",value:function(){return this[Symbol.iterator]()}},{key:"values",value:function(){return this[Symbol.iterator]()}},{key:Symbol.iterator,value:function(){return new aa(this.wrap())}}])}(ra),oa=function(){return i(function e(t){d(this,e),l(this,"tree",void 0),l(this,"path",new Array),l(this,"modificationCount",null),l(this,"splayCount",void 0),this.tree=t,this.splayCount=t.getSplayCount()},[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}},{key:"current",value:function(){if(!this.path.length)return null;var e=this.path[this.path.length-1];return this.getValue(e)}},{key:"rebuildPath",value:function(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}},{key:"findLeftMostDescendent",value:function(e){for(;null!=e;)this.path.push(e),e=e.left}},{key:"moveNext",value:function(){if(this.modificationCount!=this.tree.getModificationCount()){if(null==this.modificationCount){this.modificationCount=this.tree.getModificationCount();for(var e=this.tree.getRoot();null!=e;)this.path.push(e),e=e.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);var t=this.path[this.path.length-1],n=t.right;if(null!=n){for(;null!=n;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}}])}(),aa=function(e){function t(){return d(this,t),o(this,t,arguments)}return n(t,e),i(t,[{key:"getValue",value:function(e){return e.key}}])}(oa),sa=function(e){function t(){return d(this,t),o(this,t,arguments)}return n(t,e),i(t,[{key:"getValue",value:function(e){return[e.key,e.key]}}])}(oa),ua=function(e){return function(){return e}},la=function(n){var r=n?function(e,t){return t.minus(e).abs().isLessThanOrEqualTo(n)}:ua(!1);return function(e,t){return r(e,t)?0:e.comparedTo(t)}};function ca(o){var u=o?function(e,t,n,r,i){return e.exponentiatedBy(2).isLessThanOrEqualTo(r.minus(t).exponentiatedBy(2).plus(i.minus(n).exponentiatedBy(2)).times(o))}:ua(!1);return function(e,t,n){var r=e.x,i=e.y,o=n.x,a=n.y,s=i.minus(a).times(t.x.minus(o)).minus(r.minus(o).times(t.y.minus(a)));return u(s,r,i,o,a)?0:s.comparedTo(0)}}var fa=function(e){return e},ha=function(e){if(e){var t=new ia(la(e)),n=new ia(la(e)),r=function(e,t){return t.addAndReturn(e)},i=function(e){return{x:r(e.x,t),y:r(e.y,n)}};return i({x:new ta(0),y:new ta(0)}),i}return fa},da=function(e){return{set:function(e){ga=da(e)},reset:function(){return da(e)},compare:la(e),snap:ha(e),orient:ca(e)}},ga=da(),pa=function(e,t){return e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y)},va=function(e,t){if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;var n=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,r=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x;return{ll:{x:n,y:e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y},ur:{x:r,y:e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y}}},ya=function(e,t){return e.x.times(t.y).minus(e.y.times(t.x))},ma=function(e,t){return e.x.times(t.x).plus(e.y.times(t.y))},_a=function(e){return ma(e,e).sqrt()},ba=function(e,t,n){var r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return ma(i,r).div(_a(i)).div(_a(r))},xa=function(e,t,n){return t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(n.minus(e.y))),y:n}},wa=function(e,t,n){return t.x.isZero()?null:{x:n,y:e.y.plus(t.y.div(t.x).times(n.minus(e.x)))}},ka=function(){function r(e,t){d(this,r),l(this,"point",void 0),l(this,"isLeft",void 0),l(this,"segment",void 0),l(this,"otherSE",void 0),l(this,"consumedBy",void 0),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return i(r,[{key:"link",value:function(e){if(e.point===this.point)throw new Error("Tried to link already linked events");for(var t=e.point.events,n=0,r=t.length;n<r;n++){var i=t[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var e=this.point.events.length,t=0;t<e;t++){var n=this.point.events[t];if(void 0===n.segment.consumedBy)for(var r=t+1;r<e;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var e=[],t=0,n=this.point.events.length;t<n;t++){var r=this.point.events[t];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&e.push(r)}return e}},{key:"getLeftmostComparator",value:function(s){var u=this,l=new Map,c=function(e){var t,n,r,i,o,a=e.otherSE;l.set(e,{sine:(t=u.point,n=s.point,r=a.point,i={x:n.x.minus(t.x),y:n.y.minus(t.y)},o={x:r.x.minus(t.x),y:r.y.minus(t.y)},ya(o,i).div(_a(o)).div(_a(i))),cosine:ba(u.point,s.point,a.point)})};return function(e,t){l.has(e)||c(e),l.has(t)||c(t);var n=l.get(e),r=n.sine,i=n.cosine,o=l.get(t),a=o.sine,s=o.cosine;return r.isGreaterThanOrEqualTo(0)&&a.isGreaterThanOrEqualTo(0)?i.isLessThan(s)?1:i.isGreaterThan(s)?-1:0:r.isLessThan(0)&&a.isLessThan(0)?i.isLessThan(s)?-1:i.isGreaterThan(s)?1:0:a.isLessThan(r)?-1:a.isGreaterThan(r)?1:0}}}],[{key:"compare",value:function(e,t){var n=r.comparePoints(e.point,t.point);return 0!==n?n:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:Pa.compare(e.segment,t.segment))}},{key:"comparePoints",value:function(e,t){return e.x.isLessThan(t.x)?-1:e.x.isGreaterThan(t.x)?1:e.y.isLessThan(t.y)?-1:e.y.isGreaterThan(t.y)?1:0}}])}(),Ea=function(){function b(e){d(this,b),l(this,"events",void 0),l(this,"poly",void 0),l(this,"_isExteriorRing",void 0),l(this,"_enclosingRing",void 0),this.events=e;for(var t=0,n=e.length;t<n;t++)e[t].segment.ringOut=this;this.poly=null}return i(b,[{key:"getGeom",value:function(){for(var e=this.events[0].point,t=[e],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==ga.orient(i,e,o)&&(t.push(i),e=i)}if(1===t.length)return null;var a=t[0],s=t[1];0===ga.orient(a,e,s)&&t.shift(),t.push(t[0]);for(var u=this.isExteriorRing()?1:-1,l=this.isExteriorRing()?0:t.length-1,c=this.isExteriorRing()?t.length:-1,f=[],h=l;h!=c;h+=u)f.push([t[h].x.toNumber(),t[h].y.toNumber()]);return f}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var e=this.enclosingRing();this._isExteriorRing=!e||!e.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var e=this.events[0],t=1,n=this.events.length;t<n;t++){var r=this.events[t];ka.compare(e,r)>0&&(e=r)}for(var i=e.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;var a,s;if(o.ringOut!==i.ringOut)return(null===(a=o.ringOut)||void 0===a?void 0:a.enclosingRing())!==i.ringOut?i.ringOut:null===(s=i.ringOut)||void 0===s?void 0:s.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}],[{key:"factory",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(i.isInResult()&&!i.ringOut){for(var o=null,a=i.leftSE,s=i.rightSE,u=[a],l=a.point,c=[];o=a,a=s,u.push(a),a.point!==l;)for(;;){var f=a.getAvailableLinkedEvents();if(0===f.length){var h=u[0].point,d=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,", ").concat(h.y,"]. Last matching segment found ends at [").concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){s=f[0].otherSE;break}for(var g=null,p=0,v=c.length;p<v;p++)if(c[p].point===a.point){g=p;break}if(null===g){c.push({index:u.length,point:a.point});var y=a.getLeftmostComparator(o);s=f.sort(y)[0].otherSE;break}var m=c.splice(g)[0],_=u.splice(m.index);_.unshift(_[0].otherSE),t.push(new b(_.reverse()))}t.push(new b(u))}}return t}}])}(),Na=function(){return i(function e(t){d(this,e),l(this,"exteriorRing",void 0),l(this,"interiorRings",void 0),this.exteriorRing=t,t.poly=this,this.interiorRings=[]},[{key:"addInterior",value:function(e){this.interiorRings.push(e),e.poly=this}},{key:"getGeom",value:function(){var e=this.exteriorRing.getGeom();if(null===e)return null;for(var t=[e],n=0,r=this.interiorRings.length;n<r;n++){var i=this.interiorRings[n].getGeom();null!==i&&t.push(i)}return t}}])}(),Sa=function(){return i(function e(t){d(this,e),l(this,"rings",void 0),l(this,"polys",void 0),this.rings=t,this.polys=this._composePolys(t)},[{key:"getGeom",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++){var r=this.polys[t].getGeom();null!==r&&e.push(r)}return e}},{key:"_composePolys",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(!i.poly)if(i.isExteriorRing())t.push(new Na(i));else{var o,a=i.enclosingRing();null!=a&&a.poly||t.push(new Na(a)),null==a||null===(o=a.poly)||void 0===o||o.addInterior(i)}}return t}}])}(),Ma=function(){return i(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pa.compare;d(this,e),l(this,"queue",void 0),l(this,"tree",void 0),l(this,"segments",void 0),this.queue=t,this.tree=new ia(n),this.segments=[]},[{key:"process",value:function(e){var t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(t),n;e.isLeft&&this.tree.add(t);var r=t,i=t;do{r=this.tree.lastBefore(r)}while(null!=r&&null!=r.consumedBy);do{i=this.tree.firstAfter(i)}while(null!=i&&null!=i.consumedBy);if(e.isLeft){var o=null;if(r){var a=r.getIntersection(t);if(null!==a&&(t.isAnEndpoint(a)||(o=a),!r.isAnEndpoint(a)))for(var s=this._splitSafely(r,a),u=0,l=s.length;u<l;u++)n.push(s[u])}var c=null;if(i){var f=i.getIntersection(t);if(null!==f&&(t.isAnEndpoint(f)||(c=f),!i.isAnEndpoint(f)))for(var h=this._splitSafely(i,f),d=0,g=h.length;d<g;d++)n.push(h[d])}if(null!==o||null!==c){var p=null;if(null===o)p=c;else if(null===c)p=o;else{p=ka.comparePoints(o,c)<=0?o:c}this.queue.delete(t.rightSE),n.push(t.rightSE);for(var v=t.split(p),y=0,m=v.length;y<m;y++)n.push(v[y])}n.length>0?(this.tree.delete(t),n.push(e)):(this.segments.push(t),t.prev=r)}else{if(r&&i){var _=r.getIntersection(i);if(null!==_){if(!r.isAnEndpoint(_))for(var b=this._splitSafely(r,_),x=0,w=b.length;x<w;x++)n.push(b[x]);if(!i.isAnEndpoint(_))for(var k=this._splitSafely(i,_),E=0,N=k.length;E<N;E++)n.push(k[E])}}this.tree.delete(t)}return n}},{key:"_splitSafely",value:function(e,t){this.tree.delete(e);var n=e.rightSE;this.queue.delete(n);var r=e.split(t);return r.push(n),void 0===e.consumedBy&&this.tree.add(e),r}}])}(),Ia=new(function(){return i(function e(){d(this,e),l(this,"type",void 0),l(this,"numMultiPolys",void 0)},[{key:"run",value:function(e,t,n){Ia.type=e;for(var r=[new Ra(t,!0)],i=0,o=n.length;i<o;i++)r.push(new Ra(n[i],!1));if(Ia.numMultiPolys=r.length,"difference"===Ia.type)for(var a=r[0],s=1;s<r.length;)null!==va(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===Ia.type)for(var u=0,l=r.length;u<l;u++)for(var c=r[u],f=u+1,h=r.length;f<h;f++)if(null===va(c.bbox,r[f].bbox))return[];for(var d=new ia(ka.compare),g=0,p=r.length;g<p;g++)for(var v=r[g].getSweepEvents(),y=0,m=v.length;y<m;y++)d.add(v[y]);var _=new Ma(d),b=null;for(0!=d.size&&(b=d.first(),d.delete(b));b;){for(var x=_.process(b),w=0,k=x.length;w<k;w++){var E=x[w];void 0===E.consumedBy&&d.add(E)}0!=d.size?(b=d.first(),d.delete(b)):b=null}ga.reset();var N=Ea.factory(_.segments);return new Sa(N).getGeom()}}])}()),Oa=Ia,Ca=0,Pa=function(){function f(e,t,n,r){d(this,f),l(this,"id",void 0),l(this,"leftSE",void 0),l(this,"rightSE",void 0),l(this,"rings",void 0),l(this,"windings",void 0),l(this,"ringOut",void 0),l(this,"consumedBy",void 0),l(this,"prev",void 0),l(this,"_prevInResult",void 0),l(this,"_beforeState",void 0),l(this,"_afterState",void 0),l(this,"_isInResult",void 0),this.id=++Ca,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=n,this.windings=r}return i(f,[{key:"replaceRightSE",value:function(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(t)?e:t},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(t)?e:t}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}},{key:"isAnEndpoint",value:function(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}},{key:"comparePoint",value:function(e){return ga.orient(this.leftSE.point,e,this.rightSE.point)}},{key:"getIntersection",value:function(e){var t=this.bbox(),n=e.bbox(),r=va(t,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,s=e.rightSE.point,u=pa(t,a)&&0===this.comparePoint(a),l=pa(n,i)&&0===e.comparePoint(i),c=pa(t,s)&&0===this.comparePoint(s),f=pa(n,o)&&0===e.comparePoint(o);if(l&&u)return f&&!c?o:!f&&c?s:null;if(l)return c&&i.x.eq(s.x)&&i.y.eq(s.y)?null:i;if(u)return f&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(f&&c)return null;if(f)return o;if(c)return s;var h=function(e,t,n,r){if(t.x.isZero())return wa(n,r,e.x);if(r.x.isZero())return wa(e,t,n.x);if(t.y.isZero())return xa(n,r,e.y);if(r.y.isZero())return xa(e,t,n.y);var i=ya(t,r);if(i.isZero())return null;var o={x:n.x.minus(e.x),y:n.y.minus(e.y)},a=ya(o,t).div(i),s=ya(o,r).div(i),u=e.x.plus(s.times(t.x)),l=n.x.plus(a.times(r.x)),c=e.y.plus(s.times(t.y)),f=n.y.plus(a.times(r.y));return{x:u.plus(l).div(2),y:c.plus(f).div(2)}}(i,this.vector(),a,e.vector());return null===h?null:pa(r,h)?ga.snap(h):null}},{key:"split",value:function(e){var t=[],n=void 0!==e.events,r=new ka(e,!0),i=new ka(e,!1),o=this.rightSE;this.replaceRightSE(i),t.push(i),t.push(r);var a=new f(r,o,this.rings.slice(),this.windings.slice());return ka.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),ka.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(r.checkForConsuming(),i.checkForConsuming()),t}},{key:"swapEvents",value:function(){var e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var t=0,n=this.windings.length;t<n;t++)this.windings[t]*=-1}},{key:"consume",value:function(e){for(var t=this,n=e;t.consumedBy;)t=t.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var r=f.compare(t,n);if(0!==r){if(r>0){var i=t;t=n,n=i}if(t.prev===n){var o=t;t=n,n=o}for(var a=0,s=n.rings.length;a<s;a++){var u=n.rings[a],l=n.windings[a],c=t.rings.indexOf(u);-1===c?(t.rings.push(u),t.windings.push(l)):t.windings[c]+=l}n.rings=null,n.windings=null,n.consumedBy=t,n.leftSE.consumedBy=t.leftSE,n.rightSE.consumedBy=t.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};for(var t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],u=t.indexOf(a);-1===u?(t.push(a),n.push(s)):n[u]+=s}for(var l=[],c=[],f=0,h=t.length;f<h;f++)if(0!==n[f]){var d=t[f],g=d.poly;if(-1===c.indexOf(g))if(d.isExterior)l.push(g);else{-1===c.indexOf(g)&&c.push(g);var p=l.indexOf(d.poly);-1!==p&&l.splice(p,1)}}for(var v=0,y=l.length;v<y;v++){var m=l[v].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Oa.type){case"union":var n=0===e.length,r=0===t.length;this._isInResult=n!==r;break;case"intersection":var i,o;e.length<t.length?(i=e.length,o=t.length):(i=t.length,o=e.length),this._isInResult=o===Oa.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(e.length-t.length);this._isInResult=a%2==1;break;case"difference":var s=function(e){return 1===e.length&&e[0].isSubject};this._isInResult=s(e)!==s(t)}return this._isInResult}}],[{key:"compare",value:function(e,t){var n=e.leftSE.point.x,r=t.leftSE.point.x,i=e.rightSE.point.x,o=t.rightSE.point.x;if(o.isLessThan(n))return 1;if(i.isLessThan(r))return-1;var a=e.leftSE.point.y,s=t.leftSE.point.y,u=e.rightSE.point.y,l=t.rightSE.point.y;if(n.isLessThan(r)){if(s.isLessThan(a)&&s.isLessThan(u))return 1;if(s.isGreaterThan(a)&&s.isGreaterThan(u))return-1;var c=e.comparePoint(t.leftSE.point);if(c<0)return 1;if(c>0)return-1;var f=t.comparePoint(e.rightSE.point);return 0!==f?f:-1}if(n.isGreaterThan(r)){if(a.isLessThan(s)&&a.isLessThan(l))return-1;if(a.isGreaterThan(s)&&a.isGreaterThan(l))return 1;var h=t.comparePoint(e.leftSE.point);if(0!==h)return h;var d=e.comparePoint(t.rightSE.point);return d<0?1:d>0?-1:1}if(a.isLessThan(s))return-1;if(a.isGreaterThan(s))return 1;if(i.isLessThan(o)){var g=t.comparePoint(e.rightSE.point);if(0!==g)return g}if(i.isGreaterThan(o)){var p=e.comparePoint(t.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!i.eq(o)){var v=u.minus(a),y=i.minus(n),m=l.minus(s),_=o.minus(r);if(v.isGreaterThan(y)&&m.isLessThan(_))return 1;if(v.isLessThan(y)&&m.isGreaterThan(_))return-1}return i.isGreaterThan(o)?1:i.isLessThan(o)||u.isLessThan(l)?-1:u.isGreaterThan(l)?1:e.id<t.id?-1:e.id>t.id?1:0}},{key:"fromRing",value:function(e,t,n){var r,i,o,a=ka.comparePoints(e,t);if(a<0)r=e,i=t,o=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));r=t,i=e,o=-1}return new f(new ka(r,!0),new ka(i,!1),[n],[o])}}])}(),Ta=function(){return i(function e(t,n,r){if(d(this,e),l(this,"poly",void 0),l(this,"isExterior",void 0),l(this,"segments",void 0),l(this,"bbox",void 0),!Array.isArray(t)||0===t.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof t[0][0]||"number"!=typeof t[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=ga.snap({x:new ta(t[0][0]),y:new ta(t[0][1])});this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,a=1,s=t.length;a<s;a++){if("number"!=typeof t[a][0]||"number"!=typeof t[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=ga.snap({x:new ta(t[a][0]),y:new ta(t[a][1])});u.x.eq(o.x)&&u.y.eq(o.y)||(this.segments.push(Pa.fromRing(o,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),o=u)}i.x.eq(o.x)&&i.y.eq(o.y)||this.segments.push(Pa.fromRing(o,i,this))},[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.segments.length;t<n;t++){var r=this.segments[t];e.push(r.leftSE),e.push(r.rightSE)}return e}}])}(),La=function(){return i(function e(t,n){if(d(this,e),l(this,"multiPoly",void 0),l(this,"exteriorRing",void 0),l(this,"interiorRings",void 0),l(this,"bbox",void 0),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Ta(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=t.length;r<i;r++){var o=new Ta(t[r],this,!1);o.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n},[{key:"getSweepEvents",value:function(){for(var e=this.exteriorRing.getSweepEvents(),t=0,n=this.interiorRings.length;t<n;t++)for(var r=this.interiorRings[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}])}(),Ra=function(){return i(function e(t,n){if(d(this,e),l(this,"isSubject",void 0),l(this,"polys",void 0),l(this,"bbox",void 0),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof t[0][0][0]&&(t=[t])}catch(e){}this.polys=[],this.bbox={ll:{x:new ta(Number.POSITIVE_INFINITY),y:new ta(Number.POSITIVE_INFINITY)},ur:{x:new ta(Number.NEGATIVE_INFINITY),y:new ta(Number.NEGATIVE_INFINITY)}};for(var r=0,i=t.length;r<i;r++){var o=new La(t[r],this);o.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n},[{key:"getSweepEvents",value:function(){for(var e=[],t=0,n=this.polys.length;t<n;t++)for(var r=this.polys[t].getSweepEvents(),i=0,o=r.length;i<o;i++)e.push(r[i]);return e}}])}(),Aa=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Oa.run("union",e,n)},ja=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Oa.run("intersection",e,n)},Da=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Oa.run("difference",e,n)},Fa=ga.set,za=Object.freeze({__proto__:null,difference:Da,intersection:ja,setPrecision:Fa,union:Aa,xor:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Oa.run("xor",e,n)}});function Va(e){if(!e)throw new Error("geojson is required");var t=[];return x(e,function(e){t.push(e)}),U(t)}function qa(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=X(e),i=X(t),o=r[0]-i[0],a=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(a):Math.pow(Math.pow(o,n)+Math.pow(a,n),1/n)}function Ba(e,t){var n,r,i=(t=t||{}).threshold||1e4,o=t.p||2,a=null!=(n=t.binary)&&n,s=t.alpha||-1,u=null!=(r=t.standardization)&&r,l=[];N(e,function(e){l.push(_i(e))});for(var c=[],f=0;f<l.length;f++)c[f]=[];for(var h=0;h<l.length;h++)for(var d=h;d<l.length;d++){h===d&&(c[h][d]=0);var g=qa(l[h],l[d],o);c[h][d]=g,c[d][h]=g}for(var p=0;p<l.length;p++)for(var v=0;v<l.length;v++){var y=c[p][v];0!==y&&(c[p][v]=a?y<=i?1:0:y<=i?Math.pow(y,s):0)}if(u)for(var m=0;m<l.length;m++)for(var _=c[m].reduce(function(e,t){return e+t},0),b=0;b<l.length;b++)c[m][b]=c[m][b]/_;return c}function Ga(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t<0,o=he(Math.abs(t),r.units,"meters");i&&(o=-Math.abs(o));var a=X(e),s=function(e,t,n,r){r=void 0===r?g:Number(r);var i=t/r,o=e[0]*Math.PI/180,a=b(e[1]),s=b(n),u=i*Math.cos(s),l=a+u;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var c=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(a/2+Math.PI/4)),f=Math.abs(c)>1e-11?u/c:Math.cos(a),h=i*Math.sin(s)/f;return[(180*(o+h)/Math.PI+540)%360-180,180*l/Math.PI]}(a,o,n);return s[0]+=s[0]-a[0]>180?-360:a[0]-s[0]>180?360:0,G(s,r.properties)}function Ya(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=X(e),i=X(t);i[0]+=i[0]-r[0]>180?-360:r[0]-i[0]>180?360:0;var o=function(e,t,n){var r=n=void 0===n?g:Number(n),i=e[1]*Math.PI/180,o=t[1]*Math.PI/180,a=o-i,s=Math.abs(t[0]-e[0])*Math.PI/180;s>Math.PI&&(s-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),l=Math.abs(u)>1e-11?a/u:Math.cos(i);return Math.sqrt(a*a+l*l*s*s)*r}(r,i);return he(o,"meters",n.units)}function Ua(e,i,t){if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.pivot,r=t.mutate;if(!e)throw new Error("geojson is required");if(null==i||isNaN(i))throw new Error("angle is required");if(0===i)return e;var o=null!=n?n:_i(e);return!1!==r&&void 0!==r||(e=p(e)),w(e,function(e){var t=Ne(o,e)+i,n=Ya(o,e),r=E(Ga(o,n,t));e[0]=r[0],e[1]=r[1]}),e}function Wa(e,t,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",a=r.angle||0,s=r.pivot||e,u=r.properties||{};if(!e)throw new Error("center is required");if(!t)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!Z(r))throw new Error("options must be an object");if(!W(i))throw new Error("steps must be a number");if(!W(a))throw new Error("angle must be a number");var l=X(e);if("degrees"!==o){var c=Ga(e,t,90,{units:o}),f=Ga(e,n,0,{units:o});t=X(c)[0]-l[0],n=X(f)[1]-l[1]}for(var h=[],d=0;d<i;d+=1){var g=-360*d/i,p=t*n/Math.sqrt(Math.pow(n,2)+Math.pow(t,2)*Math.pow(Za(g),2)),v=t*n/Math.sqrt(Math.pow(t,2)+Math.pow(n,2)/Math.pow(Za(g),2));if(g<-90&&g>=-270&&(p=-p),g<-180&&g>=-360&&(v=-v),"degrees"===o){var y=b(a),m=p*Math.cos(y)+v*Math.sin(y),_=v*Math.cos(y)-p*Math.sin(y);p=m,v=_}h.push([p+l[0],v+l[1]])}return h.push(h[0]),"degrees"===o?z([h],u):Ua(z([h],u),a,{pivot:s})}function Za(e){var t=e*Math.PI/180;return Math.tan(t)}function Xa(e){return Je(J(e))}function Ha(t){var n=[];return"FeatureCollection"===t.type?N(t,function(t){w(t,function(e){n.push(G(e,t.properties))})}):"Feature"===t.type?w(t,function(e){n.push(G(e,t.properties))}):w(t,function(e){n.push(G(e))}),U(n)}var $a=Math.PI/180,Ja=180/Math.PI,Ka=function(e,t){this.lon=e,this.lat=t,this.x=$a*e,this.y=$a*t};Ka.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ka.prototype.antipode=function(){var e=-1*this.lat,t=this.lon<0?180+this.lon:-1*(180-this.lon);return new Ka(t,e)};var Qa=function(){this.coords=[],this.length=0};Qa.prototype.move_to=function(e){this.length++,this.coords.push(e)};var es=function(e){this.properties=e||{},this.geometries=[]};es.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var e=[],t=0;t<this.geometries.length;t++)e.push(this.geometries[t].coords);return{geometry:{type:"MultiLineString",coordinates:e},type:"Feature",properties:this.properties}},es.prototype.wkt=function(){for(var e="",t="LINESTRING(",n=function(e){t+=e[0]+" "+e[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),e+=t.substring(0,t.length-1)+")"}return e};var ts=function(e,t,n){if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ka(e.x,e.y),this.end=new Ka(t.x,t.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+e.view()+" and "+t.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+e+" and "+t)};function ns(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(Te(e,function(e){n.push(e.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");var r=ja.apply(za,[n[0]].concat(M(n.slice(1))));return 0===r.length?null:1===r.length?z(r[0],t.properties):re(r,t.properties)}function rs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=JSON.stringify(n.properties||{}),i=K(e,4),o=i[0],a=i[1],s=i[2],u=i[3],l=(a+u)/2,c=(o+s)/2,f=2*t/$([o,l],[s,l],n)*(s-o),h=2*t/$([c,a],[c,u],n)*(u-a),d=f/2,g=2*d,p=Math.sqrt(3)/2*h,v=s-o,y=u-a,m=3/4*g,_=p,A=(v-g)/(g-d/2),b=Math.floor(A),j=(b*m-d/2-v)/2-d/2+m/2,x=Math.floor((y-p)/p),w=(y-x*p)/2,k=x*p-y>p/2;k&&(w-=p/4);for(var E=[],N=[],S=0;S<6;S++){var M=2*Math.PI/6*S;E.push(Math.cos(M)),N.push(Math.sin(M))}for(var I=[],O=0;O<=b;O++)for(var C=0;C<=x;C++){var P=O%2==1;if((0!==C||!P)&&(0!==C||!k)){var T=O*m+o-j,L=C*_+a+w;if(P&&(L-=p/2),!0===n.triangles)os([T,L],f/2,h/2,JSON.parse(r),E,N).forEach(function(e){n.mask?ns(U([n.mask,e]))&&I.push(e):I.push(e)});else{var R=is([T,L],f/2,h/2,JSON.parse(r),E,N);n.mask?ns(U([n.mask,R]))&&I.push(R):I.push(R)}}}return U(I)}function is(e,t,n,r,i,o){for(var a=[],s=0;s<6;s++){var u=e[0]+t*i[s],l=e[1]+n*o[s];a.push([u,l])}return a.push(a[0].slice()),z([a],r)}function os(e,t,n,r,i,o){for(var a=[],s=0;s<6;s++){var u=[];u.push(e),u.push([e[0]+t*i[s],e[1]+n*o[s]]),u.push([e[0]+t*i[(s+1)%6],e[1]+n*o[(s+1)%6]]),u.push(e),a.push(z([u],r))}return a}function as(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=e[0],o=e[1],a=e[2],s=e[3],u=t/$([i,o],[a,o],n)*(a-i),l=t/$([i,o],[i,s],n)*(s-o),c=a-i,f=s-o,h=Math.floor(c/u),d=(f-Math.floor(f/l)*l)/2,g=i+(c-h*u)/2;g<=a;){for(var p=o+d;p<=s;){var v=G([g,p],n.properties);n.mask?qn(v,n.mask)&&r.push(v):r.push(v),p+=l}g+=u}return U(r)}function ss(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[],o=e[0],a=e[1],s=e[2],u=e[3],l=s-o,c=he(t,r.units,"degrees"),f=u-a,h=he(n,r.units,"degrees"),d=Math.floor(Math.abs(l)/c),g=Math.floor(Math.abs(f)/h),p=(f-g*h)/2,v=o+(l-d*c)/2,y=0;y<d;y++){for(var m=a+p,_=0;_<g;_++){var b=z([[[v,m],[v,m+h],[v+c,m+h],[v+c,m],[v,m]]],r.properties);r.mask?Gt(r.mask,b)&&i.push(b):i.push(b),m+=h}v+=c}return U(i)}function us(e,t){return ss(e,t,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function ls(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=t/$([e[0],e[1]],[e[2],e[1]],n)*(e[2]-e[0]),o=t/$([e[0],e[1]],[e[0],e[3]],n)*(e[3]-e[1]),a=0,s=e[0];s<=e[2];){for(var u=0,l=e[1];l<=e[3];){var c=null,f=null;a%2==0&&u%2==0?(c=z([[[s,l],[s,l+o],[s+i,l],[s,l]]],n.properties),f=z([[[s,l+o],[s+i,l+o],[s+i,l],[s,l+o]]],n.properties)):a%2==0&&u%2==1?(c=z([[[s,l],[s+i,l+o],[s+i,l],[s,l]]],n.properties),f=z([[[s,l],[s,l+o],[s+i,l+o],[s,l]]],n.properties)):u%2==0&&a%2==1?(c=z([[[s,l],[s,l+o],[s+i,l+o],[s,l]]],n.properties),f=z([[[s,l],[s+i,l+o],[s+i,l],[s,l]]],n.properties)):u%2==1&&a%2==1&&(c=z([[[s,l],[s,l+o],[s+i,l],[s,l]]],n.properties),f=z([[[s,l+o],[s+i,l+o],[s+i,l],[s,l+o]]],n.properties)),n.mask?(ns(U([n.mask,c]))&&r.push(c),ns(U([n.mask,f]))&&r.push(f)):(r.push(c),r.push(f)),l+=o,u++}a++,s+=i}return U(r)}function cs(e,t,n){return e<t?(n-e)/(t-e):(e-n)/(e-t)}function fs(e,t,n,r){var i;return n>r&&(i=n,n=r,r=i),e<t?e<n?(n-e)/(t-e):(r-e)/(t-e):e>r?(e-r)/(e-t):(e-n)/(e-t)}function hs(e,t,n,r){return e<t?(n-e)/(t-e):(e-r)/(e-t)}function ds(e,t,n,r){return e<t?(r-e)/(t-e):(e-n)/(e-t)}function gs(){this.successCallback=null,this.verbose=!1,this.polygons=!1,this.polygons_full=!1,this.linearRing=!0,this.noQuadTree=!1,this.noFrame=!1}function ps(e,t,n,r){var i=[];return e.polygons.forEach(function(e){e.forEach(function(e){e[0]+=t,e[1]+=n}),r.linearRing&&e.push(e[0]),i.push(e)}),i}function vs(e,t,n,r){return 0===n?(e+=1,t+=r[0][1]):1===n?e+=r[0][0]:2===n?t+=r[0][1]:3===n&&(e+=r[0][0],t+=1),[e,t]}function ys(e,t,n){return 0===n?e++:1===n||(2===n?t++:3===n&&(e++,t++)),[e,t]}function ms(e,t,n,r,i){var o=r,a=i,s=0,u=0;if(this.x=t,this.y=n,this.lowerBound=null,this.upperBound=null,this.childA=null,this.childB=null,this.childC=null,this.childD=null,1===r&&1===i)this.lowerBound=Math.min(e[n][t],e[n][t+1],e[n+1][t+1],e[n+1][t]),this.upperBound=Math.max(e[n][t],e[n][t+1],e[n+1][t+1],e[n+1][t]);else{if(r>1){for(;0!==o;)o>>=1,s++;r===1<<s-1&&s--,o=1<<s-1}if(i>1){for(;0!==a;)a>>=1,u++;i===1<<u-1&&u--,a=1<<u-1}this.childA=new ms(e,t,n,o,a),this.lowerBound=this.childA.lowerBound,this.upperBound=this.childA.upperBound,r-o>0&&(this.childB=new ms(e,t+o,n,r-o,a),this.lowerBound=Math.min(this.lowerBound,this.childB.lowerBound),this.upperBound=Math.max(this.upperBound,this.childB.upperBound),i-a>0&&(this.childC=new ms(e,t+o,n+a,r-o,i-a),this.lowerBound=Math.min(this.lowerBound,this.childC.lowerBound),this.upperBound=Math.max(this.upperBound,this.childC.upperBound))),i-a>0&&(this.childD=new ms(e,t,n+a,o,i-a),this.lowerBound=Math.min(this.lowerBound,this.childD.lowerBound),this.upperBound=Math.max(this.upperBound,this.childD.upperBound))}}function _s(e){var t,n;if(!e)throw new Error("data is required");if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Error("data must be scalar field, i.e. array of arrays");if(e.length<2)throw new Error("data must contain at least two rows");if((n=e[0].length)<2)throw new Error("data must contain at least two columns");for(t=1;t<e.length;t++){if(!Array.isArray(e[t]))throw new Error("Row "+t+" is not an array");if(e[t].length!=n)throw new Error("unequal row lengths detected, please provide a regular grid")}this.data=e,this.root=new ms(e,0,0,e[0].length-1,e.length-1)}function bs(e,t,n){var r,i,o,a=!1,s=!1,u=null,l=null,c=null,f=null,h=null,d=[];if(!e)throw new Error("data is required");if(null==t)throw new Error("threshold is required");if(n&&"object"!==_r(n))throw new Error("options must be an object");if(r=function(e){var t,n,r,i,o;for(i=new gs,e=e||{},o=Object.keys(i),t=0;t<o.length;t++)null!=(r=e[n=o[t]])&&(i[n]=r);return i.polygons_full=!i.polygons,i.interpolate=cs,i}(n),e instanceof _s)u=e,l=e.root,c=e.data,r.noQuadTree||(a=!0);else{if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=e}if(Array.isArray(t)){for(s=!0,r.noQuadTree||(a=!0),i=0;i<t.length;i++)if(isNaN(+t[i]))throw new Error("threshold["+i+"] is not a number")}else{if(isNaN(+t))throw new Error("threshold must be a number or array of numbers");t=[t]}return a&&!l&&(u=new _s(c),l=u.root,c=u.data),r.verbose&&(r.polygons?console.log("MarchingSquaresJS-isoLines: returning single lines (polygons) for each grid cell"):console.log("MarchingSquaresJS-isoLines: returning line paths (polygons) for entire data grid"),s&&console.log("MarchingSquaresJS-isoLines: multiple lines requested, returning array of line paths instead of lines for a single threshold")),t.forEach(function(e,t){if(h=[],r.threshold=e,r.verbose&&console.log("MarchingSquaresJS-isoLines: computing iso lines for threshold "+e),r.polygons)if(a)l.cellsBelowThreshold(r.threshold,!0).forEach(function(e){h=h.concat(ps(xs(c,e.x,e.y,r),e.x,e.y,r))});else for(o=0;o<c.length-1;++o)for(t=0;t<c[0].length-1;++t)h=h.concat(ps(xs(c,t,o,r),t,o,r));else{for(f=[],t=0;t<c[0].length-1;++t)f[t]=[];if(a)l.cellsBelowThreshold(r.threshold,!1).forEach(function(e){f[e.x][e.y]=xs(c,e.x,e.y,r)});else for(t=0;t<c[0].length-1;++t)for(o=0;o<c.length-1;++o)f[t][o]=xs(c,t,o,r);h=function(e,r,i){var o,a,s,u,l,c,f,h,d,g,p,v,y,m,_,b=[],x=e.length-1,w=e[0].length-1,k=["right","bottom","left","top"],E=[0,-1,0,1],N=[-1,0,1,0],S={bottom:1,left:2,top:3,right:0};return i.noFrame||function(e,t){var n,r,i,o,a;for(n=!0,r=e[0].length,i=e.length,a=0;a<i;a++)if(e[a][0]>=t||e[a][r-1]>=t){n=!1;break}if(n&&(e[i-1][0]>=t||e[i-1][r-1]>=t)&&(n=!1),n)for(o=0;o<r-1;o++)if(e[0][o]>=t||e[i-1][o]>t){n=!1;break}return n}(e,i.threshold)&&(i.linearRing?b.push([[0,0],[0,x],[w,x],[w,0],[0,0]]):b.push([[0,0],[0,x],[w,x],[w,0]])),r.forEach(function(e,n){e.forEach(function(e,t){for(o=null,a=0;a<4;a++)if(o=k[a],"object"===_r(e.edges[o])){for(l=[],s=e.edges[o],c=o,f=n,h=t,d=!1,g=[n+s.path[0][0],t+s.path[0][1]],l.push(g);!d&&"object"===_r((u=r[f][h]).edges[c]);)if(s=u.edges[c],delete u.edges[c],(p=s.path[1])[0]+=f,p[1]+=h,l.push(p),c=s.move.enter,f+=s.move.x,h+=s.move.y,void 0===r[f]||void 0===r[f][h]){if(!i.linearRing)break;if(v=0,y=0,f===w?(f--,v=0):f<0?(f++,v=2):h===x?(h--,v=3):h<0&&(h++,v=1),f===n&&h===t&&v===S[o]){d=!0,c=o;break}for(;;){if(m=!1,y>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==r[f]&&void 0!==r[f][h]&&(u=r[f][h],_=k[v],"object"===_r(u.edges[_]))){s=u.edges[_],l.push(vs(f,h,v,s.path)),c=_,m=!0;break}if(m)break;if(l.push(ys(f,h,v)),h+=N[v],void 0!==r[f+=E[v]]&&void 0!==r[f][h]||(0===v&&h<0||1===v&&f<0||2===v&&h===x||3===v&&f===w)&&(f-=E[v],h-=N[v],v=(v+1)%4,y++),f===n&&h===t&&v===S[o]){d=!0,c=o;break}}}!i.linearRing||l[l.length-1][0]===g[0]&&l[l.length-1][1]===g[1]||l.push(g),b.push(l)}})}),b}(c,f,r)}s?d.push(h):d=h,"function"==typeof r.successCallback&&r.successCallback(d,e)}),d}function xs(e,t,n,r){var i,o,a,s,u,l,c=0,f=e[n+1][t],h=e[n+1][t+1],d=e[n][t+1],g=e[n][t],p=r.threshold;if(!(isNaN(g)||isNaN(d)||isNaN(h)||isNaN(f))){switch(c|=f>=p?8:0,c|=h>=p?4:0,c|=d>=p?2:0,l={cval:c=+(c|=g>=p?1:0),polygons:[],edges:{},x0:g,x1:d,x2:h,x3:f},c){case 0:r.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,0]]);break;case 15:break;case 14:i=r.interpolate(g,f,p),s=r.interpolate(g,d,p),r.polygons_full&&(l.edges.left={path:[[0,i],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[s,0]]);break;case 13:s=r.interpolate(g,d,p),o=r.interpolate(d,h,p),r.polygons_full&&(l.edges.bottom={path:[[s,0],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&l.polygons.push([[s,0],[1,o],[1,0]]);break;case 11:o=r.interpolate(d,h,p),a=r.interpolate(f,h,p),r.polygons_full&&(l.edges.right={path:[[1,o],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&l.polygons.push([[1,o],[a,1],[1,1]]);break;case 7:i=r.interpolate(g,f,p),a=r.interpolate(f,h,p),r.polygons_full&&(l.edges.top={path:[[a,1],[0,i]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&l.polygons.push([[a,1],[0,i],[0,1]]);break;case 1:i=r.interpolate(g,f,p),s=r.interpolate(g,d,p),r.polygons_full&&(l.edges.bottom={path:[[s,0],[0,i]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&l.polygons.push([[s,0],[0,i],[0,1],[1,1],[1,0]]);break;case 2:s=r.interpolate(g,d,p),o=r.interpolate(d,h,p),r.polygons_full&&(l.edges.right={path:[[1,o],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[1,1],[1,o],[s,0]]);break;case 4:o=r.interpolate(d,h,p),a=r.interpolate(f,h,p),r.polygons_full&&(l.edges.top={path:[[a,1],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[a,1],[1,o],[1,0]]);break;case 8:i=r.interpolate(g,f,p),a=r.interpolate(f,h,p),r.polygons_full&&(l.edges.left={path:[[0,i],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[a,1],[1,1],[1,0]]);break;case 12:i=r.interpolate(g,f,p),o=r.interpolate(d,h,p),r.polygons_full&&(l.edges.left={path:[[0,i],[1,o]],move:{x:1,y:0,enter:"left"}}),r.polygons&&l.polygons.push([[0,0],[0,i],[1,o],[1,0]]);break;case 9:s=r.interpolate(g,d,p),a=r.interpolate(f,h,p),r.polygons_full&&(l.edges.bottom={path:[[s,0],[a,1]],move:{x:0,y:1,enter:"bottom"}}),r.polygons&&l.polygons.push([[s,0],[a,1],[1,1],[1,0]]);break;case 3:i=r.interpolate(g,f,p),o=r.interpolate(d,h,p),r.polygons_full&&(l.edges.right={path:[[1,o],[0,i]],move:{x:-1,y:0,enter:"right"}}),r.polygons&&l.polygons.push([[0,i],[0,1],[1,1],[1,o]]);break;case 6:s=r.interpolate(g,d,p),a=r.interpolate(f,h,p),r.polygons_full&&(l.edges.top={path:[[a,1],[s,0]],move:{x:0,y:-1,enter:"top"}}),r.polygons&&l.polygons.push([[0,0],[0,1],[a,1],[s,0]]);break;case 10:i=r.interpolate(g,f,p),o=r.interpolate(d,h,p),s=r.interpolate(g,d,p),a=r.interpolate(f,h,p),u=(g+d+h+f)/4,r.polygons_full&&(u<p?(l.edges.left={path:[[0,i],[a,1]],move:{x:0,y:1,enter:"bottom"}},l.edges.right={path:[[1,o],[s,0]],move:{x:0,y:-1,enter:"top"}}):(l.edges.right={path:[[1,o],[a,1]],move:{x:0,y:1,enter:"bottom"}},l.edges.left={path:[[0,i],[s,0]],move:{x:0,y:-1,enter:"top"}})),r.polygons&&(u<p?l.polygons.push([[0,0],[0,i],[a,1],[1,1],[1,o],[s,0]]):(l.polygons.push([[0,0],[0,i],[s,0]]),l.polygons.push([[a,1],[1,1],[1,o]])));break;case 5:i=r.interpolate(g,f,p),o=r.interpolate(d,h,p),s=r.interpolate(g,d,p),a=r.interpolate(f,h,p),u=(g+d+h+f)/4,r.polygons_full&&(u<p?(l.edges.bottom={path:[[s,0],[0,i]],move:{x:-1,y:0,enter:"right"}},l.edges.top={path:[[a,1],[1,o]],move:{x:1,y:0,enter:"left"}}):(l.edges.top={path:[[a,1],[0,i]],move:{x:-1,y:0,enter:"right"}},l.edges.bottom={path:[[s,0],[1,o]],move:{x:1,y:0,enter:"left"}})),r.polygons&&(u<p?l.polygons.push([[0,i],[0,1],[a,1],[1,o],[1,0],[s,0]]):(l.polygons.push([[0,i],[0,1],[a,1]]),l.polygons.push([[s,0],[1,o],[1,0]])))}return l}}ts.prototype.interpolate=function(e){var t=Math.sin((1-e)*this.g)/Math.sin(this.g),n=Math.sin(e*this.g)/Math.sin(this.g),r=t*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=t*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=t*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=Ja*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Ja*Math.atan2(i,r),a]},ts.prototype.Arc=function(e,t){var n=[];if(!e||e<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(e-1),i=0;i<e;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,l=t&&t.offset?t.offset:10,c=180-l,f=-180+l,h=360-l,d=1;d<n.length;++d){var g=n[d-1][0],p=n[d][0],v=Math.abs(p-g);v>h&&(p>c&&g<f||g>c&&p<f)?s=!0:v>u&&(u=v)}var y=[];if(s&&u<l){var m=[];y.push(m);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>h){var x=parseFloat(n[_-1][0]),w=parseFloat(n[_-1][1]),k=parseFloat(n[_][0]),E=parseFloat(n[_][1]);if(x>-180&&x<f&&180===k&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<f){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(x>c&&x<180&&-180===k&&_+1<n.length&&n[_-1][0]>c&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(x<f&&k>c){var N=x;x=k,k=N;var S=w;w=E,E=S}if(x>c&&k<f&&(k+=360),x<=180&&k>=180&&x<k){var M=(180-x)/(k-x),I=M*E+(1-M)*w;m.push([n[_-1][0]>c?180:-180,I]),(m=[]).push([n[_-1][0]>c?-180:180,I]),y.push(m)}else m=[],y.push(m);m.push([b,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var O=[];y.push(O);for(var C=0;C<n.length;++C)O.push([n[C][0],n[C][1]])}for(var P=new es(this.properties),T=0;T<y.length;++T){var L=new Qa;P.geometries.push(L);for(var R=y[T],A=0;A<R.length;++A)L.move_to(R[A])}return P},ms.prototype.cellsInBand=function(e,t,n){var r=[];return n=void 0===n||n,this.lowerBound>t||this.upperBound<e||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(r=r.concat(this.childA.cellsInBand(e,t,n))),this.childB&&(r=r.concat(this.childB.cellsInBand(e,t,n))),this.childD&&(r=r.concat(this.childD.cellsInBand(e,t,n))),this.childC&&(r=r.concat(this.childC.cellsInBand(e,t,n)))):(n||this.lowerBound<=e||this.upperBound>=t)&&r.push({x:this.x,y:this.y})),r},ms.prototype.cellsBelowThreshold=function(e,t){var n=[];return t=void 0===t||t,this.lowerBound>e||(this.childA||this.childB||this.childC||this.childD?(this.childA&&(n=n.concat(this.childA.cellsBelowThreshold(e,t))),this.childB&&(n=n.concat(this.childB.cellsBelowThreshold(e,t))),this.childD&&(n=n.concat(this.childD.cellsBelowThreshold(e,t))),this.childC&&(n=n.concat(this.childC.cellsBelowThreshold(e,t)))):(t||this.upperBound>=e)&&n.push({x:this.x,y:this.y})),n};var v={square:function(e,t,n,r,i,o){o.polygons&&e.polygons.push([[0,0],[0,1],[1,1],[1,0]])},triangle_bl:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate(t,i,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,s],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,s],[a,0],[0,0]])},triangle_br:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[a,0],[1,s]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[a,0],[1,s],[1,0]])},triangle_tr:function(e,t,n,r,i,o){var a=o.interpolate(n,r,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(e.edges.rt={path:[[1,a],[s,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&e.polygons.push([[1,a],[s,1],[1,1]])},triangle_tl:function(e,t,n,r,i,o){var a=o.interpolate(i,r,o.minV,o.maxV),s=o.interpolate(t,i,o.minV,o.maxV);o.polygons_full&&(e.edges.tl={path:[[a,1],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&e.polygons.push([[0,s],[0,1],[a,1]])},tetragon_t:function(e,t,n,r,i,o){var a=o.interpolate(n,r,o.minV,o.maxV),s=o.interpolate(t,i,o.minV,o.maxV);o.polygons_full&&(e.edges.rt={path:[[1,a],[0,s]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&e.polygons.push([[0,s],[0,1],[1,1],[1,a]])},tetragon_r:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[a,0],[s,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&e.polygons.push([[a,0],[s,1],[1,1],[1,0]])},tetragon_b:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,a],[1,s]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[0,0],[0,a],[1,s],[1,0]])},tetragon_l:function(e,t,n,r,i,o){var a=o.interpolate(i,r,o.minV,o.maxV),s=o.interpolate(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.tl={path:[[a,1],[s,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,0],[0,1],[a,1],[s,0]])},tetragon_bl:function(e,t,n,r,i,o){var a=o.interpolate_a(t,n,o.minV,o.maxV),s=o.interpolate_b(t,n,o.minV,o.maxV),u=o.interpolate_a(t,i,o.minV,o.maxV),l=o.interpolate_b(t,i,o.minV,o.maxV);o.polygons_full&&(e.edges.bl={path:[[a,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,l],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&e.polygons.push([[a,0],[0,u],[0,l],[s,0]])},tetragon_br:function(e,t,n,r,i,o){var a=o.interpolate_a(t,n,o.minV,o.maxV),s=o.interpolate_b(t,n,o.minV,o.maxV),u=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate_b(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.bl={path:[[a,0],[1,l]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,u],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&e.polygons.push([[a,0],[1,l],[1,u],[s,0]])},tetragon_tr:function(e,t,n,r,i,o){var a=o.interpolate_a(i,r,o.minV,o.maxV),s=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.rb={path:[[1,l],[a,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[s,1],[1,u]],move:{x:1,y:0,enter:"lt"}}),o.polygons&&e.polygons.push([[1,l],[a,1],[s,1],[1,u]])},tetragon_tl:function(e,t,n,r,i,o){var a=o.interpolate_a(i,r,o.minV,o.maxV),s=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(t,i,o.minV,o.maxV),l=o.interpolate_a(t,i,o.minV,o.maxV);o.polygons_full&&(e.edges.tr={path:[[s,1],[0,l]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,u],[a,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&e.polygons.push([[s,1],[0,l],[0,u],[a,1]])},tetragon_lr:function(e,t,n,r,i,o){var a=o.interpolate_a(t,i,o.minV,o.maxV),s=o.interpolate_b(t,i,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.lt={path:[[0,s],[1,u]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,l],[0,a]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&e.polygons.push([[0,a],[0,s],[1,u],[1,l]])},tetragon_tb:function(e,t,n,r,i,o){var a=o.interpolate_a(i,r,o.minV,o.maxV),s=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate_b(t,n,o.minV,o.maxV),l=o.interpolate_a(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.tr={path:[[s,1],[u,0]],move:{x:0,y:-1,enter:"tr"}},e.edges.bl={path:[[l,0],[a,1]],move:{x:0,y:1,enter:"bl"}}),o.polygons&&e.polygons.push([[l,0],[a,1],[s,1],[u,0]])},pentagon_tr:function(e,t,n,r,i,o){var a=o.interpolate(i,r,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.tl={path:[[a,1],[1,s]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[0,0],[0,1],[a,1],[1,s],[1,0]])},pentagon_tl:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&e.polygons.push([[0,0],[0,a],[s,1],[1,1],[1,0]])},pentagon_br:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.rt={path:[[1,s],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,0],[0,1],[1,1],[1,s],[a,0]])},pentagon_bl:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[s,0],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&e.polygons.push([[0,a],[0,1],[1,1],[1,0],[s,0]])},pentagon_tr_rl:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.tl={path:[[s,1],[1,u]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,l],[0,a]],move:{x:-1,y:0,enter:"rt"}}),o.polygons&&e.polygons.push([[0,a],[0,1],[s,1],[1,u],[1,l]])},pentagon_rb_bt:function(e,t,n,r,i,o){var a=o.interpolate(n,r,o.minV,o.maxV),s=o.interpolate_b(t,n,o.minV,o.maxV),u=o.interpolate_a(t,n,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(e.edges.rt={path:[[1,a],[s,0]],move:{x:0,y:-1,enter:"tr"}},e.edges.bl={path:[[u,0],[l,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&e.polygons.push([[l,1],[1,1],[1,a],[s,0],[u,0]])},pentagon_bl_lr:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate_a(t,i,o.minV,o.maxV),u=o.interpolate_b(t,i,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,u],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[a,0],[0,s],[0,u],[1,l],[1,0]])},pentagon_lt_tb:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate_a(i,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),l=o.interpolate(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[u,1],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,0],[0,a],[s,1],[u,1],[l,0]])},pentagon_bl_tb:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(t,n,o.minV,o.maxV),l=o.interpolate_a(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.bl={path:[[l,0],[0,a]],move:{x:-1,y:0,enter:"rt"}},e.edges.tl={path:[[s,1],[u,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&e.polygons.push([[0,a],[0,1],[s,1],[u,0],[l,0]])},pentagon_lt_rl:function(e,t,n,r,i,o){var a=o.interpolate_a(t,i,o.minV,o.maxV),s=o.interpolate_b(t,i,o.minV,o.maxV),u=o.interpolate(i,r,o.minV,o.maxV),l=o.interpolate(n,i,o.minV,o.maxV);o.polygons_full&&(e.edges.lt={path:[[0,s],[u,1]],move:{x:0,y:1,enter:"br"}},e.edges.rt={path:[[1,l],[0,a]],move:{x:-1,y:0,enter:"rb"}}),o.polygons&&e.polygons.push([[0,a],[0,s],[u,1],[1,1],[1,l]])},pentagon_tr_bt:function(e,t,n,r,i,o){var a=o.interpolate_a(i,r,o.minV,o.maxV),s=o.interpolate_b(i,r,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[l,0],[a,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[s,1],[1,u]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[a,1],[s,1],[1,u],[1,0],[l,0]])},pentagon_rb_lr:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate_b(n,r,o.minV,o.maxV),u=o.interpolate_a(n,r,o.minV,o.maxV),l=o.interpolate(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,a],[1,s]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,0],[0,a],[1,s],[1,u],[l,0]])},hexagon_lt_tr:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate_a(i,r,o.minV,o.maxV),u=o.interpolate_b(i,r,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[u,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[0,0],[0,a],[s,1],[u,1],[1,l],[1,0]])},hexagon_bl_lt:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate_a(t,i,o.minV,o.maxV),u=o.interpolate_b(t,i,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:"br"}}),o.polygons&&e.polygons.push([[a,0],[0,s],[0,u],[l,1],[1,1],[1,0]])},hexagon_bl_rb:function(e,t,n,r,i,o){var a=o.interpolate_a(t,n,o.minV,o.maxV),s=o.interpolate_b(t,n,o.minV,o.maxV),u=o.interpolate(t,i,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.bl={path:[[a,0],[0,u]],move:{x:-1,y:0,enter:"rt"}},e.edges.rt={path:[[1,l],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&e.polygons.push([[a,0],[0,u],[0,1],[1,1],[1,l],[s,0]])},hexagon_tr_rb:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate_b(n,r,o.minV,o.maxV),l=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.tl={path:[[s,1],[1,u]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,l],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,0],[0,1],[s,1],[1,u],[1,l],[a,0]])},hexagon_lt_rb:function(e,t,n,r,i,o){var a=o.interpolate(t,i,o.minV,o.maxV),s=o.interpolate(i,r,o.minV,o.maxV),u=o.interpolate(n,r,o.minV,o.maxV),l=o.interpolate(t,n,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,a],[s,1]],move:{x:0,y:1,enter:"br"}},e.edges.rt={path:[[1,u],[l,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,0],[0,a],[s,1],[1,1],[1,u],[l,0]])},hexagon_bl_tr:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate(t,i,o.minV,o.maxV),u=o.interpolate(i,r,o.minV,o.maxV),l=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rt"}},e.edges.tl={path:[[u,1],[1,l]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[a,0],[0,s],[0,1],[u,1],[1,l],[1,0]])},heptagon_tr:function(e,t,n,r,i,o){var a=o.interpolate_a(t,n,o.minV,o.maxV),s=o.interpolate_b(t,n,o.minV,o.maxV),u=o.interpolate_a(t,i,o.minV,o.maxV),l=o.interpolate_b(t,i,o.minV,o.maxV),c=o.interpolate(i,r,o.minV,o.maxV),f=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.bl={path:[[a,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,l],[c,1]],move:{x:0,y:1,enter:"br"}},e.edges.rt={path:[[1,f],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&e.polygons.push([[a,0],[0,u],[0,l],[c,1],[1,1],[1,f],[s,0]])},heptagon_bl:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate(t,i,o.minV,o.maxV),u=o.interpolate_a(i,r,o.minV,o.maxV),l=o.interpolate_b(i,r,o.minV,o.maxV),c=o.interpolate_b(n,r,o.minV,o.maxV),f=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.lb={path:[[0,s],[u,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[l,1],[1,c]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,f],[a,0]],move:{x:0,y:-1,enter:"tl"}}),o.polygons&&e.polygons.push([[0,0],[0,s],[u,1],[l,1],[1,c],[1,f],[a,0]])},heptagon_tl:function(e,t,n,r,i,o){var a=o.interpolate_a(t,n,o.minV,o.maxV),s=o.interpolate_b(t,n,o.minV,o.maxV),u=o.interpolate(t,i,o.minV,o.maxV),l=o.interpolate(i,r,o.minV,o.maxV),c=o.interpolate_b(n,r,o.minV,o.maxV),f=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.bl={path:[[a,0],[0,u]],move:{x:-1,y:0,enter:"rt"}},e.edges.tl={path:[[l,1],[1,c]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,f],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&e.polygons.push([[a,0],[0,u],[0,1],[l,1],[1,c],[1,f],[s,0]])},heptagon_br:function(e,t,n,r,i,o){var a=o.interpolate(t,n,o.minV,o.maxV),s=o.interpolate_a(t,i,o.minV,o.maxV),u=o.interpolate_b(t,i,o.minV,o.maxV),l=o.interpolate_a(i,r,o.minV,o.maxV),c=o.interpolate_b(i,r,o.minV,o.maxV),f=o.interpolate(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.br={path:[[a,0],[0,s]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,u],[l,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[c,1],[1,f]],move:{x:1,y:0,enter:"lb"}}),o.polygons&&e.polygons.push([[a,0],[0,s],[0,u],[l,1],[c,1],[1,f],[1,0]])},octagon:function(e,t,n,r,i,o){var a=o.interpolate_a(t,n,o.minV,o.maxV),s=o.interpolate_b(t,n,o.minV,o.maxV),u=o.interpolate_a(t,i,o.minV,o.maxV),l=o.interpolate_b(t,i,o.minV,o.maxV),c=o.interpolate_a(i,r,o.minV,o.maxV),f=o.interpolate_b(i,r,o.minV,o.maxV),h=o.interpolate_b(n,r,o.minV,o.maxV),d=o.interpolate_a(n,r,o.minV,o.maxV);o.polygons_full&&(e.edges.bl={path:[[a,0],[0,u]],move:{x:-1,y:0,enter:"rb"}},e.edges.lt={path:[[0,l],[c,1]],move:{x:0,y:1,enter:"bl"}},e.edges.tr={path:[[f,1],[1,h]],move:{x:1,y:0,enter:"lt"}},e.edges.rb={path:[[1,d],[s,0]],move:{x:0,y:-1,enter:"tr"}}),o.polygons&&e.polygons.push([[a,0],[0,u],[0,l],[c,1],[f,1],[1,h],[1,d],[s,0]])}};function ws(e,t,n,r){var i,o,a,s=!1,u=null,l=null,c=null,f=null,h=!1,d=[],g=[],p=[];if(!e)throw new Error("data is required");if(null==t)throw new Error("lowerBound is required");if(null==n)throw new Error("bandWidth is required");if(a=function(e){var t,n,r,i,o;for(i=new gs,e=e||{},o=Object.keys(i),t=0;t<o.length;t++)null!=(r=e[n=o[t]])&&(i[n]=r);return i.polygons_full=!i.polygons,i.interpolate=fs,i.interpolate_a=hs,i.interpolate_b=ds,i}(r),e instanceof _s)u=e,l=e.root,c=e.data,a.noQuadTree||(s=!0);else{if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Error("input is neither array of arrays nor object retrieved from 'QuadTree()'");c=e}if(Array.isArray(t)){for(h=!0,a.noQuadTree||(s=!0),i=0;i<t.length;i++)if(isNaN(+t[i]))throw new Error("lowerBound["+i+"] is not a number");if(Array.isArray(n)){if(t.length!==n.length)throw new Error("lowerBound and bandWidth have unequal lengths");for(i=0;i<n.length;i++)if(isNaN(+n[i]))throw new Error("bandWidth["+i+"] is not a number")}else{if(isNaN(+n))throw new Error("bandWidth must be a number");for(d=[],i=0;i<t.length;i++)d.push(n);n=d}}else{if(isNaN(+t))throw new Error("lowerBound must be a number");if(t=[t],isNaN(+n))throw new Error("bandWidth must be a number");n=[n]}return s&&!l&&(u=new _s(c),l=u.root,c=u.data),a.verbose&&(a.polygons?console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"):console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),h&&console.log("MarchingSquaresJS-isoBands: multiple bands requested, returning array of band polygons instead of polygons for a single band")),t.forEach(function(e,t){if(g=[],a.minV=e,a.maxV=e+n[t],a.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n[t])+"]"),a.polygons)if(s)l.cellsInBand(a.minV,a.maxV,!0).forEach(function(e){g=g.concat(ps(Es(c,e.x,e.y,a),e.x,e.y,a))});else for(o=0;o<c.length-1;++o)for(i=0;i<c[0].length-1;++i)g=g.concat(ps(Es(c,i,o,a),i,o,a));else{for(f=[],i=0;i<c[0].length-1;++i)f[i]=[];if(s)l.cellsInBand(a.minV,a.maxV,!1).forEach(function(e){f[e.x][e.y]=Es(c,e.x,e.y,a)});else for(i=0;i<c[0].length-1;++i)for(o=0;o<c.length-1;++o)f[i][o]=Es(c,i,o,a);g=function(e,r,i){var o,a,s,u,l,c,f,h,d,g,p,v,y,m,_,b,x=[],w=e.length-1,k=e[0].length-1,E=[["rt","rb"],["br","bl"],["lb","lt"],["tl","tr"]],N=[0,-1,0,1],S=[-1,0,1,0],M=["bl","lb","lt","tl","tr","rt","rb","br"],I={bl:1,br:1,lb:2,lt:2,tl:3,tr:3,rt:0,rb:0};return function(e,t,n){var r,i,o,a,s;for(r=!0,i=e[0].length,o=e.length,s=0;s<o;s++)if(e[s][0]<t||e[s][0]>n||e[s][i-1]<t||e[s][i-1]>n){r=!1;break}if(r&&(e[o-1][0]<t||e[o-1][0]>n||e[o-1][i-1]<t||e[o-1][i-1]>n)&&(r=!1),r)for(a=0;a<i-1;a++)if(e[0][a]<t||e[0][a]>n||e[o-1][a]<t||e[o-1][a]>n){r=!1;break}return r}(e,i.minV,i.maxV)&&(i.linearRing?x.push([[0,0],[0,w],[k,w],[k,0],[0,0]]):x.push([[0,0],[0,w],[k,w],[k,0]])),r.forEach(function(e,n){e.forEach(function(e,t){for(o=null,s=0;s<8;s++)if(o=M[s],"object"===_r(e.edges[o])){for(a=[],u=e.edges[o],f=o,h=n,d=t,g=!1,p=[n+u.path[0][0],t+u.path[0][1]],a.push(p);!g&&"object"===_r((v=r[h][d]).edges[f]);)if(u=v.edges[f],delete v.edges[f],(_=u.path[1])[0]+=h,_[1]+=d,a.push(_),f=u.move.enter,h+=u.move.x,d+=u.move.y,void 0===r[h]||void 0===r[h][d]){if(y=0,m=0,h===k)h--,y=0;else if(h<0)h++,y=2;else if(d===w)d--,y=3;else{if(!(d<0))throw new Error("Left the grid somewhere in the interior!");d++,y=1}if(h===n&&d===t&&y===I[o]){g=!0,f=o;break}for(;;){if(b=!1,m>4)throw new Error("Direction change counter overflow! This should never happen!");if(void 0!==r[h]&&void 0!==r[h][d])for(v=r[h][d],l=0;l<E[y].length;l++)if(c=E[y][l],"object"===_r(v.edges[c])){u=v.edges[c],a.push(vs(h,d,y,u.path)),f=c,b=!0;break}if(b)break;if(a.push(ys(h,d,y)),d+=S[y],void 0!==r[h+=N[y]]&&void 0!==r[h][d]||(0===y&&d<0||1===y&&h<0||2===y&&d===w||3===y&&h===k)&&(h-=N[y],d-=S[y],y=(y+1)%4,m++),h===n&&d===t&&y===I[o]){g=!0,f=o;break}}}!i.linearRing||a[a.length-1][0]===p[0]&&a[a.length-1][1]===p[1]||a.push(p),x.push(a)}})}),x}(c,f,a)}h?p.push(g):p=g,"function"==typeof a.successCallback&&a.successCallback(p,e,n[t])}),p}function ks(e,t,n,r,i,o){var a=(r+n+t+e)/4;return a>o?2:a<i?0:1}function Es(e,t,n,r){var i,o,a=0,s=e[n+1][t],u=e[n+1][t+1],l=e[n][t+1],c=e[n][t],f=r.minV,h=r.maxV;if(!(isNaN(c)||isNaN(l)||isNaN(u)||isNaN(s))){switch(a|=s<f?0:s>h?128:64,a|=u<f?0:u>h?32:16,a|=l<f?0:l>h?8:4,o=0,i={cval:a=+(a|=c<f?0:c>h?2:1),polygons:[],edges:{},x0:c,x1:l,x2:u,x3:s,x:t,y:n},a){case 85:v.square(i,c,l,u,s,r);case 0:case 170:break;case 169:v.triangle_bl(i,c,l,u,s,r);break;case 166:v.triangle_br(i,c,l,u,s,r);break;case 154:v.triangle_tr(i,c,l,u,s,r);break;case 106:v.triangle_tl(i,c,l,u,s,r);break;case 1:v.triangle_bl(i,c,l,u,s,r);break;case 4:v.triangle_br(i,c,l,u,s,r);break;case 16:v.triangle_tr(i,c,l,u,s,r);break;case 64:v.triangle_tl(i,c,l,u,s,r);break;case 168:v.tetragon_bl(i,c,l,u,s,r);break;case 162:v.tetragon_br(i,c,l,u,s,r);break;case 138:v.tetragon_tr(i,c,l,u,s,r);break;case 42:v.tetragon_tl(i,c,l,u,s,r);break;case 2:v.tetragon_bl(i,c,l,u,s,r);break;case 8:v.tetragon_br(i,c,l,u,s,r);break;case 32:v.tetragon_tr(i,c,l,u,s,r);break;case 128:v.tetragon_tl(i,c,l,u,s,r);break;case 5:v.tetragon_b(i,c,l,u,s,r);break;case 20:v.tetragon_r(i,c,l,u,s,r);break;case 80:v.tetragon_t(i,c,l,u,s,r);break;case 65:v.tetragon_l(i,c,l,u,s,r);break;case 165:v.tetragon_b(i,c,l,u,s,r);break;case 150:v.tetragon_r(i,c,l,u,s,r);break;case 90:v.tetragon_t(i,c,l,u,s,r);break;case 105:v.tetragon_l(i,c,l,u,s,r);break;case 160:v.tetragon_lr(i,c,l,u,s,r);break;case 130:v.tetragon_tb(i,c,l,u,s,r);break;case 10:v.tetragon_lr(i,c,l,u,s,r);break;case 40:v.tetragon_tb(i,c,l,u,s,r);break;case 101:v.pentagon_tr(i,c,l,u,s,r);break;case 149:v.pentagon_tl(i,c,l,u,s,r);break;case 86:v.pentagon_bl(i,c,l,u,s,r);break;case 89:v.pentagon_br(i,c,l,u,s,r);break;case 69:v.pentagon_tr(i,c,l,u,s,r);break;case 21:v.pentagon_tl(i,c,l,u,s,r);break;case 84:v.pentagon_bl(i,c,l,u,s,r);break;case 81:v.pentagon_br(i,c,l,u,s,r);break;case 96:v.pentagon_tr_rl(i,c,l,u,s,r);break;case 24:v.pentagon_rb_bt(i,c,l,u,s,r);break;case 6:v.pentagon_bl_lr(i,c,l,u,s,r);break;case 129:v.pentagon_lt_tb(i,c,l,u,s,r);break;case 74:v.pentagon_tr_rl(i,c,l,u,s,r);break;case 146:v.pentagon_rb_bt(i,c,l,u,s,r);break;case 164:v.pentagon_bl_lr(i,c,l,u,s,r);break;case 41:v.pentagon_lt_tb(i,c,l,u,s,r);break;case 66:v.pentagon_bl_tb(i,c,l,u,s,r);break;case 144:v.pentagon_lt_rl(i,c,l,u,s,r);break;case 36:v.pentagon_tr_bt(i,c,l,u,s,r);break;case 9:v.pentagon_rb_lr(i,c,l,u,s,r);break;case 104:v.pentagon_bl_tb(i,c,l,u,s,r);break;case 26:v.pentagon_lt_rl(i,c,l,u,s,r);break;case 134:v.pentagon_tr_bt(i,c,l,u,s,r);break;case 161:v.pentagon_rb_lr(i,c,l,u,s,r);break;case 37:v.hexagon_lt_tr(i,c,l,u,s,r);break;case 148:v.hexagon_bl_lt(i,c,l,u,s,r);break;case 82:v.hexagon_bl_rb(i,c,l,u,s,r);break;case 73:v.hexagon_tr_rb(i,c,l,u,s,r);break;case 133:v.hexagon_lt_tr(i,c,l,u,s,r);break;case 22:v.hexagon_bl_lt(i,c,l,u,s,r);break;case 88:v.hexagon_bl_rb(i,c,l,u,s,r);break;case 97:v.hexagon_tr_rb(i,c,l,u,s,r);break;case 145:case 25:v.hexagon_lt_rb(i,c,l,u,s,r);break;case 70:case 100:v.hexagon_bl_tr(i,c,l,u,s,r);break;case 17:0===(o=ks(c,l,u,s,f,h))?(v.triangle_bl(i,c,l,u,s,r),v.triangle_tr(i,c,l,u,s,r)):v.hexagon_lt_rb(i,c,l,u,s,r);break;case 68:0===(o=ks(c,l,u,s,f,h))?(v.triangle_tl(i,c,l,u,s,r),v.triangle_br(i,c,l,u,s,r)):v.hexagon_bl_tr(i,c,l,u,s,r);break;case 153:2===(o=ks(c,l,u,s,f,h))?(v.triangle_bl(i,c,l,u,s,r),v.triangle_tr(i,c,l,u,s,r)):v.hexagon_lt_rb(i,c,l,u,s,r);break;case 102:2===(o=ks(c,l,u,s,f,h))?(v.triangle_tl(i,c,l,u,s,r),v.triangle_br(i,c,l,u,s,r)):v.hexagon_bl_tr(i,c,l,u,s,r);break;case 152:2===(o=ks(c,l,u,s,f,h))?(v.triangle_tr(i,c,l,u,s,r),v.tetragon_bl(i,c,l,u,s,r)):v.heptagon_tr(i,c,l,u,s,r);break;case 137:2===(o=ks(c,l,u,s,f,h))?(v.triangle_bl(i,c,l,u,s,r),v.tetragon_tr(i,c,l,u,s,r)):v.heptagon_bl(i,c,l,u,s,r);break;case 98:2===(o=ks(c,l,u,s,f,h))?(v.triangle_tl(i,c,l,u,s,r),v.tetragon_br(i,c,l,u,s,r)):v.heptagon_tl(i,c,l,u,s,r);break;case 38:2===(o=ks(c,l,u,s,f,h))?(v.triangle_br(i,c,l,u,s,r),v.tetragon_tl(i,c,l,u,s,r)):v.heptagon_br(i,c,l,u,s,r);break;case 18:0===(o=ks(c,l,u,s,f,h))?(v.triangle_tr(i,c,l,u,s,r),v.tetragon_bl(i,c,l,u,s,r)):v.heptagon_tr(i,c,l,u,s,r);break;case 33:0===(o=ks(c,l,u,s,f,h))?(v.triangle_bl(i,c,l,u,s,r),v.tetragon_tr(i,c,l,u,s,r)):v.heptagon_bl(i,c,l,u,s,r);break;case 72:0===(o=ks(c,l,u,s,f,h))?(v.triangle_tl(i,c,l,u,s,r),v.tetragon_br(i,c,l,u,s,r)):v.heptagon_tl(i,c,l,u,s,r);break;case 132:0===(o=ks(c,l,u,s,f,h))?(v.triangle_br(i,c,l,u,s,r),v.tetragon_tl(i,c,l,u,s,r)):v.heptagon_br(i,c,l,u,s,r);break;case 136:0===(o=ks(c,l,u,s,f,h))?(v.tetragon_tl(i,c,l,u,s,r),v.tetragon_br(i,c,l,u,s,r)):1===o?v.octagon(i,c,l,u,s,r):(v.tetragon_bl(i,c,l,u,s,r),v.tetragon_tr(i,c,l,u,s,r));break;case 34:0===(o=ks(c,l,u,s,f,h))?(v.tetragon_bl(i,c,l,u,s,r),v.tetragon_tr(i,c,l,u,s,r)):1===o?v.octagon(i,c,l,u,s,r):(v.tetragon_tl(i,c,l,u,s,r),v.tetragon_br(i,c,l,u,s,r))}return i}}var Ns=Object.defineProperty,Ss=Object.getOwnPropertySymbols,Ms=Object.prototype.hasOwnProperty,Is=Object.prototype.propertyIsEnumerable,Os=function(e,t,n){return t in e?Ns(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Cs=function(e,t){for(var n in t||(t={}))Ms.call(t,n)&&Os(e,n,t[n]);if(Ss){var r,i=F(Ss(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Is.call(t,n)&&Os(e,n,t[n])}}catch(e){i.e(e)}finally{i.f()}}return e};function Ps(e,t){if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.zProperty||"elevation",r=t.flip,i=t.flags;be(e,"Point","input must contain Points");for(var o=function(e,n){var r={};N(e,function(e){var t=E(e)[1];r[t]||(r[t]=[]),r[t].push(e)});var t=Object.keys(r).map(function(e){return r[e].sort(function(e,t){return E(e)[0]-E(t)[0]})}),i=t.sort(function(e,t){return n?E(e[0])[1]-E(t[0])[1]:E(t[0])[1]-E(e[0])[1]});return i}(e,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var f=u[c];f.properties[n]?l.push(f.properties[n]):l.push(0),!0===i&&(f.properties.matrixPosition=[s,c])}a.push(l)}return a}function Ts(e){var t=e.map(function(e){return{ring:e,area:Be(z([e]))}});return t.sort(function(e,t){return t.area-e.area}),t.map(function(e){return e.ring})}function Ls(e){for(var t=e.map(function(e){return{lrCoordinates:e,grouped:!1}}),n=[];!As(t);)for(var r=0;r<t.length;r++)if(!t[r].grouped){var i=[];i.push(t[r].lrCoordinates),t[r].grouped=!0;for(var o=z([t[r].lrCoordinates]),a=r+1;a<t.length;a++){if(!t[a].grouped)Rs(z([t[a].lrCoordinates]),o)&&(i.push(t[a].lrCoordinates),t[a].grouped=!0)}n.push(i)}return n}function Rs(e,t){for(var n=Ha(e),r=0;r<n.features.length;r++)if(!V(n.features[r],t))return!1;return!0}function As(e){for(var t=0;t<e.length;t++)if(!1===e[t].grouped)return!1;return!0}var js=Object.defineProperty,Ds=Object.getOwnPropertySymbols,Fs=Object.prototype.hasOwnProperty,zs=Object.prototype.propertyIsEnumerable,Vs=function(e,t,n){return t in e?js(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},qs=function(e,t){for(var n in t||(t={}))Fs.call(t,n)&&Vs(e,n,t[n]);if(Ds){var r,i=F(Ds(t));try{for(i.s();!(r=i.n()).done;){n=r.value;zs.call(t,n)&&Vs(e,n,t[n])}}catch(e){i.e(e)}finally{i.f()}}return e};function Bs(e,t){if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.zProperty||"elevation",r=t.flip,i=t.flags;be(e,"Point","input must contain Points");for(var o=function(e,n){var r={};N(e,function(e){var t=E(e)[1];r[t]||(r[t]=[]),r[t].push(e)});var t=Object.keys(r).map(function(e){return r[e].sort(function(e,t){return E(e)[0]-E(t)[0]})}),i=t.sort(function(e,t){return n?E(e[0])[1]-E(t[0])[1]:E(t[0])[1]-E(e[0])[1]});return i}(e,r),a=[],s=0;s<o.length;s++){for(var u=o[s],l=[],c=0;c<u.length;c++){var f=u[c];f.properties[n]?l.push(f.properties[n]):l.push(0),!0===i&&(f.properties.matrixPosition=[s,c])}a.push(l)}return a}function Gs(e,t,n,r,i,o,a,s){var u,l,c,f,h={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(s-o)*(n-e)-(a-i)*(r-t))?null!==h.x&&null!==h.y&&h:(f=(n-e)*(l=t-o)-(r-t)*(c=e-i),l=((a-i)*l-(s-o)*c)/u,c=f/u,h.x=e+l*(n-e),h.y=t+l*(r-t),l>=0&&l<=1&&(h.onLine1=!0),c>=0&&c<=1&&(h.onLine2=!0),!(!h.onLine1||!h.onLine2)&&[h.x,h.y])}function Ys(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return je(e,function(e,t){var n=t.geometry.coordinates;return e+$(n[0],n[1],r)},0)}function Us(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.steps||64,a=Ws(n),s=Ws(r),u=Array.isArray(e)||"Feature"!==e.type?{}:e.properties;if(a===s)return Y(Vi(e,t,i).geometry.coordinates[0],u);for(var l=a,c=a<s?s:s+360,f=l,h=[],d=0,g=(c-l)/o;f<=c;)h.push(Ee(e,t,f,i).geometry.coordinates),f=l+ ++d*g;return Y(h,u)}function Ws(e){var t=e%360;return t<0&&(t+=360),t}function Zs(e,t,n,r){if(!Z(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===e.type)i=e.geometry.coordinates;else{if("LineString"!==e.type)throw new Error("input must be a LineString Feature or Geometry");i=e.coordinates}for(var a,s,u,l=i.length,c=0,f=0;f<i.length&&!(t>=c&&f===i.length-1);f++){if(c>t&&0===o.length){if(!(a=t-c))return o.push(i[f]),Y(o);s=ke(i[f],i[f-1])-180,u=Ee(i[f],a,s,r),o.push(u.geometry.coordinates)}if(c>=n)return(a=n-c)?(s=ke(i[f],i[f-1])-180,u=Ee(i[f],a,s,r),o.push(u.geometry.coordinates),Y(o)):(o.push(i[f]),Y(o));if(c>=t&&o.push(i[f]),f===i.length-1)return Y(o);c+=$(i[f],i[f+1],r)}if(c<t&&i.length===l)throw new Error("Start position is beyond line");var h=i[i.length-1];return Y([h,h])}function Xs(e){var t=e[0],n=e[1];return[n[0]-t[0],n[1]-t[1]]}function Hs(e,t){return e[0]*t[1]-t[0]*e[1]}function $s(e,t){return!function(e,t){return 0===Hs(Xs(e),Xs(t))}(e,t)&&function(e,t){var n,r,i=e[0],o=Xs(e),a=t[0],s=Xs(t),u=Hs(o,s),l=function(e,t){return[e[0]+t[0],e[1]+t[1]]}(i,function(e,t){return[e*t[0],e*t[1]]}(Hs((r=i,[(n=a)[0]-r[0],n[1]-r[1]]),s)/u,o));return l}(e,t)}function Js(e,t,n){var d=[],g=ue(t,n),p=E(e),v=[];return p.forEach(function(e,t){if(t!==p.length-1){var n=(o=e,a=p[t+1],s=g,u=Math.sqrt((o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1])),l=o[0]+s*(a[1]-o[1])/u,c=a[0]+s*(a[1]-o[1])/u,f=o[1]+s*(o[0]-a[0])/u,h=a[1]+s*(o[0]-a[0])/u,[[l,f],[c,h]]);if(d.push(n),t>0){var r=d[t-1],i=$s(n,r);!1!==i&&(r[1]=i,n[0]=i),v.push(r[0]),t===p.length-2&&(v.push(n[0]),v.push(n[1]))}2===p.length&&(v.push(n[0]),v.push(n[1]))}var o,a,s,u,l,c,f,h}),Y(v,e.properties)}function Ks(e){var t=e[0],n=e[1],r=e[2],i=e[3];if($(e.slice(0,2),[r,n])>=$(e.slice(0,2),[t,i])){var o=(n+i)/2;return[t,o-(r-t)/2,r,o+(r-t)/2]}var a=(t+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function Qs(e,t){if(!Z(t=null!=t?t:{}))throw new Error("options is invalid");var n=t.precision,r=t.coordinates,i=t.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!e)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(e=JSON.parse(JSON.stringify(e)));var o=Math.pow(10,n);return w(e,function(e){!function(e,t,n){e.length>n&&e.splice(n,e.length);for(var r=0;r<e.length;r++)e[r]=Math.round(e[r]*t)/t}(e,o,r)}),e}function eu(r,e){var i=[],o=ln();return x(e,function(e){if(i.forEach(function(e,t){e.id=t}),i.length){var t=o.search(e);if(t.features.length){var n=nu(e,t);i=i.filter(function(e){return e.id!==n.id}),o.remove(n),N(tu(n,e),function(e){i.push(e),o.insert(e)})}}else(i=tu(r,e).features).forEach(function(e){e.bbox||(e.bbox=Ks(J(e)))}),o.load(U(i))}),U(i)}function tu(e,o){var a=[],t=E(e)[0],n=E(e)[e.geometry.coordinates.length-1];if(ru(t,X(o))||ru(n,X(o)))return U([e]);var r=ln(),i=cn(e);r.load(i);var s=r.search(o);if(!s.features.length)return U([e]);var u=nu(o,s),l=Ce(i,function(e,t,n){var r=E(t)[1],i=X(o);return n===u.id?(e.push(i),a.push(Y(e)),ru(i,r)?[i]:[i,r]):(e.push(r),e)},[t]);return l.length>1&&a.push(Y(l)),U(a)}function nu(n,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var r,i=1/0;return N(e,function(e){var t=wn(e,n).properties.dist;t<i&&(r=e,i=t)}),r}function ru(e,t){return e[0]===t[0]&&e[1]===t[1]}function iu(e,t,n,r){t=t||("Feature"===e.type?e.properties:{});var i=H(e),o=i.coordinates,a=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(o=ou(o)),z([o],t);case"MultiLineString":var s=[],u=0;return o.forEach(function(e){if(n&&(e=ou(e)),r){var t=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.abs(t-r)*Math.abs(n-i)}(J(Y(e)));t>u?(s.unshift(e),u=t):s.push(e)}else s.push(e)}),z(s,t);default:throw new Error("geometry type "+a+" is not supported")}}function ou(e){var t=e[0],n=t[0],r=t[1],i=e[e.length-1],o=i[0],a=i[1];return n===o&&r===a||e.push(t),e}function au(e){return re(e)}function su(e){var t=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]];return e&&(t="Feature"===e.type?e.geometry.coordinates:e.coordinates),z(t)}function uu(e){var t,n=0,r=F(e);try{for(r.s();!(t=r.n()).done;){n+=t.value}}catch(e){r.e(e)}finally{r.f()}return n/e.length}var lu=Object.defineProperty,cu=Object.defineProperties,fu=Object.getOwnPropertyDescriptors,hu=Object.getOwnPropertySymbols,du=Object.prototype.hasOwnProperty,gu=Object.prototype.propertyIsEnumerable,pu=function(e,t,n){return t in e?lu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},vu=function(e,t){for(var n in t||(t={}))du.call(t,n)&&pu(e,n,t[n]);if(hu){var r,i=F(hu(t));try{for(i.s();!(r=i.n()).done;){n=r.value;gu.call(t,n)&&pu(e,n,t[n])}}catch(e){i.e(e)}finally{i.f()}}return e},yu=function(e,t){return cu(e,fu(t))};function mu(r,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!r)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var o=1/0,a=0;N(e,function(e,t){var n=$(r,e,i);n<o&&(a=t,o=n)});var t=p(e.features[a]);return yu(vu({},t),{properties:yu(vu({},t.properties),{featureIndex:a,distanceToPoint:o})})}function _u(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null!=(n=i.method)?n:"geodesic",a=null!=(r=i.units)?r:"kilometers";if(!e)throw new Error("pt is required");if(Array.isArray(e)?e=G(e):"Point"===e.type?e=B(e):_e(e,"Point","point"),!t)throw new Error("line is required");Array.isArray(t)?t=Y(t):"LineString"===t.type?t=B(t):_e(t,"LineString","line");var s=1/0,u=e.geometry.coordinates;return Ae(t,function(e){if(e){var t=e.geometry.coordinates[0],n=e.geometry.coordinates[1],r=function(e,t,n,r){if("geodesic"===r.method){return wn(Y([t,n]).geometry,e,{units:"degrees"}).properties.dist}var i=[n[0]-t[0],n[1]-t[1]],o=[e[0]-t[0],e[1]-t[1]],a=bu(o,i);if(a<=0)return Ya(e,t,{units:"degrees"});var s=bu(i,i);if(s<=a)return Ya(e,n,{units:"degrees"});var u=a/s,l=[t[0]+u*i[0],t[1]+u*i[1]];return Ya(e,l,{units:"degrees"})}(u,t,n,{method:o});r<s&&(s=r)}}),he(s,"degrees",a)}function bu(e,t){return e[0]*t[0]+e[1]*t[1]}var xu=Object.defineProperty,wu=Object.getOwnPropertySymbols,ku=Object.prototype.hasOwnProperty,Eu=Object.prototype.propertyIsEnumerable,Nu=function(e,t,n){return t in e?xu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Su=function(e,t){for(var n in t||(t={}))ku.call(t,n)&&Nu(e,n,t[n]);if(wu){var r,i=F(wu(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Eu.call(t,n)&&Nu(e,n,t[n])}}catch(e){i.e(e)}finally{i.f()}}return e};function Mu(e,t,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))+Math.sqrt((i-e)*(i-e)+(o-t)*(o-t))}function Iu(e,t){var o=[];return N(e,function(n){var r=!1;if("Point"===n.geometry.type)Te(t,function(e){V(n,e)&&(r=!0)}),r&&o.push(n);else{if("MultiPoint"!==n.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];Te(t,function(t){w(n,function(e){V(e,t)&&(r=!0,i.push(e))})}),r&&o.push(ne(i,n.properties))}}),U(o)}function Ou(e,t,n){var r=t[0]-e[0],i=t[1]-e[1],o=n[0]-t[0];return function(e){return(e>0)-(e<0)||+e}(r*(n[1]-t[1])-o*i)}function Cu(t,e){return e.geometry.coordinates[0].every(function(e){return V(G(e),t)})}var Pu=function(){return i(function e(t){d(this,e),this.id=e.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1},[{key:"removeInnerEdge",value:function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})}},{key:"removeOuterEdge",value:function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})}},{key:"addOuterEdge",value:function(e){this.outerEdges.push(e),this.outerEdgesSorted=!1}},{key:"sortOuterEdges",value:function(){var o=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,t){var n=e.to,r=t.to;if(n.coordinates[0]-o.coordinates[0]>=0&&r.coordinates[0]-o.coordinates[0]<0)return 1;if(n.coordinates[0]-o.coordinates[0]<0&&r.coordinates[0]-o.coordinates[0]>=0)return-1;if(n.coordinates[0]-o.coordinates[0]==0&&r.coordinates[0]-o.coordinates[0]==0)return n.coordinates[1]-o.coordinates[1]>=0||r.coordinates[1]-o.coordinates[1]>=0?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var i=Ou(o.coordinates,n.coordinates,r.coordinates);return i<0?1:i>0?-1:Math.pow(n.coordinates[0]-o.coordinates[0],2)+Math.pow(n.coordinates[1]-o.coordinates[1],2)-(Math.pow(r.coordinates[0]-o.coordinates[0],2)+Math.pow(r.coordinates[1]-o.coordinates[1],2))}),this.outerEdgesSorted=!0)}},{key:"getOuterEdges",value:function(){return this.sortOuterEdges(),this.outerEdges}},{key:"getOuterEdge",value:function(e){return this.sortOuterEdges(),this.outerEdges[e]}},{key:"addInnerEdge",value:function(e){this.innerEdges.push(e)}}],[{key:"buildId",value:function(e){return e.join(",")}}])}(),Tu=function(){function n(e,t){d(this,n),this.from=e,this.to=t,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return i(n,[{key:"getSymetric",value:function(){return this.symetric||(this.symetric=new n(this.to,this.from),this.symetric.symetric=this),this.symetric}},{key:"deleteEdge",value:function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)}},{key:"isEqual",value:function(e){return this.from.id===e.from.id&&this.to.id===e.to.id}},{key:"toString",value:function(){return"Edge { ".concat(this.from.id," -> ").concat(this.to.id," }")}},{key:"toLineString",value:function(){return Y([this.from.coordinates,this.to.coordinates])}},{key:"compareTo",value:function(e){return Ou(e.from.coordinates,e.to.coordinates,this.to.coordinates)}}])}(),Lu=function(){return i(function e(){d(this,e),this.edges=[],this.polygon=void 0,this.envelope=void 0},[{key:"push",value:function(e){this.edges.push(e),this.polygon=this.envelope=void 0}},{key:"get",value:function(e){return this.edges[e]}},{key:"length",get:function(){return this.edges.length}},{key:"forEach",value:function(e){this.edges.forEach(e)}},{key:"map",value:function(e){return this.edges.map(e)}},{key:"some",value:function(e){return this.edges.some(e)}},{key:"isValid",value:function(){return!0}},{key:"isHole",value:function(){var r=this,e=this.edges.reduce(function(e,t,n){return t.from.coordinates[1]>r.edges[e].from.coordinates[1]&&(e=n),e},0),t=(0===e?this.length:e)-1,n=(e+1)%this.length,i=Ou(this.edges[t].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===i?this.edges[t].from.coordinates[0]>this.edges[n].from.coordinates[0]:i>0}},{key:"toMultiPoint",value:function(){return ne(this.edges.map(function(e){return e.from.coordinates}))}},{key:"toPolygon",value:function(){if(this.polygon)return this.polygon;var e=this.edges.map(function(e){return e.from.coordinates});return e.push(this.edges[0].from.coordinates),this.polygon=z([e])}},{key:"getEnvelope",value:function(){return this.envelope?this.envelope:this.envelope=Xa(this.toPolygon())}},{key:"inside",value:function(e){return V(e,this.toPolygon())}}],[{key:"findEdgeRingContaining",value:function(h,e){var d,g,p=h.getEnvelope();return e.forEach(function(e){var t,n,r,i,o,a,s=e.getEnvelope();if((g&&(d=g.getEnvelope()),n=p,r=(t=s).geometry.coordinates[0].map(function(e){return e[0]}),i=t.geometry.coordinates[0].map(function(e){return e[1]}),o=n.geometry.coordinates[0].map(function(e){return e[0]}),a=n.geometry.coordinates[0].map(function(e){return e[1]}),Math.max.apply(null,r)!==Math.max.apply(null,o)||Math.max.apply(null,i)!==Math.max.apply(null,a)||Math.min.apply(null,r)!==Math.min.apply(null,o)||Math.min.apply(null,i)!==Math.min.apply(null,a))&&Cu(s,p)){var u,l,c=F(h.map(function(e){return e.from.coordinates}));try{var f=function(){var r=l.value;e.some(function(e){return t=r,n=e.from.coordinates,t[0]===n[0]&&t[1]===n[1];var t,n})||(u=r)};for(c.s();!(l=c.n()).done;)f()}catch(e){c.e(e)}finally{c.f()}u&&e.inside(G(u))&&(g&&!Cu(d,s)||(g=e))}}),g}}])}();var Ru=function(){function t(){d(this,t),this.edges=[],this.nodes={}}return i(t,[{key:"getNode",value:function(e){var t=Pu.buildId(e),n=this.nodes[t];return n||(n=this.nodes[t]=new Pu(e)),n}},{key:"addEdge",value:function(e,t){var n=new Tu(e,t),r=n.getSymetric();this.edges.push(n),this.edges.push(r)}},{key:"deleteDangles",value:function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})}},{key:"_removeIfDangle",value:function(e){var t=this;if(e.innerEdges.length<=1){var n=e.getOuterEdges().map(function(e){return e.to});this.removeNode(e),n.forEach(function(e){return t._removeIfDangle(e)})}}},{key:"deleteCutEdges",value:function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})}},{key:"_computeNextCWEdges",value:function(n){var t=this;void 0===n?Object.keys(this.nodes).forEach(function(e){return t._computeNextCWEdges(t.nodes[e])}):n.getOuterEdges().forEach(function(e,t){n.getOuterEdge((0===t?n.getOuterEdges().length:t)-1).symetric.next=e})}},{key:"_computeNextCCWEdges",value:function(e,t){for(var n,r,i=e.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,l=void 0;a.label===t&&(u=a),s.label===t&&(l=s),u&&l&&(l&&(r=l),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)}},{key:"_findLabeledEdgeRings",value:function(){var n=[],r=0;return this.edges.forEach(function(e){if(!(e.label>=0)){n.push(e);var t=e;do{t.label=r,t=t.next}while(!e.isEqual(t));r++}}),n}},{key:"getEdgeRings",value:function(){var n=this;this._computeNextCWEdges(),this.edges.forEach(function(e){e.label=void 0}),this._findLabeledEdgeRings().forEach(function(t){n._findIntersectionNodes(t).forEach(function(e){n._computeNextCCWEdges(e,t.label)})});var t=[];return this.edges.forEach(function(e){e.ring||t.push(n._findEdgeRing(e))}),t}},{key:"_findIntersectionNodes",value:function(n){var e=[],r=n,t=function(){var t=0;r.from.getOuterEdges().forEach(function(e){e.label===n.label&&++t}),t>1&&e.push(r.from),r=r.next};do{t()}while(!n.isEqual(r));return e}},{key:"_findEdgeRing",value:function(e){var t=e,n=new Lu;do{n.push(t),t.ring=n,t=t.next}while(!e.isEqual(t));return n}},{key:"removeNode",value:function(e){var t=this;e.getOuterEdges().forEach(function(e){return t.removeEdge(e)}),e.innerEdges.forEach(function(e){return t.removeEdge(e)}),delete this.nodes[e.id]}},{key:"removeEdge",value:function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()}}],[{key:"fromGeoJson",value:function(e){!function(e){if(!e)throw new Error("No geojson passed");if("FeatureCollection"!==e.type&&"GeometryCollection"!==e.type&&"MultiLineString"!==e.type&&"LineString"!==e.type&&"Feature"!==e.type)throw new Error("Invalid input type '".concat(e.type,"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature"))}(e);var i=new t;return x(e,function(e){_e(e,"LineString","Graph::fromGeoJson"),Me(e,function(e,t){if(e){var n=i.getNode(e),r=i.getNode(t);i.addEdge(n,r)}return t})}),i}}])}();function Au(e,l){var c,f;w(e,function(e,t,n,r,i){if(f!==i)l.push([]);else{var o=c[0],a=c[1],s=e[0],u=e[1];l[i].push([.75*o+.25*s,.75*a+.25*u]),l[i].push([.25*o+.75*s,.25*a+.75*u])}c=e,f=i},!1),l.forEach(function(e){e.push(e[0])})}function ju(e,l){var c,f,h;w(e,function(e,t,n,r,i){if(f!==r)l.push([[]]);else if(h!==i)l[r].push([]);else{var o=c[0],a=c[1],s=e[0],u=e[1];l[r][i].push([.75*o+.25*s,.75*a+.25*u]),l[r][i].push([.25*o+.75*s,.25*a+.75*u])}c=e,f=r,h=i},!1),l.forEach(function(e){e.forEach(function(e){e.push(e[0])})})}function Du(e,t,n,r,i){for(var o=0;o<e.length;o++){var a=e[o],s=e[o+1];o===e.length-1&&(s=e[0]);var u=zu(a,s,t);n<=0&&u>0?zu(t,a,r)<0||(r=a):n>0&&u<=0&&(Fu(t,a,i)||(i=a)),n=u}return[r,i]}function Fu(e,t,n){return zu(e,t,n)>0}function zu(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function Vu(e){return Bu(e,"mercator",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function qu(e){return Bu(e,"wgs84",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}function Bu(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(t=t||{}).mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&W(e[0])?e="mercator"===n?Gu(e):Yu(e):(!0!==r&&(e=p(e)),w(e,function(e){var t="mercator"===n?Gu(e):Yu(e);e[0]=t[0],e[1]=t[1]})),e}function Gu(e){var t=Math.PI/180,n=6378137,r=20037508.342789244,i=Math.abs(e[0])<=180?e[0]:e[0]-360*function(e){return e<0?-1:e>0?1:0}(e[0]),o=[n*i*t,n*Math.log(Math.tan(.25*Math.PI+.5*e[1]*t))];return o[0]>r&&(o[0]=r),o[0]<-r&&(o[0]=-r),o[1]>r&&(o[1]=r),o[1]<-r&&(o[1]=-r),o}function Yu(e){var t=180/Math.PI,n=6378137;return[e[0]*t/n,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/n)))*t]}var Uu=Object.freeze({__proto__:null,toMercator:Vu,toWgs84:qu});var Wu={20:1.07275,15:1.13795,10:1.22385,5:1.3581,2:1.51743,1:1.62762};function Zu(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function Xu(e){var n=[];return function e(t){return 0===t||1===t?1:n[t]>0?n[t]:n[t]=e(t-1)*t}(e)}function Hu(e){return Ju(e),$u(e)}function $u(e){return Array.isArray(e)?nl(e):e&&e.bbox?nl(e.bbox):[360*tl(),180*tl()]}function Ju(e){null!=e&&(Array.isArray(e)?ge(e):null!=e.bbox&&ge(e.bbox))}function Ku(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ju(t.bbox),null==e&&(e=1);for(var n=[],r=0;r<e;r++)n.push(G($u(t.bbox)));return U(n)}function Qu(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ju(i.bbox),null==e&&(e=1),void 0!==i.bbox&&null!==i.bbox||(i.bbox=[-180,-90,180,90]),W(i.num_vertices)&&void 0!==i.num_vertices||(i.num_vertices=10),W(i.max_radial_length)&&void 0!==i.max_radial_length||(i.max_radial_length=10);var t=Math.abs(i.bbox[0]-i.bbox[2]),n=Math.abs(i.bbox[1]-i.bbox[3]),r=Math.min(t/2,n/2);if(i.max_radial_length>r)throw new Error("max_radial_length is greater than the radius of the bbox");for(var o=[i.bbox[0]+i.max_radial_length,i.bbox[1]+i.max_radial_length,i.bbox[2]-i.max_radial_length,i.bbox[3]-i.max_radial_length],a=[],s=function(){var t,n=[],r=M(Array(i.num_vertices+1)).map(Math.random);r.forEach(function(e,t,n){n[t]=t>0?e+n[t-1]:e}),r.forEach(function(e){e=2*e*Math.PI/r[r.length-1];var t=Math.random();n.push([t*(i.max_radial_length||10)*Math.sin(e),t*(i.max_radial_length||10)*Math.cos(e)])}),n[n.length-1]=n[0],n=n.reverse().map((t=$u(o),function(e){return[e[0]+t[0],e[1]+t[1]]})),a.push(z([n]))},u=0;u<e;u++)s();return U(a)}function el(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.bbox;Ju(n);var r=t.num_vertices,i=t.max_length,o=t.max_rotation;null==e&&(e=1),(!W(r)||void 0===r||r<2)&&(r=10),W(i)&&void 0!==i||(i=1e-4),W(o)&&void 0!==o||(o=Math.PI/8);for(var a=[],s=0;s<e;s++){for(var u=[$u(n)],l=0;l<r-1;l++){var c=(0===l?2*Math.random()*Math.PI:Math.tan((u[l][1]-u[l-1][1])/(u[l][0]-u[l-1][0])))+(Math.random()-.5)*o*2,f=Math.random()*i;u.push([u[l][0]+f*Math.cos(c),u[l][1]+f*Math.sin(c)])}a.push(Y(u))}return U(a)}function tl(){return Math.random()-.5}function nl(e){return[Math.random()*(e[2]-e[0])+e[0],Math.random()*(e[3]-e[1])+e[1]]}var rl=Object.freeze({__proto__:null,randomLineString:el,randomPoint:Ku,randomPolygon:Qu,randomPosition:Hu});function il(e,t){switch("Feature"===e.type?e.geometry.type:e.type){case"GeometryCollection":return Te(e,function(e){il(e,t)}),e;case"LineString":return ol(E(e),t),e;case"Polygon":return al(E(e),t),e;case"MultiLineString":return E(e).forEach(function(e){ol(e,t)}),e;case"MultiPolygon":return E(e).forEach(function(e){al(e,t)}),e;case"Point":case"MultiPoint":return e}}function ol(e,t){Qe(e)===t&&e.reverse()}function al(e,t){Qe(e[0])!==t&&e[0].reverse();for(var n=1;n<e.length;n++)Qe(e[n])===t&&e[n].reverse()}function sl(e){var t=e%360;return t<0&&(t+=360),t}function ul(n,r,e){if(!Z(e=e||{}))throw new Error("options is invalid");var i=e.origin||"centroid",t=e.mutate||!1;if(!n)throw new Error("geojson required");if("number"!=typeof r||r<=0)throw new Error("invalid factor");var o=Array.isArray(i)||"object"===_r(i);return!0!==t&&(n=p(n)),"FeatureCollection"!==n.type||o?ll(n,r,i):(N(n,function(e,t){n.features[t]=ll(e,r,i)}),n)}function ll(e,i,t){var n="Point"===xe(e),o=function(e,t){null==t&&(t="centroid");if(Array.isArray(t)||"object"===_r(t))return X(t);var n=e.bbox?e.bbox:J(e,{recompute:!0}),r=n[0],i=n[1],o=n[2],a=n[3];switch(t){case"sw":case"southwest":case"westsouth":case"bottomleft":return G([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return G([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return G([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return G([o,a]);case"center":return Un(e);case void 0:case null:case"centroid":return _i(e);default:throw new Error("invalid origin")}}(e,t);return 1===i||n||(w(e,function(e){var t=Ya(o,e),n=Ne(o,e),r=E(Ga(o,t*i,n));e[0]=r[0],e[1]=r[1],3===e.length&&(e[2]*=i)}),delete e.bbox),e}function cl(e){for(var t=e,n=[];t.parent;)n.unshift(t),t=t.parent;return n}var fl={search:function(e,t,n,r){var i;e.cleanDirty();var o=(r=r||{}).heuristic||fl.heuristics.manhattan,a=null!=(i=r.closest)&&i,s=new gl(function(e){return e.f}),u=t;for(t.h=o(t,n),s.push(t);s.size()>0;){var l=s.pop();if(l===n)return cl(l);l.closed=!0;for(var c=e.neighbors(l),f=0,h=c.length;f<h;++f){var d=c[f];if(!d.closed&&!d.isWall()){var g=l.g+d.getCost(l),p=d.visited;(!p||g<d.g)&&(d.visited=!0,d.parent=l,d.h=d.h||o(d,n),d.g=g,d.f=d.g+d.h,e.markDirty(d),a&&(d.h<u.h||d.h===u.h&&d.g<u.g)&&(u=d),p?s.rescoreElement(d):s.push(d))}}}return a?cl(u):[]},heuristics:{manhattan:function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},diagonal:function(e,t){var n=Math.sqrt(2),r=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}};function hl(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(var n=0;n<e.length;n++){this.grid[n]=[];for(var r=0,i=e[n];r<i.length;r++){var o=new dl(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function dl(e,t,n){this.x=e,this.y=t,this.weight=n}function gl(e){this.content=[],this.scoreFunction=e}function pl(e,t){for(var n=0;n<t.features.length;n++)if(V(e,t.features[n]))return!0;return!1}function vl(e,t,n){var r=t[0],i=t[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((e[0]-r)*o+(e[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=e[0]-r)*o+(a=e[1]-i)*a}function yl(e,t,n,r,i){for(var o,a=r,s=t+1;s<n;s++){var u=vl(e[s],e[t],e[n]);u>a&&(o=s,a=u)}a>r&&(o-t>1&&yl(e,t,o,r,i),i.push(e[o]),n-o>1&&yl(e,o,n,r,i))}function ml(e,t){var n=e.length-1,r=[e[0]];return yl(e,0,n,t,r),r.push(e[n]),r}function _l(e,t,n){if(e.length<=2)return e;var r=void 0!==t?t*t:1;return e=n?e:function(e,t){for(var n,r,i,o,a,s=e[0],u=[s],l=1,c=e.length;l<c;l++)n=e[l],i=s,o=void 0,a=void 0,o=(r=n)[0]-i[0],a=r[1]-i[1],o*o+a*a>t&&(u.push(n),s=n);return s!==n&&u.push(n),u}(e,r),e=ml(e,r)}function bl(e,r,i){return e.map(function(e){if(e.length<4)throw new Error("invalid polygon");for(var t=r,n=_l(e,t,i);!xl(n);)n=_l(e,t-=.01*t,i);return n[n.length-1][0]===n[0][0]&&n[n.length-1][1]===n[0][1]||n.push(n[0]),n})}function xl(e){return!(e.length<3)&&!(3===e.length&&e[2][0]===e[0][0]&&e[2][1]===e[0][1])}function wl(e,t){return{x:e[0]-t[0],y:e[1]-t[1]}}hl.prototype.init=function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)fl.cleanNode(this.nodes[e])},hl.prototype.cleanDirty=function(){for(var e=0;e<this.dirtyNodes.length;e++)fl.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]},hl.prototype.markDirty=function(e){this.dirtyNodes.push(e)},hl.prototype.neighbors=function(e){var t=[],n=e.x,r=e.y,i=this.grid;return i[n-1]&&i[n-1][r]&&t.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&t.push(i[n+1][r]),i[n]&&i[n][r-1]&&t.push(i[n][r-1]),i[n]&&i[n][r+1]&&t.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&t.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&t.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&t.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&t.push(i[n+1][r+1])),t},hl.prototype.toString=function(){for(var e,t,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(e=[],n=0,r=(t=o[a]).length;n<r;n++)e.push(t[n].weight);i.push(e.join(" "))}return i.join("\n")},dl.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},dl.prototype.getCost=function(e){return e&&e.x!==this.x&&e.y!==this.y?1.41421*this.weight:this.weight},dl.prototype.isWall=function(){return 0===this.weight},gl.prototype={push:function(e){this.content.push(e),this.sinkDown(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e},remove:function(e){var t=this.content.indexOf(e),n=this.content.pop();t!==this.content.length-1&&(this.content[t]=n,this.scoreFunction(n)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))},size:function(){return this.content.length},rescoreElement:function(e){this.sinkDown(this.content.indexOf(e))},sinkDown:function(e){for(var t=this.content[e];e>0;){var n=(e+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},bubbleUp:function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);;){var i,o=e+1<<1,a=o-1,s=null;if(a<t){var u=this.content[a];(i=this.scoreFunction(u))<r&&(s=a)}if(o<t){var l=this.content[o];this.scoreFunction(l)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[e]=this.content[s],this.content[s]=n,e=s}}};var kl,El={exports:{}};var Nl=function(){if(kl)return El.exports;function e(e,t,n){n=n||2;var r,i,o,a,s,u,l,c=t&&t.length,f=c?t[0]*n:e.length,h=p(e,0,f,n,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=p(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(b(a));for(s.sort(y),i=0;i<s.length;i++)n=m(s[i],n);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var g=n;g<f;g+=n)(s=e[g])<r&&(r=s),(u=e[g+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?32767/l:0}return v(h,d,n,r,i,l,0),d}function p(e,t,n,r,i){var o,a;if(i===C(e,t,n,r)>0)for(o=t;o<n;o+=r)a=M(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=M(o,e[o],e[o+1],a);return a&&s(a,a.next)&&(I(a),a=a.next),a}function c(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!s(r,r.next)&&0!==k(r.prev,r,r.next))r=r.next;else{if(I(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function v(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=x(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?h(e,r,i,o):f(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),I(e),e=u.next,l=u.next;else if((e=u)===l){a?1===a?v(e=d(c(e),t,n),t,n,r,i,o,2):2===a&&g(e,t,n,r,i,o):v(c(e),t,n,r,i,o,1);break}}}function f(e){var t=e.prev,n=e,r=e.next;if(k(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,s=t.y,u=n.y,l=r.y,c=i<o?i<a?i:a:o<a?o:a,f=s<u?s<l?s:l:u<l?u:l,h=i>o?i>a?i:a:o>a?o:a,d=s>u?s>l?s:l:u>l?u:l,g=r.next;g!==t;){if(g.x>=c&&g.x<=h&&g.y>=f&&g.y<=d&&w(i,s,o,u,a,l,g.x,g.y)&&k(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function h(e,t,n,r){var i=e.prev,o=e,a=e.next;if(k(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,l=a.x,c=i.y,f=o.y,h=a.y,d=s<u?s<l?s:l:u<l?u:l,g=c<f?c<h?c:h:f<h?f:h,p=s>u?s>l?s:l:u>l?u:l,v=c>f?c>h?c:h:f>h?f:h,y=x(d,g,t,n,r),m=x(p,v,t,n,r),_=e.prevZ,b=e.nextZ;_&&_.z>=y&&b&&b.z<=m;){if(_.x>=d&&_.x<=p&&_.y>=g&&_.y<=v&&_!==i&&_!==a&&w(s,c,u,f,l,h,_.x,_.y)&&k(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=d&&b.x<=p&&b.y>=g&&b.y<=v&&b!==i&&b!==a&&w(s,c,u,f,l,h,b.x,b.y)&&k(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=y;){if(_.x>=d&&_.x<=p&&_.y>=g&&_.y<=v&&_!==i&&_!==a&&w(s,c,u,f,l,h,_.x,_.y)&&k(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=m;){if(b.x>=d&&b.x<=p&&b.y>=g&&b.y<=v&&b!==i&&b!==a&&w(s,c,u,f,l,h,b.x,b.y)&&k(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function d(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!s(i,o)&&a(i,r,r.next,o)&&N(i,o)&&N(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),I(r),I(r.next),r=e=o),r=r.next}while(r!==e);return c(r)}function g(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&l(a,s)){var u=S(a,s);return a=c(a,a.next),u=c(u,u.next),v(a,t,n,r,i,o,0),void v(u,t,n,r,i,o,0)}s=s.next}a=a.next}while(a!==e)}function y(e,t){return e.x-t.x}function m(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var u,l=n,c=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&w(o<f?i:a,o,c,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),N(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&_(n,r)))&&(n=r,h=u)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=S(n,e);return c(r,r.next),c(n,n.next)}function _(e,t){return k(e.prev,e,t.prev)<0&&k(t.next,e,e.next)<0}function x(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function b(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function w(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function l(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&a(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(N(e,t)&&N(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(k(e.prev,e,t.prev)||k(e,t.prev,t))||s(e,t)&&k(e.prev,e,e.next)>0&&k(t.prev,t,t.next)>0)}function k(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function s(e,t){return e.x===t.x&&e.y===t.y}function a(e,t,n,r){var i=E(k(e,t,n)),o=E(k(e,t,r)),a=E(k(n,r,e)),s=E(k(n,r,t));return i!==o&&a!==s||(!(0!==i||!u(e,n,t))||(!(0!==o||!u(e,r,t))||(!(0!==a||!u(n,e,r))||!(0!==s||!u(n,t,r)))))}function u(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function E(e){return e>0?1:e<0?-1:0}function N(e,t){return k(e.prev,e,e.next)<0?k(e,t,e.next)>=0&&k(e,e.prev,t)>=0:k(e,t,e.prev)<0||k(e,e.next,t)<0}function S(e,t){var n=new O(e.i,e.x,e.y),r=new O(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function M(e,t,n,r){var i=new O(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function I(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function O(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}return kl=1,El.exports=e,El.exports.default=e,e.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(C(e,0,o,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;a-=Math.abs(C(e,l,c,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,d=r[s+1]*n,g=r[s+2]*n;f+=Math.abs((e[h]-e[g])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[g+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},e.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n},El.exports}(),Sl=In(Nl);function Ml(e){var r=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}(e),i=Sl(r.vertices,r.holes,2),t=[],o=[];i.forEach(function(e,t){var n=i[t];o.push([r.vertices[2*n],r.vertices[2*n+1]])});for(var n=0;n<o.length;n+=3){var a=o.slice(n,n+3);a.push(o[n]),t.push(z([a]))}return t}function Il(e,d,t){if("Polygon"!==e.geometry.type)throw new Error("The input feature must be a Polygon");void 0===t&&(t=1);var g=e.geometry.coordinates,p=[],v={};if(t){for(var n=[],r=0;r<g.length;r++)for(var i=0;i<g[r].length-1;i++)n.push(f(r,i));var o=new Xt;o.load(n)}for(var a=0;a<g.length;a++)for(var s=0;s<g[a].length-1;s++){if(t)o.search(f(a,s)).forEach(function(e){var t=e.ring,n=e.edge;c(a,s,t,n)});else for(var u=0;u<g.length;u++)for(var l=0;l<g[u].length-1;l++)c(a,s,u,l)}return d||(p={type:"Feature",geometry:{type:"MultiPoint",coordinates:p}}),p;function c(e,t,n,r){var i,o,a=g[e][t],s=g[e][t+1],u=g[n][r],l=g[n][r+1],c=function(e,t,n,r){if(Ol(e,n)||Ol(e,r)||Ol(t,n)||Ol(r,n))return null;var i=e[0],o=e[1],a=t[0],s=t[1],u=n[0],l=n[1],c=r[0],f=r[1],h=(i-a)*(l-f)-(o-s)*(u-c);if(0===h)return null;var d=((i*s-o*a)*(u-c)-(i-a)*(u*f-l*c))/h,g=((i*s-o*a)*(l-f)-(o-s)*(u*f-l*c))/h;return[d,g]}(a,s,u,l);if(null!==c&&(i=s[0]!==a[0]?(c[0]-a[0])/(s[0]-a[0]):(c[1]-a[1])/(s[1]-a[1]),o=l[0]!==u[0]?(c[0]-u[0])/(l[0]-u[0]):(c[1]-u[1])/(l[1]-u[1]),!(i>=1||i<=0||o>=1||o<=0))){var f=c,h=!v[f];h&&(v[f]=!0),d?p.push(d(c,e,t,a,s,i,n,r,u,l,o,h)):p.push(c)}}function f(e,t){var n,r,i,o,a=g[e][t],s=g[e][t+1];return a[0]<s[0]?(n=a[0],r=s[0]):(n=s[0],r=a[0]),a[1]<s[1]?(i=a[1],o=s[1]):(i=s[1],o=a[1]),{minX:n,minY:i,maxX:r,maxY:o,ring:e,edge:t}}}function Ol(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!Ol(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}function Cl(e){if("Feature"!=e.type)throw new Error("The input must a geojson object of type Feature");if(void 0===e.geometry||null==e.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=e.geometry.type)throw new Error("The input must be a geojson Polygon");for(var t=e.geometry.coordinates.length,n=[],r=0;r<t;r++){var i=e.geometry.coordinates[r];Al(i[0],i[i.length-1])||i.push(i[0]);for(var o=0;o<i.length-1;o++)n.push(i[o])}if(!function(e){for(var t={},n=1,r=0,i=e.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(t,e[r])){n=0;break}t[e[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var a=n.length,s=Il(e,function(e,t,n,r,i,o,a,s,u,l,c,f){return[e,t,n,r,i,o,a,s,u,l,c,f]}),u=s.length;if(0==u){var l=[];for(r=0;r<t;r++)l.push(z([e.geometry.coordinates[r]],{parent:-1,winding:Rl(e.geometry.coordinates[r])}));var c=U(l);return L(),R(),c}var f=[],h=[];for(r=0;r<t;r++){f.push([]);for(o=0;o<e.geometry.coordinates[r].length-1;o++)f[r].push([new Pl(e.geometry.coordinates[r][jl(o+1,e.geometry.coordinates[r].length-1)],1,[r,o],[r,jl(o+1,e.geometry.coordinates[r].length-1)],void 0)]),h.push(new Tl(e.geometry.coordinates[r][o],[r,jl(o-1,e.geometry.coordinates[r].length-1)],[r,o],void 0,void 0,!1,!0))}for(r=0;r<u;r++)f[s[r][1]][s[r][2]].push(new Pl(s[r][0],s[r][5],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0)),s[r][11]&&h.push(new Tl(s[r][0],[s[r][1],s[r][2]],[s[r][6],s[r][7]],void 0,void 0,!0,!0));var d=h.length;for(r=0;r<f.length;r++)for(o=0;o<f[r].length;o++)f[r][o].sort(function(e,t){return e.param<t.param?-1:1});var g=[];for(r=0;r<d;r++)g.push({minX:h[r].coord[0],minY:h[r].coord[1],maxX:h[r].coord[0],maxY:h[r].coord[1],index:r});var p=new Xt;p.load(g);for(r=0;r<f.length;r++)for(o=0;o<f[r].length;o++)for(var v=0;v<f[r][o].length;v++){m=v==f[r][o].length-1?f[r][jl(o+1,e.geometry.coordinates[r].length-1)][0].coord:f[r][o][v+1].coord;var y=p.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0];f[r][o][v].nxtIsectAlongEdgeIn=y.index}for(r=0;r<f.length;r++)for(o=0;o<f[r].length;o++)for(v=0;v<f[r][o].length;v++){var m=f[r][o][v].coord,_=(y=p.search({minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]})[0]).index;_<a?h[_].nxtIsectAlongRingAndEdge2=f[r][o][v].nxtIsectAlongEdgeIn:Al(h[_].ringAndEdge1,f[r][o][v].ringAndEdgeIn)?h[_].nxtIsectAlongRingAndEdge1=f[r][o][v].nxtIsectAlongEdgeIn:h[_].nxtIsectAlongRingAndEdge2=f[r][o][v].nxtIsectAlongEdgeIn}var b=[];for(r=0,o=0;o<t;o++){var x=r;for(v=0;v<e.geometry.coordinates[o].length-1;v++)h[r].coord[0]<h[x].coord[0]&&(x=r),r++;var j=h[x].nxtIsectAlongRingAndEdge2;for(v=0;v<h.length;v++)if(h[v].nxtIsectAlongRingAndEdge1==x||h[v].nxtIsectAlongRingAndEdge2==x){var D=v;break}var F=Ll([h[D].coord,h[x].coord,h[j].coord],!0)?1:-1;b.push({isect:x,parent:-1,winding:F})}b.sort(function(e,t){return h[e.isect].coord>h[t.isect].coord?-1:1});for(l=[];b.length>0;){var w=b.pop(),k=w.isect,E=w.parent,N=w.winding,S=l.length,M=[h[k].coord],I=k;if(h[k].ringAndEdge1Walkable)var O=h[k].ringAndEdge1,C=h[k].nxtIsectAlongRingAndEdge1;else O=h[k].ringAndEdge2,C=h[k].nxtIsectAlongRingAndEdge2;for(;!Al(h[k].coord,h[C].coord);){M.push(h[C].coord);var P=void 0;for(r=0;r<b.length;r++)if(b[r].isect==C){P=r;break}if(null!=P&&b.splice(P,1),Al(O,h[C].ringAndEdge1)){if(O=h[C].ringAndEdge2,h[C].ringAndEdge2Walkable=!1,h[C].ringAndEdge1Walkable){var T={isect:C};Ll([h[I].coord,h[C].coord,h[h[C].nxtIsectAlongRingAndEdge2].coord],1==N)?(T.parent=E,T.winding=-N):(T.parent=S,T.winding=N),b.push(T)}I=C,C=h[C].nxtIsectAlongRingAndEdge2}else{if(O=h[C].ringAndEdge1,h[C].ringAndEdge1Walkable=!1,h[C].ringAndEdge2Walkable){T={isect:C};Ll([h[I].coord,h[C].coord,h[h[C].nxtIsectAlongRingAndEdge1].coord],1==N)?(T.parent=E,T.winding=-N):(T.parent=S,T.winding=N),b.push(T)}I=C,C=h[C].nxtIsectAlongRingAndEdge1}}M.push(h[C].coord),l.push(z([M],{index:S,parent:E,winding:N,netWinding:void 0}))}c=U(l);function L(){for(var e=[],t=0;t<c.features.length;t++)-1==c.features[t].properties.parent&&e.push(t);if(e.length>1)for(t=0;t<e.length;t++){for(var n=-1,r=0;r<c.features.length;r++)e[t]!=r&&V(c.features[e[t]].geometry.coordinates[0][0],c.features[r],{ignoreBoundary:!0})&&Be(c.features[r])<Infinity&&(n=r);c.features[e[t]].properties.parent=n}}function R(){for(var e=0;e<c.features.length;e++)if(-1==c.features[e].properties.parent){var t=c.features[e].properties.winding;c.features[e].properties.netWinding=t,A(e,t)}}function A(e,t){for(var n=0;n<c.features.length;n++)if(c.features[n].properties.parent==e){var r=t+c.features[n].properties.winding;c.features[n].properties.netWinding=r,A(n,r)}}return L(),R(),c}var Pl=function(e,t,n,r,i){this.coord=e,this.param=t,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},Tl=function(e,t,n,r,i,o,a){this.coord=e,this.ringAndEdge1=t,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function Ll(e,t){if(void 0===t&&(t=!0),3!=e.length)throw new Error("This function requires an array of three points [x,y]");return(e[1][0]-e[0][0])*(e[2][1]-e[0][1])-(e[1][1]-e[0][1])*(e[2][0]-e[0][0])>=0==t}function Rl(e){for(var t=0,n=0;n<e.length-1;n++)e[n][0]<e[t][0]&&(t=n);if(Ll([e[jl(t-1,e.length-1)],e[t],e[jl(t+1,e.length-1)]],!0))var r=1;else r=-1;return r}function Al(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&t[n]instanceof Array){if(!Al(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function jl(e,t){return(e%t+t)%t}function Dl(e){return function(){return e}}function Fl(e){return e[0]}function zl(e){return e[1]}function Vl(){this._=null}function ql(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Bl(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Gl(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Yl(e){for(;e.L;)e=e.L;return e}function Ul(e,t,n,r){var i=[null,null],o=pc.push(i)-1;return i.left=e,i.right=t,n&&Zl(i,e,t,n),r&&Zl(i,t,e,r),dc[e.index].halfedges.push(o),dc[t.index].halfedges.push(o),i}function Wl(e,t,n){var r=[t,n];return r.left=e,r}function Zl(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function Xl(e,t,n,r,i){var o,a=e[0],s=e[1],u=a[0],l=a[1],c=0,f=1,h=s[0]-u,d=s[1]-l;if(o=t-u,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=r-u,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}if(o=n-l,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=i-l,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<f&&(f=o)}return!(c>0||f<1)||(c>0&&(e[0]=[u+c*h,l+c*d]),f<1&&(e[1]=[u+f*h,l+f*d]),!0)}}}}}function Hl(e,t,n,r,i){var o=e[1];if(o)return!0;var a,s,u=e[0],l=e.left,c=e.right,f=l[0],h=l[1],d=c[0],g=c[1],p=(f+d)/2,v=(h+g)/2;if(g===h){if(p<t||p>=r)return;if(f>d){if(u){if(u[1]>=i)return}else u=[p,n];o=[p,i]}else{if(u){if(u[1]<n)return}else u=[p,i];o=[p,n]}}else if(s=v-(a=(f-d)/(g-h))*p,a<-1||a>1)if(f>d){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(h<g){if(u){if(u[0]>=r)return}else u=[t,a*t+s];o=[r,a*r+s]}else{if(u){if(u[0]<t)return}else u=[r,a*r+s];o=[t,a*t+s]}return e[0]=u,e[1]=o,!0}function $l(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Jl(e,t){return t[+(t.left!==e.site)]}function Kl(e,t){return t[+(t.left===e.site)]}Vl.prototype={constructor:Vl,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Yl(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Bl(this,n),n=(e=n).U),n.C=!1,r.C=!0,Gl(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Gl(this,n),n=(e=n).U),n.C=!1,r.C=!0,Bl(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?Yl(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Bl(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Gl(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Bl(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Gl(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Bl(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Gl(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var Ql,ec=[];function tc(){ql(this),this.x=this.y=this.arc=this.site=this.cy=null}function nc(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,f=o[1]-s,h=2*(u*f-l*c);if(!(h>=-vc)){var d=u*u+l*l,g=c*c+f*f,p=(f*d-l*g)/h,v=(u*g-c*d)/h,y=ec.pop()||new tc;y.arc=e,y.site=i,y.x=p+a,y.y=(y.cy=v+s)+Math.sqrt(p*p+v*v),e.circle=y;for(var m=null,_=gc._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}gc.insert(m,y),m||(Ql=y)}}}}function rc(e){var t=e.circle;t&&(t.P||(Ql=t.N),gc.remove(t),ec.push(t),ql(t),e.circle=null)}var ic=[];function oc(){ql(this),this.edge=this.site=this.circle=null}function ac(e){var t=ic.pop()||new oc;return t.site=e,t}function sc(e){rc(e),hc.remove(e),ic.push(e),ql(e)}function uc(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],o=e.P,a=e.N,s=[e];sc(e);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<S&&Math.abs(r-u.circle.cy)<S;)o=u.P,s.unshift(u),sc(u),u=o;s.unshift(u),rc(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<S&&Math.abs(r-l.circle.cy)<S;)a=l.N,s.push(l),sc(l),l=a;s.push(l),rc(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],Zl(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=Ul(u.site,l.site,null,i),nc(u),nc(l)}function lc(e){for(var t,n,r,i,o=e[0],a=e[1],s=hc._;s;)if((r=cc(s,a)-o)>S)s=s.L;else{if(!((i=o-fc(s,a))>S)){r>-S?(t=s.P,n=s):i>-S?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){dc[e.index]={site:e,halfedges:[]}}(e);var u=ac(e);if(hc.insert(t,u),t||n){if(t===n)return rc(t),n=ac(t.site),hc.insert(u,n),u.edge=n.edge=Ul(t.site,u.site),nc(t),void nc(n);if(n){rc(t),rc(n);var l=t.site,c=l[0],f=l[1],h=e[0]-c,d=e[1]-f,g=n.site,p=g[0]-c,v=g[1]-f,y=2*(h*v-d*p),m=h*h+d*d,_=p*p+v*v,b=[(v*m-d*_)/y+c,(h*_-p*m)/y+f];Zl(n.edge,l,g,b),u.edge=Ul(l,e,null,b),n.edge=Ul(e,g,null,b),nc(t),nc(n)}else u.edge=Ul(t.site,u.site)}}function cc(e,t){var n=e.site,r=n[0],i=n[1],o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],l=u-t;if(!l)return s;var c=s-r,f=1/o-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+i-o/2)))/f+r:(r+s)/2}function fc(e,t){var n=e.N;if(n)return cc(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var hc,dc,gc,pc,S=1e-6,vc=1e-12;function yc(e,t){return t[1]-e[1]||t[0]-e[0]}function mc(e,t){var n,r,i,o=e.sort(yc).pop();for(pc=[],dc=new Array(e.length),hc=new Vl,gc=new Vl;;)if(i=Ql,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(lc(o),n=o[0],r=o[1]),o=e.pop();else{if(!i)break;uc(i.arc)}if(function(){for(var e,t,n,r,i=0,o=dc.length;i<o;++i)if((e=dc[i])&&(r=(t=e.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=$l(e,pc[t[n]]);for(a.sort(function(e,t){return s[t]-s[e]}),n=0;n<r;++n)s[n]=t[a[n]];for(n=0;n<r;++n)t[n]=s[n]}}(),t){var a=+t[0][0],s=+t[0][1],u=+t[1][0],l=+t[1][1];!function(e,t,n,r){for(var i,o=pc.length;o--;)Hl(i=pc[o],e,t,n,r)&&Xl(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>S||Math.abs(i[0][1]-i[1][1])>S)||delete pc[o]}(a,s,u,l),function(e,t,n,r){var i,o,a,s,u,l,c,f,h,d,g,p,v=dc.length,y=!0;for(i=0;i<v;++i)if(o=dc[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)pc[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)g=(d=Kl(o,pc[u[s]]))[0],p=d[1],f=(c=Jl(o,pc[u[++s%l]]))[0],h=c[1],(Math.abs(g-f)>S||Math.abs(p-h)>S)&&(u.splice(s,0,pc.push(Wl(a,d,Math.abs(g-e)<S&&r-p>S?[e,Math.abs(f-e)<S?h:r]:Math.abs(p-r)<S&&n-g>S?[Math.abs(h-r)<S?f:n,r]:Math.abs(g-n)<S&&p-t>S?[n,Math.abs(f-n)<S?h:t]:Math.abs(p-t)<S&&g-e>S?[Math.abs(h-t)<S?f:e,t]:null))-1),++l);l&&(y=!1)}if(y){var m,_,b,x=1/0;for(i=0,y=null;i<v;++i)(o=dc[i])&&(b=(m=(a=o.site)[0]-e)*m+(_=a[1]-t)*_)<x&&(x=b,y=o);if(y){var w=[e,t],k=[e,r],E=[n,r],N=[n,t];y.halfedges.push(pc.push(Wl(a=y.site,w,k))-1,pc.push(Wl(a,k,E))-1,pc.push(Wl(a,E,N))-1,pc.push(Wl(a,N,w))-1)}}for(i=0;i<v;++i)(o=dc[i])&&(o.halfedges.length||delete dc[i])}(a,s,u,l)}this.edges=pc,this.cells=dc,hc=gc=pc=dc=null}mc.prototype={constructor:mc,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(e){return Jl(t,n[e])});return e.data=t.site.data,e})},triangles:function(){var h=[],d=this.edges;return this.cells.forEach(function(e,t){if(r=(n=e.halfedges).length)for(var n,r,i,o,a,s,u=e.site,l=-1,c=d[n[r-1]],f=c.left===u?c.right:c.left;++l<r;)i=f,f=(c=d[n[l]]).left===u?c.right:c.left,i&&f&&t<i.index&&t<f.index&&(a=i,s=f,((o=u)[0]-s[0])*(a[1]-o[1])-(o[0]-a[0])*(s[1]-o[1])<0)&&h.push([u.data,i.data,f.data])}),h},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(a,s,e){for(var t,u,l=this,c=l._found||0,n=l.cells.length;!(u=l.cells[c]);)if(++c>=n)return null;var r=a-u.site[0],i=s-u.site[1],f=r*r+i*i;do{u=l.cells[t=c],c=null,u.halfedges.forEach(function(e){var t=l.edges[e],n=t.left;if(n!==u.site&&n||(n=t.right)){var r=a-n[0],i=s-n[1],o=r*r+i*i;o<f&&(f=o,c=n.index)}})}while(null!==c);return l._found=t,null==e||f<=e*e?u.site:null}},e.along=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=H(e).coordinates,i=0,o=0;o<r.length&&!(t>=i&&o===r.length-1);o++){if(i>=t){var a=t-i;if(a){var s=ke(r[o],r[o-1])-180;return Ee(r[o],a,s,n)}return G(r[o])}i+=$(r[o],r[o+1],n)}return G(r[r.length-1])},e.angle=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!Z(r))throw new Error("options is invalid");if(!e)throw new Error("startPoint is required");if(!t)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=e,o=t,a=n,s=le(!0!==r.mercator?ke(o,i):Ne(o,i)),u=le(!0!==r.mercator?ke(o,a):Ne(o,a));u<s&&(u+=360);var l=u-s;return!0===r.explementary?360-l:l},e.applyFilter=Hi,e.area=Be,e.areaFactors=O,e.azimuthToBearing=ce,e.bbox=J,e.bboxClip=function(e,t){var n=H(e),r=n.type,i="Feature"===e.type?e.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(o=[o]),o.forEach(function(e){!function(e,t,n){var r,i,o,a,s,u=e.length,l=He(e[0],t),c=[];for(n||(n=[]),r=1;r<u;r++){for(a=e[r-1],i=o=He(s=e[r],t);;){if(!(l|i)){c.push(a),i!==o?(c.push(s),r<u-1&&(n.push(c),c=[])):r===u-1&&c.push(s);break}if(l&i)break;l?l=He(a=Xe(a,s,l,t),t):i=He(s=Xe(a,s,i,t),t)}l=o}c.length&&n.push(c)}(e,t,a)}),1===a.length?Y(a[0],i):te(a,i);case"Polygon":return z($e(o,t),i);case"MultiPolygon":return re(o.map(function(e){return $e(e,t)}),i);default:throw new Error("geometry "+r+" not supported")}},e.bboxPolygon=Je,e.bearing=ke,e.bearingToAzimuth=le,e.bezierSpline=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resolution||1e4,r=t.sharpness||.85,i=[],o=H(e).coordinates.map(function(e){return{x:e[0],y:e[1]}}),a=new Ke({duration:n,points:o,sharpness:r}),s=function(e){var t=a.pos(e);Math.floor(e/100)%2==0&&i.push([t.x,t.y])},u=0;u<a.duration;u+=10)s(u);return s(a.duration),Y(i,t.properties)},e.booleanClockwise=Qe,e.booleanConcave=function(e){var t=H(e).coordinates;if(t[0].length<=4)return!1;for(var n=!1,r=t[0].length-1,i=0;i<r;i++){var o=t[0][(i+2)%r][0]-t[0][(i+1)%r][0],a=t[0][(i+2)%r][1]-t[0][(i+1)%r][1],s=t[0][i][0]-t[0][(i+1)%r][0],u=o*(t[0][i][1]-t[0][(i+1)%r][1])-a*s;if(0===i)n=u>0;else if(n!==u>0)return!0}return!1},e.booleanContains=function(e,t){var n=H(e),r=H(t),i=n.type,o=r.type,a=n.coordinates,s=r.coordinates;switch(i){case"Point":if("Point"===o)return it(a,s);throw new Error("feature2 "+o+" geometry not supported");case"MultiPoint":switch(o){case"Point":return function(e,t){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(it(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(e,t){var n,r=F(t.coordinates);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=!1,s=F(e.coordinates);try{for(s.s();!(i=s.n()).done;){if(it(o,i.value)){a=!0;break}}}catch(e){s.e(e)}finally{s.f()}if(!a)return!1}}catch(e){r.e(e)}finally{r.f()}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return f(r,n,{ignoreEndVertices:!0});case"LineString":return function(e,t){var n,r=!1,i=F(t.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(f({type:"Point",coordinates:o},e,{ignoreEndVertices:!0})&&(r=!0),!f({type:"Point",coordinates:o},e,{ignoreEndVertices:!1}))return!1}}catch(e){i.e(e)}finally{i.f()}return r}(n,r);case"MultiPoint":return function(e,t){var n,r=!1,i=F(t.coordinates);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(f(o,e,{ignoreEndVertices:!0})&&(r=!0),!f(o,e))return!1}}catch(e){i.e(e)}finally{i.f()}if(r)return!0;return!1}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return V(r,n,{ignoreBoundary:!0});case"LineString":return function(e,t){var n=!1,r=0,i=J(e),o=J(t);if(!rt(i,o))return!1;for(;r<t.coordinates.length-1;r++){if(V({type:"Point",coordinates:ot(t.coordinates[r],t.coordinates[r+1])},e,{ignoreBoundary:!0})){n=!0;break}}return n}(n,r);case"Polygon":return nt(n,r);case"MultiPoint":return function(e,t){var n,r=F(t.coordinates);try{for(r.s();!(n=r.n()).done;){if(!V(n.value,e,{ignoreBoundary:!0}))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":if("Polygon"===o)return function(e,t){return e.coordinates.some(function(e){return nt({type:"Polygon",coordinates:e},t)})}(n,r);throw new Error("feature2 "+o+" geometry not supported");default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=xt,e.booleanDisjoint=St,e.booleanEqual=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).precision;if("number"!=typeof(n=null==n||isNaN(n)?6:n)||!(n>=0))throw new Error("precision must be a positive number");return H(e).type===H(t).type&&jt(zt(e),zt(t),{precision:n})},e.booleanIntersects=Gt,e.booleanOverlap=function(e,n){var t=H(e),r=H(n),i=t.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(jt(e,n,{precision:6}))return!1;var a=0;switch(i){case"MultiPoint":for(var s=0;s<t.coordinates.length;s++)for(var u=0;u<r.coordinates.length;u++){var l=t.coordinates[s],c=r.coordinates[u];if(l[0]===c[0]&&l[1]===c[1])return!0}return!1;case"LineString":case"MultiLineString":Ae(e,function(t){Ae(n,function(e){Tn(t,e).features.length&&a++})});break;case"Polygon":case"MultiPolygon":Ae(e,function(t){Ae(n,function(e){mt(t,e).features.length&&a++})})}return a>0},e.booleanParallel=function(e,t){if(!e)throw new Error("line1 is required");if(!t)throw new Error("line2 is required");if("LineString"!==An(e,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==An(t,"line2"))throw new Error("line2 must be a LineString");for(var n=cn(zt(e)).features,r=cn(zt(t)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!Rn(o,r[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=V,e.booleanPointOnLine=f,e.booleanTouches=function(e,t){var n=H(e),r=H(t),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"LineString":return jn(n,r);case"MultiLineString":for(var a=!1,s=0;s<r.coordinates.length;s++)jn(n,{type:"LineString",coordinates:r.coordinates[s]})&&(a=!0);return a;case"Polygon":for(var u=0;u<r.coordinates.length;u++)if(f(n,{type:"LineString",coordinates:r.coordinates[u]}))return!0;return!1;case"MultiPolygon":for(u=0;u<r.coordinates.length;u++)for(s=0;s<r.coordinates[u].length;s++)if(f(n,{type:"LineString",coordinates:r.coordinates[u][s]}))return!0;return!1;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"LineString":for(a=!1,u=0;u<n.coordinates.length;u++)if(a||jn({type:"Point",coordinates:n.coordinates[u]},r)&&(a=!0),f({type:"Point",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return a;case"MultiLineString":for(a=!1,u=0;u<n.coordinates.length;u++)for(s=0;s<r.coordinates.length;s++)if(a||jn({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[s]})&&(a=!0),f({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[s]},{ignoreEndVertices:!0}))return!1;return a;case"Polygon":for(a=!1,u=0;u<n.coordinates.length;u++)if(a||f({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,u=0;u<n.coordinates.length;u++)for(s=0;s<r.coordinates.length;s++)if(a||f({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[s][0]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[u]},{type:"Polygon",coordinates:r.coordinates[s]},{ignoreBoundary:!0}))return!1;return a;default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return jn(r,n);case"MultiPoint":for(a=!1,u=0;u<r.coordinates.length;u++)if(a||jn({type:"Point",coordinates:r.coordinates[u]},n)&&(a=!0),f({type:"Point",coordinates:r.coordinates[u]},n,{ignoreEndVertices:!0}))return!1;return a;case"LineString":var l=!1;if(jn({type:"Point",coordinates:n.coordinates[0]},r)&&(l=!0),jn({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},r)&&(l=!0),!1===l)return!1;for(u=0;u<n.coordinates.length;u++)if(f({type:"Point",coordinates:n.coordinates[u]},r,{ignoreEndVertices:!0}))return!1;return l;case"MultiLineString":for(l=!1,u=0;u<r.coordinates.length;u++){jn({type:"Point",coordinates:n.coordinates[0]},{type:"LineString",coordinates:r.coordinates[u]})&&(l=!0),jn({type:"Point",coordinates:n.coordinates[n.coordinates.length-1]},{type:"LineString",coordinates:r.coordinates[u]})&&(l=!0);for(s=0;s<n.coordinates[u].length;s++)if(f({type:"Point",coordinates:n.coordinates[s]},{type:"LineString",coordinates:r.coordinates[u]},{ignoreEndVertices:!0}))return!1}return l;case"Polygon":for(a=!1,u=0;u<n.coordinates.length;u++)if(a||f({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,u=0;u<n.coordinates.length;u++){for(s=0;s<r.coordinates.length;s++)a||f({type:"Point",coordinates:n.coordinates[u]},{type:"LineString",coordinates:r.coordinates[s][0]})&&(a=!0);if(V({type:"Point",coordinates:n.coordinates[u]},r,{ignoreBoundary:!0}))return!1}return a;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiLineString":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(jn(r,{type:"LineString",coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":for(a=!1,u=0;u<n.coordinates.length;u++)for(s=0;s<r.coordinates.length;s++)if(a||jn({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:n.coordinates[s]})&&(a=!0),f({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:n.coordinates[s]},{ignoreEndVertices:!0}))return!1;return a;case"LineString":for(l=!1,u=0;u<n.coordinates.length;u++){jn({type:"Point",coordinates:n.coordinates[u][0]},r)&&(l=!0),jn({type:"Point",coordinates:n.coordinates[u][n.coordinates[u].length-1]},r)&&(l=!0);for(s=0;s<r.coordinates.length;s++)if(f({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:n.coordinates[u]},{ignoreEndVertices:!0}))return!1}return l;case"MultiLineString":for(l=!1,u=0;u<n.coordinates.length;u++)for(s=0;s<r.coordinates.length;s++){jn({type:"Point",coordinates:n.coordinates[u][0]},{type:"LineString",coordinates:r.coordinates[s]})&&(l=!0),jn({type:"Point",coordinates:n.coordinates[u][n.coordinates[u].length-1]},{type:"LineString",coordinates:r.coordinates[s]})&&(l=!0);for(var c=0;c<n.coordinates[u].length;c++)if(f({type:"Point",coordinates:n.coordinates[u][c]},{type:"LineString",coordinates:r.coordinates[s]},{ignoreEndVertices:!0}))return!1}return l;case"Polygon":for(a=!1,u=0;u<n.coordinates.length;u++)for(s=0;s<n.coordinates.length;s++)if(a||f({type:"Point",coordinates:n.coordinates[u][s]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[u][s]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,u=0;u<r.coordinates[0].length;u++)for(s=0;s<n.coordinates.length;s++)for(c=0;c<n.coordinates[s].length;c++)if(a||f({type:"Point",coordinates:n.coordinates[s][c]},{type:"LineString",coordinates:r.coordinates[0][u]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[s][c]},{type:"Polygon",coordinates:[r.coordinates[0][u]]},{ignoreBoundary:!0}))return!1;return a;default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":for(u=0;u<n.coordinates.length;u++)if(f(r,{type:"LineString",coordinates:n.coordinates[u]}))return!0;return!1;case"MultiPoint":for(a=!1,u=0;u<r.coordinates.length;u++)if(a||f({type:"Point",coordinates:r.coordinates[u]},{type:"LineString",coordinates:n.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:r.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return a;case"LineString":for(a=!1,u=0;u<r.coordinates.length;u++)if(a||f({type:"Point",coordinates:r.coordinates[u]},{type:"LineString",coordinates:n.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:r.coordinates[u]},n,{ignoreBoundary:!0}))return!1;return a;case"MultiLineString":for(a=!1,u=0;u<r.coordinates.length;u++)for(s=0;s<r.coordinates[u].length;s++)if(a||f({type:"Point",coordinates:r.coordinates[u][s]},{type:"LineString",coordinates:n.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:r.coordinates[u][s]},n,{ignoreBoundary:!0}))return!1;return a;case"Polygon":for(a=!1,u=0;u<n.coordinates[0].length;u++)if(a||f({type:"Point",coordinates:n.coordinates[0][u]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[0][u]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,u=0;u<r.coordinates[0].length;u++)for(s=0;s<n.coordinates[0].length;s++)if(a||f({type:"Point",coordinates:n.coordinates[0][s]},{type:"LineString",coordinates:r.coordinates[0][u]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[0][s]},{type:"Polygon",coordinates:r.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return a;default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPolygon":switch(o){case"Point":for(u=0;u<n.coordinates[0].length;u++)if(f(r,{type:"LineString",coordinates:n.coordinates[0][u]}))return!0;return!1;case"MultiPoint":for(a=!1,u=0;u<n.coordinates[0].length;u++)for(s=0;s<r.coordinates.length;s++)if(a||f({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:n.coordinates[0][u]})&&(a=!0),V({type:"Point",coordinates:r.coordinates[s]},{type:"Polygon",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return a;case"LineString":for(a=!1,u=0;u<n.coordinates[0].length;u++)for(s=0;s<r.coordinates.length;s++)if(a||f({type:"Point",coordinates:r.coordinates[s]},{type:"LineString",coordinates:n.coordinates[0][u]})&&(a=!0),V({type:"Point",coordinates:r.coordinates[s]},{type:"Polygon",coordinates:n.coordinates[0][u]},{ignoreBoundary:!0}))return!1;return a;case"MultiLineString":for(a=!1,u=0;u<n.coordinates.length;u++)for(s=0;s<r.coordinates.length;s++)for(c=0;c<r.coordinates[s].length;c++)if(a||f({type:"Point",coordinates:r.coordinates[s][c]},{type:"LineString",coordinates:n.coordinates[u][0]})&&(a=!0),V({type:"Point",coordinates:r.coordinates[s][c]},{type:"Polygon",coordinates:[n.coordinates[u][0]]},{ignoreBoundary:!0}))return!1;return a;case"Polygon":for(a=!1,u=0;u<n.coordinates[0].length;u++)for(s=0;s<n.coordinates[0][u].length;s++)if(a||f({type:"Point",coordinates:n.coordinates[0][u][s]},{type:"LineString",coordinates:r.coordinates[0]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[0][u][s]},r,{ignoreBoundary:!0}))return!1;return a;case"MultiPolygon":for(a=!1,u=0;u<n.coordinates[0].length;u++)for(s=0;s<r.coordinates[0].length;s++)for(c=0;c<n.coordinates[0].length;c++)if(a||f({type:"Point",coordinates:n.coordinates[0][u][c]},{type:"LineString",coordinates:r.coordinates[0][s]})&&(a=!0),V({type:"Point",coordinates:n.coordinates[0][u][c]},{type:"Polygon",coordinates:r.coordinates[0][s]},{ignoreBoundary:!0}))return!1;return a;default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanValid=function(e){if(!e.type)return!1;var t=H(e),n=t.type,r=t.coordinates;switch(n){case"Point":return r.length>1;case"MultiPoint":for(var i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"LineString":if(r.length<2)return!1;for(i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"MultiLineString":if(r.length<2)return!1;for(i=0;i<r.length;i++)if(r[i].length<2)return!1;return!0;case"Polygon":for(i=0;i<t.coordinates.length;i++){if(r[i].length<4)return!1;if(!Fn(r[i]))return!1;if(zn(r[i]))return!1;if(i>0&&mt(z([r[0]]),z([r[i]])).features.length>1)return!1}return!0;case"MultiPolygon":for(i=0;i<t.coordinates.length;i++)for(var o=t.coordinates[i],a=0;a<o.length;a++){if(o[a].length<4)return!1;if(!Fn(o[a]))return!1;if(zn(o[a]))return!1;if(0===a&&!Vn(o,t.coordinates,i))return!1;if(a>0&&mt(z([o[0]]),z([o[a]])).features.length>1)return!1}return!0;default:return!1}},e.booleanWithin=qn,e.buffer=function(e,n,t){var r=(t=t||{}).units||"kilometers",i=t.steps||8;if(!e)throw new Error("geojson is required");if("object"!==_r(t))throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(e.type){case"GeometryCollection":return Te(e,function(e){var t=gi(e,n,r,i);t&&o.push(t)}),U(o);case"FeatureCollection":return N(e,function(e){var t=gi(e,n,r,i);t&&N(t,function(e){e&&o.push(e)})}),U(o)}return gi(e,n,r,i)},e.center=Un,e.centerMean=mi,e.centerMedian=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.counter||10;if(!W(n))throw new Error("counter must be a number");var r=t.weight,i=mi(e,{weight:t.weight}),o=U([]);N(e,function(e){var t;o.features.push(_i(e,{properties:{weight:null==(t=e.properties)?void 0:t[r]}}))});var a={tolerance:t.tolerance,medianCandidates:[]};return bi(i.geometry.coordinates,[0,0],o,a,n)},e.centerOfMass=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(xe(t)){case"Point":return G(X(t),n.properties);case"Polygon":var r=[];w(t,function(e){r.push(e)});var i,o,a,s,u,l,c,f,h=_i(t,{properties:n.properties}),d=h.geometry.coordinates,g=0,p=0,v=0,y=r.map(function(e){return[e[0]-d[0],e[1]-d[1]]});for(i=0;i<r.length-1;i++)s=(o=y[i])[0],l=o[1],u=(a=y[i+1])[0],v+=f=s*(c=a[1])-u*l,g+=(s+u)*f,p+=(l+c)*f;if(0===v)return h;var m=1/(6*(.5*v));return G([d[0]+m*g,d[1]+m*p],n.properties);default:var _=zi(t);return _?e(_,{properties:n.properties}):_i(t,{properties:n.properties})}},e.centroid=_i,e.circle=Vi,e.cleanCoords=zt,e.clone=p,e.cloneProperties=Bi,e.clusterEach=Wi,e.clusterReduce=Zi,e.clusters=io,e.clustersDbscan=function(f,h){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0!==e.mutate&&(f=p(f));var o=e.minPoints||3,d=ue(h,e.units),g=new oo(f.features.length),a=f.features.map(function(e){return!1}),s=f.features.map(function(e){return!1}),i=f.features.map(function(e){return!1}),u=f.features.map(function(e){return-1});g.load(f.features.map(function(e,t){var n=K(e.geometry.coordinates,2),r=n[0],i=n[1];return{minX:r,minY:i,maxX:r,maxY:i,index:t}}));var l=function(e){var r=f.features[e],t=K(r.geometry.coordinates,2),n=t[0],i=t[1],o=Math.max(i-d,-90),a=Math.min(i+d,90),s=o<0&&a>0?d:Math.abs(o)<Math.abs(a)?d/Math.cos(b(a)):d/Math.cos(b(o)),u=Math.max(n-s,-360),l=Math.min(n+s,360),c={minX:u,minY:o,maxX:l,maxY:a};return g.search(c).filter(function(e){var t=e.index,n=f.features[t];return $(r,n,{units:"kilometers"})<=h})},c=0;return f.features.forEach(function(e,t){if(!a[t]){var n=l(t);if(n.length>=o){var r=c;c++,a[t]=!0,function(e,t){for(var n=0;n<t.length;n++){var r=t[n].index;if(!a[r]){a[r]=!0;var i=l(r);i.length>=o&&t.push.apply(t,M(i))}s[r]||(s[r]=!0,u[r]=e)}}(r,n)}else i[t]=!0}}),f.features.forEach(function(e,t){var n=f.features[t];n.properties||(n.properties={}),u[t]>=0?(n.properties.dbscan=i[t]?"edge":"core",n.properties.cluster=u[t]):n.properties.dbscan="noise"}),f},e.clustersKmeans=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.features.length;t.numberOfClusters=t.numberOfClusters||Math.round(Math.sqrt(n/2)),t.numberOfClusters>n&&(t.numberOfClusters=n),!0!==t.mutate&&(e=p(e));var r=Pe(e),i=r.slice(0,t.numberOfClusters),o=uo(r,t.numberOfClusters,i),a={};return o.centroids.forEach(function(e,t){a[t]=e}),N(e,function(e,t){var n=o.idxs[t];e.properties.cluster=n,e.properties.centroid=a[n]}),e},e.collect=function(e,t,n,i){var o=new lo(6),r=t.features.map(function(e){var t;return{minX:e.geometry.coordinates[0],minY:e.geometry.coordinates[1],maxX:e.geometry.coordinates[0],maxY:e.geometry.coordinates[1],property:null==(t=e.properties)?void 0:t[n]}});return o.load(r),e.features.forEach(function(t){t.properties||(t.properties={});var e=J(t),n=o.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),r=[];n.forEach(function(e){V([e.minX,e.minY],t)&&r.push(e.property)}),t.properties[i]=r}),e},e.collectionOf=be,e.combine=function(e){var o={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return N(e,function(e){var t,n,r,i;switch(null==(i=e.geometry)?void 0:i.type){case"Point":o.MultiPoint.coordinates.push(e.geometry.coordinates),o.MultiPoint.properties.push(e.properties);break;case"MultiPoint":(t=o.MultiPoint.coordinates).push.apply(t,M(e.geometry.coordinates)),o.MultiPoint.properties.push(e.properties);break;case"LineString":o.MultiLineString.coordinates.push(e.geometry.coordinates),o.MultiLineString.properties.push(e.properties);break;case"MultiLineString":(n=o.MultiLineString.coordinates).push.apply(n,M(e.geometry.coordinates)),o.MultiLineString.properties.push(e.properties);break;case"Polygon":o.MultiPolygon.coordinates.push(e.geometry.coordinates),o.MultiPolygon.properties.push(e.properties);break;case"MultiPolygon":(r=o.MultiPolygon.coordinates).push.apply(r,M(e.geometry.coordinates)),o.MultiPolygon.properties.push(e.properties)}}),U(Object.keys(o).filter(function(e){return o[e].coordinates.length}).sort().map(function(e){return B({type:e,coordinates:o[e].coordinates},{collectedProperties:o[e].properties})}))},e.concave=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.maxEdge||1/0,t=function(e){var n=[],r={};return N(e,function(e){if(e.geometry){var t=e.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(r,t)||(n.push(e),r[t]=!0)}}),U(n)}(e),n=co(t);if(n.features=n.features.filter(function(e){var t=e.geometry.coordinates[0][0],n=e.geometry.coordinates[0][1],r=e.geometry.coordinates[0][2],i=$(t,n,s),o=$(n,r,s),a=$(t,r,s);return i<=u&&o<=u&&a<=u}),n.features.length<1)return null;var r=zo(n);return 1===r.coordinates.length&&(r.coordinates=r.coordinates[0],r.type="Polygon"),B(r)},e.containsNumber=ye,e.convertArea=de,e.convertLength=he,e.convex=zi,e.coordAll=Pe,e.coordEach=w,e.coordReduce=Me,e.createBins=Xi,e.degreesToRadians=b,e.destination=Ee,e.difference=function(e){var t=[];if(Te(e,function(e){t.push(e.coordinates)}),t.length<2)throw new Error("Must have at least two features");var n=e.features[0].properties||{},r=Da.apply(za,[t[0]].concat(M(t.slice(1))));return 0===r.length?null:1===r.length?z(r[0],n):re(r,n)},e.dissolve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(t=t||{}))throw new Error("options is invalid");var n=t.propertyName;be(e,"Polygon","dissolve");var r=[];if(!n)return Va(re(Aa.apply(null,e.features.map(function(e){return e.geometry.coordinates}))));var i={};N(e,function(e){e.properties&&(Object.prototype.hasOwnProperty.call(i,e.properties[n])||(i[e.properties[n]]=[]),i[e.properties[n]].push(e))});for(var o=Object.keys(i),a=0;a<o.length;a++){var s=re(Aa.apply(null,i[o[a]].map(function(e){return e.geometry.coordinates})));s&&s.properties&&(s.properties[n]=o[a],r.push(s))}return Va(U(r))},e.distance=$,e.distanceWeight=Ba,e.earthRadius=g,e.ellipse=Wa,e.envelope=Xa,e.explode=Ha,e.factors=y,e.feature=B,e.featureCollection=U,e.featureEach=N,e.featureOf=_e,e.featureReduce=Ce,e.filterProperties=Ji,e.findPoint=Ve,e.findSegment=ze,e.flatten=Va,e.flattenEach=x,e.flattenReduce=Re,e.flip=function(e,t){var n;if(!Z(t=t||{}))throw new Error("options is invalid");var r=null!=(n=t.mutate)&&n;if(!e)throw new Error("geojson is required");return!1!==r&&void 0!==r||(e=p(e)),w(e,function(e){var t=e[0],n=e[1];e[0]=n,e[1]=t}),e},e.geojsonRbush=ln,e.geojsonType=me,e.geomEach=Te,e.geomReduce=Le,e.geometry=t,e.geometryCollection=ie,e.getCluster=Ui,e.getCoord=X,e.getCoords=E,e.getGeom=H,e.getType=xe,e.greatCircle=function(e,t,n){if("object"!==_r(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;if(e=X(e),t=X(t),r=r||{},i=i||100,e[0]===t[0]&&e[1]===t[1]){var a=Array(i);return a.fill([e[0],e[1]]),Y(a,r)}return o=o||10,new ts({x:e[0],y:e[1]},{x:t[0],y:t[1]},r).Arc(i,{offset:o}).json()},e.helpers=ve,e.hexGrid=rs,e.interpolate=function(t,e,s){if("object"!==_r(s=s||{}))throw new Error("options is invalid");var n,u=s.gridType,l=s.property,c=s.weight,r=s.bbox;if(!t)throw new Error("points is required");if(be(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==c&&"number"!=typeof c)throw new Error("weight must be a number");switch(l=l||"elevation",u=u||"square",c=c||1,ge(r=null!=r?r:J(t)),u){case"point":case"points":n=as(r,e,s);break;case"square":case"squares":n=us(r,e,s);break;case"hex":case"hexes":n=rs(r,e,s);break;case"triangle":case"triangles":n=ls(r,e,s);break;default:throw new Error("invalid gridType")}var f=[];return N(n,function(i){var o=0,a=0;N(t,function(e){var t,n=$("point"===u?i:_i(i),e,s);if(void 0!==l&&(t=e.properties[l]),void 0===t&&(t=e.geometry.coordinates[2]),void 0===t)throw new Error("zValue is missing");0===n&&(o=t);var r=1/Math.pow(n,c);a+=r,o+=r*t});var e=p(i);e.properties[l]=o/a,f.push(e)}),U(f)},e.intersect=ns,e.invariant=we,e.isNumber=W,e.isObject=Z,e.isobands=function(e,t,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(be(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks is not an Array");if(!Z(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var a=Ps(e,{zProperty:r,flip:!0}),s=function(e,t,n){for(var r=[],i=1;i<t.length;i++){var o=+t[i-1],a=+t[i],s=Ls(Ts(ws(e,o,a-o)));r.push(l({groupedRings:s},n,o+"-"+a))}return r}(a,t,r);s=function(e,t,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=t[0].length-1,l=t.length-1,c=i/u,f=o/l;return e.map(function(e){return e.groupedRings=e.groupedRings.map(function(e){return e.map(function(e){return e.map(function(e){return[e[0]*c+a,e[1]*f+s]})})}),e})}(s,a,e);var u=s.map(function(e,t){if(o[t]&&!Z(o[t]))throw new Error("Each mappedProperty is required to be an Object");var n=Cs(Cs({},i),o[t]);return n[r]=e[r],re(e.groupedRings,n)});return U(u)},e.isolines=function(e,t,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(be(e,"Point","Input must contain Points"),!t)throw new Error("breaks is required");if(!Array.isArray(t))throw new Error("breaks must be an Array");if(!Z(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=Bs(e,{zProperty:r,flip:!0}),s=function(e,t,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=t[0].length-1,l=t.length-1,c=i/u,f=o/l,h=function(e){e[0]=e[0]*c+a,e[1]=e[1]*f+s};return e.forEach(function(e){w(e,h)}),e}(function(e,t,n,r,i){for(var o=[],a=0;a<t.length;a++){var s=+t[a],u=qs(qs({},r),i[a]);u[n]=s;var l=te(bs(e,s,{linearRing:!1,noFrame:!0}),u);o.push(l)}return o}(a,t,r,i,o),a,e);return U(s)},e.kinks=function(e){var t,n,o={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===e.type?e.geometry:e).type)t=[n.coordinates];else if("MultiLineString"===n.type)t=n.coordinates;else if("MultiPolygon"===n.type){var r;t=(r=[]).concat.apply(r,M(n.coordinates))}else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");t=n.coordinates}return t.forEach(function(i){t.forEach(function(e){for(var t=0;t<i.length-1;t++)for(var n=t;n<e.length-1;n++){if(i===e){if(1===Math.abs(t-n))continue;if(0===t&&n===i.length-2&&i[t][0]===i[i.length-1][0]&&i[t][1]===i[i.length-1][1])continue}var r=Gs(i[t][0],i[t][1],i[t+1][0],i[t+1][1],e[n][0],e[n][1],e[n+1][0],e[n+1][1]);r&&o.features.push(G([r[0],r[1]]))}})}),o},e.length=Ys,e.lengthToDegrees=ue,e.lengthToRadians=se,e.lineArc=Us,e.lineChunk=function(e,t,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!e)throw new Error("geojson is required");if(t<=0)throw new Error("segmentLength must be greater than 0");var o=[];return x(e,function(e){i&&(e.geometry.coordinates=e.geometry.coordinates.reverse()),function(e,t,n,r){var i=Ys(e,{units:n});if(i<=t)return r(e);var o=i/t;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++){r(Zs(e,t*a,t*(a+1),{units:n}),a)}}(e,t,r,function(e){o.push(e)})}),U(o)},e.lineEach=De,e.lineIntersect=mt,e.lineOffset=function(e,t,n){if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!e)throw new Error("geojson is required");if(null==t||isNaN(t))throw new Error("distance is required");var i=xe(e),o=e.properties;switch(i){case"LineString":return Js(e,t,r);case"MultiLineString":var a=[];return x(e,function(e){a.push(Js(e,t,r).geometry.coordinates)}),te(a,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=Tn,e.lineReduce=Fe,e.lineSegment=cn,e.lineSlice=function(e,t,n){var r=E(n);if("LineString"!==xe(n))throw new Error("line must be a LineString");for(var i,o=wn(n,e),a=wn(n,t),s=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)s.push(r[u]);return s.push(i[1].geometry.coordinates),Y(s,n.properties)},e.lineSliceAlong=Zs,e.lineSplit=function(e,t){if(!e)throw new Error("line is required");if(!t)throw new Error("splitter is required");var n=xe(e),r=xe(t);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Qs(t,{precision:7});switch(r){case"Point":return tu(e,i);case"MultiPoint":return eu(e,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return eu(e,mt(e,i,{ignoreSelfIntersections:!0}))}},e.lineString=Y,e.lineStrings=ee,e.lineToPolygon=function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.properties,a=null==(t=i.autoComplete)||t,s=null==(n=i.orderCoords)||n;if(null!=(r=i.mutate)&&r||(e=p(e)),"FeatureCollection"===e.type){var u=[];return e.features.forEach(function(e){u.push(E(iu(e,{},a,s)))}),re(u,o)}return iu(e,o,a,s)},e.mask=function(e,t,n){var r,i=null!=(r=null==n?void 0:n.mutate)&&r,o=t;t&&!1===i&&(o=p(t));var a,s=su(o);return("FeatureCollection"===e.type?au(2===(a=e).features.length?Aa(a.features[0].geometry.coordinates,a.features[1].geometry.coordinates):Aa.apply(za,a.features.map(function(e){return e.geometry.coordinates}))):"Feature"===e.type?au(Aa(e.geometry.coordinates)):au(Aa(e.coordinates))).geometry.coordinates.forEach(function(e){s.geometry.coordinates.push(e[0])}),s},e.meta=qe,e.midpoint=function(e,t){return Ee(e,$(e,t)/2,ke(e,t))},e.moranIndex=function(e,t){var n,r,i=t.inputField,o=t.threshold||1e5,a=t.p||2,s=null!=(n=t.binary)&&n,u=Ba(e,{alpha:t.alpha||-1,binary:s,p:a,standardization:null==(r=t.standardization)||r,threshold:o}),l=[];N(e,function(e){var t=e.properties||{};l.push(t[i])});for(var c=uu(l),f=function(e){var t,n=uu(e),r=0,i=F(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r+=Math.pow(o-n,2)}}catch(e){i.e(e)}finally{i.f()}return r/e.length}(l),h=0,d=0,g=0,p=0,v=u.length,y=0;y<v;y++){for(var m=0,_=0;_<v;_++)h+=u[y][_]*(l[y]-c)*(l[_]-c),d+=u[y][_],g+=Math.pow(u[y][_]+u[_][y],2),m+=u[y][_]+u[_][y];p+=Math.pow(m,2)}var b=h/d/f,x=-1/(v-1),w=(v*v*(g*=.5)-v*p+d*d*3)/((v-1)*(v+1)*(d*d))-x*x,k=Math.sqrt(w);return{expectedMoranIndex:x,moranIndex:b,stdNorm:k,zNorm:(b-x)/k}},e.multiLineString=te,e.multiPoint=ne,e.multiPolygon=re,e.nearestNeighborAnalysis=function(e,t){var n=(t=t||{}).studyArea||Je(J(e)),r=t.properties||{},i=t.units||"kilometers",o=[];N(e,function(e){o.push(_i(e))});var a=o.length,s=o.map(function(e,n){return $(e,mu(e,U(o.filter(function(e,t){return t!==n}))).geometry.coordinates,{units:i})}).reduce(function(e,t){return e+t},0)/a,u=a/de(Be(n),"meters",i),l=1/(2*Math.sqrt(u)),c=.26136/Math.sqrt(a*u);return r.nearestNeighborAnalysis={units:i,arealUnits:i+"²",observedMeanDistance:s,expectedMeanDistance:l,nearestNeighborIndex:s/l,numberOfPoints:a,zScore:(s-l)/c},n.properties=r,n},e.nearestPoint=mu,e.nearestPointOnLine=wn,e.nearestPointToLine=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.units,i=t.properties||{},o=function(e){var t=[];switch(e.geometry?e.geometry.type:e.type){case"GeometryCollection":return Te(e,function(e){"Point"===e.type&&t.push({type:"Feature",properties:{},geometry:e})}),{type:"FeatureCollection",features:t};case"FeatureCollection":return e.features=e.features.filter(function(e){return"Point"===e.geometry.type}),e;default:throw new Error("points must be a Point Collection")}}(e);if(!o.features.length)throw new Error("points must contain features");if(!n)throw new Error("line is required");if("LineString"!==xe(n))throw new Error("line must be a LineString");var a=1/0,s=null;return N(o,function(e){var t=_u(e,n,{units:r});t<a&&(a=t,s=e)}),s&&(s.properties=Su(Su(Su({},{dist:a}),s.properties),i)),s},e.planepoint=function(e,t){var n=X(e),r=H(t).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i="Feature"===t.type&&t.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],l=n[1],c=r[0][0],f=r[0][1],h=void 0!==o?o:r[0][2],d=r[1][0],g=r[1][1],p=void 0!==a?a:r[1][2],v=r[2][0],y=r[2][1],m=void 0!==s?s:r[2][2];return(m*(u-c)*(l-g)+h*(u-d)*(l-y)+p*(u-v)*(l-f)-p*(u-c)*(l-y)-m*(u-d)*(l-f)-h*(u-v)*(l-g))/((u-c)*(l-g)+(u-d)*(l-y)+(u-v)*(l-f)-(u-c)*(l-y)-(u-d)*(l-f)-(u-v)*(l-g))},e.point=G,e.pointGrid=as,e.pointOnFeature=function(e){for(var t=function(e){if("FeatureCollection"!==e.type)return"Feature"!==e.type?U([B(e)]):U([e]);return e}(e),n=Un(t),r=!1,i=0;!r&&i<t.features.length;){var o=t.features[i].geometry,a=!1;if("Point"===o.type)n.geometry.coordinates[0]===o.coordinates[0]&&n.geometry.coordinates[1]===o.coordinates[1]&&(r=!0);else if("MultiPoint"===o.type)for(var s=!1,u=0;!s&&u<o.coordinates.length;)n.geometry.coordinates[0]===o.coordinates[u][0]&&n.geometry.coordinates[1]===o.coordinates[u][1]&&(r=!0,s=!0),u++;else if("LineString"===o.type)for(var l=0;!a&&l<o.coordinates.length-1;)Mu(n.geometry.coordinates[0],n.geometry.coordinates[1],o.coordinates[l][0],o.coordinates[l][1],o.coordinates[l+1][0],o.coordinates[l+1][1])&&(a=!0,r=!0),l++;else if("MultiLineString"===o.type)for(var c=0;c<o.coordinates.length;){a=!1;for(var f=0,h=o.coordinates[c];!a&&f<h.length-1;)Mu(n.geometry.coordinates[0],n.geometry.coordinates[1],h[f][0],h[f][1],h[f+1][0],h[f+1][1])&&(a=!0,r=!0),f++;c++}else"Polygon"!==o.type&&"MultiPolygon"!==o.type||V(n,o)&&(r=!0);i++}if(r)return n;for(var d=U([]),g=0;g<t.features.length;g++)d.features=d.features.concat(Ha(t.features[g]).features);return G(mu(n,d).geometry.coordinates)},e.pointToLineDistance=_u,e.pointToPolygonDistance=function t(n,e){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=null!=(r=o.method)?r:"geodesic",s=null!=(i=o.units)?i:"kilometers";if(!n)throw new Error("point is required");if(!e)throw new Error("polygon or multi-polygon is required");var u,l=H(e);if("MultiPolygon"===l.type){var c=l.coordinates.map(function(e){return t(n,z(e),{method:a,units:s})});return Math.min.apply(Math,M(c.map(Math.abs)))*(V(n,e)?-1:1)}if(l.coordinates.length>1){var f=l.coordinates.map(function(e){return t(n,z([e]),{method:a,units:s})}),h=m(u=f)||_(u)||I(u)||k(),d=h[0],g=h.slice(1);if(d>=0)return d;var p=Math.min.apply(Math,M(g));return p<0?Math.abs(p):Math.min(p,Math.abs(d))}var v=_t(l),y=1/0;return x(v,function(e){y=Math.min(y,_u(n,e,{method:a,units:s}))}),V(n,l)?-y:y},e.points=q,e.pointsWithinPolygon=Iu,e.polygon=z,e.polygonSmooth=function(e,t){(t=t||{}).iterations=t.iterations||1;var f=t.iterations,h=[];if(!e)throw new Error("inputPolys is required");return Te(e,function(e,t,n){if("Polygon"===e.type){for(var r=[[]],i=0;i<f;i++){var o=[],a=e;i>0&&(a=z(r).geometry),Au(a,o),r=o.slice(0)}h.push(z(r,n))}else{if("MultiPolygon"!==e.type)throw new Error("geometry is invalid, must be Polygon or MultiPolygon");for(var s=[[[]]],u=0;u<f;u++){var l=[],c=e;u>0&&(c=re(s).geometry),ju(c,l),s=l.slice(0)}h.push(re(s,n))}}),U(h)},e.polygonTangents=function(e,t){var n,r=E(e),i=E(t),o=[],a=[],s=J(t),u=0,l=null;switch(r[0]>s[0]&&r[0]<s[2]&&r[1]>s[1]&&r[1]<s[3]&&(u=(l=mu(e,Ha(t))).properties.featureIndex),xe(t)){case"Polygon":o=i[0][u],a=i[0][0],null!==l&&l.geometry.coordinates[1]<r[1]&&(a=i[0][u]),n=zu(i[0][0],i[0][i[0].length-1],r);var c=K(Du(i[0],r,n,o,a),2);o=c[0],a=c[1];break;case"MultiPolygon":for(var f=0,h=0,d=0,g=0;g<i[0].length;g++){f=g;for(var p=!1,v=0;v<i[0][g].length;v++){if(h=v,d===u){p=!0;break}d++}if(p)break}o=i[0][f][h],a=i[0][f][h],n=zu(i[0][0][0],i[0][0][i[0][0].length-1],r),i.forEach(function(e){var t=K(Du(e[0],r,n,o,a),2);o=t[0],a=t[1]})}return U([G(o),G(a)])},e.polygonToLine=_t,e.polygonize=function(e){var t=Ru.fromGeoJson(e);t.deleteDangles(),t.deleteCutEdges();var n=[],r=[];return t.getEdgeRings().filter(function(e){return e.isValid()}).forEach(function(e){e.isHole()?n.push(e):r.push(e)}),n.forEach(function(e){Lu.findEdgeRingContaining(e,r)&&r.push(e)}),U(r.map(function(e){return e.toPolygon()}))},e.polygons=Q,e.projection=Uu,e.propEach=Ie,e.propReduce=Oe,e.propertiesContainsFilter=$i,e.quadratAnalysis=function(e,t){for(var n=(t=t||{}).studyBbox||J(e),r=t.confidenceLevel||20,i=e.features,o=i.length,a=Be(Je(n)),s=us(n,Math.sqrt(a/o*2),{units:"meters"}).features,u={},l=0;l<s.length;l++)u[l]={box:J(s[l]),cnt:0};var c,f=0,h=F(i);try{for(h.s();!(c=h.n()).done;)for(var d=c.value,g=0,p=Object.keys(u);g<p.length;g++){var v=p[g],j=u[v].box;if(Zu(X(d),j)){u[v].cnt+=1,f+=1;break}}}catch(e){h.e(e)}finally{h.f()}for(var y=0,m=0,_=Object.keys(u);m<_.length;m++){var b=u[_[m]].cnt;b>y&&(y=b)}for(var x=[],w=Object.keys(u).length,k=f/w,E=0,N=0;N<y+1;N++)E+=Math.exp(-k)*Math.pow(k,N)/Xu(N),x.push(E);for(var S=[],M=0,I=0;I<y+1;I++){for(var O=0,C=Object.keys(u);O<C.length;O++){u[C[O]].cnt===I&&(M+=1)}var D=M/w;S.push(D)}for(var P=0,T=0;T<y+1;T++){var L=Math.abs(x[T]-S[T]);L>P&&(P=L)}var R=Wu[r]/Math.sqrt(w),A={criticalValue:R,isRandom:!0,maxAbsoluteDifference:P,observedDistribution:S};return P>R&&(A.isRandom=!1),A},e.radiansToDegrees=fe,e.radiansToLength=ae,e.random=rl,e.randomLineString=el,e.randomPoint=Ku,e.randomPolygon=Qu,e.randomPosition=Hu,e.rectangleGrid=ss,e.rewind=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(r=r||{}))throw new Error("options is invalid");var i=null!=(t=r.mutate)&&t,o=null!=(n=r.reverse)&&n;if(!e)throw new Error("<geojson> is required");if("boolean"!=typeof o)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof i)throw new Error("<mutate> must be a boolean");i||"Point"===e.type||"MultiPoint"===e.type||(e=p(e));var a=[];switch(e.type){case"GeometryCollection":return Te(e,function(e){il(e,o)}),e;case"FeatureCollection":return N(e,function(e){N(il(e,o),function(e){a.push(e)})}),U(a)}return il(e,o)},e.rhumbBearing=Ne,e.rhumbDestination=Ga,e.rhumbDistance=Ya,e.round=oe,e.sample=function(e,t){if(!e)throw new Error("fc is required");if(null==t)throw new Error("num is required");if("number"!=typeof t)throw new Error("num must be a number");var n=U(function(e,t){var n,r,i=e.slice(0),o=e.length,a=o-t;for(;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(e.features,t));return n},e.sector=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!Z(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!e)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!t)throw new Error("radius is required");if("object"!==_r(i))throw new Error("options must be an object");if(sl(n)===sl(r))return Vi(e,t,i);var a=E(e),s=Us(e,t,n,r,i),u=[[a]];return w(s,function(e){u[0].push(e)}),u[0].push(a),z(u,o)},e.segmentEach=Ae,e.segmentReduce=je,e.shortestPath=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Z(n=n||{}))throw new Error("options is invalid");var r=n.obstacles||U([]),i=n.resolution||100;if(!e)throw new Error("start is required");if(!t)throw new Error("end is required");if(i&&(!W(i)||i<=0))throw new Error("options.resolution must be a number, greater than 0");var o=X(e),a=X(t);if(e=G(o),t=G(a),"FeatureCollection"===r.type){if(0===r.features.length)return Y([o,a])}else{if("Polygon"!==r.type)throw new Error("invalid obstacles");r=U([B(H(r))])}var s=r;s.features.push(e),s.features.push(t);var u=K(J(ul(Je(J(s)),1.15)),4),l=u[0],c=u[1],f=u[2],h=u[3],d=$([l,c],[f,c],n)/i;s.features.pop(),s.features.pop();for(var g,p,v=d/$([l,c],[f,c],n)*(f-l),y=d/$([l,c],[l,h],n)*(h-c),m=f-l,_=h-c,A=Math.floor(m/v),j=Math.floor(_/y),D=(m-A*v)/2,b=[],x=[],w=1/0,k=1/0,E=h-(_-j*y)/2,N=0;E>=c;){for(var S=[],M=[],I=l+D,O=0;I<=f;){var C=G([I,E]),P=pl(C,r);S.push(P?0:1),M.push(I+"|"+E);var T=$(C,e);!P&&T<w&&(w=T,g={x:O,y:N});var F=$(C,t);!P&&F<k&&(k=F,p={x:O,y:N}),I+=v,O++}x.push(S),b.push(M),E-=y,N++}var L=new hl(x,{diagonal:!0}),z=L.grid[g.y][g.x],V=L.grid[p.y][p.x],q=fl.search(L,z,V),R=[o];return q.forEach(function(e){var t=b[e.x][e.y].split("|");R.push([+t[0],+t[1]])}),R.push(a),zt(Y(R))},e.simplify=function(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Z(i=null!=i?i:{}))throw new Error("options is invalid");var o=null!=(t=i.tolerance)?t:1,a=null!=(n=i.highQuality)&&n,s=null!=(r=i.mutate)&&r;if(!e)throw new Error("geojson is required");if(o&&o<0)throw new Error("invalid tolerance");return!0!==s&&(e=p(e)),Te(e,function(e){!function(e,t,n){var r=e.type;if("Point"===r||"MultiPoint"===r)return e;if(zt(e,{mutate:!0}),"GeometryCollection"!==r)switch(r){case"LineString":e.coordinates=_l(e.coordinates,t,n);break;case"MultiLineString":e.coordinates=e.coordinates.map(function(e){return _l(e,t,n)});break;case"Polygon":e.coordinates=bl(e.coordinates,t,n);break;case"MultiPolygon":e.coordinates=e.coordinates.map(function(e){return bl(e,t,n)})}}(e,o,a)}),e},e.square=Ks,e.squareGrid=us,e.standardDeviationalEllipse=function(e,t){var n;if(!Z(t=t||{}))throw new Error("options is invalid");var r=t.steps||64,i=t.weight,o=t.properties||{};if(!W(r))throw new Error("steps must be a number");if(!Z(o))throw new Error("properties must be a number");var a=Pe(e).length,s=mi(e,{weight:i}),u=0,l=0,c=0;N(e,function(e){var t,n=i&&(null==(t=e.properties)?void 0:t[i])||1,r=wl(E(e),E(s));u+=Math.pow(r.x,2)*n,l+=Math.pow(r.y,2)*n,c+=r.x*r.y*n});var f=u-l,h=Math.sqrt(Math.pow(f,2)+4*Math.pow(c,2)),d=2*c,g=Math.atan((f+h)/d),p=180*g/Math.PI,v=0,y=0,m=0;N(e,function(e){var t,n=i&&(null==(t=e.properties)?void 0:t[i])||1,r=wl(E(e),E(s));v+=Math.pow(r.x*Math.cos(g)-r.y*Math.sin(g),2)*n,y+=Math.pow(r.x*Math.sin(g)+r.y*Math.cos(g),2)*n,m+=n});var _=Math.sqrt(2*v/m),b=Math.sqrt(2*y/m),x=Wa(s,_,b,{units:"degrees",angle:p,steps:r,properties:o}),w=Iu(e,U([x])),k={meanCenterCoordinates:E(s),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:a,angle:p,percentageWithinEllipse:100*Pe(w).length/a};return x.properties=null!=(n=x.properties)?n:{},x.properties.standardDeviationalEllipse=k,x},e.tag=function(e,n,r,i){return e=p(e),n=p(n),N(e,function(t){t.properties||(t.properties={}),N(n,function(e){t.properties&&e.properties&&void 0===t.properties[i]&&V(t,e)&&(t.properties[i]=e.properties[r])})}),e},e.tesselate=function(e){if(!e.geometry||"Polygon"!==e.geometry.type&&"MultiPolygon"!==e.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var t={type:"FeatureCollection",features:[]};return"Polygon"===e.geometry.type?t.features=Ml(e.geometry.coordinates):e.geometry.coordinates.forEach(function(e){t.features=t.features.concat(Ml(e))}),t},e.tin=co,e.toMercator=Vu,e.toWgs84=qu,e.transformRotate=Ua,e.transformScale=ul,e.transformTranslate=function(e,n,r,t){if(!Z(t=t||{}))throw new Error("options is invalid");var i=t.units,o=t.zTranslation,a=t.mutate;if(!e)throw new Error("geojson is required");if(null==n||isNaN(n))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===n&&0===o)return e;if(null==r||isNaN(r))throw new Error("direction is required");return n<0&&(n=-n,r+=180),!1!==a&&void 0!==a||(e=p(e)),w(e,function(e){var t=E(Ga(e,n,r,{units:i}));e[0]=t[0],e[1]=t[1],o&&3===e.length&&(e[2]+=o)}),e},e.triangleGrid=ls,e.truncate=Qs,e.union=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(Te(e,function(e){n.push(e.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");var r=Aa.apply(za,[n[0]].concat(M(n.slice(1))));return 0===r.length?null:1===r.length?z(r[0],t.properties):re(r,t.properties)},e.unkinkPolygon=function(e){var n=[];return x(e,function(t){"Polygon"===t.geometry.type&&N(Cl(t),function(e){n.push(z(e.geometry.coordinates,t.properties))})}),U(n)},e.validateBBox=ge,e.validateId=pe,e.voronoi=function(n,e){if(!Z(e=e||{}))throw new Error("options is invalid");var t=e.bbox||[-180,-85,180,85];if(!n)throw new Error("points is required");if(!Array.isArray(t))throw new Error("bbox is invalid");return be(n,"Point","points"),U(function(){var i=Fl,o=zl,t=null;function n(r){return new mc(r.map(function(e,t){var n=[Math.round(i(e,t,r)/S)*S,Math.round(o(e,t,r)/S)*S];return n.index=t,n.data=e,n}),t)}return n.polygons=function(e){return n(e).polygons()},n.links=function(e){return n(e).links()},n.triangles=function(e){return n(e).triangles()},n.x=function(e){return arguments.length?(i="function"==typeof e?e:Dl(+e),n):i},n.y=function(e){return arguments.length?(o="function"==typeof e?e:Dl(+e),n):o},n.extent=function(e){return arguments.length?(t=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],n):t&&[[t[0][0],t[0][1]],[t[1][0],t[1][1]]]},n.size=function(e){return arguments.length?(t=null==e?null:[[0,0],[+e[0],+e[1]]],n):t&&[t[1][0]-t[0][0],t[1][1]-t[0][1]]},n}().x(function(e){return e.geometry.coordinates[0]}).y(function(e){return e.geometry.coordinates[1]}).extent([[t[0],t[1]],[t[2],t[3]]]).polygons(n.features).map(function(e,t){return Object.assign(function(e){return(e=e.slice()).push(e[0]),z([e])}(e),{properties:Bi(n.features[t].properties)})}))}})},{}],15:[function(e,j,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n={average:true,bezier:true,blend:true,cubehelix:true,mix:true,interpolate:true,random:true,scale:true,analyze:true,limits:true,contrast:true,contrastAPCA:true,deltaE:true,distance:true,valid:true,input:true,scales:true,colors:true,brewer:true,Color:true};Object.defineProperty(t,"Color",{enumerable:true,get:function(){return F.default}});Object.defineProperty(t,"analyze",{enumerable:true,get:function(){return f.analyze}});Object.defineProperty(t,"average",{enumerable:true,get:function(){return i.default}});Object.defineProperty(t,"bezier",{enumerable:true,get:function(){return o.default}});Object.defineProperty(t,"blend",{enumerable:true,get:function(){return a.default}});Object.defineProperty(t,"brewer",{enumerable:true,get:function(){return D.default}});Object.defineProperty(t,"colors",{enumerable:true,get:function(){return _.default}});Object.defineProperty(t,"contrast",{enumerable:true,get:function(){return h.default}});Object.defineProperty(t,"contrastAPCA",{enumerable:true,get:function(){return d.default}});Object.defineProperty(t,"cubehelix",{enumerable:true,get:function(){return s.default}});t.default=void 0;Object.defineProperty(t,"deltaE",{enumerable:true,get:function(){return g.default}});Object.defineProperty(t,"distance",{enumerable:true,get:function(){return p.default}});Object.defineProperty(t,"input",{enumerable:true,get:function(){return y.default}});Object.defineProperty(t,"interpolate",{enumerable:true,get:function(){return u.default}});Object.defineProperty(t,"limits",{enumerable:true,get:function(){return f.limits}});Object.defineProperty(t,"mix",{enumerable:true,get:function(){return u.default}});Object.defineProperty(t,"random",{enumerable:true,get:function(){return l.default}});Object.defineProperty(t,"scale",{enumerable:true,get:function(){return c.default}});Object.defineProperty(t,"scales",{enumerable:true,get:function(){return m.default}});Object.defineProperty(t,"valid",{enumerable:true,get:function(){return v.default}});var r=A(e("./src/chroma.js"));e("./src/io/named/index.js");e("./src/ops/alpha.js");e("./src/ops/clipped.js");e("./src/ops/darken.js");e("./src/ops/get.js");e("./src/ops/luminance.js");e("./src/ops/mix.js");e("./src/ops/premultiply.js");e("./src/ops/saturate.js");e("./src/ops/set.js");e("./src/ops/shade.js");e("./src/interpolator/rgb.js");e("./src/interpolator/lrgb.js");e("./src/interpolator/lab.js");e("./src/interpolator/lch.js");e("./src/interpolator/num.js");e("./src/interpolator/hcg.js");e("./src/interpolator/hsi.js");e("./src/interpolator/hsl.js");e("./src/interpolator/hsv.js");e("./src/interpolator/oklab.js");e("./src/interpolator/oklch.js");var i=A(e("./src/generator/average.js"));var o=A(e("./src/generator/bezier.js"));var a=A(e("./src/generator/blend.js"));var s=A(e("./src/generator/cubehelix.js"));var u=A(e("./src/generator/mix.js"));var l=A(e("./src/generator/random.js"));var c=A(e("./src/generator/scale.js"));var f=e("./src/utils/analyze.js");var h=A(e("./src/utils/contrast.js"));var d=A(e("./src/utils/contrastAPCA.js"));var g=A(e("./src/utils/delta-e.js"));var p=A(e("./src/utils/distance.js"));var v=A(e("./src/utils/valid.js"));var y=A(e("./src/io/input.js"));var m=A(e("./src/utils/scales.js"));var _=A(e("./src/colors/w3cx11.js"));var D=A(e("./src/colors/colorbrewer.js"));var F=A(e("./src/Color.js"));var b=e("./src/io/cmyk/index.js");Object.keys(b).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===b[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return b[e]}})});var x=e("./src/io/css/index.js");Object.keys(x).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===x[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return x[e]}})});var w=e("./src/io/gl/index.js");Object.keys(w).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===w[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return w[e]}})});var k=e("./src/io/hcg/index.js");Object.keys(k).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===k[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return k[e]}})});var E=e("./src/io/hex/index.js");Object.keys(E).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===E[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return E[e]}})});var N=e("./src/io/hsi/index.js");Object.keys(N).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===N[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return N[e]}})});var S=e("./src/io/hsl/index.js");Object.keys(S).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===S[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return S[e]}})});var M=e("./src/io/hsv/index.js");Object.keys(M).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===M[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return M[e]}})});var I=e("./src/io/lab/index.js");Object.keys(I).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===I[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return I[e]}})});var O=e("./src/io/lch/index.js");Object.keys(O).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===O[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return O[e]}})});var C=e("./src/io/num/index.js");Object.keys(C).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===C[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return C[e]}})});var P=e("./src/io/rgb/index.js");Object.keys(P).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===P[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return P[e]}})});var T=e("./src/io/temp/index.js");Object.keys(T).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===T[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return T[e]}})});var L=e("./src/io/oklab/index.js");Object.keys(L).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===L[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return L[e]}})});var R=e("./src/io/oklch/index.js");Object.keys(R).forEach(function(e){if(e==="default"||e==="__esModule")return;if(Object.prototype.hasOwnProperty.call(n,e))return;if(e in t&&t[e]===R[e])return;Object.defineProperty(t,e,{enumerable:true,get:function(){return R[e]}})});function A(e){return e&&e.__esModule?e:{default:e}}Object.assign(r.default,{analyze:f.analyze,average:i.default,bezier:o.default,blend:a.default,brewer:D.default,Color:F.default,colors:_.default,contrast:h.default,contrastAPCA:d.default,cubehelix:s.default,deltaE:g.default,distance:p.default,input:y.default,interpolate:u.default,limits:f.limits,mix:u.default,random:l.default,scale:c.default,scales:m.default,valid:v.default});var z=t.default=r.default},{"./src/Color.js":16,"./src/chroma.js":17,"./src/colors/colorbrewer.js":18,"./src/colors/w3cx11.js":19,"./src/generator/average.js":20,"./src/generator/bezier.js":21,"./src/generator/blend.js":22,"./src/generator/cubehelix.js":23,"./src/generator/mix.js":24,"./src/generator/random.js":25,"./src/generator/scale.js":26,"./src/interpolator/hcg.js":28,"./src/interpolator/hsi.js":29,"./src/interpolator/hsl.js":30,"./src/interpolator/hsv.js":31,"./src/interpolator/lab.js":33,"./src/interpolator/lch.js":34,"./src/interpolator/lrgb.js":35,"./src/interpolator/num.js":36,"./src/interpolator/oklab.js":37,"./src/interpolator/oklch.js":38,"./src/interpolator/rgb.js":39,"./src/io/cmyk/index.js":41,"./src/io/css/index.js":45,"./src/io/gl/index.js":51,"./src/io/hcg/index.js":53,"./src/io/hex/index.js":56,"./src/io/hsi/index.js":59,"./src/io/hsl/index.js":62,"./src/io/hsv/index.js":65,"./src/io/input.js":67,"./src/io/lab/index.js":68,"./src/io/lch/index.js":73,"./src/io/named/index.js":78,"./src/io/num/index.js":79,"./src/io/oklab/index.js":82,"./src/io/oklch/index.js":85,"./src/io/rgb/index.js":88,"./src/io/temp/index.js":89,"./src/ops/alpha.js":92,"./src/ops/clipped.js":93,"./src/ops/darken.js":94,"./src/ops/get.js":95,"./src/ops/luminance.js":96,"./src/ops/mix.js":97,"./src/ops/premultiply.js":98,"./src/ops/saturate.js":99,"./src/ops/set.js":100,"./src/ops/shade.js":101,"./src/utils/analyze.js":102,"./src/utils/contrast.js":104,"./src/utils/contrastAPCA.js":105,"./src/utils/delta-e.js":106,"./src/utils/distance.js":107,"./src/utils/scales.js":112,"./src/utils/valid.js":115}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var o=e("./utils/index.js");var a=r(e("./io/input.js"));function r(e){return e&&e.__esModule?e:{default:e}}class i{constructor(...t){const e=this;if((0,o.type)(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor){return t[0]}let n=(0,o.last)(t);let r=false;if(!n){r=true;if(!a.default.sorted){a.default.autodetect=a.default.autodetect.sort((e,t)=>t.p-e.p);a.default.sorted=true}for(let e of a.default.autodetect){n=e.test(...t);if(n)break}}if(a.default.format[n]){const i=a.default.format[n].apply(null,r?t:t.slice(0,-1));e._rgb=(0,o.clip_rgb)(i)}else{throw new Error("unknown format: "+t)}if(e._rgb.length===3)e._rgb.push(1)}toString(){if((0,o.type)(this.hex)=="function")return this.hex();return`[${this._rgb.join(",")}]`}}var s=n.default=i},{"./io/input.js":67,"./utils/index.js":108}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=o(e("./Color.js"));var i=e("./version.js");function o(e){return e&&e.__esModule?e:{default:e}}const a=(...e)=>{return new r.default(...e)};a.version=i.version;var s=n.default=a},{"./Color.js":16,"./version.js":116}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;const r={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]};const i=Object.keys(r);const o=new Map(i.map(e=>[e.toLowerCase(),e]));const a=typeof Proxy==="function"?new Proxy(r,{get(e,t){const n=t.toLowerCase();if(o.has(n)){return e[o.get(n)]}},getOwnPropertyNames(){return Object.getOwnPropertyNames(i)}}):r;var s=n.default=a},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;const r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};var i=n.default=r},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var h=r(e("../Color.js"));var u=e("../utils/index.js");function r(e){return e&&e.__esModule?e:{default:e}}const{pow:l,sqrt:c,PI:d,cos:g,sin:p,atan2:v}=Math;var i=(e,i="lrgb",o=null)=>{const t=e.length;if(!o)o=Array.from(new Array(t)).map(()=>1);const n=t/o.reduce(function(e,t){return e+t});o.forEach((e,t)=>{o[t]*=n});e=e.map(e=>new h.default(e));if(i==="lrgb"){return y(e,o)}const r=e.shift();const a=r.get(i);const s=[];let u=0;let l=0;for(let e=0;e<a.length;e++){a[e]=(a[e]||0)*o[0];s.push(isNaN(a[e])?0:o[0]);if(i.charAt(e)==="h"&&!isNaN(a[e])){const f=a[e]/180*d;u+=g(f)*o[0];l+=p(f)*o[0]}}let c=r.alpha()*o[0];e.forEach((e,n)=>{const r=e.get(i);c+=e.alpha()*o[n+1];for(let t=0;t<a.length;t++){if(!isNaN(r[t])){s[t]+=o[n+1];if(i.charAt(t)==="h"){const e=r[t]/180*d;u+=g(e)*o[n+1];l+=p(e)*o[n+1]}else{a[t]+=r[t]*o[n+1]}}}});for(let t=0;t<a.length;t++){if(i.charAt(t)==="h"){let e=v(l/s[t],u/s[t])/d*180;while(e<0)e+=360;while(e>=360)e-=360;a[t]=e}else{a[t]=a[t]/s[t]}}c/=t;return new h.default(a,i).alpha(c>.99999?1:c,true)};n.default=i;const y=(t,n)=>{const r=t.length;const i=[0,0,0,0];for(let e=0;e<t.length;e++){const o=t[e];const a=n[e]/r;const s=o._rgb;i[0]+=l(s[0],2)*a;i[1]+=l(s[1],2)*a;i[2]+=l(s[2],2)*a;i[3]+=s[3]*a}i[0]=c(i[0]);i[1]=c(i[1]);i[2]=c(i[2]);if(i[3]>.9999999)i[3]=1;return new h.default((0,u.clip_rgb)(i))}},{"../Color.js":16,"../utils/index.js":108}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var u=i(e("../Color.js"));e("../io/lab/index.js");var r=i(e("./scale.js"));function i(e){return e&&e.__esModule?e:{default:e}}const l=function(t){let n=[1,1];for(let e=1;e<t;e++){let t=[1];for(let e=1;e<=n.length;e++){t[e]=(n[e]||0)+n[e-1]}n=t}return n};const o=function(e){let r,i,o,a;e=e.map(e=>new u.default(e));if(e.length===2){[i,o]=e.map(e=>e.lab());r=function(t){const e=[0,1,2].map(e=>i[e]+t*(o[e]-i[e]));return new u.default(e,"lab")}}else if(e.length===3){[i,o,a]=e.map(e=>e.lab());r=function(t){const e=[0,1,2].map(e=>(1-t)*(1-t)*i[e]+2*(1-t)*t*o[e]+t*t*a[e]);return new u.default(e,"lab")}}else if(e.length===4){let n;[i,o,a,n]=e.map(e=>e.lab());r=function(t){const e=[0,1,2].map(e=>(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*o[e]+3*(1-t)*t*t*a[e]+t*t*t*n[e]);return new u.default(e,"lab")}}else if(e.length>=5){let t,a,s;t=e.map(e=>e.lab());s=e.length-1;a=l(s);r=function(i){const o=1-i;const e=[0,1,2].map(r=>t.reduce((e,t,n)=>e+a[n]*o**(s-n)*i**n*t[r],0));return new u.default(e,"lab")}}else{throw new RangeError("No point in running bezier with only one color.")}return r};var a=e=>{const t=o(e);t.scale=()=>(0,r.default)(t);return t};n.default=a},{"../Color.js":16,"../io/lab/index.js":68,"./scale.js":26}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/rgb/index.js");var o=r(e("../chroma.js"));function r(e){return e&&e.__esModule?e:{default:e}}const i=(e,t,n)=>{if(!i[n]){throw new Error("unknown blend mode "+n)}return i[n](e,t)};const a=i=>(e,t)=>{const n=(0,o.default)(t).rgb();const r=(0,o.default)(e).rgb();return o.default.rgb(i(n,r))};const s=r=>(e,t)=>{const n=[];n[0]=r(e[0],t[0]);n[1]=r(e[1],t[1]);n[2]=r(e[2],t[2]);return n};const u=e=>e;const l=(e,t)=>e*t/255;const c=(e,t)=>e>t?t:e;const f=(e,t)=>e>t?e:t;const h=(e,t)=>255*(1-(1-e/255)*(1-t/255));const d=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255));const g=(e,t)=>255*(1-(1-t/255)/(e/255));const p=(e,t)=>{if(e===255)return 255;e=255*(t/255)/(1-e/255);return e>255?255:e};i.normal=a(s(u));i.multiply=a(s(l));i.screen=a(s(h));i.overlay=a(s(d));i.darken=a(s(c));i.lighten=a(s(f));i.dodge=a(s(p));i.burn=a(s(g));var v=n.default=i},{"../chroma.js":17,"../io/rgb/index.js":88}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=i;var y=e("../utils/index.js");var m=r(e("../chroma.js"));function r(e){return e&&e.__esModule?e:{default:e}}const{pow:_,sin:b,cos:x}=Math;function i(c=300,f=-1.5,h=1,d=1,g=[0,1]){let p=0,v;if((0,y.type)(g)==="array"){v=g[1]-g[0]}else{v=0;g=[g,g]}const t=function(e){const t=y.TWOPI*((c+120)/360+f*e);const n=_(g[0]+v*e,d);const r=p!==0?h[0]+e*p:h;const i=r*n*(1-n)/2;const o=x(t);const a=b(t);const s=n+i*(-.14861*o+1.78277*a);const u=n+i*(-.29227*o-.90649*a);const l=n+i*(+1.97294*o);return(0,m.default)((0,y.clip_rgb)([s*255,u*255,l*255,1]))};t.start=function(e){if(e==null){return c}c=e;return t};t.rotations=function(e){if(e==null){return f}f=e;return t};t.gamma=function(e){if(e==null){return d}d=e;return t};t.hue=function(e){if(e==null){return h}h=e;if((0,y.type)(h)==="array"){p=h[1]-h[0];if(p===0){h=h[1]}}else{p=0}return t};t.lightness=function(e){if(e==null){return g}if((0,y.type)(e)==="array"){g=e;v=e[1]-e[0]}else{g=[e,e];v=0}return t};t.scale=()=>m.default.scale(t);t.hue(h);return t}},{"../chroma.js":17,"../utils/index.js":108}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var o=r(e("../Color.js"));var a=e("../utils/index.js");var s=r(e("../interpolator/index.js"));function r(e){return e&&e.__esModule?e:{default:e}}var i=(e,t,n=.5,...r)=>{let i=r[0]||"lrgb";if(!s.default[i]&&!r.length){i=Object.keys(s.default)[0]}if(!s.default[i]){throw new Error(`interpolation mode ${i} is not defined`)}if((0,a.type)(e)!=="object")e=new o.default(e);if((0,a.type)(t)!=="object")t=new o.default(t);return s.default[i](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};n.default=i},{"../Color.js":16,"../interpolator/index.js":32,"../utils/index.js":108}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}const o="0123456789abcdef";const{floor:a,random:s}=Math;var u=()=>{let t="#";for(let e=0;e<6;e++){t+=o.charAt(a(s()*16))}return new r.default(t,"hex")};n.default=u},{"../Color.js":16}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=i;var E=r(e("../chroma.js"));var N=e("../utils/index.js");function r(e){return e&&e.__esModule?e:{default:e}}const{pow:S}=Math;function i(o){let s="rgb";let u=(0,E.default)("#ccc");let t=0;let a=[0,1];let l=[];let c=[0,0];let f=false;let h=[];let n=false;let d=0;let g=1;let r=false;let p={};let v=true;let y=1;const i=function(t){t=t||["#fff","#000"];if(t&&(0,N.type)(t)==="string"&&E.default.brewer&&E.default.brewer[t.toLowerCase()]){t=E.default.brewer[t.toLowerCase()]}if((0,N.type)(t)==="array"){if(t.length===1){t=[t[0],t[0]]}t=t.slice(0);for(let e=0;e<t.length;e++){t[e]=(0,E.default)(t[e])}l.length=0;for(let e=0;e<t.length;e++){l.push(e/(t.length-1))}}w();return h=t};const m=function(t){if(f!=null){const n=f.length-1;let e=0;while(e<n&&t>=f[e]){e++}return e-1}return 0};let _=e=>e;let b=e=>e;const x=function(e,t){let n,r;if(t==null){t=false}if(isNaN(e)||e===null){return u}if(!t){if(f&&f.length>2){const o=m(e);r=o/(f.length-2)}else if(g!==d){r=(e-d)/(g-d)}else{r=1}}else{r=e}r=b(r);if(!t){r=_(r)}if(y!==1){r=S(r,y)}r=c[0]+r*(1-c[0]-c[1]);r=(0,N.limit)(r,0,1);const i=Math.floor(r*1e4);if(v&&p[i]){n=p[i]}else{if((0,N.type)(h)==="array"){for(let e=0;e<l.length;e++){const a=l[e];if(r<=a){n=h[e];break}if(r>=a&&e===l.length-1){n=h[e];break}if(r>a&&r<l[e+1]){r=(r-a)/(l[e+1]-a);n=E.default.interpolate(h[e],h[e+1],r,s);break}}}else if((0,N.type)(h)==="function"){n=h(r)}if(v){p[i]=n}}return n};var w=()=>p={};i(o);const k=function(e){const t=(0,E.default)(x(e));if(n&&t[n]){return t[n]()}else{return t}};k.classes=function(e){if(e!=null){if((0,N.type)(e)==="array"){f=e;a=[e[0],e[e.length-1]]}else{const t=E.default.analyze(a);if(e===0){f=[t.min,t.max]}else{f=E.default.limits(t,"e",e)}}return k}return f};k.domain=function(n){if(!arguments.length){return a}d=n[0];g=n[n.length-1];l=[];const t=h.length;if(n.length===t&&d!==g){for(let e of Array.from(n)){l.push((e-d)/(g-d))}}else{for(let e=0;e<t;e++){l.push(e/(t-1))}if(n.length>2){const i=n.map((e,t)=>t/(n.length-1));const o=n.map(e=>(e-d)/(g-d));if(!o.every((e,t)=>i[t]===e)){b=e=>{if(e<=0||e>=1)return e;let t=0;while(e>=o[t+1])t++;const n=(e-o[t])/(o[t+1]-o[t]);const r=i[t]+n*(i[t+1]-i[t]);return r}}}}a=[d,g];return k};k.mode=function(e){if(!arguments.length){return s}s=e;w();return k};k.range=function(e,t){i(e,t);return k};k.out=function(e){n=e;return k};k.spread=function(e){if(!arguments.length){return t}t=e;return k};k.correctLightness=function(e){if(e==null){e=true}r=e;w();if(r){_=function(e){const t=x(0,true).lab()[0];const n=x(1,true).lab()[0];const r=t>n;let i=x(e,true).lab()[0];const o=t+(n-t)*e;let a=i-o;let s=0;let u=1;let l=20;while(Math.abs(a)>.01&&l-- >0){(function(){if(r){a*=-1}if(a<0){s=e;e+=(u-e)*.5}else{u=e;e+=(s-e)*.5}i=x(e,true).lab()[0];return a=i-o})()}return e}}else{_=e=>e}return k};k.padding=function(e){if(e!=null){if((0,N.type)(e)==="number"){e=[e,e]}c=e;return k}else{return c}};k.colors=function(t,n){if(arguments.length<2){n="hex"}let e=[];if(arguments.length===0){e=h.slice(0)}else if(t===1){e=[k(.5)]}else if(t>1){const r=a[0];const i=a[1]-r;e=M(0,t,false).map(e=>k(r+e/(t-1)*i))}else{o=[];let r=[];if(f&&f.length>2){for(let e=1,t=f.length,n=1<=t;n?e<t:e>t;n?e++:e--){r.push((f[e-1]+f[e])*.5)}}else{r=a}e=r.map(e=>k(e))}if(E.default[n]){e=e.map(e=>e[n]())}return e};k.cache=function(e){if(e!=null){v=e;return k}else{return v}};k.gamma=function(e){if(e!=null){y=e;return k}else{return y}};k.nodata=function(e){if(e!=null){u=(0,E.default)(e);return k}else{return u}};return k}function M(t,e,n){let r=[];let i=t<e;let o=!n?e:i?e+1:e-1;for(let e=t;i?e<o:e>o;i?e++:e--){r.push(e)}return r}},{"../chroma.js":17,"../utils/index.js":108}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var v=r(e("../Color.js"));function r(e){return e&&e.__esModule?e:{default:e}}var i=(e,t,n,r)=>{let i,o;if(r==="hsl"){i=e.hsl();o=t.hsl()}else if(r==="hsv"){i=e.hsv();o=t.hsv()}else if(r==="hcg"){i=e.hcg();o=t.hcg()}else if(r==="hsi"){i=e.hsi();o=t.hsi()}else if(r==="lch"||r==="hcl"){r="hcl";i=e.hcl();o=t.hcl()}else if(r==="oklch"){i=e.oklch().reverse();o=t.oklch().reverse()}let a,s,u,l,c,f;if(r.substr(0,1)==="h"||r==="oklch"){[a,u,c]=i;[s,l,f]=o}let h,d,g,p;if(!isNaN(a)&&!isNaN(s)){if(s>a&&s-a>180){p=s-(a+360)}else if(s<a&&a-s>180){p=s+360-a}else{p=s-a}d=a+n*p}else if(!isNaN(a)){d=a;if((f==1||f==0)&&r!="hsv")h=u}else if(!isNaN(s)){d=s;if((c==1||c==0)&&r!="hsv")h=l}else{d=Number.NaN}if(h===undefined)h=u+n*(l-u);g=c+n*(f-c);return r==="oklch"?new v.default([g,h,d],r):new v.default([d,h,g],r)};n.default=i},{"../Color.js":16}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/hcg/index.js");var r=o(e("./_hsx.js"));var i=o(e("./index.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{return(0,r.default)(e,t,n,"hcg")};i.default.hcg=a;var s=n.default=a},{"../io/hcg/index.js":53,"./_hsx.js":27,"./index.js":32}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/hsi/index.js");var r=o(e("./_hsx.js"));var i=o(e("./index.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{return(0,r.default)(e,t,n,"hsi")};i.default.hsi=a;var s=n.default=a},{"../io/hsi/index.js":59,"./_hsx.js":27,"./index.js":32}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/hsl/index.js");var r=o(e("./_hsx.js"));var i=o(e("./index.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{return(0,r.default)(e,t,n,"hsl")};i.default.hsl=a;var s=n.default=a},{"../io/hsl/index.js":62,"./_hsx.js":27,"./index.js":32}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/hsv/index.js");var r=o(e("./_hsx.js"));var i=o(e("./index.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{return(0,r.default)(e,t,n,"hsv")};i.default.hsv=a;var s=n.default=a},{"../io/hsv/index.js":65,"./_hsx.js":27,"./index.js":32}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=n.default={}},{}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/lab/index.js");var r=i(e("./index.js"));var o=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{const r=e.lab();const i=t.lab();return new o.default(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};r.default.lab=a;var s=n.default=a},{"../Color.js":16,"../io/lab/index.js":68,"./index.js":32}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/lch/index.js");var r=o(e("./_hsx.js"));var i=o(e("./index.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{return(0,r.default)(e,t,n,"lch")};i.default.lch=a;i.default.hcl=a;var s=n.default=a},{"../io/lch/index.js":73,"./_hsx.js":27,"./index.js":32}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var l=i(e("../Color.js"));var r=i(e("./index.js"));function i(e){return e&&e.__esModule?e:{default:e}}const{sqrt:c,pow:f}=Math;const o=(e,t,n)=>{const[r,i,o]=e._rgb;const[a,s,u]=t._rgb;return new l.default(c(f(r,2)*(1-n)+f(a,2)*n),c(f(i,2)*(1-n)+f(s,2)*n),c(f(o,2)*(1-n)+f(u,2)*n),"rgb")};r.default.lrgb=o;var a=n.default=o},{"../Color.js":16,"./index.js":32}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/num/index.js");var r=i(e("./index.js"));var o=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{const r=e.num();const i=t.num();return new o.default(r+n*(i-r),"num")};r.default.num=a;var s=n.default=a},{"../Color.js":16,"../io/num/index.js":79,"./index.js":32}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/oklab/index.js");var r=i(e("./index.js"));var o=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{const r=e.oklab();const i=t.oklab();return new o.default(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"oklab")};r.default.oklab=a;var s=n.default=a},{"../Color.js":16,"../io/oklab/index.js":82,"./index.js":32}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;e("../io/lch/index.js");var r=o(e("./_hsx.js"));var i=o(e("./index.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{return(0,r.default)(e,t,n,"oklch")};i.default.oklch=a;var s=n.default=a},{"../io/lch/index.js":73,"./_hsx.js":27,"./index.js":32}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var o=i(e("../Color.js"));var r=i(e("./index.js"));function i(e){return e&&e.__esModule?e:{default:e}}const a=(e,t,n)=>{const r=e._rgb;const i=t._rgb;return new o.default(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};r.default.rgb=a;var s=n.default=a},{"../Color.js":16,"./index.js":32}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var a=e("../../utils/index.js");const r=(...e)=>{e=(0,a.unpack)(e,"cmyk");const[t,n,r,i]=e;const o=e.length>4?e[4]:1;if(i===1)return[0,0,0,o];return[t>=1?0:255*(1-t)*(1-i),n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),o]};var i=n.default=r},{"../../utils/index.js":108}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.cmyk=void 0;var r=l(e("../../chroma.js"));var i=l(e("../../Color.js"));var o=l(e("../input.js"));var a=e("../../utils/index.js");var s=l(e("./cmyk2rgb.js"));var u=l(e("./rgb2cmyk.js"));function l(e){return e&&e.__esModule?e:{default:e}}i.default.prototype.cmyk=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new i.default(...e,"cmyk");n.cmyk=c;Object.assign(r.default,{cmyk:c});o.default.format.cmyk=s.default;o.default.autodetect.push({p:2,test:(...e)=>{e=(0,a.unpack)(e,"cmyk");if((0,a.type)(e)==="array"&&e.length===4){return"cmyk"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./cmyk2rgb.js":40,"./rgb2cmyk.js":42}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var l=e("../../utils/index.js");const{max:c}=Math;const r=(...e)=>{let[t,n,r]=(0,l.unpack)(e,"rgb");t=t/255;n=n/255;r=r/255;const i=1-c(t,c(n,r));const o=i<1?1/(1-i):0;const a=(1-t-i)*o;const s=(1-n-i)*o;const u=(1-r-i)*o;return[a,s,u,i]};var i=n.default=r},{"../../utils/index.js":108}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var c=i(e("../hsl/hsl2rgb.js"));var f=i(e("../lab/lab2rgb.js"));var h=i(e("../lch/lch2rgb.js"));var d=i(e("../oklab/oklab2rgb.js"));var g=i(e("../oklch/oklch2rgb.js"));var p=i(e("../input.js"));var r=i(e("../../utils/limit.js"));var v=e("../lab/lab-constants.js");function i(e){return e&&e.__esModule?e:{default:e}}const o=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source;const a=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source;const s=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source;const u=/\s*/.source;const l=/\s+/.source;const y=/\s*,\s*/.source;const m=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source;const _=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source;const b=new RegExp("^rgba?\\("+u+[o,o,o].join(l)+_+"\\)$");const x=new RegExp("^rgb\\("+u+[o,o,o].join(y)+u+"\\)$");const w=new RegExp("^rgba\\("+u+[o,o,o,a].join(y)+u+"\\)$");const k=new RegExp("^hsla?\\("+u+[m,s,s].join(l)+_+"\\)$");const E=new RegExp("^hsl?\\("+u+[m,s,s].join(y)+u+"\\)$");const N=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/;const S=new RegExp("^lab\\("+u+[a,a,a].join(l)+_+"\\)$");const M=new RegExp("^lch\\("+u+[a,a,m].join(l)+_+"\\)$");const I=new RegExp("^oklab\\("+u+[a,a,a].join(l)+_+"\\)$");const O=new RegExp("^oklch\\("+u+[a,a,m].join(l)+_+"\\)$");const{round:C}=Math;const P=e=>{return e.map((e,t)=>t<=2?(0,r.default)(C(e),0,255):e)};const T=(e,t=0,n=100,r=false)=>{if(typeof e==="string"&&e.endsWith("%")){e=parseFloat(e.substring(0,e.length-1))/100;if(r){e=t+(e+1)*.5*(n-t)}else{e=t+e*(n-t)}}return+e};const L=(e,t)=>{return e==="none"?t:e};const R=e=>{e=e.toLowerCase().trim();if(e==="transparent"){return[0,0,0,0]}let n;if(p.default.format.named){try{return p.default.format.named(e)}catch(e){}}if((n=e.match(b))||(n=e.match(x))){let t=n.slice(1,4);for(let e=0;e<3;e++){t[e]=+T(L(t[e],0),0,255)}t=P(t);const r=n[4]!==undefined?+T(n[4],0,1):1;t[3]=r;return t}if(n=e.match(w)){const t=n.slice(1,5);for(let e=0;e<4;e++){t[e]=+T(t[e],0,255)}return t}if((n=e.match(k))||(n=e.match(E))){const i=n.slice(1,4);i[0]=+L(i[0].replace("deg",""),0);i[1]=+T(L(i[1],0),0,100)*.01;i[2]=+T(L(i[2],0),0,100)*.01;const t=P((0,c.default)(i));const r=n[4]!==undefined?+T(n[4],0,1):1;t[3]=r;return t}if(n=e.match(N)){const i=n.slice(1,4);i[1]*=.01;i[2]*=.01;const t=(0,c.default)(i);for(let e=0;e<3;e++){t[e]=C(t[e])}t[3]=+n[4];return t}if(n=e.match(S)){const o=n.slice(1,4);o[0]=T(L(o[0],0),0,100);o[1]=T(L(o[1],0),-125,125,true);o[2]=T(L(o[2],0),-125,125,true);const a=(0,v.getLabWhitePoint)();(0,v.setLabWhitePoint)("d50");const t=P((0,f.default)(o));(0,v.setLabWhitePoint)(a);const r=n[4]!==undefined?+T(n[4],0,1):1;t[3]=r;return t}if(n=e.match(M)){const s=n.slice(1,4);s[0]=T(s[0],0,100);s[1]=T(L(s[1],0),0,150,false);s[2]=+L(s[2].replace("deg",""),0);const a=(0,v.getLabWhitePoint)();(0,v.setLabWhitePoint)("d50");const t=P((0,h.default)(s));(0,v.setLabWhitePoint)(a);const r=n[4]!==undefined?+T(n[4],0,1):1;t[3]=r;return t}if(n=e.match(I)){const u=n.slice(1,4);u[0]=T(L(u[0],0),0,1);u[1]=T(L(u[1],0),-.4,.4,true);u[2]=T(L(u[2],0),-.4,.4,true);const t=P((0,d.default)(u));const r=n[4]!==undefined?+T(n[4],0,1):1;t[3]=r;return t}if(n=e.match(O)){const l=n.slice(1,4);l[0]=T(L(l[0],0),0,1);l[1]=T(L(l[1],0),0,.4,false);l[2]=+L(l[2].replace("deg",""),0);const t=P((0,g.default)(l));const r=n[4]!==undefined?+T(n[4],0,1):1;t[3]=r;return t}};R.test=e=>{return b.test(e)||k.test(e)||S.test(e)||M.test(e)||I.test(e)||O.test(e)||x.test(e)||w.test(e)||E.test(e)||N.test(e)||e==="transparent"};var A=n.default=R},{"../../utils/limit.js":110,"../hsl/hsl2rgb.js":61,"../input.js":67,"../lab/lab-constants.js":69,"../lab/lab2rgb.js":70,"../lch/lch2rgb.js":76,"../oklab/oklab2rgb.js":83,"../oklch/oklch2rgb.js":86}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=e("../../utils/index.js");const i=(...e)=>{const t=(0,r.unpack)(e,"hsla");let n=(0,r.last)(e)||"lsa";t[0]=(0,r.rnd2)(t[0]||0)+"deg";t[1]=(0,r.rnd2)(t[1]*100)+"%";t[2]=(0,r.rnd2)(t[2]*100)+"%";if(n==="hsla"||t.length>3&&t[3]<1){t[3]="/ "+(t.length>3?t[3]:1);n="hsla"}else{t.length=3}return`${n.substr(0,3)}(${t.join(" ")})`};var o=n.default=i},{"../../utils/index.js":108}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.css=void 0;var r=l(e("../../chroma.js"));var i=l(e("../../Color.js"));var o=l(e("../input.js"));var a=e("../../utils/index.js");var s=l(e("./rgb2css.js"));var u=l(e("./css2rgb.js"));function l(e){return e&&e.__esModule?e:{default:e}}i.default.prototype.css=function(e){return(0,s.default)(this._rgb,e)};const c=(...e)=>new i.default(...e,"css");n.css=c;r.default.css=c;o.default.format.css=u.default;o.default.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&(0,a.type)(e)==="string"&&u.default.test(e)){return"css"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./css2rgb.js":43,"./rgb2css.js":50}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=e("../../utils/index.js");const i=(...e)=>{const t=(0,r.unpack)(e,"lab");let n=(0,r.last)(e)||"lab";t[0]=(0,r.rnd2)(t[0])+"%";t[1]=(0,r.rnd2)(t[1]);t[2]=(0,r.rnd2)(t[2]);if(n==="laba"||t.length>3&&t[3]<1){t[3]="/ "+(t.length>3?t[3]:1)}else{t.length=3}return`lab(${t.join(" ")})`};var o=n.default=i},{"../../utils/index.js":108}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=e("../../utils/index.js");const i=(...e)=>{const t=(0,r.unpack)(e,"lch");let n=(0,r.last)(e)||"lab";t[0]=(0,r.rnd2)(t[0])+"%";t[1]=(0,r.rnd2)(t[1]);t[2]=isNaN(t[2])?"none":(0,r.rnd2)(t[2])+"deg";if(n==="lcha"||t.length>3&&t[3]<1){t[3]="/ "+(t.length>3?t[3]:1)}else{t.length=3}return`lch(${t.join(" ")})`};var o=n.default=i},{"../../utils/index.js":108}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=e("../../utils/index.js");const i=(...e)=>{const t=(0,r.unpack)(e,"lab");t[0]=(0,r.rnd2)(t[0]*100)+"%";t[1]=(0,r.rnd3)(t[1]);t[2]=(0,r.rnd3)(t[2]);if(t.length>3&&t[3]<1){t[3]="/ "+(t.length>3?t[3]:1)}else{t.length=3}return`oklab(${t.join(" ")})`};var o=n.default=i},{"../../utils/index.js":108}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=e("../../utils/index.js");const i=(...e)=>{const t=(0,r.unpack)(e,"lch");t[0]=(0,r.rnd2)(t[0]*100)+"%";t[1]=(0,r.rnd3)(t[1]);t[2]=isNaN(t[2])?"none":(0,r.rnd2)(t[2])+"deg";if(t.length>3&&t[3]<1){t[3]="/ "+(t.length>3?t[3]:1)}else{t.length=3}return`oklch(${t.join(" ")})`};var o=n.default=i},{"../../utils/index.js":108}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var o=e("../../utils/index.js");var a=r(e("./hsl2css.js"));var s=r(e("../hsl/rgb2hsl.js"));var u=r(e("./lab2css.js"));var l=r(e("../lab/rgb2lab.js"));var c=r(e("./lch2css.js"));var f=r(e("../lch/rgb2lch.js"));var h=r(e("../oklab/rgb2oklab.js"));var d=r(e("./oklab2css.js"));var g=r(e("../oklch/rgb2oklch.js"));var p=r(e("./oklch2css.js"));var v=e("../lab/lab-constants.js");function r(e){return e&&e.__esModule?e:{default:e}}const{round:y}=Math;const i=(...e)=>{const t=(0,o.unpack)(e,"rgba");let n=(0,o.last)(e)||"rgb";if(n.substr(0,3)==="hsl"){return(0,a.default)((0,s.default)(t),n)}if(n.substr(0,3)==="lab"){const r=(0,v.getLabWhitePoint)();(0,v.setLabWhitePoint)("d50");const i=(0,u.default)((0,l.default)(t),n);(0,v.setLabWhitePoint)(r);return i}if(n.substr(0,3)==="lch"){const r=(0,v.getLabWhitePoint)();(0,v.setLabWhitePoint)("d50");const i=(0,c.default)((0,f.default)(t),n);(0,v.setLabWhitePoint)(r);return i}if(n.substr(0,5)==="oklab"){return(0,d.default)((0,h.default)(t))}if(n.substr(0,5)==="oklch"){return(0,p.default)((0,g.default)(t))}t[0]=y(t[0]);t[1]=y(t[1]);t[2]=y(t[2]);if(n==="rgba"||t.length>3&&t[3]<1){t[3]="/ "+(t.length>3?t[3]:1);n="rgba"}return`${n.substr(0,3)}(${t.slice(0,n==="rgb"?3:4).join(" ")})`};var m=n.default=i},{"../../utils/index.js":108,"../hsl/rgb2hsl.js":63,"../lab/lab-constants.js":69,"../lab/rgb2lab.js":71,"../lch/rgb2lch.js":77,"../oklab/rgb2oklab.js":84,"../oklch/rgb2oklch.js":87,"./hsl2css.js":44,"./lab2css.js":46,"./lch2css.js":47,"./oklab2css.js":48,"./oklch2css.js":49}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.gl=void 0;var r=s(e("../../Color.js"));var i=s(e("../../chroma.js"));var o=s(e("../input.js"));var a=e("../../utils/index.js");function s(e){return e&&e.__esModule?e:{default:e}}o.default.format.gl=(...e)=>{const t=(0,a.unpack)(e,"rgba");t[0]*=255;t[1]*=255;t[2]*=255;return t};const u=(...e)=>new r.default(...e,"gl");n.gl=u;i.default.gl=u;r.default.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]}},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var g=e("../../utils/index.js");const{floor:p}=Math;const r=(...e)=>{e=(0,g.unpack)(e,"hcg");let[t,n,r]=e;let i,o,a;r=r*255;const s=n*255;if(n===0){i=o=a=r}else{if(t===360)t=0;if(t>360)t-=360;if(t<0)t+=360;t/=60;const u=p(t);const l=t-u;const c=r*(1-n);const f=c+s*(1-l);const h=c+s*l;const d=c+s;switch(u){case 0:[i,o,a]=[d,h,c];break;case 1:[i,o,a]=[f,d,c];break;case 2:[i,o,a]=[c,d,h];break;case 3:[i,o,a]=[c,f,d];break;case 4:[i,o,a]=[h,c,d];break;case 5:[i,o,a]=[d,c,f];break}}return[i,o,a,e.length>3?e[3]:1]};var i=n.default=r},{"../../utils/index.js":108}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.hcg=void 0;var r=e("../../utils/index.js");var i=l(e("../../chroma.js"));var o=l(e("../../Color.js"));var a=l(e("../input.js"));var s=l(e("./hcg2rgb.js"));var u=l(e("./rgb2hcg.js"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.hcg=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new o.default(...e,"hcg");n.hcg=c;i.default.hcg=c;a.default.format.hcg=s.default;a.default.autodetect.push({p:1,test:(...e)=>{e=(0,r.unpack)(e,"hcg");if((0,r.type)(e)==="array"&&e.length===3){return"hcg"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./hcg2rgb.js":52,"./rgb2hcg.js":54}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var c=e("../../utils/index.js");const r=(...e)=>{const[t,n,r]=(0,c.unpack)(e,"rgb");const i=(0,c.min)(t,n,r);const o=(0,c.max)(t,n,r);const a=o-i;const s=a*100/255;const u=i/(255-a)*100;let l;if(a===0){l=Number.NaN}else{if(t===o)l=(n-r)/a;if(n===o)l=2+(r-t)/a;if(r===o)l=4+(t-n)/a;l*=60;if(l<0)l+=360}return[l,s,u]};var i=n.default=r},{"../../utils/index.js":108}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;const a=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;const s=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;const r=e=>{if(e.match(a)){if(e.length===4||e.length===7){e=e.substr(1)}if(e.length===3){e=e.split("");e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]}const t=parseInt(e,16);const n=t>>16;const r=t>>8&255;const i=t&255;return[n,r,i,1]}if(e.match(s)){if(e.length===5||e.length===9){e=e.substr(1)}if(e.length===4){e=e.split("");e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}const t=parseInt(e,16);const n=t>>24&255;const r=t>>16&255;const i=t>>8&255;const o=Math.round((t&255)/255*100)/100;return[n,r,i,o]}throw new Error(`unknown hex color: ${e}`)};var i=n.default=r},{}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.hex=void 0;var r=l(e("../../Color.js"));var i=l(e("../../chroma.js"));var o=e("../../utils/index.js");var a=l(e("../input.js"));var s=l(e("./hex2rgb.js"));var u=l(e("./rgb2hex.js"));function l(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.hex=function(e){return(0,u.default)(this._rgb,e)};const c=(...e)=>new r.default(...e,"hex");n.hex=c;i.default.hex=c;a.default.format.hex=s.default;a.default.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&(0,o.type)(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0){return"hex"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./hex2rgb.js":55,"./rgb2hex.js":57}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var l=e("../../utils/index.js");const{round:c}=Math;const r=(...e)=>{let[t,n,r,i]=(0,l.unpack)(e,"rgba");let o=(0,l.last)(e)||"auto";if(i===undefined)i=1;if(o==="auto"){o=i<1?"rgba":"rgb"}t=c(t);n=c(n);r=c(r);const a=t<<16|n<<8|r;let s="000000"+a.toString(16);s=s.substr(s.length-6);let u="0"+c(i*255).toString(16);u=u.substr(u.length-2);switch(o.toLowerCase()){case"rgba":return`#${s}${u}`;case"argb":return`#${u}${s}`;default:return`#${s}`}};var i=n.default=r},{"../../utils/index.js":108}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var s=e("../../utils/index.js");const{cos:u}=Math;const r=(...e)=>{e=(0,s.unpack)(e,"hsi");let[t,n,r]=e;let i,o,a;if(isNaN(t))t=0;if(isNaN(n))n=0;if(t>360)t-=360;if(t<0)t+=360;t/=360;if(t<1/3){a=(1-n)/3;i=(1+n*u(s.TWOPI*t)/u(s.PITHIRD-s.TWOPI*t))/3;o=1-(a+i)}else if(t<2/3){t-=1/3;i=(1-n)/3;o=(1+n*u(s.TWOPI*t)/u(s.PITHIRD-s.TWOPI*t))/3;a=1-(i+o)}else{t-=2/3;o=(1-n)/3;a=(1+n*u(s.TWOPI*t)/u(s.PITHIRD-s.TWOPI*t))/3;i=1-(o+a)}i=(0,s.limit)(r*i*3);o=(0,s.limit)(r*o*3);a=(0,s.limit)(r*a*3);return[i*255,o*255,a*255,e.length>3?e[3]:1]};var i=n.default=r},{"../../utils/index.js":108}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.hsi=void 0;var r=e("../../utils/index.js");var i=l(e("../../chroma.js"));var o=l(e("../../Color.js"));var a=l(e("../input.js"));var s=l(e("./hsi2rgb.js"));var u=l(e("./rgb2hsi.js"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.hsi=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new o.default(...e,"hsi");n.hsi=c;i.default.hsi=c;a.default.format.hsi=s.default;a.default.autodetect.push({p:2,test:(...e)=>{e=(0,r.unpack)(e,"hsi");if((0,r.type)(e)==="array"&&e.length===3){return"hsi"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./hsi2rgb.js":58,"./rgb2hsi.js":60}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var u=e("../../utils/index.js");const{min:l,sqrt:c,acos:f}=Math;const r=(...e)=>{let[t,n,r]=(0,u.unpack)(e,"rgb");t/=255;n/=255;r/=255;let i;const o=l(t,n,r);const a=(t+n+r)/3;const s=a>0?1-o/a:0;if(s===0){i=NaN}else{i=(t-n+(t-r))/2;i/=c((t-n)*(t-n)+(t-r)*(n-r));i=f(i);if(r>n){i=u.TWOPI-i}i/=u.TWOPI}return[i*360,s,a]};var i=n.default=r},{"../../utils/index.js":108}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var h=e("../../utils/index.js");const r=(...e)=>{e=(0,h.unpack)(e,"hsl");const[t,n,r]=e;let i,o,a;if(n===0){i=o=a=r*255}else{const s=[0,0,0];const u=[0,0,0];const l=r<.5?r*(1+n):r+n-r*n;const c=2*r-l;const f=t/360;s[0]=f+1/3;s[1]=f;s[2]=f-1/3;for(let e=0;e<3;e++){if(s[e]<0)s[e]+=1;if(s[e]>1)s[e]-=1;if(6*s[e]<1)u[e]=c+(l-c)*6*s[e];else if(2*s[e]<1)u[e]=l;else if(3*s[e]<2)u[e]=c+(l-c)*(2/3-s[e])*6;else u[e]=c}[i,o,a]=[u[0]*255,u[1]*255,u[2]*255]}if(e.length>3){return[i,o,a,e[3]]}return[i,o,a,1]};var i=n.default=r},{"../../utils/index.js":108}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.hsl=void 0;var r=e("../../utils/index.js");var i=l(e("../../chroma.js"));var o=l(e("../../Color.js"));var a=l(e("../input.js"));var s=l(e("./hsl2rgb.js"));var u=l(e("./rgb2hsl.js"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.hsl=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new o.default(...e,"hsl");n.hsl=c;i.default.hsl=c;a.default.format.hsl=s.default;a.default.autodetect.push({p:2,test:(...e)=>{e=(0,r.unpack)(e,"hsl");if((0,r.type)(e)==="array"&&e.length===3){return"hsl"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./hsl2rgb.js":61,"./rgb2hsl.js":63}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var l=e("../../utils/index.js");const r=(...e)=>{e=(0,l.unpack)(e,"rgba");let[t,n,r]=e;t/=255;n/=255;r/=255;const i=(0,l.min)(t,n,r);const o=(0,l.max)(t,n,r);const a=(o+i)/2;let s,u;if(o===i){s=0;u=Number.NaN}else{s=a<.5?(o-i)/(o+i):(o-i)/(2-o-i)}if(t==o)u=(n-r)/(o-i);else if(n==o)u=2+(r-t)/(o-i);else if(r==o)u=4+(t-n)/(o-i);u*=60;if(u<0)u+=360;if(e.length>3&&e[3]!==undefined)return[u,s,a,e[3]];return[u,s,a]};var i=n.default=r},{"../../utils/index.js":108}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var h=e("../../utils/index.js");const{floor:d}=Math;const r=(...e)=>{e=(0,h.unpack)(e,"hsv");let[t,n,r]=e;let i,o,a;r*=255;if(n===0){i=o=a=r}else{if(t===360)t=0;if(t>360)t-=360;if(t<0)t+=360;t/=60;const s=d(t);const u=t-s;const l=r*(1-n);const c=r*(1-n*u);const f=r*(1-n*(1-u));switch(s){case 0:[i,o,a]=[r,f,l];break;case 1:[i,o,a]=[c,r,l];break;case 2:[i,o,a]=[l,r,f];break;case 3:[i,o,a]=[l,c,r];break;case 4:[i,o,a]=[f,l,r];break;case 5:[i,o,a]=[r,l,c];break}}return[i,o,a,e.length>3?e[3]:1]};var i=n.default=r},{"../../utils/index.js":108}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.hsv=void 0;var r=e("../../utils/index.js");var i=l(e("../../chroma.js"));var o=l(e("../../Color.js"));var a=l(e("../input.js"));var s=l(e("./hsv2rgb.js"));var u=l(e("./rgb2hsv.js"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.hsv=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new o.default(...e,"hsv");n.hsv=c;i.default.hsv=c;a.default.format.hsv=s.default;a.default.autodetect.push({p:2,test:(...e)=>{e=(0,r.unpack)(e,"hsv");if((0,r.type)(e)==="array"&&e.length===3){return"hsv"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./hsv2rgb.js":64,"./rgb2hsv.js":66}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var c=e("../../utils/index.js");const{min:f,max:h}=Math;const r=(...e)=>{e=(0,c.unpack)(e,"rgb");let[t,n,r]=e;const i=f(t,n,r);const o=h(t,n,r);const a=o-i;let s,u,l;l=o/255;if(o===0){s=Number.NaN;u=0}else{u=a/o;if(t===o)s=(n-r)/a;if(n===o)s=2+(r-t)/a;if(r===o)s=4+(t-n)/a;s*=60;if(s<0)s+=360}return[s,u,l]};var i=n.default=r},{"../../utils/index.js":108}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=n.default={format:{},autodetect:[]}},{}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});Object.defineProperty(n,"getLabWhitePoint",{enumerable:true,get:function(){return l.getLabWhitePoint}});n.lab=void 0;Object.defineProperty(n,"setLabWhitePoint",{enumerable:true,get:function(){return l.setLabWhitePoint}});var r=e("../../utils/index.js");var i=c(e("../../chroma.js"));var o=c(e("../../Color.js"));var a=c(e("../input.js"));var s=c(e("./lab2rgb.js"));var u=c(e("./rgb2lab.js"));var l=e("./lab-constants.js");function c(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.lab=function(){return(0,u.default)(this._rgb)};const f=(...e)=>new o.default(...e,"lab");n.lab=f;Object.assign(i.default,{lab:f,getLabWhitePoint:l.getLabWhitePoint,setLabWhitePoint:l.setLabWhitePoint});a.default.format.lab=s.default;a.default.autodetect.push({p:2,test:(...e)=>{e=(0,r.unpack)(e,"lab");if((0,r.type)(e)==="array"&&e.length===3){return"lab"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./lab-constants.js":69,"./lab2rgb.js":70,"./rgb2lab.js":71}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;n.getLabWhitePoint=s;n.setLabWhitePoint=a;const r={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}};var i=n.default=r;const o=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function a(e){const t=o.get(String(e).toLowerCase());if(!t){throw new Error("unknown Lab illuminant "+e)}r.labWhitePoint=e;r.Xn=t[0];r.Zn=t[1]}function s(){return r.labWhitePoint}},{}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.xyz2rgb=n.default=void 0;var N=r(e("./lab-constants.js"));var c=e("../../utils/index.js");function r(e){return e&&e.__esModule?e:{default:e}}const i=(...e)=>{e=(0,c.unpack)(e,"lab");const[t,n,r]=e;const[i,o,a]=f(t,n,r);const[s,u,l]=h(i,o,a);return[s,u,l,e.length>3?e[3]:1]};const f=(e,t,n)=>{const{kE:r,kK:i,kKE:o,Xn:a,Yn:s,Zn:u}=N.default;const l=(e+16)/116;const c=.002*t+l;const f=l-.005*n;const h=c*c*c;const d=f*f*f;const g=h>r?h:(116*c-16)/i;const p=e>o?Math.pow((e+16)/116,3):e/i;const v=d>r?d:(116*f-16)/i;const y=g*a;const m=p*s;const _=v*u;return[y,m,_]};const S=e=>{const t=Math.sign(e);e=Math.abs(e);return(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t};const h=(e,t,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:i,MtxXYZ2RGB:o,RefWhiteRGB:a,Xn:s,Yn:u,Zn:l}=N.default;const c=s*r.m00+u*r.m10+l*r.m20;const f=s*r.m01+u*r.m11+l*r.m21;const h=s*r.m02+u*r.m12+l*r.m22;const d=a.X*r.m00+a.Y*r.m10+a.Z*r.m20;const g=a.X*r.m01+a.Y*r.m11+a.Z*r.m21;const p=a.X*r.m02+a.Y*r.m12+a.Z*r.m22;const v=(e*r.m00+t*r.m10+n*r.m20)*(d/c);const y=(e*r.m01+t*r.m11+n*r.m21)*(g/f);const m=(e*r.m02+t*r.m12+n*r.m22)*(p/h);const _=v*i.m00+y*i.m10+m*i.m20;const b=v*i.m01+y*i.m11+m*i.m21;const x=v*i.m02+y*i.m12+m*i.m22;const w=S(_*o.m00+b*o.m10+x*o.m20);const k=S(_*o.m01+b*o.m11+x*o.m21);const E=S(_*o.m02+b*o.m12+x*o.m22);return[w*255,k*255,E*255]};n.xyz2rgb=h;var o=n.default=i},{"../../utils/index.js":108,"./lab-constants.js":69}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.rgb2xyz=n.default=void 0;var x=r(e("./lab-constants.js"));var f=e("../../utils/index.js");function r(e){return e&&e.__esModule?e:{default:e}}const i=(...e)=>{const[t,n,r,...i]=(0,f.unpack)(e,"rgb");const[o,a,s]=d(t,n,r);const[u,l,c]=h(o,a,s);return[u,l,c,...i.length>0&&i[0]<1?[i[0]]:[]]};function h(e,t,n){const{Xn:r,Yn:i,Zn:o,kE:a,kK:s}=x.default;const u=e/r;const l=t/i;const c=n/o;const f=u>a?Math.pow(u,1/3):(s*u+16)/116;const h=l>a?Math.pow(l,1/3):(s*l+16)/116;const d=c>a?Math.pow(c,1/3):(s*c+16)/116;return[116*h-16,500*(f-h),200*(h-d)]}function w(e){const t=Math.sign(e);e=Math.abs(e);const n=e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);return n*t}const d=(e,t,n)=>{e=w(e/255);t=w(t/255);n=w(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:i,MtxAdaptMaI:o,Xn:a,Yn:s,Zn:u,As:l,Bs:c,Cs:f}=x.default;let h=e*r.m00+t*r.m10+n*r.m20;let d=e*r.m01+t*r.m11+n*r.m21;let g=e*r.m02+t*r.m12+n*r.m22;const p=a*i.m00+s*i.m10+u*i.m20;const v=a*i.m01+s*i.m11+u*i.m21;const y=a*i.m02+s*i.m12+u*i.m22;let m=h*i.m00+d*i.m10+g*i.m20;let _=h*i.m01+d*i.m11+g*i.m21;let b=h*i.m02+d*i.m12+g*i.m22;m*=p/l;_*=v/c;b*=y/f;h=m*o.m00+_*o.m10+b*o.m20;d=m*o.m01+_*o.m11+b*o.m21;g=m*o.m02+_*o.m12+b*o.m22;return[h,d,g]};n.rgb2xyz=d;var o=n.default=i},{"../../utils/index.js":108,"./lab-constants.js":69}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=e("../../utils/index.js");var i=o(e("./lch2rgb.js"));function o(e){return e&&e.__esModule?e:{default:e}}const a=(...e)=>{const t=(0,r.reverse3)((0,r.unpack)(e,"hcl"));return(0,i.default)(...t)};var s=n.default=a},{"../../utils/index.js":108,"./lch2rgb.js":76}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.lch=n.hcl=void 0;var r=e("../../utils/index.js");var i=c(e("../../chroma.js"));var o=c(e("../../Color.js"));var a=c(e("../input.js"));var s=c(e("./lch2rgb.js"));var u=c(e("./hcl2rgb.js"));var l=c(e("./rgb2lch.js"));function c(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.lch=function(){return(0,l.default)(this._rgb)};o.default.prototype.hcl=function(){return(0,r.reverse3)((0,l.default)(this._rgb))};const f=(...e)=>new o.default(...e,"lch");n.lch=f;const h=(...e)=>new o.default(...e,"hcl");n.hcl=h;Object.assign(i.default,{lch:f,hcl:h});a.default.format.lch=s.default;a.default.format.hcl=u.default;["lch","hcl"].forEach(t=>a.default.autodetect.push({p:2,test:(...e)=>{e=(0,r.unpack)(e,t);if((0,r.type)(e)==="array"&&e.length===3){return t}}}))},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./hcl2rgb.js":72,"./lch2rgb.js":76,"./rgb2lch.js":77}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var a=e("../../utils/index.js");const{sqrt:s,atan2:u,round:l}=Math;const r=(...e)=>{const[t,n,r]=(0,a.unpack)(e,"lab");const i=s(n*n+r*r);let o=(u(r,n)*a.RAD2DEG+360)%360;if(l(i*1e4)===0)o=Number.NaN;return[t,i,o]};var i=n.default=r},{"../../utils/index.js":108}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var i=e("../../utils/index.js");const{sin:o,cos:a}=Math;const r=(...e)=>{let[t,n,r]=(0,i.unpack)(e,"lch");if(isNaN(r))r=0;r=r*i.DEG2RAD;return[t,a(r)*n,o(r)*n]};var s=n.default=r},{"../../utils/index.js":108}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var c=e("../../utils/index.js");var f=r(e("./lch2lab.js"));var h=r(e("../lab/lab2rgb.js"));function r(e){return e&&e.__esModule?e:{default:e}}const i=(...e)=>{e=(0,c.unpack)(e,"lch");const[t,n,r]=e;const[i,o,a]=(0,f.default)(t,n,r);const[s,u,l]=(0,h.default)(i,o,a);return[s,u,l,e.length>3?e[3]:1]};var o=n.default=i},{"../../utils/index.js":108,"../lab/lab2rgb.js":70,"./lch2lab.js":75}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var f=e("../../utils/index.js");var h=r(e("../lab/rgb2lab.js"));var d=r(e("./lab2lch.js"));function r(e){return e&&e.__esModule?e:{default:e}}const i=(...e)=>{const[t,n,r,...i]=(0,f.unpack)(e,"rgb");const[o,a,s]=(0,h.default)(t,n,r);const[u,l,c]=(0,d.default)(o,a,s);return[u,l,c,...i.length>0&&i[0]<1?[i[0]]:[]]};var o=n.default=i},{"../../utils/index.js":108,"../lab/rgb2lab.js":71,"./lab2lch.js":74}],78:[function(e,t,n){"use strict";var r=l(e("../../Color.js"));var i=l(e("../input.js"));var o=e("../../utils/index.js");var a=l(e("../../colors/w3cx11.js"));var s=l(e("../hex/hex2rgb.js"));var u=l(e("../hex/rgb2hex.js"));function l(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.name=function(){const t=(0,u.default)(this._rgb,"rgb");for(let e of Object.keys(a.default)){if(a.default[e]===t)return e.toLowerCase()}return t};i.default.format.named=e=>{e=e.toLowerCase();if(a.default[e])return(0,s.default)(a.default[e]);throw new Error("unknown color name: "+e)};i.default.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&(0,o.type)(e)==="string"&&a.default[e.toLowerCase()]){return"named"}}})},{"../../Color.js":16,"../../colors/w3cx11.js":19,"../../utils/index.js":108,"../hex/hex2rgb.js":55,"../hex/rgb2hex.js":57,"../input.js":67}],79:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.num=void 0;var r=l(e("../../chroma.js"));var i=l(e("../../Color.js"));var o=l(e("../input.js"));var a=e("../../utils/index.js");var s=l(e("./num2rgb.js"));var u=l(e("./rgb2num.js"));function l(e){return e&&e.__esModule?e:{default:e}}i.default.prototype.num=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new i.default(...e,"num");n.num=c;Object.assign(r.default,{num:c});o.default.format.num=s.default;o.default.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&(0,a.type)(e[0])==="number"&&e[0]>=0&&e[0]<=16777215){return"num"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./num2rgb.js":80,"./rgb2num.js":81}],80:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var i=e("../../utils/index.js");const r=e=>{if((0,i.type)(e)=="number"&&e>=0&&e<=16777215){const t=e>>16;const n=e>>8&255;const r=e&255;return[t,n,r,1]}throw new Error("unknown num color: "+e)};var o=n.default=r},{"../../utils/index.js":108}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var i=e("../../utils/index.js");const r=(...e)=>{const[t,n,r]=(0,i.unpack)(e,"rgb");return(t<<16)+(n<<8)+r};var o=n.default=r},{"../../utils/index.js":108}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.oklab=void 0;var r=e("../../utils/index.js");var i=l(e("../../chroma.js"));var o=l(e("../../Color.js"));var a=l(e("../input.js"));var s=l(e("./oklab2rgb.js"));var u=l(e("./rgb2oklab.js"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.oklab=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new o.default(...e,"oklab");n.oklab=c;Object.assign(i.default,{oklab:c});a.default.format.oklab=s.default;a.default.autodetect.push({p:2,test:(...e)=>{e=(0,r.unpack)(e,"oklab");if((0,r.type)(e)==="array"&&e.length===3){return"oklab"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./oklab2rgb.js":83,"./rgb2oklab.js":84}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var f=e("../../utils/index.js");var i=r(e("../../utils/multiply-matrices.js"));var h=e("../lab/lab2rgb.js");function r(e){return e&&e.__esModule?e:{default:e}}const o=(...e)=>{e=(0,f.unpack)(e,"lab");const[t,n,r,...i]=e;const[o,a,s]=d([t,n,r]);const[u,l,c]=(0,h.xyz2rgb)(o,a,s);return[u,l,c,...i.length>0&&i[0]<1?[i[0]]:[]]};function d(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]];var n=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var r=(0,i.default)(n,e);return(0,i.default)(t,r.map(e=>e**3))}var a=n.default=o},{"../../utils/index.js":108,"../../utils/multiply-matrices.js":111,"../lab/lab2rgb.js":70}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var s=e("../../utils/index.js");var i=r(e("../../utils/multiply-matrices.js"));var u=e("../lab/rgb2lab.js");function r(e){return e&&e.__esModule?e:{default:e}}const o=(...e)=>{const[t,n,r,...i]=(0,s.unpack)(e,"rgb");const o=(0,u.rgb2xyz)(t,n,r);const a=l(o);return[...a,...i.length>0&&i[0]<1?[i[0]]:[]]};function l(e){const t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]];const n=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]];const r=(0,i.default)(t,e);return(0,i.default)(n,r.map(e=>Math.cbrt(e)))}var a=n.default=o},{"../../utils/index.js":108,"../../utils/multiply-matrices.js":111,"../lab/rgb2lab.js":71}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.oklch=void 0;var r=e("../../utils/index.js");var i=l(e("../../chroma.js"));var o=l(e("../../Color.js"));var a=l(e("../input.js"));var s=l(e("./oklch2rgb.js"));var u=l(e("./rgb2oklch.js"));function l(e){return e&&e.__esModule?e:{default:e}}o.default.prototype.oklch=function(){return(0,u.default)(this._rgb)};const c=(...e)=>new o.default(...e,"oklch");n.oklch=c;Object.assign(i.default,{oklch:c});a.default.format.oklch=s.default;a.default.autodetect.push({p:2,test:(...e)=>{e=(0,r.unpack)(e,"oklch");if((0,r.type)(e)==="array"&&e.length===3){return"oklch"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67,"./oklch2rgb.js":86,"./rgb2oklch.js":87}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var f=e("../../utils/index.js");var h=r(e("../lch/lch2lab.js"));var d=r(e("../oklab/oklab2rgb.js"));function r(e){return e&&e.__esModule?e:{default:e}}const i=(...e)=>{e=(0,f.unpack)(e,"lch");const[t,n,r,...i]=e;const[o,a,s]=(0,h.default)(t,n,r);const[u,l,c]=(0,d.default)(o,a,s);return[u,l,c,...i.length>0&&i[0]<1?[i[0]]:[]]};var o=n.default=i},{"../../utils/index.js":108,"../lch/lch2lab.js":75,"../oklab/oklab2rgb.js":83}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var f=e("../../utils/index.js");var h=r(e("../oklab/rgb2oklab.js"));var d=r(e("../lch/lab2lch.js"));function r(e){return e&&e.__esModule?e:{default:e}}const i=(...e)=>{const[t,n,r,...i]=(0,f.unpack)(e,"rgb");const[o,a,s]=(0,h.default)(t,n,r);const[u,l,c]=(0,d.default)(o,a,s);return[u,l,c,...i.length>0&&i[0]<1?[i[0]]:[]]};var o=n.default=i},{"../../utils/index.js":108,"../lch/lab2lch.js":74,"../oklab/rgb2oklab.js":84}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.rgb=void 0;var r=s(e("../../chroma.js"));var i=s(e("../../Color.js"));var o=s(e("../input.js"));var a=e("../../utils/index.js");function s(e){return e&&e.__esModule?e:{default:e}}const{round:u}=Math;i.default.prototype.rgb=function(e=true){if(e===false)return this._rgb.slice(0,3);return this._rgb.slice(0,3).map(u)};i.default.prototype.rgba=function(n=true){return this._rgb.slice(0,4).map((e,t)=>{return t<3?n===false?e:u(e):e})};const l=(...e)=>new i.default(...e,"rgb");n.rgb=l;Object.assign(r.default,{rgb:l});o.default.format.rgb=(...e)=>{const t=(0,a.unpack)(e,"rgba");if(t[3]===undefined)t[3]=1;return t};o.default.autodetect.push({p:3,test:(...e)=>{e=(0,a.unpack)(e,"rgba");if((0,a.type)(e)==="array"&&(e.length===3||e.length===4&&(0,a.type)(e[3])=="number"&&e[3]>=0&&e[3]<=1)){return"rgb"}}})},{"../../Color.js":16,"../../chroma.js":17,"../../utils/index.js":108,"../input.js":67}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.temperature=n.temp=n.kelvin=void 0;var r=u(e("../../chroma.js"));var i=u(e("../../Color.js"));var o=u(e("../input.js"));var a=u(e("./temperature2rgb.js"));var s=u(e("./rgb2temperature.js"));function u(e){return e&&e.__esModule?e:{default:e}}i.default.prototype.temp=i.default.prototype.kelvin=i.default.prototype.temperature=function(){return(0,s.default)(this._rgb)};const l=(...e)=>new i.default(...e,"temp");n.temperature=n.kelvin=n.temp=l;Object.assign(r.default,{temp:l,kelvin:l,temperature:l});o.default.format.temp=o.default.format.kelvin=o.default.format.temperature=a.default},{"../../Color.js":16,"../../chroma.js":17,"../input.js":67,"./rgb2temperature.js":90,"./temperature2rgb.js":91}],90:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var u=r(e("./temperature2rgb.js"));var l=e("../../utils/index.js");function r(e){return e&&e.__esModule?e:{default:e}}const{round:c}=Math;const i=(...e)=>{const t=(0,l.unpack)(e,"rgb");const n=t[0],r=t[2];let i=1e3;let o=4e4;const a=.4;let s;while(o-i>a){s=(o+i)*.5;const t=(0,u.default)(s);if(t[2]/t[0]>=r/n){o=s}else{i=s}}return c(s)};var o=n.default=i},{"../../utils/index.js":108,"./temperature2rgb.js":91}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;const{log:o}=Math;const r=e=>{const t=e/100;let n,r,i;if(t<66){n=255;r=t<6?0:-155.25485562709179-.44596950469579133*(r=t-2)+104.49216199393888*o(r);i=t<20?0:-254.76935184120902+.8274096064007395*(i=t-10)+115.67994401066147*o(i)}else{n=351.97690566805693+.114206453784165*(n=t-55)-40.25366309332127*o(n);r=325.4494125711974+.07943456536662342*(r=t-50)-28.0852963507957*o(r);i=255}return[n,r,i,1]};var i=n.default=r},{}],92:[function(e,t,n){"use strict";var r=o(e("../Color.js"));var i=e("../utils/index.js");function o(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.alpha=function(e,t=false){if(e!==undefined&&(0,i.type)(e)==="number"){if(t){this._rgb[3]=e;return this}return new r.default([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb")}return this._rgb[3]}},{"../Color.js":16,"../utils/index.js":108}],93:[function(e,t,n){"use strict";var r=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.clipped=function(){return this._rgb._clipped||false}},{"../Color.js":16}],94:[function(e,t,n){"use strict";e("../io/lab/index.js");var r=o(e("../Color.js"));var i=o(e("../io/lab/lab-constants.js"));function o(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.darken=function(e=1){const t=this;const n=t.lab();n[0]-=i.default.Kn*e;return new r.default(n,"lab").alpha(t.alpha(),true)};r.default.prototype.brighten=function(e=1){return this.darken(-e)};r.default.prototype.darker=r.default.prototype.darken;r.default.prototype.brighter=r.default.prototype.brighten},{"../Color.js":16,"../io/lab/index.js":68,"../io/lab/lab-constants.js":69}],95:[function(e,t,n){"use strict";var r=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.get=function(e){const[t,n]=e.split(".");const r=this[t]();if(n){const i=t.indexOf(n)-(t.substr(0,2)==="ok"?2:0);if(i>-1)return r[i];throw new Error(`unknown channel ${n} in mode ${t}`)}else{return r}}},{"../Color.js":16}],96:[function(e,t,n){"use strict";var r=o(e("../Color.js"));var i=e("../utils/index.js");function o(e){return e&&e.__esModule?e:{default:e}}const{pow:a}=Math;const u=1e-7;const l=20;r.default.prototype.luminance=function(o,a="rgb"){if(o!==undefined&&(0,i.type)(o)==="number"){if(o===0){return new r.default([0,0,0,this._rgb[3]],"rgb")}if(o===1){return new r.default([255,255,255,this._rgb[3]],"rgb")}let e=this.luminance();let i=l;const s=(e,t)=>{const n=e.interpolate(t,.5,a);const r=n.luminance();if(Math.abs(o-r)<u||!i--){return n}return r>o?s(e,n):s(n,t)};const t=(e>o?s(new r.default([0,0,0]),this):s(this,new r.default([255,255,255]))).rgb();return new r.default([...t,this._rgb[3]])}return c(...this._rgb.slice(0,3))};const c=(e,t,n)=>{e=s(e);t=s(t);n=s(n);return.2126*e+.7152*t+.0722*n};const s=e=>{e/=255;return e<=.03928?e/12.92:a((e+.055)/1.055,2.4)}},{"../Color.js":16,"../utils/index.js":108}],97:[function(e,t,n){"use strict";var r=o(e("../Color.js"));var i=o(e("../generator/mix.js"));function o(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.mix=r.default.prototype.interpolate=function(e,t=.5,...n){return(0,i.default)(this,e,t,...n)}},{"../Color.js":16,"../generator/mix.js":24}],98:[function(e,t,n){"use strict";var r=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.premultiply=function(e=false){const t=this._rgb;const n=t[3];if(e){this._rgb=[t[0]*n,t[1]*n,t[2]*n,n];return this}else{return new r.default([t[0]*n,t[1]*n,t[2]*n,n],"rgb")}}},{"../Color.js":16}],99:[function(e,t,n){"use strict";e("../io/lch/index.js");var r=o(e("../Color.js"));var i=o(e("../io/lab/lab-constants.js"));function o(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.saturate=function(e=1){const t=this;const n=t.lch();n[1]+=i.default.Kn*e;if(n[1]<0)n[1]=0;return new r.default(n,"lch").alpha(t.alpha(),true)};r.default.prototype.desaturate=function(e=1){return this.saturate(-e)}},{"../Color.js":16,"../io/lab/lab-constants.js":69,"../io/lch/index.js":73}],100:[function(e,t,n){"use strict";var u=r(e("../Color.js"));var l=e("../utils/index.js");function r(e){return e&&e.__esModule?e:{default:e}}u.default.prototype.set=function(e,t,n=false){const[r,i]=e.split(".");const o=this[r]();if(i){const a=r.indexOf(i)-(r.substr(0,2)==="ok"?2:0);if(a>-1){if((0,l.type)(t)=="string"){switch(t.charAt(0)){case"+":o[a]+=+t;break;case"-":o[a]+=+t;break;case"*":o[a]*=+t.substr(1);break;case"/":o[a]/=+t.substr(1);break;default:o[a]=+t}}else if((0,l.type)(t)==="number"){o[a]=t}else{throw new Error(`unsupported value for Color.set`)}const s=new u.default(o,r);if(n){this._rgb=s._rgb;return this}return s}throw new Error(`unknown channel ${i} in mode ${r}`)}else{return o}}},{"../Color.js":16,"../utils/index.js":108}],101:[function(e,t,n){"use strict";e("../io/lab/index.js");var r=o(e("../Color.js"));var i=o(e("../generator/mix.js"));function o(e){return e&&e.__esModule?e:{default:e}}r.default.prototype.tint=function(e=.5,...t){return(0,i.default)(this,"white",e,...t)};r.default.prototype.shade=function(e=.5,...t){return(0,i.default)(this,"black",e,...t)}},{"../Color.js":16,"../generator/mix.js":24,"../io/lab/index.js":68}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.analyze=N;n.limits=i;var b=r(e("./type.js"));function r(e){return e&&e.__esModule?e:{default:e}}const{log:x,pow:w,floor:k,abs:E}=Math;function N(e,t=null){const n={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};if((0,b.default)(e)==="object"){e=Object.values(e)}e.forEach(e=>{if(t&&(0,b.default)(e)==="object")e=e[t];if(e!==undefined&&e!==null&&!isNaN(e)){n.values.push(e);n.sum+=e;if(e<n.min)n.min=e;if(e>n.max)n.max=e;n.count+=1}});n.domain=[n.min,n.max];n.limits=(e,t)=>i(n,e,t);return n}function i(e,t="equal",o=7){if((0,b.default)(e)=="array"){e=N(e)}const{min:a,max:s}=e;const u=e.values.sort((e,t)=>e-t);if(o===1){return[a,s]}const l=[];if(t.substr(0,1)==="c"){l.push(a);l.push(s)}if(t.substr(0,1)==="e"){l.push(a);for(let e=1;e<o;e++){l.push(a+e/o*(s-a))}l.push(s)}else if(t.substr(0,1)==="l"){if(a<=0){throw new Error("Logarithmic scales are only possible for values > 0")}const n=Math.LOG10E*x(a);const r=Math.LOG10E*x(s);l.push(a);for(let e=1;e<o;e++){l.push(w(10,n+e/o*(r-n)))}l.push(s)}else if(t.substr(0,1)==="q"){l.push(a);for(let e=1;e<o;e++){const i=(u.length-1)*e/o;const c=k(i);if(c===i){l.push(u[c])}else{const f=i-c;l.push(u[c]*(1-f)+u[c+1]*f)}}l.push(s)}else if(t.substr(0,1)==="k"){let t;const h=u.length;const d=new Array(h);const g=new Array(o);let n=true;let e=0;let i=null;i=[];i.push(a);for(let e=1;e<o;e++){i.push(a+e/o*(s-a))}i.push(s);while(n){for(let e=0;e<o;e++){g[e]=0}for(let r=0;r<h;r++){const y=u[r];let t=Number.MAX_VALUE;let n;for(let e=0;e<o;e++){const m=E(i[e]-y);if(m<t){t=m;n=e}g[n]++;d[r]=n}}const v=new Array(o);for(let e=0;e<o;e++){v[e]=null}for(let e=0;e<h;e++){t=d[e];if(v[t]===null){v[t]=u[e]}else{v[t]+=u[e]}}for(let e=0;e<o;e++){v[e]*=1/g[e]}n=false;for(let e=0;e<o;e++){if(v[e]!==i[e]){n=true;break}}i=v;e++;if(e>200){n=false}}const p={};for(let e=0;e<o;e++){p[e]=[]}for(let e=0;e<h;e++){t=d[e];p[t].push(u[e])}let r=[];for(let e=0;e<o;e++){r.push(p[e][0]);r.push(p[e][p[e].length-1])}r=r.sort((e,t)=>e-t);l.push(r[0]);for(let e=1;e<r.length;e+=2){const _=r[e];if(!isNaN(_)&&l.indexOf(_)===-1){l.push(_)}}}return l}},{"./type.js":113}],103:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=i(e("./limit.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=t=>{t._clipped=false;t._unclipped=t.slice(0);for(let e=0;e<=3;e++){if(e<3){if(t[e]<0||t[e]>255)t._clipped=true;t[e]=(0,r.default)(t[e],0,255)}else if(e===3){t[e]=(0,r.default)(t[e],0,1)}}return t};n.default=o},{"./limit.js":110}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var i=r(e("../Color.js"));e("../ops/luminance.js");function r(e){return e&&e.__esModule?e:{default:e}}var o=(e,t)=>{e=new i.default(e);t=new i.default(t);const n=e.luminance();const r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)};n.default=o},{"../Color.js":16,"../ops/luminance.js":96}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var c=r(e("../Color.js"));var f=r(e("../generator/mix.js"));function r(e){return e&&e.__esModule?e:{default:e}}const h=.027;const d=5e-4;const g=.1;const p=1.14;const v=.022;const y=1.414;var i=(e,t)=>{e=new c.default(e);t=new c.default(t);if(e.alpha()<1){e=(0,f.default)(t,e,e.alpha(),"rgb")}const n=m(...e.rgb());const r=m(...t.rgb());const i=n>=v?n:n+Math.pow(v-n,y);const o=r>=v?r:r+Math.pow(v-r,y);const a=Math.pow(o,.56)-Math.pow(i,.57);const s=Math.pow(o,.65)-Math.pow(i,.62);const u=Math.abs(o-i)<d?0:i<o?a*p:s*p;const l=Math.abs(u)<g?0:u>0?u-h:u+h;return l*100};n.default=i;function m(e,t,n){return.2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(n/255,2.4)}},{"../Color.js":16,"../generator/mix.js":24}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=i;var z=r(e("../Color.js"));function r(e){return e&&e.__esModule?e:{default:e}}const{sqrt:V,pow:q,min:B,max:G,atan2:Y,abs:U,cos:W,sin:Z,exp:X,PI:H}=Math;function i(e,t,n=1,r=1,i=1){var o=function(e){return 360*e/(2*H)};var a=function(e){return 2*H*e/360};e=new z.default(e);t=new z.default(t);const[s,u,l]=Array.from(e.lab());const[c,f,h]=Array.from(t.lab());const d=(s+c)/2;const g=V(q(u,2)+q(l,2));const p=V(q(f,2)+q(h,2));const v=(g+p)/2;const y=.5*(1-V(q(v,7)/(q(v,7)+q(25,7))));const m=u*(1+y);const _=f*(1+y);const b=V(q(m,2)+q(l,2));const x=V(q(_,2)+q(h,2));const w=(b+x)/2;const k=o(Y(l,m));const E=o(Y(h,_));const N=k>=0?k:k+360;const S=E>=0?E:E+360;const M=U(N-S)>180?(N+S+360)/2:(N+S)/2;const I=1-.17*W(a(M-30))+.24*W(a(2*M))+.32*W(a(3*M+6))-.2*W(a(4*M-63));let O=S-N;O=U(O)<=180?O:S<=N?O+360:O-360;O=2*V(b*x)*Z(a(O)/2);const C=c-s;const P=x-b;const T=1+.015*q(d-50,2)/V(20+q(d-50,2));const L=1+.045*w;const R=1+.015*w*I;const A=30*X(-q((M-275)/25,2));const j=2*V(q(w,7)/(q(w,7)+q(25,7)));const D=-j*Z(2*a(A));const F=V(q(C/(n*T),2)+q(P/(r*L),2)+q(O/(i*R),2)+D*(P/(r*L))*(O/(i*R)));return G(0,B(100,F))}},{"../Color.js":16}],107:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=i;var s=r(e("../Color.js"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n="lab"){e=new s.default(e);t=new s.default(t);const r=e.get(n);const i=t.get(n);let o=0;for(let e in r){const a=(r[e]||0)-(i[e]||0);o+=a*a}return Math.sqrt(o)}},{"../Color.js":16}],108:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.TWOPI=n.RAD2DEG=n.PITHIRD=n.PI=n.DEG2RAD=void 0;Object.defineProperty(n,"clip_rgb",{enumerable:true,get:function(){return r.default}});Object.defineProperty(n,"last",{enumerable:true,get:function(){return s.default}});Object.defineProperty(n,"limit",{enumerable:true,get:function(){return i.default}});n.min=n.max=void 0;n.reverse3=m;n.rnd3=n.rnd2=void 0;Object.defineProperty(n,"type",{enumerable:true,get:function(){return o.default}});Object.defineProperty(n,"unpack",{enumerable:true,get:function(){return a.default}});var r=u(e("./clip_rgb.js"));var i=u(e("./limit.js"));var o=u(e("./type.js"));var a=u(e("./unpack.js"));var s=u(e("./last.js"));function u(e){return e&&e.__esModule?e:{default:e}}const{PI:l,min:c,max:f}=Math;n.max=f;n.min=c;n.PI=l;const h=e=>Math.round(e*100)/100;n.rnd2=h;const d=e=>Math.round(e*100)/100;n.rnd3=d;const g=n.TWOPI=l*2;const p=n.PITHIRD=l/3;const v=n.DEG2RAD=l/180;const y=n.RAD2DEG=180/l;function m(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}},{"./clip_rgb.js":103,"./last.js":109,"./limit.js":110,"./type.js":113,"./unpack.js":114}],109:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=i(e("./type.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=e=>{if(e.length<2)return null;const t=e.length-1;if((0,r.default)(e[t])=="string")return e[t].toLowerCase();return null};n.default=o},{"./type.js":113}],110:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;const{min:r,max:i}=Math;var o=(e,t=0,n=1)=>{return r(i(t,e),n)};n.default=o},{}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=r;function r(e,n){let t=e.length;if(!Array.isArray(e[0])){e=[e]}if(!Array.isArray(n[0])){n=n.map(e=>[e])}let r=n[0].length;let i=n[0].map((e,t)=>n.map(e=>e[t]));let o=e.map(n=>i.map(r=>{if(!Array.isArray(n)){return r.reduce((e,t)=>e+t*n,0)}return n.reduce((e,t,n)=>e+t*(r[n]||0),0)}));if(t===1){o=o[0]}if(r===1){return o.map(e=>e[0])}return o}},{}],112:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=o(e("../chroma.js"));e("../io/hsl/index.js");var i=o(e("../generator/scale.js"));function o(e){return e&&e.__esModule?e:{default:e}}var a=n.default={cool(){return(0,i.default)([r.default.hsl(180,1,.9),r.default.hsl(250,.7,.4)])},hot(){return(0,i.default)(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")}}},{"../chroma.js":17,"../generator/scale.js":26,"../io/hsl/index.js":62}],113:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=i;const r={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"]){r[`[object ${e}]`]=e.toLowerCase()}function i(e){return r[Object.prototype.toString.call(e)]||"object"}},{}],114:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=i(e("./type.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(t,e=null)=>{if(t.length>=3)return Array.prototype.slice.call(t);if((0,r.default)(t[0])=="object"&&e){return e.split("").filter(e=>t[0][e]!==undefined).map(e=>t[0][e])}return t[0].slice(0)};n.default=o},{"./type.js":113}],115:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.default=void 0;var r=i(e("../Color.js"));function i(e){return e&&e.__esModule?e:{default:e}}var o=(...e)=>{try{new r.default(...e);return true}catch(e){return false}};n.default=o},{"../Color.js":16}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:true});n.version=void 0;const r=n.version="3.1.2"},{}],117:[function(P,T,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,$(r.key),r)}}function i(e,t,n){if(t)F(e.prototype,t);if(n)F(e,n);Object.defineProperty(e,"prototype",{writable:false});return e}function v(){v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return v.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;V(e,t)}function z(e){z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function e(t){return t.__proto__||Object.getPrototypeOf(t)};return z(e)}function V(e,t){V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,n){t.__proto__=n;return t};return V(e,t)}function q(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function B(e,t,n){if(q()){B=Reflect.construct.bind()}else{B=function e(t,n,r){var i=[null];i.push.apply(i,n);var o=Function.bind.apply(t,i);var a=new o;if(r)V(a,r.prototype);return a}}return B.apply(null,arguments)}function G(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Y(e){var r=typeof Map==="function"?new Map:undefined;Y=function e(t){if(t===null||!G(t))return t;if(typeof t!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof r!=="undefined"){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return B(t,arguments,z(this).constructor)}n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:false,writable:true,configurable:true}});return V(n,t)};return Y(e)}function U(e,t){if(e==null)return{};var n={};var r=Object.keys(e);var i,o;for(o=0;o<r.length;o++){i=r[o];if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function W(e,t){if(!e)return;if(typeof e==="string")return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}function Z(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=W(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;return function(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function H(e,t){if(typeof e!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==undefined){var r=n.call(e,t||"default");if(typeof r!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $(e){var t=H(e,"string");return typeof t==="symbol"?t:String(t)}var t=function(e){o(t,e);function t(){return e.apply(this,arguments)||this}return t}(Y(Error));var J=function(t){o(e,t);function e(e){return t.call(this,"Invalid DateTime: "+e.toMessage())||this}return e}(t);var K=function(t){o(e,t);function e(e){return t.call(this,"Invalid Interval: "+e.toMessage())||this}return e}(t);var Q=function(t){o(e,t);function e(e){return t.call(this,"Invalid Duration: "+e.toMessage())||this}return e}(t);var L=function(e){o(t,e);function t(){return e.apply(this,arguments)||this}return t}(t);var ee=function(t){o(e,t);function e(e){return t.call(this,"Invalid unit "+e)||this}return e}(t);var y=function(e){o(t,e);function t(){return e.apply(this,arguments)||this}return t}(t);var r=function(e){o(t,e);function t(){return e.call(this,"Zone is an abstract class")||this}return t}(t);var n="numeric",a="short",s="long";var te={year:n,month:n,day:n};var ne={year:n,month:a,day:n};var re={year:n,month:a,day:n,weekday:a};var ie={year:n,month:s,day:n};var oe={year:n,month:s,day:n,weekday:s};var ae={hour:n,minute:n};var se={hour:n,minute:n,second:n};var ue={hour:n,minute:n,second:n,timeZoneName:a};var le={hour:n,minute:n,second:n,timeZoneName:s};var ce={hour:n,minute:n,hourCycle:"h23"};var fe={hour:n,minute:n,second:n,hourCycle:"h23"};var he={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:a};var de={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:s};var ge={year:n,month:n,day:n,hour:n,minute:n};var pe={year:n,month:n,day:n,hour:n,minute:n,second:n};var ve={year:n,month:a,day:n,hour:n,minute:n};var ye={year:n,month:a,day:n,hour:n,minute:n,second:n};var me={year:n,month:a,day:n,weekday:a,hour:n,minute:n};var _e={year:n,month:s,day:n,hour:n,minute:n,timeZoneName:a};var be={year:n,month:s,day:n,hour:n,minute:n,second:n,timeZoneName:a};var xe={year:n,month:s,day:n,weekday:s,hour:n,minute:n,timeZoneName:s};var we={year:n,month:s,day:n,weekday:s,hour:n,minute:n,second:n,timeZoneName:s};var u=function(){function e(){}var t=e.prototype;t.offsetName=function e(t,n){throw new r};t.formatOffset=function e(t,n){throw new r};t.offset=function e(t){throw new r};t.equals=function e(t){throw new r};i(e,[{key:"type",get:function e(){throw new r}},{key:"name",get:function e(){throw new r}},{key:"ianaName",get:function e(){return this.name}},{key:"isUniversal",get:function e(){throw new r}},{key:"isValid",get:function e(){throw new r}}]);return e}();var ke=null;var Ee=function(e){o(t,e);function t(){return e.apply(this,arguments)||this}var n=t.prototype;n.offsetName=function e(t,n){var r=n.format,i=n.locale;return Qt(t,r,i)};n.formatOffset=function e(t,n){return rn(this.offset(t),n)};n.offset=function e(t){return-new Date(t).getTimezoneOffset()};n.equals=function e(t){return t.type==="system"};i(t,[{key:"type",get:function e(){return"system"}},{key:"name",get:function e(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function e(){return false}},{key:"isValid",get:function e(){return true}}],[{key:"instance",get:function e(){if(ke===null){ke=new t}return ke}}]);return t}(u);var Ne=new Map;function Se(e){var t=Ne.get(e);if(t===undefined){t=new Intl.DateTimeFormat("en-US",{hour12:false,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"});Ne.set(e,t)}return t}var Me={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Ie(e,t){var n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=r[7];return[a,i,o,s,u,l,c]}function Oe(e,t){var n=e.formatToParts(t);var r=[];for(var i=0;i<n.length;i++){var o=n[i],a=o.type,s=o.value;var u=Me[a];if(a==="era"){r[u]=s}else if(!D(u)){r[u]=parseInt(s,10)}}return r}var Ce=new Map;var l=function(n){o(r,n);r.create=function e(t){var n=Ce.get(t);if(n===undefined){Ce.set(t,n=new r(t))}return n};r.resetCache=function e(){Ce.clear();Ne.clear()};r.isValidSpecifier=function e(t){return this.isValidZone(t)};r.isValidZone=function e(t){if(!t){return false}try{new Intl.DateTimeFormat("en-US",{timeZone:t}).format();return true}catch(e){return false}};function r(e){var t;t=n.call(this)||this;t.zoneName=e;t.valid=r.isValidZone(e);return t}var e=r.prototype;e.offsetName=function e(t,n){var r=n.format,i=n.locale;return Qt(t,r,i,this.name)};e.formatOffset=function e(t,n){return rn(this.offset(t),n)};e.offset=function e(t){if(!this.valid)return NaN;var n=new Date(t);if(isNaN(n))return NaN;var r=Se(this.name);var i=r.formatToParts?Oe(r,n):Ie(r,n),o=i[0],a=i[1],s=i[2],u=i[3],l=i[4],c=i[5],f=i[6];if(u==="BC"){o=-Math.abs(o)+1}var h=l===24?0:l;var d=Ht({year:o,month:a,day:s,hour:h,minute:c,second:f,millisecond:0});var g=+n;var p=g%1e3;g-=p>=0?p:1e3+p;return(d-g)/(60*1e3)};e.equals=function e(t){return t.type==="iana"&&t.name===this.name};i(r,[{key:"type",get:function e(){return"iana"}},{key:"name",get:function e(){return this.zoneName}},{key:"isUniversal",get:function e(){return false}},{key:"isValid",get:function e(){return this.valid}}]);return r}(u);var Pe=["base"],Te=["padTo","floor"];var Le={};function Re(e,t){if(t===void 0){t={}}var n=JSON.stringify([e,t]);var r=Le[n];if(!r){r=new Intl.ListFormat(e,t);Le[n]=r}return r}var Ae=new Map;function je(e,t){if(t===void 0){t={}}var n=JSON.stringify([e,t]);var r=Ae.get(n);if(r===undefined){r=new Intl.DateTimeFormat(e,t);Ae.set(n,r)}return r}var De=new Map;function Fe(e,t){if(t===void 0){t={}}var n=JSON.stringify([e,t]);var r=De.get(n);if(r===undefined){r=new Intl.NumberFormat(e,t);De.set(n,r)}return r}var ze=new Map;function Ve(e,t){if(t===void 0){t={}}var n=t;n.base;var r=U(n,Pe);var i=JSON.stringify([e,r]);var o=ze.get(i);if(o===undefined){o=new Intl.RelativeTimeFormat(e,t);ze.set(i,o)}return o}var qe=null;function Be(){if(qe){return qe}else{qe=(new Intl.DateTimeFormat).resolvedOptions().locale;return qe}}var Ge=new Map;function Ye(e){var t=Ge.get(e);if(t===undefined){t=new Intl.DateTimeFormat(e).resolvedOptions();Ge.set(e,t)}return t}var Ue=new Map;function We(e){var t=Ue.get(e);if(!t){var n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo;if(!("minimalDays"in t)){t=v({},nt,t)}Ue.set(e,t)}return t}function Ze(t){var e=t.indexOf("-x-");if(e!==-1){t=t.substring(0,e)}var n=t.indexOf("-u-");if(n===-1){return[t]}else{var r;var i;try{r=je(t).resolvedOptions();i=t}catch(e){var o=t.substring(0,n);r=je(o).resolvedOptions();i=o}var a=r,s=a.numberingSystem,u=a.calendar;return[i,s,u]}}function Xe(e,t,n){if(n||t){if(!e.includes("-u-")){e+="-u"}if(n){e+="-ca-"+n}if(t){e+="-nu-"+t}return e}else{return e}}function He(e){var t=[];for(var n=1;n<=12;n++){var r=C.utc(2009,n,1);t.push(e(r))}return t}function $e(e){var t=[];for(var n=1;n<=7;n++){var r=C.utc(2016,11,13+n);t.push(e(r))}return t}function Je(e,t,n,r){var i=e.listingMode();if(i==="error"){return null}else if(i==="en"){return n(t)}else{return r(t)}}function Ke(e){if(e.numberingSystem&&e.numberingSystem!=="latn"){return false}else{return e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||Ye(e.locale).numberingSystem==="latn"}}var Qe=function(){function e(e,t,n){this.padTo=n.padTo||0;this.floor=n.floor||false;n.padTo;n.floor;var r=U(n,Te);if(!t||Object.keys(r).length>0){var i=v({useGrouping:false},n);if(n.padTo>0)i.minimumIntegerDigits=n.padTo;this.inf=Fe(e,i)}}var t=e.prototype;t.format=function e(t){if(this.inf){var n=this.floor?Math.floor(t):t;return this.inf.format(n)}else{var r=this.floor?Math.floor(t):Ut(t,3);return p(r,this.padTo)}};return e}();var et=function(){function e(e,t,n){this.opts=n;this.originalZone=undefined;var r=undefined;if(this.opts.timeZone){this.dt=e}else if(e.zone.type==="fixed"){var i=-1*(e.offset/60);var o=i>=0?"Etc/GMT+"+i:"Etc/GMT"+i;if(e.offset!==0&&l.create(o).valid){r=o;this.dt=e}else{r="UTC";this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset});this.originalZone=e.zone}}else if(e.zone.type==="system"){this.dt=e}else if(e.zone.type==="iana"){this.dt=e;r=e.zone.name}else{r="UTC";this.dt=e.setZone("UTC").plus({minutes:e.offset});this.originalZone=e.zone}var a=v({},this.opts);a.timeZone=a.timeZone||r;this.dtf=je(t,a)}var t=e.prototype;t.format=function e(){if(this.originalZone){return this.formatToParts().map(function(e){var t=e.value;return t}).join("")}return this.dtf.format(this.dt.toJSDate())};t.formatToParts=function e(){var n=this;var t=this.dtf.formatToParts(this.dt.toJSDate());if(this.originalZone){return t.map(function(e){if(e.type==="timeZoneName"){var t=n.originalZone.offsetName(n.dt.ts,{locale:n.dt.locale,format:n.opts.timeZoneName});return v({},e,{value:t})}else{return e}})}return t};t.resolvedOptions=function e(){return this.dtf.resolvedOptions()};return e}();var tt=function(){function e(e,t,n){this.opts=v({style:"long"},n);if(!t&&Dt()){this.rtf=Ve(e,n)}}var t=e.prototype;t.format=function e(t,n){if(this.rtf){return this.rtf.format(t,n)}else{return kn(n,t,this.opts.numeric,this.opts.style!=="long")}};t.formatToParts=function e(t,n){if(this.rtf){return this.rtf.formatToParts(t,n)}else{return[]}};return e}();var nt={firstDay:1,minimalDays:4,weekend:[6,7]};var R=function(){f.fromOpts=function e(t){return f.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)};f.create=function e(t,n,r,i,o){if(o===void 0){o=false}var a=t||j.defaultLocale;var s=a||(o?"en-US":Be());var u=n||j.defaultNumberingSystem;var l=r||j.defaultOutputCalendar;var c=Bt(i)||j.defaultWeekSettings;return new f(s,u,l,c,a)};f.resetCache=function e(){qe=null;Ae.clear();De.clear();ze.clear();Ge.clear();Ue.clear()};f.fromObject=function e(t){var n=t===void 0?{}:t,r=n.locale,i=n.numberingSystem,o=n.outputCalendar,a=n.weekSettings;return f.create(r,i,o,a)};function f(e,t,n,r,i){var o=Ze(e),a=o[0],s=o[1],u=o[2];this.locale=a;this.numberingSystem=t||s||null;this.outputCalendar=n||u||null;this.weekSettings=r;this.intl=Xe(this.locale,this.numberingSystem,this.outputCalendar);this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=i;this.fastNumbersCached=null}var e=f.prototype;e.listingMode=function e(){var t=this.isEnglish();var n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&n?"en":"intl"};e.clone=function e(t){if(!t||Object.getOwnPropertyNames(t).length===0){return this}else{return f.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Bt(t.weekSettings)||this.weekSettings,t.defaultToEN||false)}};e.redefaultToEN=function e(t){if(t===void 0){t={}}return this.clone(v({},t,{defaultToEN:true}))};e.redefaultToSystem=function e(t){if(t===void 0){t={}}return this.clone(v({},t,{defaultToEN:false}))};e.months=function e(i,o){var a=this;if(o===void 0){o=false}return Je(this,i,ln,function(){var e=a.intl==="ja"||a.intl.startsWith("ja-");o&=!e;var t=o?{month:i,day:"numeric"}:{month:i},n=o?"format":"standalone";if(!a.monthsCache[n][i]){var r=!e?function(e){return a.extract(e,t,"month")}:function(e){return a.dtFormatter(e,t).format()};a.monthsCache[n][i]=He(r)}return a.monthsCache[n][i]})};e.weekdays=function e(n,r){var i=this;if(r===void 0){r=false}return Je(this,n,dn,function(){var t=r?{weekday:n,year:"numeric",month:"long",day:"numeric"}:{weekday:n},e=r?"format":"standalone";if(!i.weekdaysCache[e][n]){i.weekdaysCache[e][n]=$e(function(e){return i.extract(e,t,"weekday")})}return i.weekdaysCache[e][n]})};e.meridiems=function e(){var n=this;return Je(this,undefined,function(){return gn},function(){if(!n.meridiemCache){var t={hour:"numeric",hourCycle:"h12"};n.meridiemCache=[C.utc(2016,11,13,9),C.utc(2016,11,13,19)].map(function(e){return n.extract(e,t,"dayperiod")})}return n.meridiemCache})};e.eras=function e(n){var r=this;return Je(this,n,mn,function(){var t={era:n};if(!r.eraCache[n]){r.eraCache[n]=[C.utc(-40,1,1),C.utc(2017,1,1)].map(function(e){return r.extract(e,t,"era")})}return r.eraCache[n]})};e.extract=function e(t,n,r){var i=this.dtFormatter(t,n),o=i.formatToParts(),a=o.find(function(e){return e.type.toLowerCase()===r});return a?a.value:null};e.numberFormatter=function e(t){if(t===void 0){t={}}return new Qe(this.intl,t.forceSimple||this.fastNumbers,t)};e.dtFormatter=function e(t,n){if(n===void 0){n={}}return new et(t,this.intl,n)};e.relFormatter=function e(t){if(t===void 0){t={}}return new tt(this.intl,this.isEnglish(),t)};e.listFormatter=function e(t){if(t===void 0){t={}}return Re(this.intl,t)};e.isEnglish=function e(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Ye(this.intl).locale.startsWith("en-us")};e.getWeekSettings=function e(){if(this.weekSettings){return this.weekSettings}else if(!Ft()){return nt}else{return We(this.locale)}};e.getStartOfWeek=function e(){return this.getWeekSettings().firstDay};e.getMinDaysInFirstWeek=function e(){return this.getWeekSettings().minimalDays};e.getWeekendDays=function e(){return this.getWeekSettings().weekend};e.equals=function e(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar};e.toString=function e(){return"Locale("+this.locale+", "+this.numberingSystem+", "+this.outputCalendar+")"};i(f,[{key:"fastNumbers",get:function e(){if(this.fastNumbersCached==null){this.fastNumbersCached=Ke(this)}return this.fastNumbersCached}}]);return f}();var rt=null;var g=function(n){o(r,n);r.instance=function e(t){return t===0?r.utcInstance:new r(t)};r.parseSpecifier=function e(t){if(t){var n=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n){return new r(en(n[1],n[2]))}}return null};function r(e){var t;t=n.call(this)||this;t.fixed=e;return t}var e=r.prototype;e.offsetName=function e(){return this.name};e.formatOffset=function e(t,n){return rn(this.fixed,n)};e.offset=function e(){return this.fixed};e.equals=function e(t){return t.type==="fixed"&&t.fixed===this.fixed};i(r,[{key:"type",get:function e(){return"fixed"}},{key:"name",get:function e(){return this.fixed===0?"UTC":"UTC"+rn(this.fixed,"narrow")}},{key:"ianaName",get:function e(){if(this.fixed===0){return"Etc/UTC"}else{return"Etc/GMT"+rn(-this.fixed,"narrow")}}},{key:"isUniversal",get:function e(){return true}},{key:"isValid",get:function e(){return true}}],[{key:"utcInstance",get:function e(){if(rt===null){rt=new r(0)}return rt}}]);return r}(u);var it=function(n){o(e,n);function e(e){var t;t=n.call(this)||this;t.zoneName=e;return t}var t=e.prototype;t.offsetName=function e(){return null};t.formatOffset=function e(){return""};t.offset=function e(){return NaN};t.equals=function e(){return false};i(e,[{key:"type",get:function e(){return"invalid"}},{key:"name",get:function e(){return this.zoneName}},{key:"isUniversal",get:function e(){return false}},{key:"isValid",get:function e(){return false}}]);return e}(u);function A(e,t){if(D(e)||e===null){return t}else if(e instanceof u){return e}else if(At(e)){var n=e.toLowerCase();if(n==="default")return t;else if(n==="local"||n==="system")return Ee.instance;else if(n==="utc"||n==="gmt")return g.utcInstance;else return g.parseSpecifier(n)||l.create(e)}else if(_(e)){return g.instance(e)}else if(typeof e==="object"&&"offset"in e&&typeof e.offset==="function"){return e}else{return new it(e)}}var ot={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"};var at={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]};var st=ot.hanidec.replace(/[\[|\]]/g,"").split("");function ut(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(e[n].search(ot.hanidec)!==-1){t+=st.indexOf(e[n])}else{for(var i in at){var o=at[i],a=o[0],s=o[1];if(r>=a&&r<=s){t+=r-a}}}}return parseInt(t,10)}else{return t}}var lt=new Map;function ct(){lt.clear()}function m(e,t){var n=e.numberingSystem;if(t===void 0){t=""}var r=n||"latn";var i=lt.get(r);if(i===undefined){i=new Map;lt.set(r,i)}var o=i.get(t);if(o===undefined){o=new RegExp(""+ot[r]+t);i.set(t,o)}return o}var ft=function e(){return Date.now()},ht="system",dt=null,gt=null,pt=null,vt=60,yt,mt=null;var j=function(){function e(){}e.resetCaches=function e(){R.resetCache();l.resetCache();C.resetCache();ct()};i(e,null,[{key:"now",get:function e(){return ft},set:function e(t){ft=t}},{key:"defaultZone",get:function e(){return A(ht,Ee.instance)},set:function e(t){ht=t}},{key:"defaultLocale",get:function e(){return dt},set:function e(t){dt=t}},{key:"defaultNumberingSystem",get:function e(){return gt},set:function e(t){gt=t}},{key:"defaultOutputCalendar",get:function e(){return pt},set:function e(t){pt=t}},{key:"defaultWeekSettings",get:function e(){return mt},set:function e(t){mt=Bt(t)}},{key:"twoDigitCutoffYear",get:function e(){return vt},set:function e(t){vt=t%100}},{key:"throwOnInvalid",get:function e(){return yt},set:function e(t){yt=t}}]);return e}();var c=function(){function e(e,t){this.reason=e;this.explanation=t}var t=e.prototype;t.toMessage=function e(){if(this.explanation){return this.reason+": "+this.explanation}else{return this.reason}};return e}();var _t=[0,31,59,90,120,151,181,212,243,273,304,334],bt=[0,31,60,91,121,152,182,213,244,274,305,335];function f(e,t){return new c("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function xt(e,t,n){var r=new Date(Date.UTC(e,t-1,n));if(e<100&&e>=0){r.setUTCFullYear(r.getUTCFullYear()-1900)}var i=r.getUTCDay();return i===0?7:i}function wt(e,t,n){return n+(Wt(e)?bt:_t)[t-1]}function kt(e,t){var n=Wt(e)?bt:_t,r=n.findIndex(function(e){return e<t}),i=t-n[r];return{month:r+1,day:i}}function Et(e,t){return(e-t+7)%7+1}function Nt(e,t,n){if(t===void 0){t=4}if(n===void 0){n=1}var r=e.year,i=e.month,o=e.day,a=wt(r,i,o),s=Et(xt(r,i,o),n);var u=Math.floor((a-s+14-t)/7),l;if(u<1){l=r-1;u=Jt(l,t,n)}else if(u>Jt(r,t,n)){l=r+1;u=1}else{l=r}return v({weekYear:l,weekNumber:u,weekday:s},on(e))}function St(e,t,n){if(t===void 0){t=4}if(n===void 0){n=1}var r=e.weekYear,i=e.weekNumber,o=e.weekday,a=Et(xt(r,1,t),n),s=Zt(r);var u=i*7+o-a-7+t,l;if(u<1){l=r-1;u+=Zt(l)}else if(u>s){l=r+1;u-=Zt(r)}else{l=r}var c=kt(l,u),f=c.month,h=c.day;return v({year:l,month:f,day:h},on(e))}function Mt(e){var t=e.year,n=e.month,r=e.day;var i=wt(t,n,r);return v({year:t,ordinal:i},on(e))}function It(e){var t=e.year,n=e.ordinal;var r=kt(t,n),i=r.month,o=r.day;return v({year:t,month:i,day:o},on(e))}function Ot(e,t){var n=!D(e.localWeekday)||!D(e.localWeekNumber)||!D(e.localWeekYear);if(n){var r=!D(e.weekday)||!D(e.weekNumber)||!D(e.weekYear);if(r){throw new L("Cannot mix locale-based week fields with ISO-based week fields")}if(!D(e.localWeekday))e.weekday=e.localWeekday;if(!D(e.localWeekNumber))e.weekNumber=e.localWeekNumber;if(!D(e.localWeekYear))e.weekYear=e.localWeekYear;delete e.localWeekday;delete e.localWeekNumber;delete e.localWeekYear;return{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else{return{minDaysInFirstWeek:4,startOfWeek:1}}}function Ct(e,t,n){if(t===void 0){t=4}if(n===void 0){n=1}var r=Rt(e.weekYear),i=d(e.weekNumber,1,Jt(e.weekYear,t,n)),o=d(e.weekday,1,7);if(!r){return f("weekYear",e.weekYear)}else if(!i){return f("week",e.weekNumber)}else if(!o){return f("weekday",e.weekday)}else return false}function Pt(e){var t=Rt(e.year),n=d(e.ordinal,1,Zt(e.year));if(!t){return f("year",e.year)}else if(!n){return f("ordinal",e.ordinal)}else return false}function Tt(e){var t=Rt(e.year),n=d(e.month,1,12),r=d(e.day,1,Xt(e.year,e.month));if(!t){return f("year",e.year)}else if(!n){return f("month",e.month)}else if(!r){return f("day",e.day)}else return false}function Lt(e){var t=e.hour,n=e.minute,r=e.second,i=e.millisecond;var o=d(t,0,23)||t===24&&n===0&&r===0&&i===0,a=d(n,0,59),s=d(r,0,59),u=d(i,0,999);if(!o){return f("hour",t)}else if(!a){return f("minute",n)}else if(!s){return f("second",r)}else if(!u){return f("millisecond",i)}else return false}function D(e){return typeof e==="undefined"}function _(e){return typeof e==="number"}function Rt(e){return typeof e==="number"&&e%1===0}function At(e){return typeof e==="string"}function jt(e){return Object.prototype.toString.call(e)==="[object Date]"}function Dt(){try{return typeof Intl!=="undefined"&&!!Intl.RelativeTimeFormat}catch(e){return false}}function Ft(){try{return typeof Intl!=="undefined"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return false}}function zt(e){return Array.isArray(e)?e:[e]}function Vt(e,r,i){if(e.length===0){return undefined}return e.reduce(function(e,t){var n=[r(t),t];if(!e){return n}else if(i(e[0],n[0])===e[0]){return e}else{return n}},null)[1]}function qt(n,e){return e.reduce(function(e,t){e[t]=n[t];return e},{})}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bt(e){if(e==null){return null}else if(typeof e!=="object"){throw new y("Week settings must be an object")}else{if(!d(e.firstDay,1,7)||!d(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(function(e){return!d(e,1,7)})){throw new y("Invalid week settings")}return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}}function d(e,t,n){return Rt(e)&&e>=t&&e<=n}function Gt(e,t){return e-t*Math.floor(e/t)}function p(e,t){if(t===void 0){t=2}var n=e<0;var r;if(n){r="-"+(""+-e).padStart(t,"0")}else{r=(""+e).padStart(t,"0")}return r}function b(e){if(D(e)||e===null||e===""){return undefined}else{return parseInt(e,10)}}function x(e){if(D(e)||e===null||e===""){return undefined}else{return parseFloat(e)}}function Yt(e){if(D(e)||e===null||e===""){return undefined}else{var t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function Ut(e,t,n){if(n===void 0){n="round"}var r=Math.pow(10,t);switch(n){case"expand":return e>0?Math.ceil(e*r)/r:Math.floor(e*r)/r;case"trunc":return Math.trunc(e*r)/r;case"round":return Math.round(e*r)/r;case"floor":return Math.floor(e*r)/r;case"ceil":return Math.ceil(e*r)/r;default:throw new RangeError("Value rounding "+n+" is out of range")}}function Wt(e){return e%4===0&&(e%100!==0||e%400===0)}function Zt(e){return Wt(e)?366:365}function Xt(e,t){var n=Gt(t-1,12)+1,r=e+(t-n)/12;if(n===2){return Wt(r)?29:28}else{return[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}}function Ht(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);if(e.year<100&&e.year>=0){t=new Date(t);t.setUTCFullYear(e.year,e.month-1,e.day)}return+t}function $t(e,t,n){var r=Et(xt(e,1,t),n);return-r+t-1}function Jt(e,t,n){if(t===void 0){t=4}if(n===void 0){n=1}var r=$t(e,t,n);var i=$t(e+1,t,n);return(Zt(e)-r+i)/7}function Kt(e){if(e>99){return e}else return e>j.twoDigitCutoffYear?1900+e:2e3+e}function Qt(e,t,n,r){if(r===void 0){r=null}var i=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};if(r){o.timeZone=r}var a=v({timeZoneName:t},o);var s=new Intl.DateTimeFormat(n,a).formatToParts(i).find(function(e){return e.type.toLowerCase()==="timezonename"});return s?s.value:null}function en(e,t){var n=parseInt(e,10);if(Number.isNaN(n)){n=0}var r=parseInt(t,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function tn(e){var t=Number(e);if(typeof e==="boolean"||e===""||!Number.isFinite(t))throw new y("Invalid unit value "+e);return t}function nn(e,t){var n={};for(var r in e){if(h(e,r)){var i=e[r];if(i===undefined||i===null)continue;n[t(r)]=tn(i)}}return n}function rn(e,t){var n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return""+i+p(n,2)+":"+p(r,2);case"narrow":return""+i+n+(r>0?":"+r:"");case"techie":return""+i+p(n,2)+p(r,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function on(e){return qt(e,["hour","minute","second","millisecond"])}var an=["January","February","March","April","May","June","July","August","September","October","November","December"];var sn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var un=["J","F","M","A","M","J","J","A","S","O","N","D"];function ln(e){switch(e){case"narrow":return[].concat(un);case"short":return[].concat(sn);case"long":return[].concat(an);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var cn=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];var fn=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];var hn=["M","T","W","T","F","S","S"];function dn(e){switch(e){case"narrow":return[].concat(hn);case"short":return[].concat(fn);case"long":return[].concat(cn);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var gn=["AM","PM"];var pn=["Before Christ","Anno Domini"];var vn=["BC","AD"];var yn=["B","A"];function mn(e){switch(e){case"narrow":return[].concat(yn);case"short":return[].concat(vn);case"long":return[].concat(pn);default:return null}}function _n(e){return gn[e.hour<12?0:1]}function bn(e,t){return dn(t)[e.weekday-1]}function xn(e,t){return ln(t)[e.month-1]}function wn(e,t){return mn(t)[e.year<0?0:1]}function kn(e,t,n,r){if(n===void 0){n="always"}if(r===void 0){r=false}var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]};var o=["hours","minutes","seconds"].indexOf(e)===-1;if(n==="auto"&&o){var a=e==="days";switch(t){case 1:return a?"tomorrow":"next "+i[e][0];case-1:return a?"yesterday":"last "+i[e][0];case 0:return a?"today":"this "+i[e][0]}}var s=Object.is(t,-0)||t<0,u=Math.abs(t),l=u===1,c=i[e],f=r?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return s?u+" "+f+" ago":"in "+u+" "+f}function En(e,t){var n="";for(var r=X(e),i;!(i=r()).done;){var o=i.value;if(o.literal){n+=o.val}else{n+=t(o.val)}}return n}var Nn={D:te,DD:ne,DDD:ie,DDDD:oe,t:ae,tt:se,ttt:ue,tttt:le,T:ce,TT:fe,TTT:he,TTTT:de,f:ge,ff:ve,fff:_e,ffff:xe,F:pe,FF:ye,FFF:be,FFFF:we};var w=function(){g.create=function e(t,n){if(n===void 0){n={}}return new g(t,n)};g.parseFormat=function e(t){var n=null,r="",i=false;var o=[];for(var a=0;a<t.length;a++){var s=t.charAt(a);if(s==="'"){if(r.length>0||i){o.push({literal:i||/^\s+$/.test(r),val:r===""?"'":r})}n=null;r="";i=!i}else if(i){r+=s}else if(s===n){r+=s}else{if(r.length>0){o.push({literal:/^\s+$/.test(r),val:r})}r=s;n=s}}if(r.length>0){o.push({literal:i||/^\s+$/.test(r),val:r})}return o};g.macroTokenToFormatOpts=function e(t){return Nn[t]};function g(e,t){this.opts=t;this.loc=e;this.systemLoc=null}var e=g.prototype;e.formatWithSystemDefault=function e(t,n){if(this.systemLoc===null){this.systemLoc=this.loc.redefaultToSystem()}var r=this.systemLoc.dtFormatter(t,v({},this.opts,n));return r.format()};e.dtFormatter=function e(t,n){if(n===void 0){n={}}return this.loc.dtFormatter(t,v({},this.opts,n))};e.formatDateTime=function e(t,n){return this.dtFormatter(t,n).format()};e.formatDateTimeParts=function e(t,n){return this.dtFormatter(t,n).formatToParts()};e.formatInterval=function e(t,n){var r=this.dtFormatter(t.start,n);return r.dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())};e.resolvedOptions=function e(t,n){return this.dtFormatter(t,n).resolvedOptions()};e.num=function e(t,n,r){if(n===void 0){n=0}if(r===void 0){r=undefined}if(this.opts.forceSimple){return p(t,n)}var i=v({},this.opts);if(n>0){i.padTo=n}if(r){i.signDisplay=r}return this.loc.numberFormatter(i).format(t)};e.formatDateTimeFromString=function e(r,t){var i=this;var o=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",a=function e(t,n){return i.loc.extract(r,t,n)},s=function e(t){if(r.isOffsetFixed&&r.offset===0&&t.allowZ){return"Z"}return r.isValid?r.zone.formatOffset(r.ts,t.format):""},u=function e(){return o?_n(r):a({hour:"numeric",hourCycle:"h12"},"dayperiod")},l=function e(t,n){return o?xn(r,t):a(n?{month:t}:{month:t,day:"numeric"},"month")},c=function e(t,n){return o?bn(r,t):a(n?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday")},f=function e(t){var n=g.macroTokenToFormatOpts(t);if(n){return i.formatWithSystemDefault(r,n)}else{return t}},h=function e(t){return o?wn(r,t):a({era:t},"era")},d=function e(t){switch(t){case"S":return i.num(r.millisecond);case"u":case"SSS":return i.num(r.millisecond,3);case"s":return i.num(r.second);case"ss":return i.num(r.second,2);case"uu":return i.num(Math.floor(r.millisecond/10),2);case"uuu":return i.num(Math.floor(r.millisecond/100));case"m":return i.num(r.minute);case"mm":return i.num(r.minute,2);case"h":return i.num(r.hour%12===0?12:r.hour%12);case"hh":return i.num(r.hour%12===0?12:r.hour%12,2);case"H":return i.num(r.hour);case"HH":return i.num(r.hour,2);case"Z":return s({format:"narrow",allowZ:i.opts.allowZ});case"ZZ":return s({format:"short",allowZ:i.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:i.opts.allowZ});case"ZZZZ":return r.zone.offsetName(r.ts,{format:"short",locale:i.loc.locale});case"ZZZZZ":return r.zone.offsetName(r.ts,{format:"long",locale:i.loc.locale});case"z":return r.zoneName;case"a":return u();case"d":return n?a({day:"numeric"},"day"):i.num(r.day);case"dd":return n?a({day:"2-digit"},"day"):i.num(r.day,2);case"c":return i.num(r.weekday);case"ccc":return c("short",true);case"cccc":return c("long",true);case"ccccc":return c("narrow",true);case"E":return i.num(r.weekday);case"EEE":return c("short",false);case"EEEE":return c("long",false);case"EEEEE":return c("narrow",false);case"L":return n?a({month:"numeric",day:"numeric"},"month"):i.num(r.month);case"LL":return n?a({month:"2-digit",day:"numeric"},"month"):i.num(r.month,2);case"LLL":return l("short",true);case"LLLL":return l("long",true);case"LLLLL":return l("narrow",true);case"M":return n?a({month:"numeric"},"month"):i.num(r.month);case"MM":return n?a({month:"2-digit"},"month"):i.num(r.month,2);case"MMM":return l("short",false);case"MMMM":return l("long",false);case"MMMMM":return l("narrow",false);case"y":return n?a({year:"numeric"},"year"):i.num(r.year);case"yy":return n?a({year:"2-digit"},"year"):i.num(r.year.toString().slice(-2),2);case"yyyy":return n?a({year:"numeric"},"year"):i.num(r.year,4);case"yyyyyy":return n?a({year:"numeric"},"year"):i.num(r.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return i.num(r.weekYear.toString().slice(-2),2);case"kkkk":return i.num(r.weekYear,4);case"W":return i.num(r.weekNumber);case"WW":return i.num(r.weekNumber,2);case"n":return i.num(r.localWeekNumber);case"nn":return i.num(r.localWeekNumber,2);case"ii":return i.num(r.localWeekYear.toString().slice(-2),2);case"iiii":return i.num(r.localWeekYear,4);case"o":return i.num(r.ordinal);case"ooo":return i.num(r.ordinal,3);case"q":return i.num(r.quarter);case"qq":return i.num(r.quarter,2);case"X":return i.num(Math.floor(r.ts/1e3));case"x":return i.num(r.ts);default:return f(t)}};return En(g.parseFormat(t),d)};e.formatDurationFromString=function e(t,n){var a=this;var s=this.opts.signMode==="negativeLargestOnly"?-1:1;var u=function e(t){switch(t[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},r=function e(i,o){return function(e){var t=u(e);if(t){var n=o.isNegativeDuration&&t!==o.largestUnit?s:1;var r;if(a.opts.signMode==="negativeLargestOnly"&&t!==o.largestUnit){r="never"}else if(a.opts.signMode==="all"){r="always"}else{r="auto"}return a.num(i.get(t)*n,e.length,r)}else{return e}}},i=g.parseFormat(n),o=i.reduce(function(e,t){var n=t.literal,r=t.val;return n?e:e.concat(r)},[]),l=t.shiftTo.apply(t,o.map(u).filter(function(e){return e})),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return En(i,r(l,c))};return g}();var Sn=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}var r=t.reduce(function(e,t){return e+t.source},"");return RegExp("^"+r+"$")}function In(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}return function(l){return t.reduce(function(e,t){var n=e[0],r=e[1],i=e[2];var o=t(l,i),a=o[0],s=o[1],u=o[2];return[v({},n,a),s||r,u]},[{},null,1]).slice(0,2)}}function On(e){if(e==null){return[null,null]}for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++){n[r-1]=arguments[r]}for(var i=0,o=n;i<o.length;i++){var a=o[i],s=a[0],u=a[1];var l=s.exec(e);if(l){return u(l)}}return[null,null]}function Cn(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++){i[t]=arguments[t]}return function(e,t){var n={};var r;for(r=0;r<i.length;r++){n[i[r]]=b(e[t+r])}return[n,null,t+r]}}var Pn=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/;var Tn="(?:"+Pn.source+"?(?:\\[("+Sn.source+")\\])?)?";var Ln=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;var Rn=RegExp(""+Ln.source+Tn);var An=RegExp("(?:[Tt]"+Rn.source+")?");var jn=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;var Dn=/(\d{4})-?W(\d\d)(?:-?(\d))?/;var Fn=/(\d{4})-?(\d{3})/;var zn=Cn("weekYear","weekNumber","weekDay");var Vn=Cn("year","ordinal");var qn=/(\d{4})-(\d\d)-(\d\d)/;var Bn=RegExp(Ln.source+" ?(?:"+Pn.source+"|("+Sn.source+"))?");var Gn=RegExp("(?: "+Bn.source+")?");function Yn(e,t,n){var r=e[t];return D(r)?n:b(r)}function Un(e,t){var n={year:Yn(e,t),month:Yn(e,t+1,1),day:Yn(e,t+2,1)};return[n,null,t+3]}function Wn(e,t){var n={hours:Yn(e,t,0),minutes:Yn(e,t+1,0),seconds:Yn(e,t+2,0),milliseconds:Yt(e[t+3])};return[n,null,t+4]}function Zn(e,t){var n=!e[t]&&!e[t+1],r=en(e[t+1],e[t+2]),i=n?null:g.instance(r);return[{},i,t+3]}function Xn(e,t){var n=e[t]?l.create(e[t]):null;return[{},n,t+1]}var Hn=RegExp("^T?"+Ln.source+"$");var $n=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Jn(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],l=e[8];var c=t[0]==="-";var f=u&&u[0]==="-";var h=function e(t,n){if(n===void 0){n=false}return t!==undefined&&(n||t&&c)?-t:t};return[{years:h(x(n)),months:h(x(r)),weeks:h(x(i)),days:h(x(o)),hours:h(x(a)),minutes:h(x(s)),seconds:h(x(u),u==="-0"),milliseconds:h(Yt(l),f)}]}var Kn={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Qn(e,t,n,r,i,o,a){var s={year:t.length===2?Kt(b(t)):b(t),month:sn.indexOf(n)+1,day:b(r),hour:b(i),minute:b(o)};if(a)s.second=b(a);if(e){s.weekday=e.length>3?cn.indexOf(e)+1:fn.indexOf(e)+1}return s}var er=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function tr(e){var t=e[1],n=e[2],r=e[3],i=e[4],o=e[5],a=e[6],s=e[7],u=e[8],l=e[9],c=e[10],f=e[11],h=Qn(t,i,r,n,o,a,s);var d;if(u){d=Kn[u]}else if(l){d=0}else{d=en(c,f)}return[h,new g(d)]}function nr(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var rr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ir=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,or=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ar(e){var t=e[1],n=e[2],r=e[3],i=e[4],o=e[5],a=e[6],s=e[7],u=Qn(t,i,r,n,o,a,s);return[u,g.utcInstance]}function sr(e){var t=e[1],n=e[2],r=e[3],i=e[4],o=e[5],a=e[6],s=e[7],u=Qn(t,s,n,r,i,o,a);return[u,g.utcInstance]}var ur=Mn(jn,An);var lr=Mn(Dn,An);var cr=Mn(Fn,An);var fr=Mn(Rn);var hr=In(Un,Wn,Zn,Xn);var dr=In(zn,Wn,Zn,Xn);var gr=In(Vn,Wn,Zn,Xn);var pr=In(Wn,Zn,Xn);function vr(e){return On(e,[ur,hr],[lr,dr],[cr,gr],[fr,pr])}function yr(e){return On(nr(e),[er,tr])}function mr(e){return On(e,[rr,ar],[ir,ar],[or,sr])}function _r(e){return On(e,[$n,Jn])}var br=In(Wn);function xr(e){return On(e,[Hn,br])}var wr=Mn(qn,Gn);var kr=Mn(Bn);var Er=In(Wn,Zn,Xn);function Nr(e){return On(e,[wr,hr],[kr,Er])}var Sr="Invalid Duration";var Mr={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Ir=v({years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3}},Mr),k=146097/400,Or=146097/4800,Cr=v({years:{quarters:4,months:12,weeks:k/7,days:k,hours:k*24,minutes:k*24*60,seconds:k*24*60*60,milliseconds:k*24*60*60*1e3},quarters:{months:3,weeks:k/28,days:k/4,hours:k*24/4,minutes:k*24*60/4,seconds:k*24*60*60/4,milliseconds:k*24*60*60*1e3/4},months:{weeks:Or/7,days:Or,hours:Or*24,minutes:Or*24*60,seconds:Or*24*60*60,milliseconds:Or*24*60*60*1e3}},Mr);var E=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"];var Pr=E.slice(0).reverse();function N(e,t,n){if(n===void 0){n=false}var r={values:n?t.values:v({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new S(r)}function Tr(e,t){var n;var r=(n=t.milliseconds)!=null?n:0;for(var i=X(Pr.slice(1)),o;!(o=i()).done;){var a=o.value;if(t[a]){r+=t[a]*e[a]["milliseconds"]}}return r}function Lr(o,a){var s=Tr(o,a)<0?-1:1;E.reduceRight(function(e,t){if(!D(a[t])){if(e){var n=a[e]*s;var r=o[t][e];var i=Math.floor(n/r);a[t]+=i*s;a[e]-=i*r*s}return t}else{return e}},null);E.reduce(function(e,t){if(!D(a[t])){if(e){var n=a[e]%1;a[e]-=n;a[t]+=n*o[e][t]}return t}else{return e}},null)}function Rr(e){var t={};for(var n=0,r=Object.entries(e);n<r.length;n++){var i=r[n],o=i[0],a=i[1];if(a!==0){t[o]=a}}return t}var S=function(e){function p(e){var t=e.conversionAccuracy==="longterm"||false;var n=t?Cr:Ir;if(e.matrix){n=e.matrix}this.values=e.values;this.loc=e.loc||R.create();this.conversionAccuracy=t?"longterm":"casual";this.invalid=e.invalid||null;this.matrix=n;this.isLuxonDuration=true}p.fromMillis=function e(t,n){return p.fromObject({milliseconds:t},n)};p.fromObject=function e(t,n){if(n===void 0){n={}}if(t==null||typeof t!=="object"){throw new y("Duration.fromObject: argument expected to be an object, got "+(t===null?"null":typeof t))}return new p({values:nn(t,p.normalizeUnit),loc:R.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})};p.fromDurationLike=function e(t){if(_(t)){return p.fromMillis(t)}else if(p.isDuration(t)){return t}else if(typeof t==="object"){return p.fromObject(t)}else{throw new y("Unknown duration argument "+t+" of type "+typeof t)}};p.fromISO=function e(t,n){var r=_r(t),i=r[0];if(i){return p.fromObject(i,n)}else{return p.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")}};p.fromISOTime=function e(t,n){var r=xr(t),i=r[0];if(i){return p.fromObject(i,n)}else{return p.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")}};p.invalid=function e(t,n){if(n===void 0){n=null}if(!t){throw new y("need to specify a reason the Duration is invalid")}var e=t instanceof c?t:new c(t,n);if(j.throwOnInvalid){throw new Q(e)}else{return new p({invalid:e})}};p.normalizeUnit=function e(t){var n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t?t.toLowerCase():t];if(!n)throw new ee(t);return n};p.isDuration=function e(t){return t&&t.isLuxonDuration||false};var t=p.prototype;t.toFormat=function e(t,n){if(n===void 0){n={}}var r=v({},n,{floor:n.round!==false&&n.floor!==false});return this.isValid?w.create(this.loc,r).formatDurationFromString(this,t):Sr};t.toHuman=function e(n){var r=this;if(n===void 0){n={}}if(!this.isValid)return Sr;var i=n.showZeros!==false;var t=E.map(function(e){var t=r.values[e];if(D(t)||t===0&&!i){return null}return r.loc.numberFormatter(v({style:"unit",unitDisplay:"long"},n,{unit:e.slice(0,-1)})).format(t)}).filter(function(e){return e});return this.loc.listFormatter(v({type:"conjunction",style:n.listStyle||"narrow"},n)).format(t)};t.toObject=function e(){if(!this.isValid)return{};return v({},this.values)};t.toISO=function e(){if(!this.isValid)return null;var t="P";if(this.years!==0)t+=this.years+"Y";if(this.months!==0||this.quarters!==0)t+=this.months+this.quarters*3+"M";if(this.weeks!==0)t+=this.weeks+"W";if(this.days!==0)t+=this.days+"D";if(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)t+="T";if(this.hours!==0)t+=this.hours+"H";if(this.minutes!==0)t+=this.minutes+"M";if(this.seconds!==0||this.milliseconds!==0)t+=Ut(this.seconds+this.milliseconds/1e3,3)+"S";if(t==="P")t+="T0S";return t};t.toISOTime=function e(t){if(t===void 0){t={}}if(!this.isValid)return null;var n=this.toMillis();if(n<0||n>=864e5)return null;t=v({suppressMilliseconds:false,suppressSeconds:false,includePrefix:false,format:"extended"},t,{includeOffset:false});var r=C.fromMillis(n,{zone:"UTC"});return r.toISOTime(t)};t.toJSON=function e(){return this.toISO()};t.toString=function e(){return this.toISO()};t[e]=function(){if(this.isValid){return"Duration { values: "+JSON.stringify(this.values)+" }"}else{return"Duration { Invalid, reason: "+this.invalidReason+" }"}};t.toMillis=function e(){if(!this.isValid)return NaN;return Tr(this.matrix,this.values)};t.valueOf=function e(){return this.toMillis()};t.plus=function e(t){if(!this.isValid)return this;var n=p.fromDurationLike(t),r={};for(var i=0,o=E;i<o.length;i++){var a=o[i];if(h(n.values,a)||h(this.values,a)){r[a]=n.get(a)+this.get(a)}}return N(this,{values:r},true)};t.minus=function e(t){if(!this.isValid)return this;var n=p.fromDurationLike(t);return this.plus(n.negate())};t.mapUnits=function e(t){if(!this.isValid)return this;var n={};for(var r=0,i=Object.keys(this.values);r<i.length;r++){var o=i[r];n[o]=tn(t(this.values[o],o))}return N(this,{values:n},true)};t.get=function e(t){return this[p.normalizeUnit(t)]};t.set=function e(t){if(!this.isValid)return this;var n=v({},this.values,nn(t,p.normalizeUnit));return N(this,{values:n})};t.reconfigure=function e(t){var n=t===void 0?{}:t,r=n.locale,i=n.numberingSystem,o=n.conversionAccuracy,a=n.matrix;var s=this.loc.clone({locale:r,numberingSystem:i});var u={loc:s,matrix:a,conversionAccuracy:o};return N(this,u)};t.as=function e(t){return this.isValid?this.shiftTo(t).get(t):NaN};t.normalize=function e(){if(!this.isValid)return this;var t=this.toObject();Lr(this.matrix,t);return N(this,{values:t},true)};t.rescale=function e(){if(!this.isValid)return this;var t=Rr(this.normalize().shiftToAll().toObject());return N(this,{values:t},true)};t.shiftTo=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}if(!this.isValid)return this;if(n.length===0){return this}n=n.map(function(e){return p.normalizeUnit(e)});var i={},o={},a=this.toObject();var s;for(var u=0,l=E;u<l.length;u++){var c=l[u];if(n.indexOf(c)>=0){s=c;var f=0;for(var h in o){f+=this.matrix[h][c]*o[h];o[h]=0}if(_(a[c])){f+=a[c]}var d=Math.trunc(f);i[c]=d;o[c]=(f*1e3-d*1e3)/1e3}else if(_(a[c])){o[c]=a[c]}}for(var g in o){if(o[g]!==0){i[s]+=g===s?o[g]:o[g]/this.matrix[s][g]}}Lr(this.matrix,i);return N(this,{values:i},true)};t.shiftToAll=function e(){if(!this.isValid)return this;return this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds")};t.negate=function e(){if(!this.isValid)return this;var t={};for(var n=0,r=Object.keys(this.values);n<r.length;n++){var i=r[n];t[i]=this.values[i]===0?0:-this.values[i]}return N(this,{values:t},true)};t.removeZeros=function e(){if(!this.isValid)return this;var t=Rr(this.values);return N(this,{values:t},true)};t.equals=function e(t){if(!this.isValid||!t.isValid){return false}if(!this.loc.equals(t.loc)){return false}function n(e,t){if(e===undefined||e===0)return t===undefined||t===0;return e===t}for(var r=0,i=E;r<i.length;r++){var o=i[r];if(!n(this.values[o],t.values[o])){return false}}return true};i(p,[{key:"locale",get:function e(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function e(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function e(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function e(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function e(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function e(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function e(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function e(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function e(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function e(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function e(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function e(){return this.invalid===null}},{key:"invalidReason",get:function e(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function e(){return this.invalid?this.invalid.explanation:null}}]);return p}(Symbol.for("nodejs.util.inspect.custom"));var Ar="Invalid Interval";function jr(e,t){if(!e||!e.isValid){return Dr.invalid("missing or invalid start")}else if(!t||!t.isValid){return Dr.invalid("missing or invalid end")}else if(t<e){return Dr.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO())}else{return null}}var Dr=function(e){function h(e){this.s=e.start;this.e=e.end;this.invalid=e.invalid||null;this.isLuxonInterval=true}h.invalid=function e(t,n){if(n===void 0){n=null}if(!t){throw new y("need to specify a reason the Interval is invalid")}var e=t instanceof c?t:new c(t,n);if(j.throwOnInvalid){throw new K(e)}else{return new h({invalid:e})}};h.fromDateTimes=function e(t,n){var r=Fi(t),i=Fi(n);var o=jr(r,i);if(o==null){return new h({start:r,end:i})}else{return o}};h.after=function e(t,n){var r=S.fromDurationLike(n),i=Fi(t);return h.fromDateTimes(i,i.plus(r))};h.before=function e(t,n){var r=S.fromDurationLike(n),i=Fi(t);return h.fromDateTimes(i.minus(r),i)};h.fromISO=function e(t,n){var r=(t||"").split("/",2),i=r[0],o=r[1];if(i&&o){var a,s;try{a=C.fromISO(i,n);s=a.isValid}catch(o){s=false}var u,l;try{u=C.fromISO(o,n);l=u.isValid}catch(o){l=false}if(s&&l){return h.fromDateTimes(a,u)}if(s){var c=S.fromISO(o,n);if(c.isValid){return h.after(a,c)}}else if(l){var f=S.fromISO(i,n);if(f.isValid){return h.before(u,f)}}}return h.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")};h.isInterval=function e(t){return t&&t.isLuxonInterval||false};var t=h.prototype;t.length=function e(t){if(t===void 0){t="milliseconds"}return this.isValid?this.toDuration.apply(this,[t]).get(t):NaN};t.count=function e(t,n){if(t===void 0){t="milliseconds"}if(!this.isValid)return NaN;var r=this.start.startOf(t,n);var i;if(n!=null&&n.useLocaleWeeks){i=this.end.reconfigure({locale:r.locale})}else{i=this.end}i=i.startOf(t,n);return Math.floor(i.diff(r,t).get(t))+(i.valueOf()!==this.end.valueOf())};t.hasSame=function e(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):false};t.isEmpty=function e(){return this.s.valueOf()===this.e.valueOf()};t.isAfter=function e(t){if(!this.isValid)return false;return this.s>t};t.isBefore=function e(t){if(!this.isValid)return false;return this.e<=t};t.contains=function e(t){if(!this.isValid)return false;return this.s<=t&&this.e>t};t.set=function e(t){var n=t===void 0?{}:t,r=n.start,i=n.end;if(!this.isValid)return this;return h.fromDateTimes(r||this.s,i||this.e)};t.splitAt=function e(){var t=this;if(!this.isValid)return[];for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}var o=r.map(Fi).filter(function(e){return t.contains(e)}).sort(function(e,t){return e.toMillis()-t.toMillis()}),a=[];var s=this.s,u=0;while(s<this.e){var l=o[u]||this.e,c=+l>+this.e?this.e:l;a.push(h.fromDateTimes(s,c));s=c;u+=1}return a};t.splitBy=function e(t){var n=S.fromDurationLike(t);if(!this.isValid||!n.isValid||n.as("milliseconds")===0){return[]}var r=this.s,i=1,o;var a=[];while(r<this.e){var s=this.start.plus(n.mapUnits(function(e){return e*i}));o=+s>+this.e?this.e:s;a.push(h.fromDateTimes(r,o));r=o;i+=1}return a};t.divideEqually=function e(t){if(!this.isValid)return[];return this.splitBy(this.length()/t).slice(0,t)};t.overlaps=function e(t){return this.e>t.s&&this.s<t.e};t.abutsStart=function e(t){if(!this.isValid)return false;return+this.e===+t.s};t.abutsEnd=function e(t){if(!this.isValid)return false;return+t.e===+this.s};t.engulfs=function e(t){if(!this.isValid)return false;return this.s<=t.s&&this.e>=t.e};t.equals=function e(t){if(!this.isValid||!t.isValid){return false}return this.s.equals(t.s)&&this.e.equals(t.e)};t.intersection=function e(t){if(!this.isValid)return this;var n=this.s>t.s?this.s:t.s,r=this.e<t.e?this.e:t.e;if(n>=r){return null}else{return h.fromDateTimes(n,r)}};t.union=function e(t){if(!this.isValid)return this;var n=this.s<t.s?this.s:t.s,r=this.e>t.e?this.e:t.e;return h.fromDateTimes(n,r)};h.merge=function e(t){var n=t.sort(function(e,t){return e.s-t.s}).reduce(function(e,t){var n=e[0],r=e[1];if(!r){return[n,t]}else if(r.overlaps(t)||r.abutsStart(t)){return[n,r.union(t)]}else{return[n.concat([r]),t]}},[[],null]),r=n[0],i=n[1];if(i){r.push(i)}return r};h.xor=function e(t){var n;var r=null,i=0;var o=[],a=t.map(function(e){return[{time:e.s,type:"s"},{time:e.e,type:"e"}]}),s=(n=Array.prototype).concat.apply(n,a),u=s.sort(function(e,t){return e.time-t.time});for(var l=X(u),c;!(c=l()).done;){var f=c.value;i+=f.type==="s"?1:-1;if(i===1){r=f.time}else{if(r&&+r!==+f.time){o.push(h.fromDateTimes(r,f.time))}r=null}}return h.merge(o)};t.difference=function e(){var t=this;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}return h.xor([this].concat(r)).map(function(e){return t.intersection(e)}).filter(function(e){return e&&!e.isEmpty()})};t.toString=function e(){if(!this.isValid)return Ar;return"["+this.s.toISO()+" – "+this.e.toISO()+")"};t[e]=function(){if(this.isValid){return"Interval { start: "+this.s.toISO()+", end: "+this.e.toISO()+" }"}else{return"Interval { Invalid, reason: "+this.invalidReason+" }"}};t.toLocaleString=function e(t,n){if(t===void 0){t=te}if(n===void 0){n={}}return this.isValid?w.create(this.s.loc.clone(n),t).formatInterval(this):Ar};t.toISO=function e(t){if(!this.isValid)return Ar;return this.s.toISO(t)+"/"+this.e.toISO(t)};t.toISODate=function e(){if(!this.isValid)return Ar;return this.s.toISODate()+"/"+this.e.toISODate()};t.toISOTime=function e(t){if(!this.isValid)return Ar;return this.s.toISOTime(t)+"/"+this.e.toISOTime(t)};t.toFormat=function e(t,n){var r=n===void 0?{}:n,i=r.separator,o=i===void 0?" – ":i;if(!this.isValid)return Ar;return""+this.s.toFormat(t)+o+this.e.toFormat(t)};t.toDuration=function e(t,n){if(!this.isValid){return S.invalid(this.invalidReason)}return this.e.diff(this.s,t,n)};t.mapEndpoints=function e(t){return h.fromDateTimes(t(this.s),t(this.e))};i(h,[{key:"start",get:function e(){return this.isValid?this.s:null}},{key:"end",get:function e(){return this.isValid?this.e:null}},{key:"lastDateTime",get:function e(){return this.isValid?this.e?this.e.minus(1):null:null}},{key:"isValid",get:function e(){return this.invalidReason===null}},{key:"invalidReason",get:function e(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function e(){return this.invalid?this.invalid.explanation:null}}]);return h}(Symbol.for("nodejs.util.inspect.custom"));var Fr=function(){function e(){}e.hasDST=function e(t){if(t===void 0){t=j.defaultZone}var n=C.now().setZone(t).set({month:12});return!t.isUniversal&&n.offset!==n.set({month:6}).offset};e.isValidIANAZone=function e(t){return l.isValidZone(t)};e.normalizeZone=function e(t){return A(t,j.defaultZone)};e.getStartOfWeek=function e(t){var n=t===void 0?{}:t,r=n.locale,i=r===void 0?null:r,o=n.locObj,a=o===void 0?null:o;return(a||R.create(i)).getStartOfWeek()};e.getMinimumDaysInFirstWeek=function e(t){var n=t===void 0?{}:t,r=n.locale,i=r===void 0?null:r,o=n.locObj,a=o===void 0?null:o;return(a||R.create(i)).getMinDaysInFirstWeek()};e.getWeekendWeekdays=function e(t){var n=t===void 0?{}:t,r=n.locale,i=r===void 0?null:r,o=n.locObj,a=o===void 0?null:o;return(a||R.create(i)).getWeekendDays().slice()};e.months=function e(t,n){if(t===void 0){t="long"}var r=n===void 0?{}:n,i=r.locale,o=i===void 0?null:i,a=r.numberingSystem,s=a===void 0?null:a,u=r.locObj,l=u===void 0?null:u,c=r.outputCalendar,f=c===void 0?"gregory":c;return(l||R.create(o,s,f)).months(t)};e.monthsFormat=function e(t,n){if(t===void 0){t="long"}var r=n===void 0?{}:n,i=r.locale,o=i===void 0?null:i,a=r.numberingSystem,s=a===void 0?null:a,u=r.locObj,l=u===void 0?null:u,c=r.outputCalendar,f=c===void 0?"gregory":c;return(l||R.create(o,s,f)).months(t,true)};e.weekdays=function e(t,n){if(t===void 0){t="long"}var r=n===void 0?{}:n,i=r.locale,o=i===void 0?null:i,a=r.numberingSystem,s=a===void 0?null:a,u=r.locObj,l=u===void 0?null:u;return(l||R.create(o,s,null)).weekdays(t)};e.weekdaysFormat=function e(t,n){if(t===void 0){t="long"}var r=n===void 0?{}:n,i=r.locale,o=i===void 0?null:i,a=r.numberingSystem,s=a===void 0?null:a,u=r.locObj,l=u===void 0?null:u;return(l||R.create(o,s,null)).weekdays(t,true)};e.meridiems=function e(t){var n=t===void 0?{}:t,r=n.locale,i=r===void 0?null:r;return R.create(i).meridiems()};e.eras=function e(t,n){if(t===void 0){t="short"}var r=n===void 0?{}:n,i=r.locale,o=i===void 0?null:i;return R.create(o,null,"gregory").eras(t)};e.features=function e(){return{relative:Dt(),localeWeek:Ft()}};return e}();function zr(e,t){var n=function e(t){return t.toUTC(0,{keepLocalTime:true}).startOf("day").valueOf()},r=n(t)-n(e);return Math.floor(S.fromMillis(r).as("days"))}function Vr(e,t,n){var r=[["years",function(e,t){return t.year-e.year}],["quarters",function(e,t){return t.quarter-e.quarter+(t.year-e.year)*4}],["months",function(e,t){return t.month-e.month+(t.year-e.year)*12}],["weeks",function(e,t){var n=zr(e,t);return(n-n%7)/7}],["days",zr]];var i={};var o=e;var a,s;for(var u=0,l=r;u<l.length;u++){var c=l[u],f=c[0],h=c[1];if(n.indexOf(f)>=0){a=f;i[f]=h(e,t);s=o.plus(i);if(s>t){i[f]--;e=o.plus(i);if(e>t){s=e;i[f]--;e=o.plus(i)}}else{e=s}}}return[e,i,s,a]}function qr(e,t,n,r){var i=Vr(e,t,n),o=i[0],a=i[1],s=i[2],u=i[3];var l=t-o;var c=n.filter(function(e){return["hours","minutes","seconds","milliseconds"].indexOf(e)>=0});if(c.length===0){if(s<t){var f;s=o.plus((f={},f[u]=1,f))}if(s!==o){a[u]=(a[u]||0)+l/(s-o)}}var h=S.fromObject(a,r);if(c.length>0){var d;return(d=S.fromMillis(l,r)).shiftTo.apply(d,c).plus(h)}else{return h}}var Br="missing Intl.DateTimeFormat.formatToParts support";function M(e,r){if(r===void 0){r=function e(t){return t}}return{regex:e,deser:function e(t){var n=t[0];return r(ut(n))}}}var Gr=String.fromCharCode(160);var Yr="[ "+Gr+"]";var Ur=new RegExp(Yr,"g");function Wr(e){return e.replace(/\./g,"\\.?").replace(Ur,Yr)}function Zr(e){return e.replace(/\./g,"").replace(Ur," ").toLowerCase()}function I(r,i){if(r===null){return null}else{return{regex:RegExp(r.map(Wr).join("|")),deser:function e(t){var n=t[0];return r.findIndex(function(e){return Zr(n)===Zr(e)})+i}}}}function Xr(e,t){return{regex:e,deser:function e(t){var n=t[1],r=t[2];return en(n,r)},groups:t}}function Hr(e){return{regex:e,deser:function e(t){var n=t[0];return n}}}function $r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Jr(n,r){var i=m(r),o=m(r,"{2}"),a=m(r,"{3}"),s=m(r,"{4}"),u=m(r,"{6}"),l=m(r,"{1,2}"),c=m(r,"{1,3}"),f=m(r,"{1,6}"),h=m(r,"{1,9}"),d=m(r,"{2,4}"),g=m(r,"{4,6}"),p=function e(t){return{regex:RegExp($r(t.val)),deser:function e(t){var n=t[0];return n},literal:true}},e=function e(t){if(n.literal){return p(t)}switch(t.val){case"G":return I(r.eras("short"),0);case"GG":return I(r.eras("long"),0);case"y":return M(f);case"yy":return M(d,Kt);case"yyyy":return M(s);case"yyyyy":return M(g);case"yyyyyy":return M(u);case"M":return M(l);case"MM":return M(o);case"MMM":return I(r.months("short",true),1);case"MMMM":return I(r.months("long",true),1);case"L":return M(l);case"LL":return M(o);case"LLL":return I(r.months("short",false),1);case"LLLL":return I(r.months("long",false),1);case"d":return M(l);case"dd":return M(o);case"o":return M(c);case"ooo":return M(a);case"HH":return M(o);case"H":return M(l);case"hh":return M(o);case"h":return M(l);case"mm":return M(o);case"m":return M(l);case"q":return M(l);case"qq":return M(o);case"s":return M(l);case"ss":return M(o);case"S":return M(c);case"SSS":return M(a);case"u":return Hr(h);case"uu":return Hr(l);case"uuu":return M(i);case"a":return I(r.meridiems(),0);case"kkkk":return M(s);case"kk":return M(d,Kt);case"W":return M(l);case"WW":return M(o);case"E":case"c":return M(i);case"EEE":return I(r.weekdays("short",false),1);case"EEEE":return I(r.weekdays("long",false),1);case"ccc":return I(r.weekdays("short",true),1);case"cccc":return I(r.weekdays("long",true),1);case"Z":case"ZZ":return Xr(new RegExp("([+-]"+l.source+")(?::("+o.source+"))?"),2);case"ZZZ":return Xr(new RegExp("([+-]"+l.source+")("+o.source+")?"),2);case"z":return Hr(/[a-z_+-/]{1,256}?/i);case" ":return Hr(/[^\S\n\r]/);default:return p(t)}};var t=e(n)||{invalidReason:Br};t.token=n;return t}var Kr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Qr(e,t,n){var r=e.type,i=e.value;if(r==="literal"){var o=/^\s+$/.test(i);return{literal:!o,val:o?" ":i}}var a=t[r];var s=r;if(r==="hour"){if(t.hour12!=null){s=t.hour12?"hour12":"hour24"}else if(t.hourCycle!=null){if(t.hourCycle==="h11"||t.hourCycle==="h12"){s="hour12"}else{s="hour24"}}else{s=n.hour12?"hour12":"hour24"}}var u=Kr[s];if(typeof u==="object"){u=u[a]}if(u){return{literal:false,val:u}}return undefined}function ei(e){var t=e.map(function(e){return e.regex}).reduce(function(e,t){return e+"("+t.source+")"},"");return["^"+t+"$",e]}function ti(e,t,n){var r=e.match(t);if(r){var i={};var o=1;for(var a in n){if(h(n,a)){var s=n[a],u=s.groups?s.groups+1:1;if(!s.literal&&s.token){i[s.token.val[0]]=s.deser(r.slice(o,o+u))}o+=u}}return[r,i]}else{return[r,{}]}}function ni(r){var i=function e(t){switch(t){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};var e=null;var t;if(!D(r.z)){e=l.create(r.z)}if(!D(r.Z)){if(!e){e=new g(r.Z)}t=r.Z}if(!D(r.q)){r.M=(r.q-1)*3+1}if(!D(r.h)){if(r.h<12&&r.a===1){r.h+=12}else if(r.h===12&&r.a===0){r.h=0}}if(r.G===0&&r.y){r.y=-r.y}if(!D(r.u)){r.S=Yt(r.u)}var n=Object.keys(r).reduce(function(e,t){var n=i(t);if(n){e[n]=r[t]}return e},{});return[n,e,t]}var ri=null;function ii(){if(!ri){ri=C.fromMillis(1555555555555)}return ri}function oi(e,t){if(e.literal){return e}var n=w.macroTokenToFormatOpts(e.val);var r=ci(n,t);if(r==null||r.includes(undefined)){return e}return r}function ai(e,t){var n;return(n=Array.prototype).concat.apply(n,e.map(function(e){return oi(e,t)}))}var si=function(){function e(t,e){this.locale=t;this.format=e;this.tokens=ai(w.parseFormat(e),t);this.units=this.tokens.map(function(e){return Jr(e,t)});this.disqualifyingUnit=this.units.find(function(e){return e.invalidReason});if(!this.disqualifyingUnit){var n=ei(this.units),r=n[0],i=n[1];this.regex=RegExp(r,"i");this.handlers=i}}var t=e.prototype;t.explainFromTokens=function e(t){if(!this.isValid){return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}else{var n=ti(t,this.regex,this.handlers),r=n[0],i=n[1],o=i?ni(i):[null,null,undefined],a=o[0],s=o[1],u=o[2];if(h(i,"a")&&h(i,"H")){throw new L("Can't include meridiem when specifying 24-hour format")}return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:i,result:a,zone:s,specificOffset:u}}};i(e,[{key:"isValid",get:function e(){return!this.disqualifyingUnit}},{key:"invalidReason",get:function e(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}]);return e}();function ui(e,t,n){var r=new si(e,n);return r.explainFromTokens(t)}function li(e,t,n){var r=ui(e,t,n),i=r.result,o=r.zone,a=r.specificOffset,s=r.invalidReason;return[i,o,a,s]}function ci(t,e){if(!t){return null}var n=w.create(e,t);var r=n.dtFormatter(ii());var i=r.formatToParts();var o=r.resolvedOptions();return i.map(function(e){return Qr(e,t,o)})}var fi="Invalid DateTime";var hi=864e13;function di(e){return new c("unsupported zone",'the zone "'+e.name+'" is not supported')}function gi(e){if(e.weekData===null){e.weekData=Nt(e.c)}return e.weekData}function pi(e){if(e.localWeekData===null){e.localWeekData=Nt(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())}return e.localWeekData}function O(e,t){var n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new C(v({},n,t,{old:n}))}function vi(e,t,n){var r=e-t*60*1e3;var i=n.offset(r);if(t===i){return[r,t]}r-=(i-t)*60*1e3;var o=n.offset(r);if(i===o){return[r,i]}return[e-Math.min(i,o)*60*1e3,Math.max(i,o)]}function yi(e,t){e+=t*60*1e3;var n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function mi(e,t,n){return vi(Ht(e),t,n)}function _i(e,t){var n=e.o,r=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,o=v({},e.c,{year:r,month:i,day:Math.min(e.c.day,Xt(r,i))+Math.trunc(t.days)+Math.trunc(t.weeks)*7}),a=S.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),s=Ht(o);var u=vi(s,n,e.zone),l=u[0],c=u[1];if(a!==0){l+=a;c=e.zone.offset(l)}return{ts:l,o:c}}function bi(e,t,n,r,i,o){var a=n.setZone,s=n.zone;if(e&&Object.keys(e).length!==0||t){var u=t||s,l=C.fromObject(e,v({},n,{zone:u,specificOffset:o}));return a?l:l.setZone(s)}else{return C.invalid(new c("unparsable",'the input "'+i+"\" can't be parsed as "+r))}}function xi(e,t,n){if(n===void 0){n=true}return e.isValid?w.create(R.create("en-US"),{allowZ:n,forceSimple:true}).formatDateTimeFromString(e,t):null}function wi(e,t,n){var r=e.c.year>9999||e.c.year<0;var i="";if(r&&e.c.year>=0)i+="+";i+=p(e.c.year,r?6:4);if(n==="year")return i;if(t){i+="-";i+=p(e.c.month);if(n==="month")return i;i+="-"}else{i+=p(e.c.month);if(n==="month")return i}i+=p(e.c.day);return i}function ki(e,t,n,r,i,o,a){var s=!n||e.c.millisecond!==0||e.c.second!==0,u="";switch(a){case"day":case"month":case"year":break;default:u+=p(e.c.hour);if(a==="hour")break;if(t){u+=":";u+=p(e.c.minute);if(a==="minute")break;if(s){u+=":";u+=p(e.c.second)}}else{u+=p(e.c.minute);if(a==="minute")break;if(s){u+=p(e.c.second)}}if(a==="second")break;if(s&&(!r||e.c.millisecond!==0)){u+=".";u+=p(e.c.millisecond,3)}}if(i){if(e.isOffsetFixed&&e.offset===0&&!o){u+="Z"}else if(e.o<0){u+="-";u+=p(Math.trunc(-e.o/60));u+=":";u+=p(Math.trunc(-e.o%60))}else{u+="+";u+=p(Math.trunc(e.o/60));u+=":";u+=p(Math.trunc(e.o%60))}}if(o){u+="["+e.zone.ianaName+"]"}return u}var Ei={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ni={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Si={ordinal:1,hour:0,minute:0,second:0,millisecond:0};var Mi=["year","month","day","hour","minute","second","millisecond"],Ii=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Oi=["year","ordinal","hour","minute","second","millisecond"];function Ci(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new ee(e);return t}function Pi(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ci(e)}}function Ti(e){if(ji===undefined){ji=j.now()}if(e.type!=="iana"){return e.offset(ji)}var t=e.name;var n=Di.get(t);if(n===undefined){n=e.offset(ji);Di.set(t,n)}return n}function Li(e,t){var n=A(t.zone,j.defaultZone);if(!n.isValid){return C.invalid(di(n))}var r=R.fromObject(t);var i,o;if(!D(e.year)){for(var a=0,s=Mi;a<s.length;a++){var u=s[a];if(D(e[u])){e[u]=Ei[u]}}var l=Tt(e)||Lt(e);if(l){return C.invalid(l)}var c=Ti(n);var f=mi(e,c,n);i=f[0];o=f[1]}else{i=j.now()}return new C({ts:i,zone:n,loc:r,o:o})}function Ri(n,i,o){var a=D(o.round)?true:o.round,s=D(o.rounding)?"trunc":o.rounding,e=function e(t,n){t=Ut(t,a||o.calendary?0:2,o.calendary?"round":s);var r=i.loc.clone(o).relFormatter(o);return r.format(t,n)},t=function e(t){if(o.calendary){if(!i.hasSame(n,t)){return i.startOf(t).diff(n.startOf(t),t).get(t)}else return 0}else{return i.diff(n,t).get(t)}};if(o.unit){return e(t(o.unit),o.unit)}for(var r=X(o.units),u;!(u=r()).done;){var l=u.value;var c=t(l);if(Math.abs(c)>=1){return e(c,l)}}return e(n>i?-0:0,o.units[o.units.length-1])}function Ai(e){var t={},n;if(e.length>0&&typeof e[e.length-1]==="object"){t=e[e.length-1];n=Array.from(e).slice(0,e.length-1)}else{n=Array.from(e)}return[t,n]}var ji;var Di=new Map;var C=function(e){function T(e){var t=e.zone||j.defaultZone;var n=e.invalid||(Number.isNaN(e.ts)?new c("invalid input"):null)||(!t.isValid?di(t):null);this.ts=D(e.ts)?j.now():e.ts;var r=null,i=null;if(!n){var o=e.old&&e.old.ts===this.ts&&e.old.zone.equals(t);if(o){var a=[e.old.c,e.old.o];r=a[0];i=a[1]}else{var s=_(e.o)&&!e.old?e.o:t.offset(this.ts);r=yi(this.ts,s);n=Number.isNaN(r.year)?new c("invalid input"):null;r=n?null:r;i=n?null:s}}this._zone=t;this.loc=e.loc||R.create();this.invalid=n;this.weekData=null;this.localWeekData=null;this.c=r;this.o=i;this.isLuxonDateTime=true}T.now=function e(){return new T({})};T.local=function e(){var t=Ai(arguments),n=t[0],r=t[1],i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6];return Li({year:i,month:o,day:a,hour:s,minute:u,second:l,millisecond:c},n)};T.utc=function e(){var t=Ai(arguments),n=t[0],r=t[1],i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6];n.zone=g.utcInstance;return Li({year:i,month:o,day:a,hour:s,minute:u,second:l,millisecond:c},n)};T.fromJSDate=function e(t,n){if(n===void 0){n={}}var r=jt(t)?t.valueOf():NaN;if(Number.isNaN(r)){return T.invalid("invalid input")}var i=A(n.zone,j.defaultZone);if(!i.isValid){return T.invalid(di(i))}return new T({ts:r,zone:i,loc:R.fromObject(n)})};T.fromMillis=function e(t,n){if(n===void 0){n={}}if(!_(t)){throw new y("fromMillis requires a numerical input, but received a "+typeof t+" with value "+t)}else if(t<-hi||t>hi){return T.invalid("Timestamp out of range")}else{return new T({ts:t,zone:A(n.zone,j.defaultZone),loc:R.fromObject(n)})}};T.fromSeconds=function e(t,n){if(n===void 0){n={}}if(!_(t)){throw new y("fromSeconds requires a numerical input")}else{return new T({ts:t*1e3,zone:A(n.zone,j.defaultZone),loc:R.fromObject(n)})}};T.fromObject=function e(t,n){if(n===void 0){n={}}t=t||{};var r=A(n.zone,j.defaultZone);if(!r.isValid){return T.invalid(di(r))}var i=R.fromObject(n);var o=nn(t,Pi);var a=Ot(o,i),s=a.minDaysInFirstWeek,u=a.startOfWeek;var l=j.now(),c=!D(n.specificOffset)?n.specificOffset:r.offset(l),f=!D(o.ordinal),h=!D(o.year),d=!D(o.month)||!D(o.day),g=h||d,p=o.weekYear||o.weekNumber;if((g||f)&&p){throw new L("Can't mix weekYear/weekNumber units with year/month/day or ordinals")}if(d&&f){throw new L("Can't mix ordinal dates with month/day")}var v=p||o.weekday&&!g;var y,m,_=yi(l,c);if(v){y=Ii;m=Ni;_=Nt(_,s,u)}else if(f){y=Oi;m=Si;_=Mt(_)}else{y=Mi;m=Ei}var b=false;for(var x=X(y),w;!(w=x()).done;){var k=w.value;var E=o[k];if(!D(E)){b=true}else if(b){o[k]=m[k]}else{o[k]=_[k]}}var N=v?Ct(o,s,u):f?Pt(o):Tt(o),S=N||Lt(o);if(S){return T.invalid(S)}var M=v?St(o,s,u):f?It(o):o,I=mi(M,c,r),O=I[0],C=I[1],P=new T({ts:O,zone:r,o:C,loc:i});if(o.weekday&&g&&t.weekday!==P.weekday){return T.invalid("mismatched weekday","you can't specify both a weekday of "+o.weekday+" and a date of "+P.toISO())}if(!P.isValid){return T.invalid(P.invalid)}return P};T.fromISO=function e(t,n){if(n===void 0){n={}}var r=vr(t),i=r[0],o=r[1];return bi(i,o,n,"ISO 8601",t)};T.fromRFC2822=function e(t,n){if(n===void 0){n={}}var r=yr(t),i=r[0],o=r[1];return bi(i,o,n,"RFC 2822",t)};T.fromHTTP=function e(t,n){if(n===void 0){n={}}var r=mr(t),i=r[0],o=r[1];return bi(i,o,n,"HTTP",n)};T.fromFormat=function e(t,n,r){if(r===void 0){r={}}if(D(t)||D(n)){throw new y("fromFormat requires an input string and a format")}var i=r,o=i.locale,a=o===void 0?null:o,s=i.numberingSystem,u=s===void 0?null:s,l=R.fromOpts({locale:a,numberingSystem:u,defaultToEN:true}),c=li(l,t,n),f=c[0],h=c[1],d=c[2],g=c[3];if(g){return T.invalid(g)}else{return bi(f,h,r,"format "+n,t,d)}};T.fromString=function e(t,n,r){if(r===void 0){r={}}return T.fromFormat(t,n,r)};T.fromSQL=function e(t,n){if(n===void 0){n={}}var r=Nr(t),i=r[0],o=r[1];return bi(i,o,n,"SQL",t)};T.invalid=function e(t,n){if(n===void 0){n=null}if(!t){throw new y("need to specify a reason the DateTime is invalid")}var e=t instanceof c?t:new c(t,n);if(j.throwOnInvalid){throw new J(e)}else{return new T({invalid:e})}};T.isDateTime=function e(t){return t&&t.isLuxonDateTime||false};T.parseFormatForOpts=function e(t,n){if(n===void 0){n={}}var r=ci(t,R.fromObject(n));return!r?null:r.map(function(e){return e?e.val:null}).join("")};T.expandFormat=function e(t,n){if(n===void 0){n={}}var r=ai(w.parseFormat(t),R.fromObject(n));return r.map(function(e){return e.val}).join("")};T.resetCache=function e(){ji=undefined;Di.clear()};var t=T.prototype;t.get=function e(t){return this[t]};t.getPossibleOffsets=function e(){if(!this.isValid||this.isOffsetFixed){return[this]}var t=864e5;var n=6e4;var r=Ht(this.c);var i=this.zone.offset(r-t);var o=this.zone.offset(r+t);var a=this.zone.offset(r-i*n);var s=this.zone.offset(r-o*n);if(a===s){return[this]}var u=r-a*n;var l=r-s*n;var c=yi(u,a);var f=yi(l,s);if(c.hour===f.hour&&c.minute===f.minute&&c.second===f.second&&c.millisecond===f.millisecond){return[O(this,{ts:u}),O(this,{ts:l})]}return[this]};t.resolvedLocaleOptions=function e(t){if(t===void 0){t={}}var n=w.create(this.loc.clone(t),t).resolvedOptions(this),r=n.locale,i=n.numberingSystem,o=n.calendar;return{locale:r,numberingSystem:i,outputCalendar:o}};t.toUTC=function e(t,n){if(t===void 0){t=0}if(n===void 0){n={}}return this.setZone(g.instance(t),n)};t.toLocal=function e(){return this.setZone(j.defaultZone)};t.setZone=function e(t,n){var r=n===void 0?{}:n,i=r.keepLocalTime,o=i===void 0?false:i,a=r.keepCalendarTime,s=a===void 0?false:a;t=A(t,j.defaultZone);if(t.equals(this.zone)){return this}else if(!t.isValid){return T.invalid(di(t))}else{var u=this.ts;if(o||s){var l=t.offset(this.ts);var c=this.toObject();var f=mi(c,l,t);u=f[0]}return O(this,{ts:u,zone:t})}};t.reconfigure=function e(t){var n=t===void 0?{}:t,r=n.locale,i=n.numberingSystem,o=n.outputCalendar;var a=this.loc.clone({locale:r,numberingSystem:i,outputCalendar:o});return O(this,{loc:a})};t.setLocale=function e(t){return this.reconfigure({locale:t})};t.set=function e(t){if(!this.isValid)return this;var n=nn(t,Pi);var r=Ot(n,this.loc),i=r.minDaysInFirstWeek,o=r.startOfWeek;var a=!D(n.weekYear)||!D(n.weekNumber)||!D(n.weekday),s=!D(n.ordinal),u=!D(n.year),l=!D(n.month)||!D(n.day),c=u||l,f=n.weekYear||n.weekNumber;if((c||s)&&f){throw new L("Can't mix weekYear/weekNumber units with year/month/day or ordinals")}if(l&&s){throw new L("Can't mix ordinal dates with month/day")}var h;if(a){h=St(v({},Nt(this.c,i,o),n),i,o)}else if(!D(n.ordinal)){h=It(v({},Mt(this.c),n))}else{h=v({},this.toObject(),n);if(D(n.day)){h.day=Math.min(Xt(h.year,h.month),h.day)}}var d=mi(h,this.o,this.zone),g=d[0],p=d[1];return O(this,{ts:g,o:p})};t.plus=function e(t){if(!this.isValid)return this;var n=S.fromDurationLike(t);return O(this,_i(this,n))};t.minus=function e(t){if(!this.isValid)return this;var n=S.fromDurationLike(t).negate();return O(this,_i(this,n))};t.startOf=function e(t,n){var r=n===void 0?{}:n,i=r.useLocaleWeeks,o=i===void 0?false:i;if(!this.isValid)return this;var a={},s=S.normalizeUnit(t);switch(s){case"years":a.month=1;case"quarters":case"months":a.day=1;case"weeks":case"days":a.hour=0;case"hours":a.minute=0;case"minutes":a.second=0;case"seconds":a.millisecond=0;break}if(s==="weeks"){if(o){var u=this.loc.getStartOfWeek();var l=this.weekday;if(l<u){a.weekNumber=this.weekNumber-1}a.weekday=u}else{a.weekday=1}}if(s==="quarters"){var c=Math.ceil(this.month/3);a.month=(c-1)*3+1}return this.set(a)};t.endOf=function e(t,n){var r;return this.isValid?this.plus((r={},r[t]=1,r)).startOf(t,n).minus(1):this};t.toFormat=function e(t,n){if(n===void 0){n={}}return this.isValid?w.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,t):fi};t.toLocaleString=function e(t,n){if(t===void 0){t=te}if(n===void 0){n={}}return this.isValid?w.create(this.loc.clone(n),t).formatDateTime(this):fi};t.toLocaleParts=function e(t){if(t===void 0){t={}}return this.isValid?w.create(this.loc.clone(t),t).formatDateTimeParts(this):[]};t.toISO=function e(t){var n=t===void 0?{}:t,r=n.format,i=r===void 0?"extended":r,o=n.suppressSeconds,a=o===void 0?false:o,s=n.suppressMilliseconds,u=s===void 0?false:s,l=n.includeOffset,c=l===void 0?true:l,f=n.extendedZone,h=f===void 0?false:f,d=n.precision,g=d===void 0?"milliseconds":d;if(!this.isValid){return null}g=Ci(g);var p=i==="extended";var v=wi(this,p,g);if(Mi.indexOf(g)>=3)v+="T";v+=ki(this,p,a,u,c,h,g);return v};t.toISODate=function e(t){var n=t===void 0?{}:t,r=n.format,i=r===void 0?"extended":r,o=n.precision,a=o===void 0?"day":o;if(!this.isValid){return null}return wi(this,i==="extended",Ci(a))};t.toISOWeekDate=function e(){return xi(this,"kkkk-'W'WW-c")};t.toISOTime=function e(t){var n=t===void 0?{}:t,r=n.suppressMilliseconds,i=r===void 0?false:r,o=n.suppressSeconds,a=o===void 0?false:o,s=n.includeOffset,u=s===void 0?true:s,l=n.includePrefix,c=l===void 0?false:l,f=n.extendedZone,h=f===void 0?false:f,d=n.format,g=d===void 0?"extended":d,p=n.precision,v=p===void 0?"milliseconds":p;if(!this.isValid){return null}v=Ci(v);var y=c&&Mi.indexOf(v)>=3?"T":"";return y+ki(this,g==="extended",a,i,u,h,v)};t.toRFC2822=function e(){return xi(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",false)};t.toHTTP=function e(){return xi(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};t.toSQLDate=function e(){if(!this.isValid){return null}return wi(this,true)};t.toSQLTime=function e(t){var n=t===void 0?{}:t,r=n.includeOffset,i=r===void 0?true:r,o=n.includeZone,a=o===void 0?false:o,s=n.includeOffsetSpace,u=s===void 0?true:s;var l="HH:mm:ss.SSS";if(a||i){if(u){l+=" "}if(a){l+="z"}else if(i){l+="ZZ"}}return xi(this,l,true)};t.toSQL=function e(t){if(t===void 0){t={}}if(!this.isValid){return null}return this.toSQLDate()+" "+this.toSQLTime(t)};t.toString=function e(){return this.isValid?this.toISO():fi};t[e]=function(){if(this.isValid){return"DateTime { ts: "+this.toISO()+", zone: "+this.zone.name+", locale: "+this.locale+" }"}else{return"DateTime { Invalid, reason: "+this.invalidReason+" }"}};t.valueOf=function e(){return this.toMillis()};t.toMillis=function e(){return this.isValid?this.ts:NaN};t.toSeconds=function e(){return this.isValid?this.ts/1e3:NaN};t.toUnixInteger=function e(){return this.isValid?Math.floor(this.ts/1e3):NaN};t.toJSON=function e(){return this.toISO()};t.toBSON=function e(){return this.toJSDate()};t.toObject=function e(t){if(t===void 0){t={}}if(!this.isValid)return{};var n=v({},this.c);if(t.includeConfig){n.outputCalendar=this.outputCalendar;n.numberingSystem=this.loc.numberingSystem;n.locale=this.loc.locale}return n};t.toJSDate=function e(){return new Date(this.isValid?this.ts:NaN)};t.diff=function e(t,n,r){if(n===void 0){n="milliseconds"}if(r===void 0){r={}}if(!this.isValid||!t.isValid){return S.invalid("created by diffing an invalid DateTime")}var i=v({locale:this.locale,numberingSystem:this.numberingSystem},r);var o=zt(n).map(S.normalizeUnit),a=t.valueOf()>this.valueOf(),s=a?this:t,u=a?t:this,l=qr(s,u,o,i);return a?l.negate():l};t.diffNow=function e(t,n){if(t===void 0){t="milliseconds"}if(n===void 0){n={}}return this.diff(T.now(),t,n)};t.until=function e(t){return this.isValid?Dr.fromDateTimes(this,t):this};t.hasSame=function e(t,n,r){if(!this.isValid)return false;var i=t.valueOf();var o=this.setZone(t.zone,{keepLocalTime:true});return o.startOf(n,r)<=i&&i<=o.endOf(n,r)};t.equals=function e(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)};t.toRelative=function e(t){if(t===void 0){t={}}if(!this.isValid)return null;var n=t.base||T.fromObject({},{zone:this.zone}),r=t.padding?this<n?-t.padding:t.padding:0;var i=["years","months","days","hours","minutes","seconds"];var o=t.unit;if(Array.isArray(t.unit)){i=t.unit;o=undefined}return Ri(n,this.plus(r),v({},t,{numeric:"always",units:i,unit:o}))};t.toRelativeCalendar=function e(t){if(t===void 0){t={}}if(!this.isValid)return null;return Ri(t.base||T.fromObject({},{zone:this.zone}),this,v({},t,{numeric:"auto",units:["years","months","days"],calendary:true}))};T.min=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}if(!n.every(T.isDateTime)){throw new y("min requires all arguments be DateTimes")}return Vt(n,function(e){return e.valueOf()},Math.min)};T.max=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}if(!n.every(T.isDateTime)){throw new y("max requires all arguments be DateTimes")}return Vt(n,function(e){return e.valueOf()},Math.max)};T.fromFormatExplain=function e(t,n,r){if(r===void 0){r={}}var i=r,o=i.locale,a=o===void 0?null:o,s=i.numberingSystem,u=s===void 0?null:s,l=R.fromOpts({locale:a,numberingSystem:u,defaultToEN:true});return ui(l,t,n)};T.fromStringExplain=function e(t,n,r){if(r===void 0){r={}}return T.fromFormatExplain(t,n,r)};T.buildFormatParser=function e(t,n){if(n===void 0){n={}}var r=n,i=r.locale,o=i===void 0?null:i,a=r.numberingSystem,s=a===void 0?null:a,u=R.fromOpts({locale:o,numberingSystem:s,defaultToEN:true});return new si(u,t)};T.fromFormatParser=function e(t,n,r){if(r===void 0){r={}}if(D(t)||D(n)){throw new y("fromFormatParser requires an input string and a format parser")}var i=r,o=i.locale,a=o===void 0?null:o,s=i.numberingSystem,u=s===void 0?null:s,l=R.fromOpts({locale:a,numberingSystem:u,defaultToEN:true});if(!l.equals(n.locale)){throw new y("fromFormatParser called with a locale of "+l+", "+("but the format parser was created for "+n.locale))}var c=n.explainFromTokens(t),f=c.result,h=c.zone,d=c.specificOffset,g=c.invalidReason;if(g){return T.invalid(g)}else{return bi(f,h,r,"format "+n.format,t,d)}};i(T,[{key:"isValid",get:function e(){return this.invalid===null}},{key:"invalidReason",get:function e(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function e(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function e(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function e(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function e(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function e(){return this._zone}},{key:"zoneName",get:function e(){return this.isValid?this.zone.name:null}},{key:"year",get:function e(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function e(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function e(){return this.isValid?this.c.month:NaN}},{key:"day",get:function e(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function e(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function e(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function e(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function e(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function e(){return this.isValid?gi(this).weekYear:NaN}},{key:"weekNumber",get:function e(){return this.isValid?gi(this).weekNumber:NaN}},{key:"weekday",get:function e(){return this.isValid?gi(this).weekday:NaN}},{key:"isWeekend",get:function e(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}},{key:"localWeekday",get:function e(){return this.isValid?pi(this).weekday:NaN}},{key:"localWeekNumber",get:function e(){return this.isValid?pi(this).weekNumber:NaN}},{key:"localWeekYear",get:function e(){return this.isValid?pi(this).weekYear:NaN}},{key:"ordinal",get:function e(){return this.isValid?Mt(this.c).ordinal:NaN}},{key:"monthShort",get:function e(){return this.isValid?Fr.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function e(){return this.isValid?Fr.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function e(){return this.isValid?Fr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function e(){return this.isValid?Fr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function e(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function e(){if(this.isValid){return this.zone.offsetName(this.ts,{format:"short",locale:this.locale})}else{return null}}},{key:"offsetNameLong",get:function e(){if(this.isValid){return this.zone.offsetName(this.ts,{format:"long",locale:this.locale})}else{return null}}},{key:"isOffsetFixed",get:function e(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function e(){if(this.isOffsetFixed){return false}else{return this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}}},{key:"isInLeapYear",get:function e(){return Wt(this.year)}},{key:"daysInMonth",get:function e(){return Xt(this.year,this.month)}},{key:"daysInYear",get:function e(){return this.isValid?Zt(this.year):NaN}},{key:"weeksInWeekYear",get:function e(){return this.isValid?Jt(this.weekYear):NaN}},{key:"weeksInLocalWeekYear",get:function e(){return this.isValid?Jt(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}}],[{key:"DATE_SHORT",get:function e(){return te}},{key:"DATE_MED",get:function e(){return ne}},{key:"DATE_MED_WITH_WEEKDAY",get:function e(){return re}},{key:"DATE_FULL",get:function e(){return ie}},{key:"DATE_HUGE",get:function e(){return oe}},{key:"TIME_SIMPLE",get:function e(){return ae}},{key:"TIME_WITH_SECONDS",get:function e(){return se}},{key:"TIME_WITH_SHORT_OFFSET",get:function e(){return ue}},{key:"TIME_WITH_LONG_OFFSET",get:function e(){return le}},{key:"TIME_24_SIMPLE",get:function e(){return ce}},{key:"TIME_24_WITH_SECONDS",get:function e(){return fe}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function e(){return he}},{key:"TIME_24_WITH_LONG_OFFSET",get:function e(){return de}},{key:"DATETIME_SHORT",get:function e(){return ge}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function e(){return pe}},{key:"DATETIME_MED",get:function e(){return ve}},{key:"DATETIME_MED_WITH_SECONDS",get:function e(){return ye}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function e(){return me}},{key:"DATETIME_FULL",get:function e(){return _e}},{key:"DATETIME_FULL_WITH_SECONDS",get:function e(){return be}},{key:"DATETIME_HUGE",get:function e(){return xe}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function e(){return we}}]);return T}(Symbol.for("nodejs.util.inspect.custom"));function Fi(e){if(C.isDateTime(e)){return e}else if(e&&e.valueOf&&_(e.valueOf())){return C.fromJSDate(e)}else if(e&&typeof e==="object"){return C.fromObject(e)}else{throw new y("Unknown datetime argument: "+e+", of type "+typeof e)}}var zi="3.7.1";e.DateTime=C;e.Duration=S;e.FixedOffsetZone=g;e.IANAZone=l;e.Info=Fr;e.Interval=Dr;e.InvalidZone=it;e.Settings=j;e.SystemZone=Ee;e.VERSION=zi;e.Zone=u},{}],118:[function(j,D,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ungzip=e.inflateRaw=e.inflate=e.gzip=e.deflateRaw=e.deflate=e.default=e.constants=e.Inflate=e.Deflate=void 0;const F=4;const z=0;const V=1;const q=2;function t(e){let t=e.length;while(--t>=0){e[t]=0}}const B=0;const G=1;const Y=2;const U=3;const W=258;const Z=29;const X=256;const H=X+1+Z;const a=30;const $=19;const J=2*H+1;const v=15;const K=16;const Q=7;const ee=256;const te=16;const ne=17;const re=18;const ie=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);const oe=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);const ae=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);const se=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);const ue=512;const s=new Array((H+2)*2);t(s);const le=new Array(a*2);t(le);const ce=new Array(ue);t(ce);const fe=new Array(W-U+1);t(fe);const he=new Array(Z);t(he);const de=new Array(a);t(de);function ge(e,t,n,r,i){this.static_tree=e;this.extra_bits=t;this.extra_base=n;this.elems=r;this.max_length=i;this.has_stree=e&&e.length}let pe;let ve;let ye;function me(e,t){this.dyn_tree=e;this.max_code=0;this.stat_desc=t}const _e=e=>{return e<256?ce[e]:ce[256+(e>>>7)]};const be=(e,t)=>{e.pending_buf[e.pending++]=t&255;e.pending_buf[e.pending++]=t>>>8&255};const c=(e,t,n)=>{if(e.bi_valid>K-n){e.bi_buf|=t<<e.bi_valid&65535;be(e,e.bi_buf);e.bi_buf=t>>K-e.bi_valid;e.bi_valid+=n-K}else{e.bi_buf|=t<<e.bi_valid&65535;e.bi_valid+=n}};const f=(e,t,n)=>{c(e,n[t*2],n[t*2+1])};const xe=(e,t)=>{let n=0;do{n|=e&1;e>>>=1;n<<=1}while(--t>0);return n>>>1};const we=e=>{if(e.bi_valid===16){be(e,e.bi_buf);e.bi_buf=0;e.bi_valid=0}else if(e.bi_valid>=8){e.pending_buf[e.pending++]=e.bi_buf&255;e.bi_buf>>=8;e.bi_valid-=8}};const ke=(e,t)=>{const n=t.dyn_tree;const r=t.max_code;const i=t.stat_desc.static_tree;const o=t.stat_desc.has_stree;const a=t.stat_desc.extra_bits;const s=t.stat_desc.extra_base;const u=t.stat_desc.max_length;let l;let c,f;let h;let d;let g;let p=0;for(h=0;h<=v;h++){e.bl_count[h]=0}n[e.heap[e.heap_max]*2+1]=0;for(l=e.heap_max+1;l<J;l++){c=e.heap[l];h=n[n[c*2+1]*2+1]+1;if(h>u){h=u;p++}n[c*2+1]=h;if(c>r){continue}e.bl_count[h]++;d=0;if(c>=s){d=a[c-s]}g=n[c*2];e.opt_len+=g*(h+d);if(o){e.static_len+=g*(i[c*2+1]+d)}}if(p===0){return}do{h=u-1;while(e.bl_count[h]===0){h--}e.bl_count[h]--;e.bl_count[h+1]+=2;e.bl_count[u]--;p-=2}while(p>0);for(h=u;h!==0;h--){c=e.bl_count[h];while(c!==0){f=e.heap[--l];if(f>r){continue}if(n[f*2+1]!==h){e.opt_len+=(h-n[f*2+1])*n[f*2];n[f*2+1]=h}c--}}};const Ee=(t,e,n)=>{const r=new Array(v+1);let i=0;let o;let a;for(o=1;o<=v;o++){i=i+n[o-1]<<1;r[o]=i}for(a=0;a<=e;a++){let e=t[a*2+1];if(e===0){continue}t[a*2]=xe(r[e]++,e)}};const Ne=()=>{let e;let t;let n;let r;let i;const o=new Array(v+1);n=0;for(r=0;r<Z-1;r++){he[r]=n;for(e=0;e<1<<ie[r];e++){fe[n++]=r}}fe[n-1]=r;i=0;for(r=0;r<16;r++){de[r]=i;for(e=0;e<1<<oe[r];e++){ce[i++]=r}}i>>=7;for(;r<a;r++){de[r]=i<<7;for(e=0;e<1<<oe[r]-7;e++){ce[256+i++]=r}}for(t=0;t<=v;t++){o[t]=0}e=0;while(e<=143){s[e*2+1]=8;e++;o[8]++}while(e<=255){s[e*2+1]=9;e++;o[9]++}while(e<=279){s[e*2+1]=7;e++;o[7]++}while(e<=287){s[e*2+1]=8;e++;o[8]++}Ee(s,H+1,o);for(e=0;e<a;e++){le[e*2+1]=5;le[e*2]=xe(e,5)}pe=new ge(s,ie,X+1,H,v);ve=new ge(le,oe,0,a,v);ye=new ge(new Array(0),ae,0,$,Q)};const Se=e=>{let t;for(t=0;t<H;t++){e.dyn_ltree[t*2]=0}for(t=0;t<a;t++){e.dyn_dtree[t*2]=0}for(t=0;t<$;t++){e.bl_tree[t*2]=0}e.dyn_ltree[ee*2]=1;e.opt_len=e.static_len=0;e.sym_next=e.matches=0};const Me=e=>{if(e.bi_valid>8){be(e,e.bi_buf)}else if(e.bi_valid>0){e.pending_buf[e.pending++]=e.bi_buf}e.bi_buf=0;e.bi_valid=0};const Ie=(e,t,n,r)=>{const i=t*2;const o=n*2;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]};const Oe=(e,t,n)=>{const r=e.heap[n];let i=n<<1;while(i<=e.heap_len){if(i<e.heap_len&&Ie(t,e.heap[i+1],e.heap[i],e.depth)){i++}if(Ie(t,r,e.heap[i],e.depth)){break}e.heap[n]=e.heap[i];n=i;i<<=1}e.heap[n]=r};const Ce=(e,t,n)=>{let r;let i;let o=0;let a;let s;if(e.sym_next!==0){do{r=e.pending_buf[e.sym_buf+o++]&255;r+=(e.pending_buf[e.sym_buf+o++]&255)<<8;i=e.pending_buf[e.sym_buf+o++];if(r===0){f(e,i,t)}else{a=fe[i];f(e,a+X+1,t);s=ie[a];if(s!==0){i-=he[a];c(e,i,s)}r--;a=_e(r);f(e,a,n);s=oe[a];if(s!==0){r-=de[a];c(e,r,s)}}}while(o<e.sym_next)}f(e,ee,t)};const Pe=(e,t)=>{const n=t.dyn_tree;const r=t.stat_desc.static_tree;const i=t.stat_desc.has_stree;const o=t.stat_desc.elems;let a,s;let u=-1;let l;e.heap_len=0;e.heap_max=J;for(a=0;a<o;a++){if(n[a*2]!==0){e.heap[++e.heap_len]=u=a;e.depth[a]=0}else{n[a*2+1]=0}}while(e.heap_len<2){l=e.heap[++e.heap_len]=u<2?++u:0;n[l*2]=1;e.depth[l]=0;e.opt_len--;if(i){e.static_len-=r[l*2+1]}}t.max_code=u;for(a=e.heap_len>>1;a>=1;a--){Oe(e,n,a)}l=o;do{a=e.heap[1];e.heap[1]=e.heap[e.heap_len--];Oe(e,n,1);s=e.heap[1];e.heap[--e.heap_max]=a;e.heap[--e.heap_max]=s;n[l*2]=n[a*2]+n[s*2];e.depth[l]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1;n[a*2+1]=n[s*2+1]=l;e.heap[1]=l++;Oe(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1];ke(e,t);Ee(n,u,e.bl_count)};const Te=(e,t,n)=>{let r;let i=-1;let o;let a=t[0*2+1];let s=0;let u=7;let l=4;if(a===0){u=138;l=3}t[(n+1)*2+1]=65535;for(r=0;r<=n;r++){o=a;a=t[(r+1)*2+1];if(++s<u&&o===a){continue}else if(s<l){e.bl_tree[o*2]+=s}else if(o!==0){if(o!==i){e.bl_tree[o*2]++}e.bl_tree[te*2]++}else if(s<=10){e.bl_tree[ne*2]++}else{e.bl_tree[re*2]++}s=0;i=o;if(a===0){u=138;l=3}else if(o===a){u=6;l=3}else{u=7;l=4}}};const Le=(e,t,n)=>{let r;let i=-1;let o;let a=t[0*2+1];let s=0;let u=7;let l=4;if(a===0){u=138;l=3}for(r=0;r<=n;r++){o=a;a=t[(r+1)*2+1];if(++s<u&&o===a){continue}else if(s<l){do{f(e,o,e.bl_tree)}while(--s!==0)}else if(o!==0){if(o!==i){f(e,o,e.bl_tree);s--}f(e,te,e.bl_tree);c(e,s-3,2)}else if(s<=10){f(e,ne,e.bl_tree);c(e,s-3,3)}else{f(e,re,e.bl_tree);c(e,s-11,7)}s=0;i=o;if(a===0){u=138;l=3}else if(o===a){u=6;l=3}else{u=7;l=4}}};const Re=e=>{let t;Te(e,e.dyn_ltree,e.l_desc.max_code);Te(e,e.dyn_dtree,e.d_desc.max_code);Pe(e,e.bl_desc);for(t=$-1;t>=3;t--){if(e.bl_tree[se[t]*2+1]!==0){break}}e.opt_len+=3*(t+1)+5+5+4;return t};const Ae=(e,t,n,r)=>{let i;c(e,t-257,5);c(e,n-1,5);c(e,r-4,4);for(i=0;i<r;i++){c(e,e.bl_tree[se[i]*2+1],3)}Le(e,e.dyn_ltree,t-1);Le(e,e.dyn_dtree,n-1)};const je=e=>{let t=4093624447;let n;for(n=0;n<=31;n++,t>>>=1){if(t&1&&e.dyn_ltree[n*2]!==0){return z}}if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0){return V}for(n=32;n<X;n++){if(e.dyn_ltree[n*2]!==0){return V}}return z};let De=false;const Fe=e=>{if(!De){Ne();De=true}e.l_desc=new me(e.dyn_ltree,pe);e.d_desc=new me(e.dyn_dtree,ve);e.bl_desc=new me(e.bl_tree,ye);e.bi_buf=0;e.bi_valid=0;Se(e)};const ze=(e,t,n,r)=>{c(e,(B<<1)+(r?1:0),3);Me(e);be(e,n);be(e,~n);if(n){e.pending_buf.set(e.window.subarray(t,t+n),e.pending)}e.pending+=n};const Ve=e=>{c(e,G<<1,3);f(e,ee,s);we(e)};const qe=(e,t,n,r)=>{let i,o;let a=0;if(e.level>0){if(e.strm.data_type===q){e.strm.data_type=je(e)}Pe(e,e.l_desc);Pe(e,e.d_desc);a=Re(e);i=e.opt_len+3+7>>>3;o=e.static_len+3+7>>>3;if(o<=i){i=o}}else{i=o=n+5}if(n+4<=i&&t!==-1){ze(e,t,n,r)}else if(e.strategy===F||o===i){c(e,(G<<1)+(r?1:0),3);Ce(e,s,le)}else{c(e,(Y<<1)+(r?1:0),3);Ae(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1);Ce(e,e.dyn_ltree,e.dyn_dtree)}Se(e);if(r){Me(e)}};const Be=(e,t,n)=>{e.pending_buf[e.sym_buf+e.sym_next++]=t;e.pending_buf[e.sym_buf+e.sym_next++]=t>>8;e.pending_buf[e.sym_buf+e.sym_next++]=n;if(t===0){e.dyn_ltree[n*2]++}else{e.matches++;t--;e.dyn_ltree[(fe[n]+X+1)*2]++;e.dyn_dtree[_e(t)*2]++}return e.sym_next===e.sym_end};var Ge=Fe;var Ye=ze;var Ue=qe;var We=Be;var Ze=Ve;var Xe={_tr_init:Ge,_tr_stored_block:Ye,_tr_flush_block:Ue,_tr_tally:We,_tr_align:Ze};const He=(e,t,n,r)=>{let i=e&65535|0,o=e>>>16&65535|0,a=0;while(n!==0){a=n>2e3?2e3:n;n-=a;do{i=i+t[r++]|0;o=o+i|0}while(--a);i%=65521;o%=65521}return i|o<<16|0};var $e=He;const Je=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++){e=e&1?3988292384^e>>>1:e>>>1}t[n]=e}return t};const Ke=new Uint32Array(Je());const Qe=(t,n,e,r)=>{const i=Ke;const o=r+e;t^=-1;for(let e=r;e<o;e++){t=t>>>8^i[(t^n[e])&255]}return t^-1};var O=Qe;var r={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var n={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:et,_tr_stored_block:tt,_tr_flush_block:nt,_tr_tally:u,_tr_align:rt}=Xe;const{Z_NO_FLUSH:l,Z_PARTIAL_FLUSH:it,Z_FULL_FLUSH:ot,Z_FINISH:h,Z_BLOCK:at,Z_OK:d,Z_STREAM_END:st,Z_STREAM_ERROR:g,Z_DATA_ERROR:ut,Z_BUF_ERROR:lt,Z_DEFAULT_COMPRESSION:ct,Z_FILTERED:ft,Z_HUFFMAN_ONLY:ht,Z_RLE:dt,Z_FIXED:gt,Z_DEFAULT_STRATEGY:pt,Z_UNKNOWN:vt,Z_DEFLATED:yt}=n;const mt=9;const _t=15;const bt=8;const xt=29;const wt=256;const kt=wt+1+xt;const Et=30;const Nt=19;const St=2*kt+1;const Mt=15;const p=3;const y=258;const m=y+p+1;const It=32;const _=42;const Ot=57;const Ct=69;const Pt=73;const Tt=91;const Lt=103;const o=113;const Rt=666;const b=1;const x=2;const w=3;const At=4;const jt=3;const k=(e,t)=>{e.msg=r[t];return t};const Dt=e=>{return e*2-(e>4?9:0)};const E=e=>{let t=e.length;while(--t>=0){e[t]=0}};const Ft=e=>{let t,n;let r;let i=e.w_size;t=e.hash_size;r=t;do{n=e.head[--r];e.head[r]=n>=i?n-i:0}while(--t);t=i;r=t;do{n=e.prev[--r];e.prev[r]=n>=i?n-i:0}while(--t)};let zt=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;let N=zt;const S=e=>{const t=e.state;let n=t.pending;if(n>e.avail_out){n=e.avail_out}if(n===0){return}e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out);e.next_out+=n;t.pending_out+=n;e.total_out+=n;e.avail_out-=n;t.pending-=n;if(t.pending===0){t.pending_out=0}};const M=(e,t)=>{nt(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t);e.block_start=e.strstart;S(e.strm)};const I=(e,t)=>{e.pending_buf[e.pending++]=t};const Vt=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255;e.pending_buf[e.pending++]=t&255};const qt=(e,t,n,r)=>{let i=e.avail_in;if(i>r){i=r}if(i===0){return 0}e.avail_in-=i;t.set(e.input.subarray(e.next_in,e.next_in+i),n);if(e.state.wrap===1){e.adler=$e(e.adler,t,i,n)}else if(e.state.wrap===2){e.adler=O(e.adler,t,i,n)}e.next_in+=i;e.total_in+=i;return i};const Bt=(e,t)=>{let n=e.max_chain_length;let r=e.strstart;let i;let o;let a=e.prev_length;let s=e.nice_match;const u=e.strstart>e.w_size-m?e.strstart-(e.w_size-m):0;const l=e.window;const c=e.w_mask;const f=e.prev;const h=e.strstart+y;let d=l[r+a-1];let g=l[r+a];if(e.prev_length>=e.good_match){n>>=2}if(s>e.lookahead){s=e.lookahead}do{i=t;if(l[i+a]!==g||l[i+a-1]!==d||l[i]!==l[r]||l[++i]!==l[r+1]){continue}r+=2;i++;do{}while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<h);o=y-(h-r);r=h-y;if(o>a){e.match_start=t;a=o;if(o>=s){break}d=l[r+a-1];g=l[r+a]}}while((t=f[t&c])>u&&--n!==0);if(a<=e.lookahead){return a}return e.lookahead};const Gt=e=>{const t=e.w_size;let n,r,i;do{r=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-m)){e.window.set(e.window.subarray(t,t+t-r),0);e.match_start-=t;e.strstart-=t;e.block_start-=t;if(e.insert>e.strstart){e.insert=e.strstart}Ft(e);r+=t}if(e.strm.avail_in===0){break}n=qt(e.strm,e.window,e.strstart+e.lookahead,r);e.lookahead+=n;if(e.lookahead+e.insert>=p){i=e.strstart-e.insert;e.ins_h=e.window[i];e.ins_h=N(e,e.ins_h,e.window[i+1]);while(e.insert){e.ins_h=N(e,e.ins_h,e.window[i+p-1]);e.prev[i&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=i;i++;e.insert--;if(e.lookahead+e.insert<p){break}}}}while(e.lookahead<m&&e.strm.avail_in!==0)};const Yt=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5;let r,i,o,a=0;let s=e.strm.avail_in;do{r=65535;o=e.bi_valid+42>>3;if(e.strm.avail_out<o){break}o=e.strm.avail_out-o;i=e.strstart-e.block_start;if(r>i+e.strm.avail_in){r=i+e.strm.avail_in}if(r>o){r=o}if(r<n&&(r===0&&t!==h||t===l||r!==i+e.strm.avail_in)){break}a=t===h&&r===i+e.strm.avail_in?1:0;tt(e,0,0,a);e.pending_buf[e.pending-4]=r;e.pending_buf[e.pending-3]=r>>8;e.pending_buf[e.pending-2]=~r;e.pending_buf[e.pending-1]=~r>>8;S(e.strm);if(i){if(i>r){i=r}e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out);e.strm.next_out+=i;e.strm.avail_out-=i;e.strm.total_out+=i;e.block_start+=i;r-=i}if(r){qt(e.strm,e.strm.output,e.strm.next_out,r);e.strm.next_out+=r;e.strm.avail_out-=r;e.strm.total_out+=r}}while(a===0);s-=e.strm.avail_in;if(s){if(s>=e.w_size){e.matches=2;e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0);e.strstart=e.w_size;e.insert=e.strstart}else{if(e.window_size-e.strstart<=s){e.strstart-=e.w_size;e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0);if(e.matches<2){e.matches++}if(e.insert>e.strstart){e.insert=e.strstart}}e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart);e.strstart+=s;e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s}e.block_start=e.strstart}if(e.high_water<e.strstart){e.high_water=e.strstart}if(a){return At}if(t!==l&&t!==h&&e.strm.avail_in===0&&e.strstart===e.block_start){return x}o=e.window_size-e.strstart;if(e.strm.avail_in>o&&e.block_start>=e.w_size){e.block_start-=e.w_size;e.strstart-=e.w_size;e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0);if(e.matches<2){e.matches++}o+=e.w_size;if(e.insert>e.strstart){e.insert=e.strstart}}if(o>e.strm.avail_in){o=e.strm.avail_in}if(o){qt(e.strm,e.window,e.strstart,o);e.strstart+=o;e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o}if(e.high_water<e.strstart){e.high_water=e.strstart}o=e.bi_valid+42>>3;o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o;n=o>e.w_size?e.w_size:o;i=e.strstart-e.block_start;if(i>=n||(i||t===h)&&t!==l&&e.strm.avail_in===0&&i<=o){r=i>o?o:i;a=t===h&&e.strm.avail_in===0&&r===i?1:0;tt(e,e.block_start,r,a);e.block_start+=r;S(e.strm)}return a?w:b};const Ut=(e,t)=>{let n;let r;for(;;){if(e.lookahead<m){Gt(e);if(e.lookahead<m&&t===l){return b}if(e.lookahead===0){break}}n=0;if(e.lookahead>=p){e.ins_h=N(e,e.ins_h,e.window[e.strstart+p-1]);n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}if(n!==0&&e.strstart-n<=e.w_size-m){e.match_length=Bt(e,n)}if(e.match_length>=p){r=u(e,e.strstart-e.match_start,e.match_length-p);e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=p){e.match_length--;do{e.strstart++;e.ins_h=N(e,e.ins_h,e.window[e.strstart+p-1]);n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}while(--e.match_length!==0);e.strstart++}else{e.strstart+=e.match_length;e.match_length=0;e.ins_h=e.window[e.strstart];e.ins_h=N(e,e.ins_h,e.window[e.strstart+1])}}else{r=u(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(r){M(e,false);if(e.strm.avail_out===0){return b}}}e.insert=e.strstart<p-1?e.strstart:p-1;if(t===h){M(e,true);if(e.strm.avail_out===0){return w}return At}if(e.sym_next){M(e,false);if(e.strm.avail_out===0){return b}}return x};const Wt=(e,t)=>{let n;let r;let i;for(;;){if(e.lookahead<m){Gt(e);if(e.lookahead<m&&t===l){return b}if(e.lookahead===0){break}}n=0;if(e.lookahead>=p){e.ins_h=N(e,e.ins_h,e.window[e.strstart+p-1]);n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}e.prev_length=e.match_length;e.prev_match=e.match_start;e.match_length=p-1;if(n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-m){e.match_length=Bt(e,n);if(e.match_length<=5&&(e.strategy===ft||e.match_length===p&&e.strstart-e.match_start>4096)){e.match_length=p-1}}if(e.prev_length>=p&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-p;r=u(e,e.strstart-1-e.prev_match,e.prev_length-p);e.lookahead-=e.prev_length-1;e.prev_length-=2;do{if(++e.strstart<=i){e.ins_h=N(e,e.ins_h,e.window[e.strstart+p-1]);n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}}while(--e.prev_length!==0);e.match_available=0;e.match_length=p-1;e.strstart++;if(r){M(e,false);if(e.strm.avail_out===0){return b}}}else if(e.match_available){r=u(e,0,e.window[e.strstart-1]);if(r){M(e,false)}e.strstart++;e.lookahead--;if(e.strm.avail_out===0){return b}}else{e.match_available=1;e.strstart++;e.lookahead--}}if(e.match_available){r=u(e,0,e.window[e.strstart-1]);e.match_available=0}e.insert=e.strstart<p-1?e.strstart:p-1;if(t===h){M(e,true);if(e.strm.avail_out===0){return w}return At}if(e.sym_next){M(e,false);if(e.strm.avail_out===0){return b}}return x};const Zt=(e,t)=>{let n;let r;let i,o;const a=e.window;for(;;){if(e.lookahead<=y){Gt(e);if(e.lookahead<=y&&t===l){return b}if(e.lookahead===0){break}}e.match_length=0;if(e.lookahead>=p&&e.strstart>0){i=e.strstart-1;r=a[i];if(r===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+y;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=y-(o-i);if(e.match_length>e.lookahead){e.match_length=e.lookahead}}}if(e.match_length>=p){n=u(e,1,e.match_length-p);e.lookahead-=e.match_length;e.strstart+=e.match_length;e.match_length=0}else{n=u(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(n){M(e,false);if(e.strm.avail_out===0){return b}}}e.insert=0;if(t===h){M(e,true);if(e.strm.avail_out===0){return w}return At}if(e.sym_next){M(e,false);if(e.strm.avail_out===0){return b}}return x};const Xt=(e,t)=>{let n;for(;;){if(e.lookahead===0){Gt(e);if(e.lookahead===0){if(t===l){return b}break}}e.match_length=0;n=u(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++;if(n){M(e,false);if(e.strm.avail_out===0){return b}}}e.insert=0;if(t===h){M(e,true);if(e.strm.avail_out===0){return w}return At}if(e.sym_next){M(e,false);if(e.strm.avail_out===0){return b}}return x};function i(e,t,n,r,i){this.good_length=e;this.max_lazy=t;this.nice_length=n;this.max_chain=r;this.func=i}const Ht=[new i(0,0,0,0,Yt),new i(4,4,8,4,Ut),new i(4,5,16,8,Ut),new i(4,6,32,32,Ut),new i(4,4,16,16,Wt),new i(8,16,32,32,Wt),new i(8,16,128,128,Wt),new i(8,32,128,256,Wt),new i(32,128,258,1024,Wt),new i(32,258,258,4096,Wt)];const $t=e=>{e.window_size=2*e.w_size;E(e.head);e.max_lazy_match=Ht[e.level].max_lazy;e.good_match=Ht[e.level].good_length;e.nice_match=Ht[e.level].nice_length;e.max_chain_length=Ht[e.level].max_chain;e.strstart=0;e.block_start=0;e.lookahead=0;e.insert=0;e.match_length=e.prev_length=p-1;e.match_available=0;e.ins_h=0};function Jt(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=yt;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new Uint16Array(St*2);this.dyn_dtree=new Uint16Array((2*Et+1)*2);this.bl_tree=new Uint16Array((2*Nt+1)*2);E(this.dyn_ltree);E(this.dyn_dtree);E(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new Uint16Array(Mt+1);this.heap=new Uint16Array(2*kt+1);E(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new Uint16Array(2*kt+1);E(this.depth);this.sym_buf=0;this.lit_bufsize=0;this.sym_next=0;this.sym_end=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}const Kt=e=>{if(!e){return 1}const t=e.state;if(!t||t.strm!==e||t.status!==_&&t.status!==Ot&&t.status!==Ct&&t.status!==Pt&&t.status!==Tt&&t.status!==Lt&&t.status!==o&&t.status!==Rt){return 1}return 0};const Qt=e=>{if(Kt(e)){return k(e,g)}e.total_in=e.total_out=0;e.data_type=vt;const t=e.state;t.pending=0;t.pending_out=0;if(t.wrap<0){t.wrap=-t.wrap}t.status=t.wrap===2?Ot:t.wrap?_:o;e.adler=t.wrap===2?0:1;t.last_flush=-2;et(t);return d};const en=e=>{const t=Qt(e);if(t===d){$t(e.state)}return t};const tn=(e,t)=>{if(Kt(e)||e.state.wrap!==2){return g}e.state.gzhead=t;return d};const nn=(e,t,n,r,i,o)=>{if(!e){return g}let a=1;if(t===ct){t=6}if(r<0){a=0;r=-r}else if(r>15){a=2;r-=16}if(i<1||i>mt||n!==yt||r<8||r>15||t<0||t>9||o<0||o>gt||r===8&&a!==1){return k(e,g)}if(r===8){r=9}const s=new Jt;e.state=s;s.strm=e;s.status=_;s.wrap=a;s.gzhead=null;s.w_bits=r;s.w_size=1<<s.w_bits;s.w_mask=s.w_size-1;s.hash_bits=i+7;s.hash_size=1<<s.hash_bits;s.hash_mask=s.hash_size-1;s.hash_shift=~~((s.hash_bits+p-1)/p);s.window=new Uint8Array(s.w_size*2);s.head=new Uint16Array(s.hash_size);s.prev=new Uint16Array(s.w_size);s.lit_bufsize=1<<i+6;s.pending_buf_size=s.lit_bufsize*4;s.pending_buf=new Uint8Array(s.pending_buf_size);s.sym_buf=s.lit_bufsize;s.sym_end=(s.lit_bufsize-1)*3;s.level=t;s.strategy=o;s.method=n;return en(e)};const rn=(e,t)=>{return nn(e,t,yt,_t,bt,pt)};const on=(r,t)=>{if(Kt(r)||t>at||t<0){return r?k(r,g):g}const i=r.state;if(!r.output||r.avail_in!==0&&!r.input||i.status===Rt&&t!==h){return k(r,r.avail_out===0?lt:g)}const e=i.last_flush;i.last_flush=t;if(i.pending!==0){S(r);if(r.avail_out===0){i.last_flush=-1;return d}}else if(r.avail_in===0&&Dt(t)<=Dt(e)&&t!==h){return k(r,lt)}if(i.status===Rt&&r.avail_in!==0){return k(r,lt)}if(i.status===_&&i.wrap===0){i.status=o}if(i.status===_){let e=yt+(i.w_bits-8<<4)<<8;let t=-1;if(i.strategy>=ht||i.level<2){t=0}else if(i.level<6){t=1}else if(i.level===6){t=2}else{t=3}e|=t<<6;if(i.strstart!==0){e|=It}e+=31-e%31;Vt(i,e);if(i.strstart!==0){Vt(i,r.adler>>>16);Vt(i,r.adler&65535)}r.adler=1;i.status=o;S(r);if(i.pending!==0){i.last_flush=-1;return d}}if(i.status===Ot){r.adler=0;I(i,31);I(i,139);I(i,8);if(!i.gzhead){I(i,0);I(i,0);I(i,0);I(i,0);I(i,0);I(i,i.level===9?2:i.strategy>=ht||i.level<2?4:0);I(i,jt);i.status=o;S(r);if(i.pending!==0){i.last_flush=-1;return d}}else{I(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(!i.gzhead.extra?0:4)+(!i.gzhead.name?0:8)+(!i.gzhead.comment?0:16));I(i,i.gzhead.time&255);I(i,i.gzhead.time>>8&255);I(i,i.gzhead.time>>16&255);I(i,i.gzhead.time>>24&255);I(i,i.level===9?2:i.strategy>=ht||i.level<2?4:0);I(i,i.gzhead.os&255);if(i.gzhead.extra&&i.gzhead.extra.length){I(i,i.gzhead.extra.length&255);I(i,i.gzhead.extra.length>>8&255)}if(i.gzhead.hcrc){r.adler=O(r.adler,i.pending_buf,i.pending,0)}i.gzindex=0;i.status=Ct}}if(i.status===Ct){if(i.gzhead.extra){let t=i.pending;let n=(i.gzhead.extra.length&65535)-i.gzindex;while(i.pending+n>i.pending_buf_size){let e=i.pending_buf_size-i.pending;i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+e),i.pending);i.pending=i.pending_buf_size;if(i.gzhead.hcrc&&i.pending>t){r.adler=O(r.adler,i.pending_buf,i.pending-t,t)}i.gzindex+=e;S(r);if(i.pending!==0){i.last_flush=-1;return d}t=0;n-=e}let e=new Uint8Array(i.gzhead.extra);i.pending_buf.set(e.subarray(i.gzindex,i.gzindex+n),i.pending);i.pending+=n;if(i.gzhead.hcrc&&i.pending>t){r.adler=O(r.adler,i.pending_buf,i.pending-t,t)}i.gzindex=0}i.status=Pt}if(i.status===Pt){if(i.gzhead.name){let e=i.pending;let t;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>e){r.adler=O(r.adler,i.pending_buf,i.pending-e,e)}S(r);if(i.pending!==0){i.last_flush=-1;return d}e=0}if(i.gzindex<i.gzhead.name.length){t=i.gzhead.name.charCodeAt(i.gzindex++)&255}else{t=0}I(i,t)}while(t!==0);if(i.gzhead.hcrc&&i.pending>e){r.adler=O(r.adler,i.pending_buf,i.pending-e,e)}i.gzindex=0}i.status=Tt}if(i.status===Tt){if(i.gzhead.comment){let e=i.pending;let t;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>e){r.adler=O(r.adler,i.pending_buf,i.pending-e,e)}S(r);if(i.pending!==0){i.last_flush=-1;return d}e=0}if(i.gzindex<i.gzhead.comment.length){t=i.gzhead.comment.charCodeAt(i.gzindex++)&255}else{t=0}I(i,t)}while(t!==0);if(i.gzhead.hcrc&&i.pending>e){r.adler=O(r.adler,i.pending_buf,i.pending-e,e)}}i.status=Lt}if(i.status===Lt){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size){S(r);if(i.pending!==0){i.last_flush=-1;return d}}I(i,r.adler&255);I(i,r.adler>>8&255);r.adler=0}i.status=o;S(r);if(i.pending!==0){i.last_flush=-1;return d}}if(r.avail_in!==0||i.lookahead!==0||t!==l&&i.status!==Rt){let e=i.level===0?Yt(i,t):i.strategy===ht?Xt(i,t):i.strategy===dt?Zt(i,t):Ht[i.level].func(i,t);if(e===w||e===At){i.status=Rt}if(e===b||e===w){if(r.avail_out===0){i.last_flush=-1}return d}if(e===x){if(t===it){rt(i)}else if(t!==at){tt(i,0,0,false);if(t===ot){E(i.head);if(i.lookahead===0){i.strstart=0;i.block_start=0;i.insert=0}}}S(r);if(r.avail_out===0){i.last_flush=-1;return d}}}if(t!==h){return d}if(i.wrap<=0){return st}if(i.wrap===2){I(i,r.adler&255);I(i,r.adler>>8&255);I(i,r.adler>>16&255);I(i,r.adler>>24&255);I(i,r.total_in&255);I(i,r.total_in>>8&255);I(i,r.total_in>>16&255);I(i,r.total_in>>24&255)}else{Vt(i,r.adler>>>16);Vt(i,r.adler&65535)}S(r);if(i.wrap>0){i.wrap=-i.wrap}return i.pending!==0?d:st};const an=e=>{if(Kt(e)){return g}const t=e.state.status;e.state=null;return t===o?k(e,ut):d};const sn=(e,t)=>{let n=t.length;if(Kt(e)){return g}const r=e.state;const i=r.wrap;if(i===2||i===1&&r.status!==_||r.lookahead){return g}if(i===1){e.adler=$e(e.adler,t,n,0)}r.wrap=0;if(n>=r.w_size){if(i===0){E(r.head);r.strstart=0;r.block_start=0;r.insert=0}let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0);t=e;n=r.w_size}const o=e.avail_in;const a=e.next_in;const s=e.input;e.avail_in=n;e.next_in=0;e.input=t;Gt(r);while(r.lookahead>=p){let e=r.strstart;let t=r.lookahead-(p-1);do{r.ins_h=N(r,r.ins_h,r.window[e+p-1]);r.prev[e&r.w_mask]=r.head[r.ins_h];r.head[r.ins_h]=e;e++}while(--t);r.strstart=e;r.lookahead=p-1;Gt(r)}r.strstart+=r.lookahead;r.block_start=r.strstart;r.insert=r.lookahead;r.lookahead=0;r.match_length=r.prev_length=p-1;r.match_available=0;e.next_in=a;e.input=s;e.avail_in=o;r.wrap=i;return d};var un=rn;var ln=nn;var cn=en;var fn=Qt;var hn=tn;var dn=on;var gn=an;var pn=sn;var vn="pako deflate (from Nodeca project)";var yn={deflateInit:un,deflateInit2:ln,deflateReset:cn,deflateResetKeep:fn,deflateSetHeader:hn,deflate:dn,deflateEnd:gn,deflateSetDictionary:pn,deflateInfo:vn};const mn=(e,t)=>{return Object.prototype.hasOwnProperty.call(e,t)};var _n=function(e){const t=Array.prototype.slice.call(arguments,1);while(t.length){const n=t.shift();if(!n){continue}if(typeof n!=="object"){throw new TypeError(n+"must be non-object")}for(const r in n){if(mn(n,r)){e[r]=n[r]}}}return e};var bn=r=>{let n=0;for(let e=0,t=r.length;e<t;e++){n+=r[e].length}const i=new Uint8Array(n);for(let t=0,n=0,e=r.length;t<e;t++){let e=r[t];i.set(e,n);n+=e.length}return i};var xn={assign:_n,flattenChunks:bn};let wn=true;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){wn=false}const kn=new Uint8Array(256);for(let e=0;e<256;e++){kn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1}kn[254]=kn[254]=1;var En=e=>{if(typeof TextEncoder==="function"&&TextEncoder.prototype.encode){return(new TextEncoder).encode(e)}let t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++){n=e.charCodeAt(i);if((n&64512)===55296&&i+1<a){r=e.charCodeAt(i+1);if((r&64512)===56320){n=65536+(n-55296<<10)+(r-56320);i++}}s+=n<128?1:n<2048?2:n<65536?3:4}t=new Uint8Array(s);for(o=0,i=0;o<s;i++){n=e.charCodeAt(i);if((n&64512)===55296&&i+1<a){r=e.charCodeAt(i+1);if((r&64512)===56320){n=65536+(n-55296<<10)+(r-56320);i++}}if(n<128){t[o++]=n}else if(n<2048){t[o++]=192|n>>>6;t[o++]=128|n&63}else if(n<65536){t[o++]=224|n>>>12;t[o++]=128|n>>>6&63;t[o++]=128|n&63}else{t[o++]=240|n>>>18;t[o++]=128|n>>>12&63;t[o++]=128|n>>>6&63;t[o++]=128|n&63}}return t};const Nn=(t,n)=>{if(n<65534){if(t.subarray&&wn){return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n))}}let r="";for(let e=0;e<n;e++){r+=String.fromCharCode(t[e])}return r};var Sn=(n,e)=>{const r=e||n.length;if(typeof TextDecoder==="function"&&TextDecoder.prototype.decode){return(new TextDecoder).decode(n.subarray(0,e))}let i,o;const a=new Array(r*2);for(o=0,i=0;i<r;){let e=n[i++];if(e<128){a[o++]=e;continue}let t=kn[e];if(t>4){a[o++]=65533;i+=t-1;continue}e&=t===2?31:t===3?15:7;while(t>1&&i<r){e=e<<6|n[i++]&63;t--}if(t>1){a[o++]=65533;continue}if(e<65536){a[o++]=e}else{e-=65536;a[o++]=55296|e>>10&1023;a[o++]=56320|e&1023}}return Nn(a,o)};var Mn=(e,t)=>{t=t||e.length;if(t>e.length){t=e.length}let n=t-1;while(n>=0&&(e[n]&192)===128){n--}if(n<0){return t}if(n===0){return t}return n+kn[e[n]]>t?n:t};var In={string2buf:En,buf2string:Sn,utf8border:Mn};function On(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}var Cn=On;const Pn=Object.prototype.toString;const{Z_NO_FLUSH:Tn,Z_SYNC_FLUSH:Ln,Z_FULL_FLUSH:Rn,Z_FINISH:An,Z_OK:jn,Z_STREAM_END:Dn,Z_DEFAULT_COMPRESSION:Fn,Z_DEFAULT_STRATEGY:zn,Z_DEFLATED:Vn}=n;function qn(e){this.options=xn.assign({level:Fn,method:Vn,chunkSize:16384,windowBits:15,memLevel:8,strategy:zn},e||{});let t=this.options;if(t.raw&&t.windowBits>0){t.windowBits=-t.windowBits}else if(t.gzip&&t.windowBits>0&&t.windowBits<16){t.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new Cn;this.strm.avail_out=0;let n=yn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==jn){throw new Error(r[n])}if(t.header){yn.deflateSetHeader(this.strm,t.header)}if(t.dictionary){let e;if(typeof t.dictionary==="string"){e=In.string2buf(t.dictionary)}else if(Pn.call(t.dictionary)==="[object ArrayBuffer]"){e=new Uint8Array(t.dictionary)}else{e=t.dictionary}n=yn.deflateSetDictionary(this.strm,e);if(n!==jn){throw new Error(r[n])}this._dict_set=true}}qn.prototype.push=function(e,t){const n=this.strm;const r=this.options.chunkSize;let i,o;if(this.ended){return false}if(t===~~t)o=t;else o=t===true?An:Tn;if(typeof e==="string"){n.input=In.string2buf(e)}else if(Pn.call(e)==="[object ArrayBuffer]"){n.input=new Uint8Array(e)}else{n.input=e}n.next_in=0;n.avail_in=n.input.length;for(;;){if(n.avail_out===0){n.output=new Uint8Array(r);n.next_out=0;n.avail_out=r}if((o===Ln||o===Rn)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out));n.avail_out=0;continue}i=yn.deflate(n,o);if(i===Dn){if(n.next_out>0){this.onData(n.output.subarray(0,n.next_out))}i=yn.deflateEnd(this.strm);this.onEnd(i);this.ended=true;return i===jn}if(n.avail_out===0){this.onData(n.output);continue}if(o>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out));n.avail_out=0;continue}if(n.avail_in===0)break}return true};qn.prototype.onData=function(e){this.chunks.push(e)};qn.prototype.onEnd=function(e){if(e===jn){this.result=xn.flattenChunks(this.chunks)}this.chunks=[];this.err=e;this.msg=this.strm.msg};function Bn(e,t){const n=new qn(t);n.push(e,true);if(n.err){throw n.msg||r[n.err]}return n.result}function Gn(e,t){t=t||{};t.raw=true;return Bn(e,t)}function Yn(e,t){t=t||{};t.gzip=true;return Bn(e,t)}var Un=qn;var Wn=Bn;var Zn=Gn;var Xn=Yn;var Hn=n;var $n={Deflate:Un,deflate:Wn,deflateRaw:Zn,gzip:Xn,constants:Hn};const Jn=16209;const Kn=16191;var Qn=function e(t,n){let r;let i;let o;let a;let s;let u;let l;let c;let f;let h;let d;let g;let p;let v;let y;let m;let _;let b;let x;let w;let k;let E;let N,S;const M=t.state;r=t.next_in;N=t.input;i=r+(t.avail_in-5);o=t.next_out;S=t.output;a=o-(n-t.avail_out);s=o+(t.avail_out-257);u=M.dmax;l=M.wsize;c=M.whave;f=M.wnext;h=M.window;d=M.hold;g=M.bits;p=M.lencode;v=M.distcode;y=(1<<M.lenbits)-1;m=(1<<M.distbits)-1;e:do{if(g<15){d+=N[r++]<<g;g+=8;d+=N[r++]<<g;g+=8}_=p[d&y];t:for(;;){b=_>>>24;d>>>=b;g-=b;b=_>>>16&255;if(b===0){S[o++]=_&65535}else if(b&16){x=_&65535;b&=15;if(b){if(g<b){d+=N[r++]<<g;g+=8}x+=d&(1<<b)-1;d>>>=b;g-=b}if(g<15){d+=N[r++]<<g;g+=8;d+=N[r++]<<g;g+=8}_=v[d&m];n:for(;;){b=_>>>24;d>>>=b;g-=b;b=_>>>16&255;if(b&16){w=_&65535;b&=15;if(g<b){d+=N[r++]<<g;g+=8;if(g<b){d+=N[r++]<<g;g+=8}}w+=d&(1<<b)-1;if(w>u){t.msg="invalid distance too far back";M.mode=Jn;break e}d>>>=b;g-=b;b=o-a;if(w>b){b=w-b;if(b>c){if(M.sane){t.msg="invalid distance too far back";M.mode=Jn;break e}}k=0;E=h;if(f===0){k+=l-b;if(b<x){x-=b;do{S[o++]=h[k++]}while(--b);k=o-w;E=S}}else if(f<b){k+=l+f-b;b-=f;if(b<x){x-=b;do{S[o++]=h[k++]}while(--b);k=0;if(f<x){b=f;x-=b;do{S[o++]=h[k++]}while(--b);k=o-w;E=S}}}else{k+=f-b;if(b<x){x-=b;do{S[o++]=h[k++]}while(--b);k=o-w;E=S}}while(x>2){S[o++]=E[k++];S[o++]=E[k++];S[o++]=E[k++];x-=3}if(x){S[o++]=E[k++];if(x>1){S[o++]=E[k++]}}}else{k=o-w;do{S[o++]=S[k++];S[o++]=S[k++];S[o++]=S[k++];x-=3}while(x>2);if(x){S[o++]=S[k++];if(x>1){S[o++]=S[k++]}}}}else if((b&64)===0){_=v[(_&65535)+(d&(1<<b)-1)];continue n}else{t.msg="invalid distance code";M.mode=Jn;break e}break}}else if((b&64)===0){_=p[(_&65535)+(d&(1<<b)-1)];continue t}else if(b&32){M.mode=Kn;break e}else{t.msg="invalid literal/length code";M.mode=Jn;break e}break}}while(r<i&&o<s);x=g>>3;r-=x;g-=x<<3;d&=(1<<g)-1;t.next_in=r;t.next_out=o;t.avail_in=r<i?5+(i-r):5-(r-i);t.avail_out=o<s?257+(s-o):257-(o-s);M.hold=d;M.bits=g;return};const er=15;const tr=852;const nr=592;const rr=0;const ir=1;const or=2;const ar=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]);const sr=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]);const ur=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]);const lr=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const cr=(e,t,n,r,i,o,a,s)=>{const u=s.bits;let l=0;let c=0;let f=0,h=0;let d=0;let g=0;let p=0;let v=0;let y=0;let m=0;let _;let b;let x;let w;let k;let E=null;let N;const S=new Uint16Array(er+1);const M=new Uint16Array(er+1);let I=null;let O,C,P;for(l=0;l<=er;l++){S[l]=0}for(c=0;c<r;c++){S[t[n+c]]++}d=u;for(h=er;h>=1;h--){if(S[h]!==0){break}}if(d>h){d=h}if(h===0){i[o++]=1<<24|64<<16|0;i[o++]=1<<24|64<<16|0;s.bits=1;return 0}for(f=1;f<h;f++){if(S[f]!==0){break}}if(d<f){d=f}v=1;for(l=1;l<=er;l++){v<<=1;v-=S[l];if(v<0){return-1}}if(v>0&&(e===rr||h!==1)){return-1}M[1]=0;for(l=1;l<er;l++){M[l+1]=M[l]+S[l]}for(c=0;c<r;c++){if(t[n+c]!==0){a[M[t[n+c]]++]=c}}if(e===rr){E=I=a;N=20}else if(e===ir){E=ar;I=sr;N=257}else{E=ur;I=lr;N=0}m=0;c=0;l=f;k=o;g=d;p=0;x=-1;y=1<<d;w=y-1;if(e===ir&&y>tr||e===or&&y>nr){return 1}for(;;){O=l-p;if(a[c]+1<N){C=0;P=a[c]}else if(a[c]>=N){C=I[a[c]-N];P=E[a[c]-N]}else{C=32+64;P=0}_=1<<l-p;b=1<<g;f=b;do{b-=_;i[k+(m>>p)+b]=O<<24|C<<16|P|0}while(b!==0);_=1<<l-1;while(m&_){_>>=1}if(_!==0){m&=_-1;m+=_}else{m=0}c++;if(--S[l]===0){if(l===h){break}l=t[n+a[c]]}if(l>d&&(m&w)!==x){if(p===0){p=d}k+=f;g=l-p;v=1<<g;while(g+p<h){v-=S[g+p];if(v<=0){break}g++;v<<=1}y+=1<<g;if(e===ir&&y>tr||e===or&&y>nr){return 1}x=m&w;i[x]=d<<24|g<<16|k-o|0}}if(m!==0){i[k+m]=l-p<<24|64<<16|0}s.bits=d;return 0};var fr=cr;const hr=0;const dr=1;const gr=2;const{Z_FINISH:pr,Z_BLOCK:vr,Z_TREES:yr,Z_OK:C,Z_STREAM_END:mr,Z_NEED_DICT:_r,Z_STREAM_ERROR:P,Z_DATA_ERROR:br,Z_MEM_ERROR:xr,Z_BUF_ERROR:wr,Z_DEFLATED:kr}=n;const Er=16180;const Nr=16181;const Sr=16182;const Mr=16183;const Ir=16184;const Or=16185;const Cr=16186;const Pr=16187;const Tr=16188;const Lr=16189;const Rr=16190;const T=16191;const Ar=16192;const jr=16193;const Dr=16194;const Fr=16195;const zr=16196;const Vr=16197;const qr=16198;const Br=16199;const Gr=16200;const Yr=16201;const Ur=16202;const Wr=16203;const Zr=16204;const Xr=16205;const Hr=16206;const $r=16207;const Jr=16208;const L=16209;const Kr=16210;const Qr=16211;const ei=852;const ti=592;const ni=15;const ri=ni;const ii=e=>{return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)};function oi(){this.strm=null;this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}const R=e=>{if(!e){return 1}const t=e.state;if(!t||t.strm!==e||t.mode<Er||t.mode>Qr){return 1}return 0};const ai=e=>{if(R(e)){return P}const t=e.state;e.total_in=e.total_out=t.total=0;e.msg="";if(t.wrap){e.adler=t.wrap&1}t.mode=Er;t.last=0;t.havedict=0;t.flags=-1;t.dmax=32768;t.head=null;t.hold=0;t.bits=0;t.lencode=t.lendyn=new Int32Array(ei);t.distcode=t.distdyn=new Int32Array(ti);t.sane=1;t.back=-1;return C};const si=e=>{if(R(e)){return P}const t=e.state;t.wsize=0;t.whave=0;t.wnext=0;return ai(e)};const ui=(e,t)=>{let n;if(R(e)){return P}const r=e.state;if(t<0){n=0;t=-t}else{n=(t>>4)+5;if(t<48){t&=15}}if(t&&(t<8||t>15)){return P}if(r.window!==null&&r.wbits!==t){r.window=null}r.wrap=n;r.wbits=t;return si(e)};const li=(e,t)=>{if(!e){return P}const n=new oi;e.state=n;n.strm=e;n.window=null;n.mode=Er;const r=ui(e,t);if(r!==C){e.state=null}return r};const ci=e=>{return li(e,ri)};let fi=true;let hi,di;const gi=t=>{if(fi){hi=new Int32Array(512);di=new Int32Array(32);let e=0;while(e<144){t.lens[e++]=8}while(e<256){t.lens[e++]=9}while(e<280){t.lens[e++]=7}while(e<288){t.lens[e++]=8}fr(dr,t.lens,0,288,hi,0,t.work,{bits:9});e=0;while(e<32){t.lens[e++]=5}fr(gr,t.lens,0,32,di,0,t.work,{bits:5});fi=false}t.lencode=hi;t.lenbits=9;t.distcode=di;t.distbits=5};const pi=(e,t,n,r)=>{let i;const o=e.state;if(o.window===null){o.wsize=1<<o.wbits;o.wnext=0;o.whave=0;o.window=new Uint8Array(o.wsize)}if(r>=o.wsize){o.window.set(t.subarray(n-o.wsize,n),0);o.wnext=0;o.whave=o.wsize}else{i=o.wsize-o.wnext;if(i>r){i=r}o.window.set(t.subarray(n-r,n-r+i),o.wnext);r-=i;if(r){o.window.set(t.subarray(n-r,n),0);o.wnext=r;o.whave=o.wsize}else{o.wnext+=i;if(o.wnext===o.wsize){o.wnext=0}if(o.whave<o.wsize){o.whave+=i}}}return 0};const vi=(e,t)=>{let n;let r,i;let o;let a;let s,u;let l;let c;let f,h;let d;let g;let p;let v=0;let y,m,_;let b,x,w;let k;let E;const N=new Uint8Array(4);let S;let M;const I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(R(e)||!e.output||!e.input&&e.avail_in!==0){return P}n=e.state;if(n.mode===T){n.mode=Ar}a=e.next_out;i=e.output;u=e.avail_out;o=e.next_in;r=e.input;s=e.avail_in;l=n.hold;c=n.bits;f=s;h=u;E=C;e:for(;;){switch(n.mode){case Er:if(n.wrap===0){n.mode=Ar;break}while(c<16){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if(n.wrap&2&&l===35615){if(n.wbits===0){n.wbits=15}n.check=0;N[0]=l&255;N[1]=l>>>8&255;n.check=O(n.check,N,2,0);l=0;c=0;n.mode=Nr;break}if(n.head){n.head.done=false}if(!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check";n.mode=L;break}if((l&15)!==kr){e.msg="unknown compression method";n.mode=L;break}l>>>=4;c-=4;k=(l&15)+8;if(n.wbits===0){n.wbits=k}if(k>15||k>n.wbits){e.msg="invalid window size";n.mode=L;break}n.dmax=1<<n.wbits;n.flags=0;e.adler=n.check=1;n.mode=l&512?Lr:T;l=0;c=0;break;case Nr:while(c<16){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}n.flags=l;if((n.flags&255)!==kr){e.msg="unknown compression method";n.mode=L;break}if(n.flags&57344){e.msg="unknown header flags set";n.mode=L;break}if(n.head){n.head.text=l>>8&1}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;n.check=O(n.check,N,2,0)}l=0;c=0;n.mode=Sr;case Sr:while(c<32){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if(n.head){n.head.time=l}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;N[2]=l>>>16&255;N[3]=l>>>24&255;n.check=O(n.check,N,4,0)}l=0;c=0;n.mode=Mr;case Mr:while(c<16){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if(n.head){n.head.xflags=l&255;n.head.os=l>>8}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;n.check=O(n.check,N,2,0)}l=0;c=0;n.mode=Ir;case Ir:if(n.flags&1024){while(c<16){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}n.length=l;if(n.head){n.head.extra_len=l}if(n.flags&512&&n.wrap&4){N[0]=l&255;N[1]=l>>>8&255;n.check=O(n.check,N,2,0)}l=0;c=0}else if(n.head){n.head.extra=null}n.mode=Or;case Or:if(n.flags&1024){d=n.length;if(d>s){d=s}if(d){if(n.head){k=n.head.extra_len-n.length;if(!n.head.extra){n.head.extra=new Uint8Array(n.head.extra_len)}n.head.extra.set(r.subarray(o,o+d),k)}if(n.flags&512&&n.wrap&4){n.check=O(n.check,r,d,o)}s-=d;o+=d;n.length-=d}if(n.length){break e}}n.length=0;n.mode=Cr;case Cr:if(n.flags&2048){if(s===0){break e}d=0;do{k=r[o+d++];if(n.head&&k&&n.length<65536){n.head.name+=String.fromCharCode(k)}}while(k&&d<s);if(n.flags&512&&n.wrap&4){n.check=O(n.check,r,d,o)}s-=d;o+=d;if(k){break e}}else if(n.head){n.head.name=null}n.length=0;n.mode=Pr;case Pr:if(n.flags&4096){if(s===0){break e}d=0;do{k=r[o+d++];if(n.head&&k&&n.length<65536){n.head.comment+=String.fromCharCode(k)}}while(k&&d<s);if(n.flags&512&&n.wrap&4){n.check=O(n.check,r,d,o)}s-=d;o+=d;if(k){break e}}else if(n.head){n.head.comment=null}n.mode=Tr;case Tr:if(n.flags&512){while(c<16){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg="header crc mismatch";n.mode=L;break}l=0;c=0}if(n.head){n.head.hcrc=n.flags>>9&1;n.head.done=true}e.adler=n.check=0;n.mode=T;break;case Lr:while(c<32){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}e.adler=n.check=ii(l);l=0;c=0;n.mode=Rr;case Rr:if(n.havedict===0){e.next_out=a;e.avail_out=u;e.next_in=o;e.avail_in=s;n.hold=l;n.bits=c;return _r}e.adler=n.check=1;n.mode=T;case T:if(t===vr||t===yr){break e}case Ar:if(n.last){l>>>=c&7;c-=c&7;n.mode=Hr;break}while(c<3){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}n.last=l&1;l>>>=1;c-=1;switch(l&3){case 0:n.mode=jr;break;case 1:gi(n);n.mode=Br;if(t===yr){l>>>=2;c-=2;break e}break;case 2:n.mode=zr;break;case 3:e.msg="invalid block type";n.mode=L}l>>>=2;c-=2;break;case jr:l>>>=c&7;c-=c&7;while(c<32){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths";n.mode=L;break}n.length=l&65535;l=0;c=0;n.mode=Dr;if(t===yr){break e}case Dr:n.mode=Fr;case Fr:d=n.length;if(d){if(d>s){d=s}if(d>u){d=u}if(d===0){break e}i.set(r.subarray(o,o+d),a);s-=d;o+=d;u-=d;a+=d;n.length-=d;break}n.mode=T;break;case zr:while(c<14){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}n.nlen=(l&31)+257;l>>>=5;c-=5;n.ndist=(l&31)+1;l>>>=5;c-=5;n.ncode=(l&15)+4;l>>>=4;c-=4;if(n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols";n.mode=L;break}n.have=0;n.mode=Vr;case Vr:while(n.have<n.ncode){while(c<3){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}n.lens[I[n.have++]]=l&7;l>>>=3;c-=3}while(n.have<19){n.lens[I[n.have++]]=0}n.lencode=n.lendyn;n.lenbits=7;S={bits:n.lenbits};E=fr(hr,n.lens,0,19,n.lencode,0,n.work,S);n.lenbits=S.bits;if(E){e.msg="invalid code lengths set";n.mode=L;break}n.have=0;n.mode=qr;case qr:while(n.have<n.nlen+n.ndist){for(;;){v=n.lencode[l&(1<<n.lenbits)-1];y=v>>>24;m=v>>>16&255;_=v&65535;if(y<=c){break}if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if(_<16){l>>>=y;c-=y;n.lens[n.have++]=_}else{if(_===16){M=y+2;while(c<M){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}l>>>=y;c-=y;if(n.have===0){e.msg="invalid bit length repeat";n.mode=L;break}k=n.lens[n.have-1];d=3+(l&3);l>>>=2;c-=2}else if(_===17){M=y+3;while(c<M){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}l>>>=y;c-=y;k=0;d=3+(l&7);l>>>=3;c-=3}else{M=y+7;while(c<M){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}l>>>=y;c-=y;k=0;d=11+(l&127);l>>>=7;c-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat";n.mode=L;break}while(d--){n.lens[n.have++]=k}}}if(n.mode===L){break}if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block";n.mode=L;break}n.lenbits=9;S={bits:n.lenbits};E=fr(dr,n.lens,0,n.nlen,n.lencode,0,n.work,S);n.lenbits=S.bits;if(E){e.msg="invalid literal/lengths set";n.mode=L;break}n.distbits=6;n.distcode=n.distdyn;S={bits:n.distbits};E=fr(gr,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S);n.distbits=S.bits;if(E){e.msg="invalid distances set";n.mode=L;break}n.mode=Br;if(t===yr){break e}case Br:n.mode=Gr;case Gr:if(s>=6&&u>=258){e.next_out=a;e.avail_out=u;e.next_in=o;e.avail_in=s;n.hold=l;n.bits=c;Qn(e,h);a=e.next_out;i=e.output;u=e.avail_out;o=e.next_in;r=e.input;s=e.avail_in;l=n.hold;c=n.bits;if(n.mode===T){n.back=-1}break}n.back=0;for(;;){v=n.lencode[l&(1<<n.lenbits)-1];y=v>>>24;m=v>>>16&255;_=v&65535;if(y<=c){break}if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if(m&&(m&240)===0){b=y;x=m;w=_;for(;;){v=n.lencode[w+((l&(1<<b+x)-1)>>b)];y=v>>>24;m=v>>>16&255;_=v&65535;if(b+y<=c){break}if(s===0){break e}s--;l+=r[o++]<<c;c+=8}l>>>=b;c-=b;n.back+=b}l>>>=y;c-=y;n.back+=y;n.length=_;if(m===0){n.mode=Xr;break}if(m&32){n.back=-1;n.mode=T;break}if(m&64){e.msg="invalid literal/length code";n.mode=L;break}n.extra=m&15;n.mode=Yr;case Yr:if(n.extra){M=n.extra;while(c<M){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}n.length+=l&(1<<n.extra)-1;l>>>=n.extra;c-=n.extra;n.back+=n.extra}n.was=n.length;n.mode=Ur;case Ur:for(;;){v=n.distcode[l&(1<<n.distbits)-1];y=v>>>24;m=v>>>16&255;_=v&65535;if(y<=c){break}if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if((m&240)===0){b=y;x=m;w=_;for(;;){v=n.distcode[w+((l&(1<<b+x)-1)>>b)];y=v>>>24;m=v>>>16&255;_=v&65535;if(b+y<=c){break}if(s===0){break e}s--;l+=r[o++]<<c;c+=8}l>>>=b;c-=b;n.back+=b}l>>>=y;c-=y;n.back+=y;if(m&64){e.msg="invalid distance code";n.mode=L;break}n.offset=_;n.extra=m&15;n.mode=Wr;case Wr:if(n.extra){M=n.extra;while(c<M){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}n.offset+=l&(1<<n.extra)-1;l>>>=n.extra;c-=n.extra;n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back";n.mode=L;break}n.mode=Zr;case Zr:if(u===0){break e}d=h-u;if(n.offset>d){d=n.offset-d;if(d>n.whave){if(n.sane){e.msg="invalid distance too far back";n.mode=L;break}}if(d>n.wnext){d-=n.wnext;g=n.wsize-d}else{g=n.wnext-d}if(d>n.length){d=n.length}p=n.window}else{p=i;g=a-n.offset;d=n.length}if(d>u){d=u}u-=d;n.length-=d;do{i[a++]=p[g++]}while(--d);if(n.length===0){n.mode=Gr}break;case Xr:if(u===0){break e}i[a++]=n.length;u--;n.mode=Gr;break;case Hr:if(n.wrap){while(c<32){if(s===0){break e}s--;l|=r[o++]<<c;c+=8}h-=u;e.total_out+=h;n.total+=h;if(n.wrap&4&&h){e.adler=n.check=n.flags?O(n.check,i,h,a-h):$e(n.check,i,h,a-h)}h=u;if(n.wrap&4&&(n.flags?l:ii(l))!==n.check){e.msg="incorrect data check";n.mode=L;break}l=0;c=0}n.mode=$r;case $r:if(n.wrap&&n.flags){while(c<32){if(s===0){break e}s--;l+=r[o++]<<c;c+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg="incorrect length check";n.mode=L;break}l=0;c=0}n.mode=Jr;case Jr:E=mr;break e;case L:E=br;break e;case Kr:return xr;case Qr:default:return P}}e.next_out=a;e.avail_out=u;e.next_in=o;e.avail_in=s;n.hold=l;n.bits=c;if(n.wsize||h!==e.avail_out&&n.mode<L&&(n.mode<Hr||t!==pr)){if(pi(e,e.output,e.next_out,h-e.avail_out));}f-=e.avail_in;h-=e.avail_out;e.total_in+=f;e.total_out+=h;n.total+=h;if(n.wrap&4&&h){e.adler=n.check=n.flags?O(n.check,i,h,e.next_out-h):$e(n.check,i,h,e.next_out-h)}e.data_type=n.bits+(n.last?64:0)+(n.mode===T?128:0)+(n.mode===Br||n.mode===Dr?256:0);if((f===0&&h===0||t===pr)&&E===C){E=wr}return E};const yi=e=>{if(R(e)){return P}let t=e.state;if(t.window){t.window=null}e.state=null;return C};const mi=(e,t)=>{if(R(e)){return P}const n=e.state;if((n.wrap&2)===0){return P}n.head=t;t.done=false;return C};const _i=(e,t)=>{const n=t.length;let r;let i;let o;if(R(e)){return P}r=e.state;if(r.wrap!==0&&r.mode!==Rr){return P}if(r.mode===Rr){i=1;i=$e(i,t,n,0);if(i!==r.check){return br}}o=pi(e,t,n,n);if(o){r.mode=Kr;return xr}r.havedict=1;return C};var bi=si;var xi=ui;var wi=ai;var ki=ci;var Ei=li;var Ni=vi;var Si=yi;var Mi=mi;var Ii=_i;var Oi="pako inflate (from Nodeca project)";var A={inflateReset:bi,inflateReset2:xi,inflateResetKeep:wi,inflateInit:ki,inflateInit2:Ei,inflate:Ni,inflateEnd:Si,inflateGetHeader:Mi,inflateSetDictionary:Ii,inflateInfo:Oi};function Ci(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}var Pi=Ci;const Ti=Object.prototype.toString;const{Z_NO_FLUSH:Li,Z_FINISH:Ri,Z_OK:Ai,Z_STREAM_END:ji,Z_NEED_DICT:Di,Z_STREAM_ERROR:Fi,Z_DATA_ERROR:zi,Z_MEM_ERROR:Vi}=n;function qi(e){this.options=xn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;if(t.raw&&t.windowBits>=0&&t.windowBits<16){t.windowBits=-t.windowBits;if(t.windowBits===0){t.windowBits=-15}}if(t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)){t.windowBits+=32}if(t.windowBits>15&&t.windowBits<48){if((t.windowBits&15)===0){t.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new Cn;this.strm.avail_out=0;let n=A.inflateInit2(this.strm,t.windowBits);if(n!==Ai){throw new Error(r[n])}this.header=new Pi;A.inflateGetHeader(this.strm,this.header);if(t.dictionary){if(typeof t.dictionary==="string"){t.dictionary=In.string2buf(t.dictionary)}else if(Ti.call(t.dictionary)==="[object ArrayBuffer]"){t.dictionary=new Uint8Array(t.dictionary)}if(t.raw){n=A.inflateSetDictionary(this.strm,t.dictionary);if(n!==Ai){throw new Error(r[n])}}}}qi.prototype.push=function(e,t){const r=this.strm;const i=this.options.chunkSize;const n=this.options.dictionary;let o,a,s;if(this.ended)return false;if(t===~~t)a=t;else a=t===true?Ri:Li;if(Ti.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;for(;;){if(r.avail_out===0){r.output=new Uint8Array(i);r.next_out=0;r.avail_out=i}o=A.inflate(r,a);if(o===Di&&n){o=A.inflateSetDictionary(r,n);if(o===Ai){o=A.inflate(r,a)}else if(o===zi){o=Di}}while(r.avail_in>0&&o===ji&&r.state.wrap>0&&e[r.next_in]!==0){A.inflateReset(r);o=A.inflate(r,a)}switch(o){case Fi:case zi:case Di:case Vi:this.onEnd(o);this.ended=true;return false}s=r.avail_out;if(r.next_out){if(r.avail_out===0||o===ji){if(this.options.to==="string"){let e=In.utf8border(r.output,r.next_out);let t=r.next_out-e;let n=In.buf2string(r.output,e);r.next_out=t;r.avail_out=i-t;if(t)r.output.set(r.output.subarray(e,e+t),0);this.onData(n)}else{this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out))}}}if(o===Ai&&s===0)continue;if(o===ji){o=A.inflateEnd(this.strm);this.onEnd(o);this.ended=true;return true}if(r.avail_in===0)break}return true};qi.prototype.onData=function(e){this.chunks.push(e)};qi.prototype.onEnd=function(e){if(e===Ai){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=xn.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function Bi(e,t){const n=new qi(t);n.push(e);if(n.err)throw n.msg||r[n.err];return n.result}function Gi(e,t){t=t||{};t.raw=true;return Bi(e,t)}var Yi=qi;var Ui=Bi;var Wi=Gi;var Zi=Bi;var Xi=n;var Hi={Inflate:Yi,inflate:Ui,inflateRaw:Wi,ungzip:Zi,constants:Xi};const{Deflate:$i,deflate:Ji,deflateRaw:Ki,gzip:Qi}=$n;const{Inflate:eo,inflate:to,inflateRaw:no,ungzip:ro}=Hi;var io=e.Deflate=$i;var oo=e.deflate=Ji;var ao=e.deflateRaw=Ki;var so=e.gzip=Qi;var uo=e.Inflate=eo;var lo=e.inflate=to;var co=e.inflateRaw=no;var fo=e.ungzip=ro;var ho=e.constants=n;var go=e.default={Deflate:io,deflate:oo,deflateRaw:ao,gzip:so,Inflate:uo,inflate:lo,inflateRaw:co,ungzip:fo,constants:ho}},{}]},{},[8]);